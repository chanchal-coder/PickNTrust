import{r as g,j as r}from"./vendor-DNlhI76F.js";import{u as k}from"./query-D71mr71Q.js";import{U as D,W as v,A as F,P as C}from"./pages-main-DOjN59On.js";import"./icons-B2XESxUM.js";import"./utils-Bj7X0qp-.js";import"./radix-z-2eheXi.js";function A(){const j=t=>{if(!t)return"";try{return/^https?:\/\//i.test(t)?t:t.startsWith("/")?new URL(t,window.location.origin).href:t}catch{return t||""}},{data:f=[],isLoading:m,isError:p}=k({queryKey:["/api/advertisers/public/ads"],queryFn:async()=>{const t=await fetch("/api/advertisers/public/ads");if(!t.ok)throw new Error("Failed to fetch advertisements");return t.json()},refetchOnWindowFocus:!1,staleTime:3e5}),{data:h=[]}=k({queryKey:["/api/config/explore-ads"],queryFn:async()=>{const t=await fetch("/api/config/explore-ads");if(!t.ok)throw new Error("Failed to fetch explore config ads");return t.json()},refetchOnWindowFocus:!0,refetchOnMount:"always",staleTime:0,refetchInterval:15*1e3}),l=g.useMemo(()=>{const t=f||[],i=h||[],a=n=>`${(n.title||"").toLowerCase()}|${(n.clickUrl||"").toLowerCase()}`,s=new Map;for(const n of t)s.set(a(n),n);for(const n of i){const c=a(n);if(!s.has(c))s.set(c,n);else{const e={...s.get(c),...n};(n.imageUrl||"").trim()&&(e.imageUrl=n.imageUrl),s.set(c,e)}}return Array.from(s.values())},[f,h]),y=g.useMemo(()=>["All",...Array.from(new Set((l||[]).map(i=>(i.type||"").trim()).filter(Boolean)))],[l]),[d,w]=g.useState("All"),N=g.useMemo(()=>d==="All"?l:l.filter(t=>(t.type||"").trim()===d),[l,d]),u=["from-indigo-500 to-purple-600","from-blue-600 to-cyan-500","from-emerald-500 to-teal-600","from-rose-500 to-pink-600","from-orange-500 to-amber-500","from-violet-500 to-fuchsia-600"],T=(t,i="explore")=>{try{const a=new URL(t);return a.searchParams.set("utm_source",i),a.searchParams.set("utm_medium","sponsored-card"),a.toString()}catch{return t}},x=t=>{try{const i=JSON.stringify({id:t.id,title:t.title,type:t.type,page:"explore"});navigator.sendBeacon?navigator.sendBeacon("/api/advertisers/track-click",i):fetch("/api/advertisers/track-click",{method:"POST",headers:{"Content-Type":"application/json"},body:i})}catch{}};return r.jsx(r.Fragment,{children:r.jsxs(D,{pageId:"explore",className:"container mx-auto px-4 py-6",children:[r.jsx(v,{page:"explore",position:"header-top"}),r.jsx(F,{}),r.jsx(C,{page:"explore"}),r.jsx(v,{page:"explore",position:"header-bottom"}),r.jsx("div",{className:"header-spacing"}),r.jsxs("section",{className:"relative overflow-hidden rounded-2xl p-8 sm:p-10 mb-8 bg-gradient-to-b from-gray-900/30 to-gray-800/70 dark:from-black/40 dark:to-gray-900",children:[r.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[r.jsx("div",{className:"absolute -top-24 -left-24 h-64 w-64 rounded-full bg-gradient-to-tr from-blue-500/40 to-purple-500/40 blur-3xl"}),r.jsx("div",{className:"absolute -bottom-24 -right-24 h-64 w-64 rounded-full bg-gradient-to-tr from-pink-500/30 to-orange-500/30 blur-3xl"})]}),r.jsx("h1",{className:"relative z-10 text-3xl sm:text-4xl font-extrabold tracking-tight text-white",children:"Explore"}),r.jsx("p",{className:"relative z-10 mt-2 text-sm sm:text-base text-gray-200",children:"Discover trusted brands, exclusive offers & sponsored picks — all in one place."})]}),y.length>1&&r.jsx("div",{className:"mb-6 flex flex-wrap items-center gap-3 text-sm",children:y.map(t=>r.jsx("button",{onClick:()=>w(t),className:`px-3 py-1.5 rounded-full border transition-colors ${d===t?"bg-white text-gray-900 border-gray-300 dark:bg-gray-800 dark:text-white dark:border-gray-700":"bg-transparent text-gray-600 border-gray-300 hover:bg-gray-100 dark:text-gray-300 dark:border-gray-700 dark:hover:bg-gray-800"}`,"aria-pressed":d===t,children:t},t))}),m&&r.jsx("div",{className:"flex justify-center py-12",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}),p&&r.jsx("div",{className:"p-4 rounded bg-red-50 text-red-700 border border-red-200",children:"Failed to load advertisements. Please try again later."}),!m&&!p&&l.length===0&&r.jsx("div",{className:"p-4 rounded bg-yellow-50 text-yellow-800 border border-yellow-200",children:"No advertisements are currently active."}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:N.map((t,i)=>{const a=u[i%u.length],s=T(t.clickUrl),n=(t.viewMode||"").toLowerCase(),c=n==="banner",b=n==="list";return c?r.jsxs("article",{className:`col-span-full rounded-xl overflow-hidden shadow-sm hover:shadow-md transition-shadow bg-gradient-to-br ${a}`,"aria-label":`Sponsored (Banner): ${t.title}`,children:[r.jsx("div",{className:"relative",children:t.imageUrl?r.jsx("img",{src:j(t.imageUrl),alt:t.title,className:"w-full h-56 sm:h-64 object-cover",loading:"lazy"}):r.jsx("div",{className:"w-full h-56 sm:h-64 flex items-center justify-center bg-black/10 text-white/80",children:"No Image"})}),r.jsxs("div",{className:"p-6 bg-white/90 dark:bg-gray-900/80 backdrop-blur",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-gray-100 text-gray-800 border border-gray-300 dark:bg-gray-800 dark:text-gray-200 dark:border-gray-700",children:"Sponsored"}),t.type&&r.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-white text-gray-700 border border-gray-300 dark:bg-gray-800 dark:text-gray-200 dark:border-gray-700 whitespace-nowrap",children:t.type})]}),r.jsx("div",{className:"flex items-start justify-between gap-2",children:(()=>{const e=t.titleStyle||{},o={fontWeight:e.fontWeight??700,fontStyle:e.fontStyle??"normal",textDecoration:e.textDecoration??"none",fontSize:e.fontSize??void 0,fontFamily:e.fontFamily??void 0};return e.gradientEnabled&&e.gradientFrom&&e.gradientTo?(o.backgroundImage=`linear-gradient(135deg, ${e.gradientFrom}, ${e.gradientTo})`,o.WebkitBackgroundClip="text",o.backgroundClip="text",o.color="transparent",o.WebkitTextFillColor="transparent",(e.textDecoration||"none")!=="none"&&(o.textDecorationColor=e.textDecorationColor||e.color||e.gradientTo||e.gradientFrom||void 0,e.textDecorationThickness&&(o.textDecorationThickness=e.textDecorationThickness),e.textUnderlineOffset&&(o.textUnderlineOffset=e.textUnderlineOffset))):e.color&&(o.color=e.color),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",title:t.title,style:o,children:t.title})})()}),t.description&&(()=>{const e=t.descriptionStyle||{},o={fontWeight:e.fontWeight??400,fontStyle:e.fontStyle??"normal",textDecoration:e.textDecoration??"none",fontSize:e.fontSize??void 0,fontFamily:e.fontFamily??void 0};return e.gradientEnabled&&e.gradientFrom&&e.gradientTo?(o.backgroundImage=`linear-gradient(135deg, ${e.gradientFrom}, ${e.gradientTo})`,o.WebkitBackgroundClip="text",o.backgroundClip="text",o.color="transparent",o.WebkitTextFillColor="transparent",(e.textDecoration||"none")!=="none"&&(o.textDecorationColor=e.textDecorationColor||e.color||e.gradientTo||e.gradientFrom||void 0,e.textDecorationThickness&&(o.textDecorationThickness=e.textDecorationThickness),e.textUnderlineOffset&&(o.textUnderlineOffset=e.textUnderlineOffset))):e.color&&(o.color=e.color),r.jsx("p",{className:"mt-2 text-sm sm:text-base text-gray-700 dark:text-gray-300",style:o,children:t.description})})(),r.jsxs("div",{className:"mt-4 flex items-center gap-2 text-xs text-gray-600 dark:text-gray-400",children:[t.campaignName&&r.jsx("span",{title:"Campaign",children:t.campaignName}),t.size&&r.jsxs("span",{children:["• ",t.size]})]}),r.jsx("div",{className:"mt-5",children:r.jsxs("a",{href:s,onClick:()=>x(t),target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center px-4 py-2 rounded-full bg-indigo-600 hover:bg-indigo-700 text-white text-sm shadow focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:ring-offset-2 focus:ring-offset-white dark:focus:ring-offset-gray-900",children:[t.buttonText||"View Deal"," ",r.jsx("i",{className:"fas fa-external-link-alt ml-2"})]})})]})]},t.id):b?r.jsx("article",{className:"col-span-full rounded-xl overflow-hidden shadow-sm hover:shadow-md transition-shadow bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800","aria-label":`Sponsored (List): ${t.title}`,children:r.jsxs("div",{className:"flex items-stretch gap-0",children:[r.jsx("div",{className:`w-40 sm:w-56 bg-gradient-to-br ${a}`,children:r.jsx("div",{className:"relative",children:t.imageUrl?r.jsx("img",{src:t.imageUrl,alt:t.title,className:"w-full h-full object-cover",loading:"lazy"}):r.jsx("div",{className:"w-full h-full min-h-[140px] flex items-center justify-center bg-black/10 text-gray-600",children:"No Image"})})}),r.jsxs("div",{className:"flex-1 p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-gray-100 text-gray-800 border border-gray-300 dark:bg-gray-800 dark:text-gray-200 dark:border-gray-700",children:"Sponsored"}),t.type&&r.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-white text-gray-700 border border-gray-300 dark:bg-gray-800 dark:text-gray-200 dark:border-gray-700 whitespace-nowrap",children:t.type})]}),r.jsxs("div",{className:"flex items-start justify-between gap-2",children:[(()=>{const e=t.titleStyle||{},o={fontWeight:e.fontWeight??600,fontStyle:e.fontStyle??"normal",textDecoration:e.textDecoration??"none",fontSize:e.fontSize??void 0,fontFamily:e.fontFamily??void 0};return e.gradientEnabled&&e.gradientFrom&&e.gradientTo?(o.backgroundImage=`linear-gradient(135deg, ${e.gradientFrom}, ${e.gradientTo})`,o.WebkitBackgroundClip="text",o.backgroundClip="text",o.color="transparent",o.WebkitTextFillColor="transparent",(e.textDecoration||"none")!=="none"&&(o.textDecorationColor=e.textDecorationColor||e.color||e.gradientTo||e.gradientFrom||void 0,e.textDecorationThickness&&(o.textDecorationThickness=e.textDecorationThickness),e.textUnderlineOffset&&(o.textUnderlineOffset=e.textUnderlineOffset))):e.color&&(o.color=e.color),r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",title:t.title,style:o,children:t.title})})(),t.type&&r.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-white text-gray-700 border border-gray-300 dark:bg-gray-800 dark:text-gray-200 dark:border-gray-700 whitespace-nowrap",children:t.type})]}),t.description&&(()=>{const e=t.descriptionStyle||{},o={fontWeight:e.fontWeight??400,fontStyle:e.fontStyle??"normal",textDecoration:e.textDecoration??"none",fontSize:e.fontSize??void 0,fontFamily:e.fontFamily??void 0};return e.gradientEnabled&&e.gradientFrom&&e.gradientTo?(o.backgroundImage=`linear-gradient(135deg, ${e.gradientFrom}, ${e.gradientTo})`,o.WebkitBackgroundClip="text",o.backgroundClip="text",o.color="transparent",o.WebkitTextFillColor="transparent",(e.textDecoration||"none")!=="none"&&(o.textDecorationColor=e.textDecorationColor||e.color||e.gradientTo||e.gradientFrom||void 0,e.textDecorationThickness&&(o.textDecorationThickness=e.textDecorationThickness),e.textUnderlineOffset&&(o.textUnderlineOffset=e.textUnderlineOffset))):e.color&&(o.color=e.color),r.jsx("p",{className:"mt-1 text-sm text-gray-700 dark:text-gray-300 line-clamp-2",style:o,children:t.description})})(),r.jsxs("div",{className:"mt-2 flex items-center gap-2 text-xs text-gray-600 dark:text-gray-400",children:[t.campaignName&&r.jsx("span",{title:"Campaign",children:t.campaignName}),t.size&&r.jsxs("span",{children:["• ",t.size]})]}),r.jsx("div",{className:"mt-3",children:r.jsxs("a",{href:s,onClick:()=>x(t),target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center px-3 py-1.5 rounded-full bg-indigo-600 hover:bg-indigo-700 text-white text-sm shadow focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:ring-offset-2 focus:ring-offset-white dark:focus:ring-offset-gray-900",children:[t.buttonText||"View Deal"," ",r.jsx("i",{className:"fas fa-external-link-alt ml-2"})]})})]})]})},t.id):r.jsxs("article",{className:`rounded-xl overflow-hidden shadow-sm hover:shadow-md transition-shadow bg-gradient-to-br ${a}`,"aria-label":`Sponsored: ${t.title}`,children:[r.jsx("div",{className:"relative",children:t.imageUrl?r.jsx("img",{src:t.imageUrl,alt:t.title,className:"w-full h-40 object-cover",loading:"lazy"}):r.jsx("div",{className:"w-full h-40 flex items-center justify-center bg-black/10 text-white/80",children:"No Image"})}),r.jsxs("div",{className:"p-4 bg-white/90 dark:bg-gray-900/80 backdrop-blur",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-gray-100 text-gray-800 border border-gray-300 dark:bg-gray-800 dark:text-gray-200 dark:border-gray-700",children:"Sponsored"}),t.type&&r.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-white text-gray-700 border border-gray-300 dark:bg-gray-800 dark:text-gray-200 dark:border-gray-700 whitespace-nowrap",children:t.type})]}),r.jsx("div",{className:"flex items-start justify-between gap-2",children:(()=>{const e=t.titleStyle||{},o={fontWeight:e.fontWeight??600,fontStyle:e.fontStyle??"normal",textDecoration:e.textDecoration??"none",fontSize:e.fontSize??void 0,fontFamily:e.fontFamily??void 0};return e.gradientEnabled&&e.gradientFrom&&e.gradientTo?(o.backgroundImage=`linear-gradient(135deg, ${e.gradientFrom}, ${e.gradientTo})`,o.WebkitBackgroundClip="text",o.backgroundClip="text",o.color="transparent",o.WebkitTextFillColor="transparent",(e.textDecoration||"none")!=="none"&&(o.textDecorationColor=e.textDecorationColor||e.color||e.gradientTo||e.gradientFrom||void 0,e.textDecorationThickness&&(o.textDecorationThickness=e.textDecorationThickness),e.textUnderlineOffset&&(o.textUnderlineOffset=e.textUnderlineOffset))):e.color&&(o.color=e.color),r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white truncate",title:t.title,style:o,children:t.title})})()}),t.description&&(()=>{const e=t.descriptionStyle||{},o={fontWeight:e.fontWeight??400,fontStyle:e.fontStyle??"normal",textDecoration:e.textDecoration??"none",fontSize:e.fontSize??void 0,fontFamily:e.fontFamily??void 0};return e.gradientEnabled&&e.gradientFrom&&e.gradientTo?(o.backgroundImage=`linear-gradient(135deg, ${e.gradientFrom}, ${e.gradientTo})`,o.WebkitBackgroundClip="text",o.backgroundClip="text",o.color="transparent",o.WebkitTextFillColor="transparent",(e.textDecoration||"none")!=="none"&&(o.textDecorationColor=e.textDecorationColor||e.color||e.gradientTo||e.gradientFrom||void 0,e.textDecorationThickness&&(o.textDecorationThickness=e.textDecorationThickness),e.textUnderlineOffset&&(o.textUnderlineOffset=e.textUnderlineOffset))):e.color&&(o.color=e.color),r.jsx("p",{className:"mt-1 text-sm text-gray-700 dark:text-gray-300 line-clamp-3",style:o,children:t.description})})(),r.jsxs("div",{className:"mt-3 flex items-center gap-2 text-xs text-gray-600 dark:text-gray-400",children:[t.campaignName&&r.jsx("span",{title:"Campaign",children:t.campaignName}),t.size&&r.jsxs("span",{children:["• ",t.size]})]}),r.jsx("div",{className:"mt-4",children:r.jsxs("a",{href:s,onClick:()=>x(t),target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center px-3 py-1.5 rounded-full bg-indigo-600 hover:bg-indigo-700 text-white text-sm shadow focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:ring-offset-2 focus:ring-offset-white dark:focus:ring-offset-gray-900",children:[t.buttonText||"View Deal"," ",r.jsx("i",{className:"fas fa-external-link-alt ml-2"})]})})]})]},t.id)})}),r.jsx("div",{className:"mt-10 rounded-xl p-6 sm:p-8 bg-gradient-to-r from-gray-800 to-gray-900 text-white",children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg sm:text-xl font-semibold",children:"Want to see your brand here?"}),r.jsx("p",{className:"mt-1 text-sm text-gray-300",children:"Get featured on PickNTrust Explore — website + Telegram + community reach"})]}),r.jsx("a",{href:"/advertise",className:"inline-flex items-center justify-center px-4 py-2 rounded-full bg-pink-500 hover:bg-pink-600 text-white text-sm shadow focus:outline-none focus:ring-2 focus:ring-pink-300",children:"Advertise With Us"})]})})]})})}export{A as default};
