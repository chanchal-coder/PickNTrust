import{R as Oe,r as E,j as e,b as Ro,a as Yn}from"./vendor-DNlhI76F.js";import{a as bt,u as Re,b as be}from"./query-D71mr71Q.js";import{u as ht,C as re,y as we,z as Ne,G as Ae,B as D,q as ne,r as Ce,I as Wt,f as Ua,b as Uo,U as di,j as Mo}from"./pages-main-DOjN59On.js";import{I as W,L as T,T as vt,S as Ge,a as We,b as ze,c as He,e as el,d as ce,f as tl}from"./pages-travel-BKbkABH7.js";import{T as Fr,a as Bs,b as Ye,c as Ze}from"./tabs-CpED_7xl.js";import{e as lr,o as xt,P as tt,U as Os,n as kt,I as Zt,i as pa,V as Dt,R as Ut,T as Yt,m as Lt,u as $s,Y as ui,v as or,w as Lo,h as $o,x as cr,A as Vo,y as sl,z as Ot,k as mi,B as ra,D as Vs,F as qo,J as pi,K as Ma,N as gi,O as hi,Q as fi,Z as xi,_ as La,$ as da,a0 as $a,a1 as bi,a2 as Go,p as Wo,a3 as yi,d as xs,a4 as al,l as Ys,X as ds,a5 as zo,a6 as ua,L as vi,a7 as $t,a8 as Ho,a9 as Ko,aa as rl,ab as ji,ac as qs,ad as Va,ae as wi,af as Ni,ag as ki,E as il,ah as dr,ai as Si,aj as qa,ak as Ci,al as Ga,am as Qo,an as Wa,ao as Xo,ap as Ai,f as Jo}from"./icons-B2XESxUM.js";import{S as et}from"./switch-BmmnwWgV.js";import{C as Zo}from"./checkbox-DoGofypV.js";import"./utils-Bj7X0qp-.js";import"./radix-z-2eheXi.js";import"./pages-picks-B8mK09nr.js";var ea=t=>t.type==="checkbox",cs=t=>t instanceof Date,gt=t=>t==null;const nl=t=>typeof t=="object";var nt=t=>!gt(t)&&!Array.isArray(t)&&nl(t)&&!cs(t),Yo=t=>nt(t)&&t.target?ea(t.target)?t.target.checked:t.target.value:t,ec=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,tc=(t,s)=>t.has(ec(s)),sc=t=>{const s=t.constructor&&t.constructor.prototype;return nt(s)&&s.hasOwnProperty("isPrototypeOf")},Er=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function ot(t){let s;const a=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)s=new Date(t);else if(!(Er&&(t instanceof Blob||r))&&(a||nt(t)))if(s=a?[]:Object.create(Object.getPrototypeOf(t)),!a&&!sc(t))s=t;else for(const i in t)t.hasOwnProperty(i)&&(s[i]=ot(t[i]));else return t;return s}var Fa=t=>/^\w*$/.test(t),it=t=>t===void 0,Dr=t=>Array.isArray(t)?t.filter(Boolean):[],Ir=t=>Dr(t.replace(/["|']|\]/g,"").split(/\.|\[/)),he=(t,s,a)=>{if(!s||!nt(t))return a;const r=(Fa(s)?[s]:Ir(s)).reduce((i,n)=>gt(i)?i:i[n],t);return it(r)||r===t?it(t[s])?a:t[s]:r},Rt=t=>typeof t=="boolean",Xe=(t,s,a)=>{let r=-1;const i=Fa(s)?[s]:Ir(s),n=i.length,l=n-1;for(;++r<n;){const o=i[r];let d=a;if(r!==l){const g=t[o];d=nt(g)||Array.isArray(g)?g:isNaN(+i[r+1])?{}:[]}if(o==="__proto__"||o==="constructor"||o==="prototype")return;t[o]=d,t=t[o]}};const Pi={BLUR:"blur",FOCUS_OUT:"focusout"},It={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},qt={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},ac=Oe.createContext(null);ac.displayName="HookFormContext";var rc=(t,s,a,r=!0)=>{const i={defaultValues:s._defaultValues};for(const n in t)Object.defineProperty(i,n,{get:()=>{const l=n;return s._proxyFormState[l]!==It.all&&(s._proxyFormState[l]=!r||It.all),t[l]}});return i};const ic=typeof window<"u"?Oe.useLayoutEffect:Oe.useEffect;var yt=t=>typeof t=="string",nc=(t,s,a,r,i)=>yt(t)?(r&&s.watch.add(t),he(a,t,i)):Array.isArray(t)?t.map(n=>(r&&s.watch.add(n),he(a,n))):(r&&(s.watchAll=!0),a),ur=t=>gt(t)||!nl(t);function Ht(t,s,a=new WeakSet){if(ur(t)||ur(s))return t===s;if(cs(t)&&cs(s))return t.getTime()===s.getTime();const r=Object.keys(t),i=Object.keys(s);if(r.length!==i.length)return!1;if(a.has(t)||a.has(s))return!0;a.add(t),a.add(s);for(const n of r){const l=t[n];if(!i.includes(n))return!1;if(n!=="ref"){const o=s[n];if(cs(l)&&cs(o)||nt(l)&&nt(o)||Array.isArray(l)&&Array.isArray(o)?!Ht(l,o,a):l!==o)return!1}}return!0}var _r=(t,s,a,r,i)=>s?{...a[t],types:{...a[t]&&a[t].types?a[t].types:{},[r]:i||!0}}:{},Rs=t=>Array.isArray(t)?t:[t],Ti=()=>{let t=[];return{get observers(){return t},next:i=>{for(const n of t)n.next&&n.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(n=>n!==i)}}),unsubscribe:()=>{t=[]}}};function ll(t,s){const a={};for(const r in t)if(t.hasOwnProperty(r)){const i=t[r],n=s[r];if(i&&nt(i)&&n){const l=ll(i,n);nt(l)&&(a[r]=l)}else t[r]&&(a[r]=n)}return a}var ft=t=>nt(t)&&!Object.keys(t).length,Br=t=>t.type==="file",_t=t=>typeof t=="function",ga=t=>{if(!Er)return!1;const s=t?t.ownerDocument:0;return t instanceof(s&&s.defaultView?s.defaultView.HTMLElement:HTMLElement)},ol=t=>t.type==="select-multiple",Or=t=>t.type==="radio",lc=t=>Or(t)||ea(t),za=t=>ga(t)&&t.isConnected;function oc(t,s){const a=s.slice(0,-1).length;let r=0;for(;r<a;)t=it(t)?r++:t[s[r++]];return t}function cc(t){for(const s in t)if(t.hasOwnProperty(s)&&!it(t[s]))return!1;return!0}function st(t,s){const a=Array.isArray(s)?s:Fa(s)?[s]:Ir(s),r=a.length===1?t:oc(t,a),i=a.length-1,n=a[i];return r&&delete r[n],i!==0&&(nt(r)&&ft(r)||Array.isArray(r)&&cc(r))&&st(t,a.slice(0,-1)),t}var dc=t=>{for(const s in t)if(_t(t[s]))return!0;return!1};function cl(t){return Array.isArray(t)||nt(t)&&!dc(t)}function mr(t,s={}){for(const a in t)cl(t[a])?(s[a]=Array.isArray(t[a])?[]:{},mr(t[a],s[a])):gt(t[a])||(s[a]=!0);return s}function hs(t,s,a){a||(a=mr(s));for(const r in t)cl(t[r])?it(s)||ur(a[r])?a[r]=mr(t[r],Array.isArray(t[r])?[]:{}):hs(t[r],gt(s)?{}:s[r],a[r]):a[r]=!Ht(t[r],s[r]);return a}const Fi={value:!1,isValid:!1},Ei={value:!0,isValid:!0};var dl=t=>{if(Array.isArray(t)){if(t.length>1){const s=t.filter(a=>a&&a.checked&&!a.disabled).map(a=>a.value);return{value:s,isValid:!!s.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!it(t[0].attributes.value)?it(t[0].value)||t[0].value===""?Ei:{value:t[0].value,isValid:!0}:Ei:Fi}return Fi},ul=(t,{valueAsNumber:s,valueAsDate:a,setValueAs:r})=>it(t)?t:s?t===""?NaN:t&&+t:a&&yt(t)?new Date(t):r?r(t):t;const Di={isValid:!1,value:null};var ml=t=>Array.isArray(t)?t.reduce((s,a)=>a&&a.checked&&!a.disabled?{isValid:!0,value:a.value}:s,Di):Di;function Ii(t){const s=t.ref;return Br(s)?s.files:Or(s)?ml(t.refs).value:ol(s)?[...s.selectedOptions].map(({value:a})=>a):ea(s)?dl(t.refs).value:ul(it(s.value)?t.ref.value:s.value,t)}var uc=(t,s,a,r)=>{const i={};for(const n of t){const l=he(s,n);l&&Xe(i,n,l._f)}return{criteriaMode:a,names:[...t],fields:i,shouldUseNativeValidation:r}},ha=t=>t instanceof RegExp,Fs=t=>it(t)?t:ha(t)?t.source:nt(t)?ha(t.value)?t.value.source:t.value:t,_i=t=>({isOnSubmit:!t||t===It.onSubmit,isOnBlur:t===It.onBlur,isOnChange:t===It.onChange,isOnAll:t===It.all,isOnTouch:t===It.onTouched});const Bi="AsyncFunction";var mc=t=>!!t&&!!t.validate&&!!(_t(t.validate)&&t.validate.constructor.name===Bi||nt(t.validate)&&Object.values(t.validate).find(s=>s.constructor.name===Bi)),pc=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),Oi=(t,s,a)=>!a&&(s.watchAll||s.watch.has(t)||[...s.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const Us=(t,s,a,r)=>{for(const i of a||Object.keys(t)){const n=he(t,i);if(n){const{_f:l,...o}=n;if(l){if(l.refs&&l.refs[0]&&s(l.refs[0],i)&&!r)return!0;if(l.ref&&s(l.ref,l.name)&&!r)return!0;if(Us(o,s))break}else if(nt(o)&&Us(o,s))break}}};function Ri(t,s,a){const r=he(t,a);if(r||Fa(a))return{error:r,name:a};const i=a.split(".");for(;i.length;){const n=i.join("."),l=he(s,n),o=he(t,n);if(l&&!Array.isArray(l)&&a!==n)return{name:a};if(o&&o.type)return{name:n,error:o};if(o&&o.root&&o.root.type)return{name:`${n}.root`,error:o.root};i.pop()}return{name:a}}var gc=(t,s,a,r)=>{a(t);const{name:i,...n}=t;return ft(n)||Object.keys(n).length>=Object.keys(s).length||Object.keys(n).find(l=>s[l]===(!r||It.all))},hc=(t,s,a)=>!t||!s||t===s||Rs(t).some(r=>r&&(a?r===s:r.startsWith(s)||s.startsWith(r))),fc=(t,s,a,r,i)=>i.isOnAll?!1:!a&&i.isOnTouch?!(s||t):(a?r.isOnBlur:i.isOnBlur)?!t:(a?r.isOnChange:i.isOnChange)?t:!0,xc=(t,s)=>!Dr(he(t,s)).length&&st(t,s),bc=(t,s,a)=>{const r=Rs(he(t,a));return Xe(r,"root",s[a]),Xe(t,a,r),t};function Ui(t,s,a="validate"){if(yt(t)||Array.isArray(t)&&t.every(yt)||Rt(t)&&!t)return{type:a,message:yt(t)?t:"",ref:s}}var ps=t=>nt(t)&&!ha(t)?t:{value:t,message:""},Mi=async(t,s,a,r,i,n)=>{const{ref:l,refs:o,required:d,maxLength:g,minLength:x,min:b,max:u,pattern:f,validate:w,name:B,valueAsNumber:C,mount:q}=t._f,R=he(a,B);if(!q||s.has(B))return{};const Z=o?o[0]:l,p=K=>{i&&Z.reportValidity&&(Z.setCustomValidity(Rt(K)?"":K||""),Z.reportValidity())},I={},F=Or(l),_=ea(l),j=F||_,A=(C||Br(l))&&it(l.value)&&it(R)||ga(l)&&l.value===""||R===""||Array.isArray(R)&&!R.length,G=_r.bind(null,B,r,I),J=(K,ee,ue,N=qt.maxLength,$=qt.minLength)=>{const ge=K?ee:ue;I[B]={type:K?N:$,message:ge,ref:l,...G(K?N:$,ge)}};if(n?!Array.isArray(R)||!R.length:d&&(!j&&(A||gt(R))||Rt(R)&&!R||_&&!dl(o).isValid||F&&!ml(o).isValid)){const{value:K,message:ee}=yt(d)?{value:!!d,message:d}:ps(d);if(K&&(I[B]={type:qt.required,message:ee,ref:Z,...G(qt.required,ee)},!r))return p(ee),I}if(!A&&(!gt(b)||!gt(u))){let K,ee;const ue=ps(u),N=ps(b);if(!gt(R)&&!isNaN(R)){const $=l.valueAsNumber||R&&+R;gt(ue.value)||(K=$>ue.value),gt(N.value)||(ee=$<N.value)}else{const $=l.valueAsDate||new Date(R),ge=ke=>new Date(new Date().toDateString()+" "+ke),Pe=l.type=="time",Y=l.type=="week";yt(ue.value)&&R&&(K=Pe?ge(R)>ge(ue.value):Y?R>ue.value:$>new Date(ue.value)),yt(N.value)&&R&&(ee=Pe?ge(R)<ge(N.value):Y?R<N.value:$<new Date(N.value))}if((K||ee)&&(J(!!K,ue.message,N.message,qt.max,qt.min),!r))return p(I[B].message),I}if((g||x)&&!A&&(yt(R)||n&&Array.isArray(R))){const K=ps(g),ee=ps(x),ue=!gt(K.value)&&R.length>+K.value,N=!gt(ee.value)&&R.length<+ee.value;if((ue||N)&&(J(ue,K.message,ee.message),!r))return p(I[B].message),I}if(f&&!A&&yt(R)){const{value:K,message:ee}=ps(f);if(ha(K)&&!R.match(K)&&(I[B]={type:qt.pattern,message:ee,ref:l,...G(qt.pattern,ee)},!r))return p(ee),I}if(w){if(_t(w)){const K=await w(R,a),ee=Ui(K,Z);if(ee&&(I[B]={...ee,...G(qt.validate,ee.message)},!r))return p(ee.message),I}else if(nt(w)){let K={};for(const ee in w){if(!ft(K)&&!r)break;const ue=Ui(await w[ee](R,a),Z,ee);ue&&(K={...ue,...G(ee,ue.message)},p(ue.message),r&&(I[B]=K))}if(!ft(K)&&(I[B]={ref:Z,...K},!r))return I}}return p(!0),I};const yc={mode:It.onSubmit,reValidateMode:It.onChange,shouldFocusError:!0};function vc(t={}){let s={...yc,...t},a={submitCount:0,isDirty:!1,isReady:!1,isLoading:_t(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1},r={},i=nt(s.defaultValues)||nt(s.values)?ot(s.defaultValues||s.values)||{}:{},n=s.shouldUnregister?{}:ot(i),l={action:!1,mount:!1,watch:!1},o={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},d,g=0;const x={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let b={...x};const u={array:Ti(),state:Ti()},f=s.criteriaMode===It.all,w=P=>L=>{clearTimeout(g),g=setTimeout(P,L)},B=async P=>{if(!s.disabled&&(x.isValid||b.isValid||P)){const L=s.resolver?ft((await _()).errors):await A(r,!0);L!==a.isValid&&u.state.next({isValid:L})}},C=(P,L)=>{!s.disabled&&(x.isValidating||x.validatingFields||b.isValidating||b.validatingFields)&&((P||Array.from(o.mount)).forEach(H=>{H&&(L?Xe(a.validatingFields,H,L):st(a.validatingFields,H))}),u.state.next({validatingFields:a.validatingFields,isValidating:!ft(a.validatingFields)}))},q=(P,L=[],H,me,le=!0,k=!0)=>{if(me&&H&&!s.disabled){if(l.action=!0,k&&Array.isArray(he(r,P))){const U=H(he(r,P),me.argA,me.argB);le&&Xe(r,P,U)}if(k&&Array.isArray(he(a.errors,P))){const U=H(he(a.errors,P),me.argA,me.argB);le&&Xe(a.errors,P,U),xc(a.errors,P)}if((x.touchedFields||b.touchedFields)&&k&&Array.isArray(he(a.touchedFields,P))){const U=H(he(a.touchedFields,P),me.argA,me.argB);le&&Xe(a.touchedFields,P,U)}(x.dirtyFields||b.dirtyFields)&&(a.dirtyFields=hs(i,n)),u.state.next({name:P,isDirty:J(P,L),dirtyFields:a.dirtyFields,errors:a.errors,isValid:a.isValid})}else Xe(n,P,L)},R=(P,L)=>{Xe(a.errors,P,L),u.state.next({errors:a.errors})},Z=P=>{a.errors=P,u.state.next({errors:a.errors,isValid:!1})},p=(P,L,H,me)=>{const le=he(r,P);if(le){const k=he(n,P,it(H)?he(i,P):H);it(k)||me&&me.defaultChecked||L?Xe(n,P,L?k:Ii(le._f)):ue(P,k),l.mount&&B()}},I=(P,L,H,me,le)=>{let k=!1,U=!1;const ae={name:P};if(!s.disabled){if(!H||me){(x.isDirty||b.isDirty)&&(U=a.isDirty,a.isDirty=ae.isDirty=J(),k=U!==ae.isDirty);const xe=Ht(he(i,P),L);U=!!he(a.dirtyFields,P),xe?st(a.dirtyFields,P):Xe(a.dirtyFields,P,!0),ae.dirtyFields=a.dirtyFields,k=k||(x.dirtyFields||b.dirtyFields)&&U!==!xe}if(H){const xe=he(a.touchedFields,P);xe||(Xe(a.touchedFields,P,H),ae.touchedFields=a.touchedFields,k=k||(x.touchedFields||b.touchedFields)&&xe!==H)}k&&le&&u.state.next(ae)}return k?ae:{}},F=(P,L,H,me)=>{const le=he(a.errors,P),k=(x.isValid||b.isValid)&&Rt(L)&&a.isValid!==L;if(s.delayError&&H?(d=w(()=>R(P,H)),d(s.delayError)):(clearTimeout(g),d=null,H?Xe(a.errors,P,H):st(a.errors,P)),(H?!Ht(le,H):le)||!ft(me)||k){const U={...me,...k&&Rt(L)?{isValid:L}:{},errors:a.errors,name:P};a={...a,...U},u.state.next(U)}},_=async P=>{C(P,!0);const L=await s.resolver(n,s.context,uc(P||o.mount,r,s.criteriaMode,s.shouldUseNativeValidation));return C(P),L},j=async P=>{const{errors:L}=await _(P);if(P)for(const H of P){const me=he(L,H);me?Xe(a.errors,H,me):st(a.errors,H)}else a.errors=L;return L},A=async(P,L,H={valid:!0})=>{for(const me in P){const le=P[me];if(le){const{_f:k,...U}=le;if(k){const ae=o.array.has(k.name),xe=le._f&&mc(le._f);xe&&x.validatingFields&&C([k.name],!0);const v=await Mi(le,o.disabled,n,f,s.shouldUseNativeValidation&&!L,ae);if(xe&&x.validatingFields&&C([k.name]),v[k.name]&&(H.valid=!1,L))break;!L&&(he(v,k.name)?ae?bc(a.errors,v,k.name):Xe(a.errors,k.name,v[k.name]):st(a.errors,k.name))}!ft(U)&&await A(U,L,H)}}return H.valid},G=()=>{for(const P of o.unMount){const L=he(r,P);L&&(L._f.refs?L._f.refs.every(H=>!za(H)):!za(L._f.ref))&&y(P)}o.unMount=new Set},J=(P,L)=>!s.disabled&&(P&&L&&Xe(n,P,L),!Ht(ke(),i)),K=(P,L,H)=>nc(P,o,{...l.mount?n:it(L)?i:yt(P)?{[P]:L}:L},H,L),ee=P=>Dr(he(l.mount?n:i,P,s.shouldUnregister?he(i,P,[]):[])),ue=(P,L,H={})=>{const me=he(r,P);let le=L;if(me){const k=me._f;k&&(!k.disabled&&Xe(n,P,ul(L,k)),le=ga(k.ref)&&gt(L)?"":L,ol(k.ref)?[...k.ref.options].forEach(U=>U.selected=le.includes(U.value)):k.refs?ea(k.ref)?k.refs.forEach(U=>{(!U.defaultChecked||!U.disabled)&&(Array.isArray(le)?U.checked=!!le.find(ae=>ae===U.value):U.checked=le===U.value||!!le)}):k.refs.forEach(U=>U.checked=U.value===le):Br(k.ref)?k.ref.value="":(k.ref.value=le,k.ref.type||u.state.next({name:P,values:ot(n)})))}(H.shouldDirty||H.shouldTouch)&&I(P,le,H.shouldTouch,H.shouldDirty,!0),H.shouldValidate&&Y(P)},N=(P,L,H)=>{for(const me in L){if(!L.hasOwnProperty(me))return;const le=L[me],k=P+"."+me,U=he(r,k);(o.array.has(P)||nt(le)||U&&!U._f)&&!cs(le)?N(k,le,H):ue(k,le,H)}},$=(P,L,H={})=>{const me=he(r,P),le=o.array.has(P),k=ot(L);Xe(n,P,k),le?(u.array.next({name:P,values:ot(n)}),(x.isDirty||x.dirtyFields||b.isDirty||b.dirtyFields)&&H.shouldDirty&&u.state.next({name:P,dirtyFields:hs(i,n),isDirty:J(P,k)})):me&&!me._f&&!gt(k)?N(P,k,H):ue(P,k,H),Oi(P,o)&&u.state.next({...a,name:P}),u.state.next({name:l.mount?P:void 0,values:ot(n)})},ge=async P=>{l.mount=!0;const L=P.target;let H=L.name,me=!0;const le=he(r,H),k=xe=>{me=Number.isNaN(xe)||cs(xe)&&isNaN(xe.getTime())||Ht(xe,he(n,H,xe))},U=_i(s.mode),ae=_i(s.reValidateMode);if(le){let xe,v;const M=L.type?Ii(le._f):Yo(P),te=P.type===Pi.BLUR||P.type===Pi.FOCUS_OUT,Te=!pc(le._f)&&!s.resolver&&!he(a.errors,H)&&!le._f.deps||fc(te,he(a.touchedFields,H),a.isSubmitted,ae,U),Ke=Oi(H,o,te);Xe(n,H,M),te?(!L||!L.readOnly)&&(le._f.onBlur&&le._f.onBlur(P),d&&d(0)):le._f.onChange&&le._f.onChange(P);const Je=I(H,M,te),Vt=!ft(Je)||Ke;if(!te&&u.state.next({name:H,type:P.type,values:ot(n)}),Te)return(x.isValid||b.isValid)&&(s.mode==="onBlur"?te&&B():te||B()),Vt&&u.state.next({name:H,...Ke?{}:Je});if(!te&&Ke&&u.state.next({...a}),s.resolver){const{errors:lt}=await _([H]);if(k(M),me){const Ft=Ri(a.errors,r,H),Et=Ri(lt,r,Ft.name||H);xe=Et.error,H=Et.name,v=ft(lt)}}else C([H],!0),xe=(await Mi(le,o.disabled,n,f,s.shouldUseNativeValidation))[H],C([H]),k(M),me&&(xe?v=!1:(x.isValid||b.isValid)&&(v=await A(r,!0)));me&&(le._f.deps&&(!Array.isArray(le._f.deps)||le._f.deps.length>0)&&Y(le._f.deps),F(H,v,xe,Je))}},Pe=(P,L)=>{if(he(a.errors,L)&&P.focus)return P.focus(),1},Y=async(P,L={})=>{let H,me;const le=Rs(P);if(s.resolver){const k=await j(it(P)?P:le);H=ft(k),me=P?!le.some(U=>he(k,U)):H}else P?(me=(await Promise.all(le.map(async k=>{const U=he(r,k);return await A(U&&U._f?{[k]:U}:U)}))).every(Boolean),!(!me&&!a.isValid)&&B()):me=H=await A(r);return u.state.next({...!yt(P)||(x.isValid||b.isValid)&&H!==a.isValid?{}:{name:P},...s.resolver||!P?{isValid:H}:{},errors:a.errors}),L.shouldFocus&&!me&&Us(r,Pe,P?le:o.mount),me},ke=(P,L)=>{let H={...l.mount?n:i};return L&&(H=ll(L.dirtyFields?a.dirtyFields:a.touchedFields,H)),it(P)?H:yt(P)?he(H,P):P.map(me=>he(H,me))},_e=(P,L)=>({invalid:!!he((L||a).errors,P),isDirty:!!he((L||a).dirtyFields,P),error:he((L||a).errors,P),isValidating:!!he(a.validatingFields,P),isTouched:!!he((L||a).touchedFields,P)}),je=P=>{P&&Rs(P).forEach(L=>st(a.errors,L)),u.state.next({errors:P?a.errors:{}})},Be=(P,L,H)=>{const me=(he(r,P,{_f:{}})._f||{}).ref,le=he(a.errors,P)||{},{ref:k,message:U,type:ae,...xe}=le;Xe(a.errors,P,{...xe,...L,ref:me}),u.state.next({name:P,errors:a.errors,isValid:!1}),H&&H.shouldFocus&&me&&me.focus&&me.focus()},S=(P,L)=>_t(P)?u.state.subscribe({next:H=>"values"in H&&P(K(void 0,L),H)}):K(P,L,!0),m=P=>u.state.subscribe({next:L=>{hc(P.name,L.name,P.exact)&&gc(L,P.formState||x,De,P.reRenderRoot)&&P.callback({values:{...n},...a,...L,defaultValues:i})}}).unsubscribe,c=P=>(l.mount=!0,b={...b,...P.formState},m({...P,formState:b})),y=(P,L={})=>{for(const H of P?Rs(P):o.mount)o.mount.delete(H),o.array.delete(H),L.keepValue||(st(r,H),st(n,H)),!L.keepError&&st(a.errors,H),!L.keepDirty&&st(a.dirtyFields,H),!L.keepTouched&&st(a.touchedFields,H),!L.keepIsValidating&&st(a.validatingFields,H),!s.shouldUnregister&&!L.keepDefaultValue&&st(i,H);u.state.next({values:ot(n)}),u.state.next({...a,...L.keepDirty?{isDirty:J()}:{}}),!L.keepIsValid&&B()},O=({disabled:P,name:L})=>{(Rt(P)&&l.mount||P||o.disabled.has(L))&&(P?o.disabled.add(L):o.disabled.delete(L))},Q=(P,L={})=>{let H=he(r,P);const me=Rt(L.disabled)||Rt(s.disabled);return Xe(r,P,{...H||{},_f:{...H&&H._f?H._f:{ref:{name:P}},name:P,mount:!0,...L}}),o.mount.add(P),H?O({disabled:Rt(L.disabled)?L.disabled:s.disabled,name:P}):p(P,!0,L.value),{...me?{disabled:L.disabled||s.disabled}:{},...s.progressive?{required:!!L.required,min:Fs(L.min),max:Fs(L.max),minLength:Fs(L.minLength),maxLength:Fs(L.maxLength),pattern:Fs(L.pattern)}:{},name:P,onChange:ge,onBlur:ge,ref:le=>{if(le){Q(P,L),H=he(r,P);const k=it(le.value)&&le.querySelectorAll&&le.querySelectorAll("input,select,textarea")[0]||le,U=lc(k),ae=H._f.refs||[];if(U?ae.find(xe=>xe===k):k===H._f.ref)return;Xe(r,P,{_f:{...H._f,...U?{refs:[...ae.filter(za),k,...Array.isArray(he(i,P))?[{}]:[]],ref:{type:k.type,name:P}}:{ref:k}}}),p(P,!1,void 0,k)}else H=he(r,P,{}),H._f&&(H._f.mount=!1),(s.shouldUnregister||L.shouldUnregister)&&!(tc(o.array,P)&&l.action)&&o.unMount.add(P)}}},V=()=>s.shouldFocusError&&Us(r,Pe,o.mount),se=P=>{Rt(P)&&(u.state.next({disabled:P}),Us(r,(L,H)=>{const me=he(r,H);me&&(L.disabled=me._f.disabled||P,Array.isArray(me._f.refs)&&me._f.refs.forEach(le=>{le.disabled=me._f.disabled||P}))},0,!1))},h=(P,L)=>async H=>{let me;H&&(H.preventDefault&&H.preventDefault(),H.persist&&H.persist());let le=ot(n);if(u.state.next({isSubmitting:!0}),s.resolver){const{errors:k,values:U}=await _();a.errors=k,le=ot(U)}else await A(r);if(o.disabled.size)for(const k of o.disabled)st(le,k);if(st(a.errors,"root"),ft(a.errors)){u.state.next({errors:{}});try{await P(le,H)}catch(k){me=k}}else L&&await L({...a.errors},H),V(),setTimeout(V);if(u.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ft(a.errors)&&!me,submitCount:a.submitCount+1,errors:a.errors}),me)throw me},z=(P,L={})=>{he(r,P)&&(it(L.defaultValue)?$(P,ot(he(i,P))):($(P,L.defaultValue),Xe(i,P,ot(L.defaultValue))),L.keepTouched||st(a.touchedFields,P),L.keepDirty||(st(a.dirtyFields,P),a.isDirty=L.defaultValue?J(P,ot(he(i,P))):J()),L.keepError||(st(a.errors,P),x.isValid&&B()),u.state.next({...a}))},X=(P,L={})=>{const H=P?ot(P):i,me=ot(H),le=ft(P),k=le?i:me;if(L.keepDefaultValues||(i=H),!L.keepValues){if(L.keepDirtyValues){const U=new Set([...o.mount,...Object.keys(hs(i,n))]);for(const ae of Array.from(U))he(a.dirtyFields,ae)?Xe(k,ae,he(n,ae)):$(ae,he(k,ae))}else{if(Er&&it(P))for(const U of o.mount){const ae=he(r,U);if(ae&&ae._f){const xe=Array.isArray(ae._f.refs)?ae._f.refs[0]:ae._f.ref;if(ga(xe)){const v=xe.closest("form");if(v){v.reset();break}}}}if(L.keepFieldsRef)for(const U of o.mount)$(U,he(k,U));else r={}}n=s.shouldUnregister?L.keepDefaultValues?ot(i):{}:ot(k),u.array.next({values:{...k}}),u.state.next({values:{...k}})}o={mount:L.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!x.isValid||!!L.keepIsValid||!!L.keepDirtyValues,l.watch=!!s.shouldUnregister,u.state.next({submitCount:L.keepSubmitCount?a.submitCount:0,isDirty:le?!1:L.keepDirty?a.isDirty:!!(L.keepDefaultValues&&!Ht(P,i)),isSubmitted:L.keepIsSubmitted?a.isSubmitted:!1,dirtyFields:le?{}:L.keepDirtyValues?L.keepDefaultValues&&n?hs(i,n):a.dirtyFields:L.keepDefaultValues&&P?hs(i,P):L.keepDirty?a.dirtyFields:{},touchedFields:L.keepTouched?a.touchedFields:{},errors:L.keepErrors?a.errors:{},isSubmitSuccessful:L.keepIsSubmitSuccessful?a.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:i})},de=(P,L)=>X(_t(P)?P(n):P,L),Se=(P,L={})=>{const H=he(r,P),me=H&&H._f;if(me){const le=me.refs?me.refs[0]:me.ref;le.focus&&(le.focus(),L.shouldSelect&&_t(le.select)&&le.select())}},De=P=>{a={...a,...P}},Me={control:{register:Q,unregister:y,getFieldState:_e,handleSubmit:h,setError:Be,_subscribe:m,_runSchema:_,_focusError:V,_getWatch:K,_getDirty:J,_setValid:B,_setFieldArray:q,_setDisabledField:O,_setErrors:Z,_getFieldArray:ee,_reset:X,_resetDefaultValues:()=>_t(s.defaultValues)&&s.defaultValues().then(P=>{de(P,s.resetOptions),u.state.next({isLoading:!1})}),_removeUnmounted:G,_disableForm:se,_subjects:u,_proxyFormState:x,get _fields(){return r},get _formValues(){return n},get _state(){return l},set _state(P){l=P},get _defaultValues(){return i},get _names(){return o},set _names(P){o=P},get _formState(){return a},get _options(){return s},set _options(P){s={...s,...P}}},subscribe:c,trigger:Y,register:Q,handleSubmit:h,watch:S,setValue:$,getValues:ke,reset:de,resetField:z,clearErrors:je,unregister:y,setError:Be,setFocus:Se,getFieldState:_e};return{...Me,formControl:Me}}function Rr(t={}){const s=Oe.useRef(void 0),a=Oe.useRef(void 0),[r,i]=Oe.useState({isDirty:!1,isValidating:!1,isLoading:_t(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:_t(t.defaultValues)?void 0:t.defaultValues});if(!s.current)if(t.formControl)s.current={...t.formControl,formState:r},t.defaultValues&&!_t(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:l,...o}=vc(t);s.current={...o,formState:r}}const n=s.current.control;return n._options=t,ic(()=>{const l=n._subscribe({formState:n._proxyFormState,callback:()=>i({...n._formState}),reRenderRoot:!0});return i(o=>({...o,isReady:!0})),n._formState.isReady=!0,l},[n]),Oe.useEffect(()=>n._disableForm(t.disabled),[n,t.disabled]),Oe.useEffect(()=>{t.mode&&(n._options.mode=t.mode),t.reValidateMode&&(n._options.reValidateMode=t.reValidateMode)},[n,t.mode,t.reValidateMode]),Oe.useEffect(()=>{t.errors&&(n._setErrors(t.errors),n._focusError())},[n,t.errors]),Oe.useEffect(()=>{t.shouldUnregister&&n._subjects.state.next({values:n._getWatch()})},[n,t.shouldUnregister]),Oe.useEffect(()=>{if(n._proxyFormState.isDirty){const l=n._getDirty();l!==r.isDirty&&n._subjects.state.next({isDirty:l})}},[n,r.isDirty]),Oe.useEffect(()=>{t.values&&!Ht(t.values,a.current)?(n._reset(t.values,{keepFieldsRef:!0,...n._options.resetOptions}),a.current=t.values,i(l=>({...l}))):n._resetDefaultValues()},[n,t.values]),Oe.useEffect(()=>{n._state.mount||(n._setValid(),n._state.mount=!0),n._state.watch&&(n._state.watch=!1,n._subjects.state.next({...n._formState})),n._removeUnmounted()}),s.current.formState=rc(r,n),s.current}const Li=(t,s,a)=>{if(t&&"reportValidity"in t){const r=he(a,s);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},pr=(t,s)=>{for(const a in s.fields){const r=s.fields[a];r&&r.ref&&"reportValidity"in r.ref?Li(r.ref,a,t):r&&r.refs&&r.refs.forEach(i=>Li(i,a,t))}},$i=(t,s)=>{s.shouldUseNativeValidation&&pr(t,s);const a={};for(const r in t){const i=he(s.fields,r),n=Object.assign(t[r]||{},{ref:i&&i.ref});if(jc(s.names||Object.keys(t),r)){const l=Object.assign({},he(a,r));Xe(l,"root",n),Xe(a,r,l)}else Xe(a,r,n)}return a},jc=(t,s)=>{const a=Vi(s);return t.some(r=>Vi(r).match(`^${a}\\.\\d+`))};function Vi(t){return t.replace(/\]|\[/g,"")}function pl(t,s,a){function r(o,d){var g;Object.defineProperty(o,"_zod",{value:o._zod??{},enumerable:!1}),(g=o._zod).traits??(g.traits=new Set),o._zod.traits.add(t),s(o,d);for(const x in l.prototype)x in o||Object.defineProperty(o,x,{value:l.prototype[x].bind(o)});o._zod.constr=l,o._zod.def=d}const i=(a==null?void 0:a.Parent)??Object;class n extends i{}Object.defineProperty(n,"name",{value:t});function l(o){var d;const g=a!=null&&a.Parent?new n:this;r(g,o),(d=g._zod).deferred??(d.deferred=[]);for(const x of g._zod.deferred)x();return g}return Object.defineProperty(l,"init",{value:r}),Object.defineProperty(l,Symbol.hasInstance,{value:o=>{var d,g;return a!=null&&a.Parent&&o instanceof a.Parent?!0:(g=(d=o==null?void 0:o._zod)==null?void 0:d.traits)==null?void 0:g.has(t)}}),Object.defineProperty(l,"name",{value:t}),l}class wc extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const Nc={};function gl(t){return Nc}function kc(t,s){return typeof s=="bigint"?s.toString():s}const hl=Error.captureStackTrace?Error.captureStackTrace:(...t)=>{};function ia(t){return typeof t=="string"?t:t==null?void 0:t.message}function fl(t,s,a){var i,n,l,o,d,g;const r={...t,path:t.path??[]};if(!t.message){const x=ia((l=(n=(i=t.inst)==null?void 0:i._zod.def)==null?void 0:n.error)==null?void 0:l.call(n,t))??ia((o=s==null?void 0:s.error)==null?void 0:o.call(s,t))??ia((d=a.customError)==null?void 0:d.call(a,t))??ia((g=a.localeError)==null?void 0:g.call(a,t))??"Invalid input";r.message=x}return delete r.inst,delete r.continue,s!=null&&s.reportInput||delete r.input,r}const xl=(t,s)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:s,enumerable:!1}),Object.defineProperty(t,"message",{get(){return JSON.stringify(s,kc,2)},enumerable:!0}),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},Sc=pl("$ZodError",xl),bl=pl("$ZodError",xl,{Parent:Error}),Cc=t=>(s,a,r,i)=>{const n=r?Object.assign(r,{async:!1}):{async:!1},l=s._zod.run({value:a,issues:[]},n);if(l instanceof Promise)throw new wc;if(l.issues.length){const o=new((i==null?void 0:i.Err)??t)(l.issues.map(d=>fl(d,n,gl())));throw hl(o,i==null?void 0:i.callee),o}return l.value},Ac=Cc(bl),Pc=t=>async(s,a,r,i)=>{const n=r?Object.assign(r,{async:!0}):{async:!0};let l=s._zod.run({value:a,issues:[]},n);if(l instanceof Promise&&(l=await l),l.issues.length){const o=new((i==null?void 0:i.Err)??t)(l.issues.map(d=>fl(d,n,gl())));throw hl(o,i==null?void 0:i.callee),o}return l.value},Tc=Pc(bl);function qi(t,s){try{var a=t()}catch(r){return s(r)}return a&&a.then?a.then(void 0,s):a}function Fc(t,s){for(var a={};t.length;){var r=t[0],i=r.code,n=r.message,l=r.path.join(".");if(!a[l])if("unionErrors"in r){var o=r.unionErrors[0].errors[0];a[l]={message:o.message,type:o.code}}else a[l]={message:n,type:i};if("unionErrors"in r&&r.unionErrors.forEach(function(x){return x.errors.forEach(function(b){return t.push(b)})}),s){var d=a[l].types,g=d&&d[r.code];a[l]=_r(l,s,a,i,g?[].concat(g,r.message):r.message)}t.shift()}return a}function Ec(t,s){for(var a={};t.length;){var r=t[0],i=r.code,n=r.message,l=r.path.join(".");if(!a[l])if(r.code==="invalid_union"&&r.errors.length>0){var o=r.errors[0][0];a[l]={message:o.message,type:o.code}}else a[l]={message:n,type:i};if(r.code==="invalid_union"&&r.errors.forEach(function(x){return x.forEach(function(b){return t.push(b)})}),s){var d=a[l].types,g=d&&d[r.code];a[l]=_r(l,s,a,i,g?[].concat(g,r.message):r.message)}t.shift()}return a}function Ur(t,s,a){if(a===void 0&&(a={}),function(r){return"_def"in r&&typeof r._def=="object"&&"typeName"in r._def}(t))return function(r,i,n){try{return Promise.resolve(qi(function(){return Promise.resolve(t[a.mode==="sync"?"parse":"parseAsync"](r,s)).then(function(l){return n.shouldUseNativeValidation&&pr({},n),{errors:{},values:a.raw?Object.assign({},r):l}})},function(l){if(function(o){return Array.isArray(o==null?void 0:o.issues)}(l))return{values:{},errors:$i(Fc(l.errors,!n.shouldUseNativeValidation&&n.criteriaMode==="all"),n)};throw l}))}catch(l){return Promise.reject(l)}};if(function(r){return"_zod"in r&&typeof r._zod=="object"}(t))return function(r,i,n){try{return Promise.resolve(qi(function(){return Promise.resolve((a.mode==="sync"?Ac:Tc)(t,r,s)).then(function(l){return n.shouldUseNativeValidation&&pr({},n),{errors:{},values:a.raw?Object.assign({},r):l}})},function(l){if(function(o){return o instanceof Sc}(l))return{values:{},errors:$i(Ec(l.issues,!n.shouldUseNativeValidation&&n.criteriaMode==="all"),n)};throw l}))}catch(l){return Promise.reject(l)}};throw new Error("Invalid input: not a Zod schema")}var qe;(function(t){t.assertEqual=i=>{};function s(i){}t.assertIs=s;function a(i){throw new Error}t.assertNever=a,t.arrayToEnum=i=>{const n={};for(const l of i)n[l]=l;return n},t.getValidEnumValues=i=>{const n=t.objectKeys(i).filter(o=>typeof i[i[o]]!="number"),l={};for(const o of n)l[o]=i[o];return t.objectValues(l)},t.objectValues=i=>t.objectKeys(i).map(function(n){return i[n]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const n=[];for(const l in i)Object.prototype.hasOwnProperty.call(i,l)&&n.push(l);return n},t.find=(i,n)=>{for(const l of i)if(n(l))return l},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function r(i,n=" | "){return i.map(l=>typeof l=="string"?`'${l}'`:l).join(n)}t.joinValues=r,t.jsonStringifyReplacer=(i,n)=>typeof n=="bigint"?n.toString():n})(qe||(qe={}));var Gi;(function(t){t.mergeShapes=(s,a)=>({...s,...a})})(Gi||(Gi={}));const fe=qe.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),zt=t=>{switch(typeof t){case"undefined":return fe.undefined;case"string":return fe.string;case"number":return Number.isNaN(t)?fe.nan:fe.number;case"boolean":return fe.boolean;case"function":return fe.function;case"bigint":return fe.bigint;case"symbol":return fe.symbol;case"object":return Array.isArray(t)?fe.array:t===null?fe.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?fe.promise:typeof Map<"u"&&t instanceof Map?fe.map:typeof Set<"u"&&t instanceof Set?fe.set:typeof Date<"u"&&t instanceof Date?fe.date:fe.object;default:return fe.unknown}},ie=qe.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Gt extends Error{get errors(){return this.issues}constructor(s){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const a=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,a):this.__proto__=a,this.name="ZodError",this.issues=s}format(s){const a=s||function(n){return n.message},r={_errors:[]},i=n=>{for(const l of n.issues)if(l.code==="invalid_union")l.unionErrors.map(i);else if(l.code==="invalid_return_type")i(l.returnTypeError);else if(l.code==="invalid_arguments")i(l.argumentsError);else if(l.path.length===0)r._errors.push(a(l));else{let o=r,d=0;for(;d<l.path.length;){const g=l.path[d];d===l.path.length-1?(o[g]=o[g]||{_errors:[]},o[g]._errors.push(a(l))):o[g]=o[g]||{_errors:[]},o=o[g],d++}}};return i(this),r}static assert(s){if(!(s instanceof Gt))throw new Error(`Not a ZodError: ${s}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,qe.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(s=a=>a.message){const a={},r=[];for(const i of this.issues)if(i.path.length>0){const n=i.path[0];a[n]=a[n]||[],a[n].push(s(i))}else r.push(s(i));return{formErrors:r,fieldErrors:a}}get formErrors(){return this.flatten()}}Gt.create=t=>new Gt(t);const gr=(t,s)=>{let a;switch(t.code){case ie.invalid_type:t.received===fe.undefined?a="Required":a=`Expected ${t.expected}, received ${t.received}`;break;case ie.invalid_literal:a=`Invalid literal value, expected ${JSON.stringify(t.expected,qe.jsonStringifyReplacer)}`;break;case ie.unrecognized_keys:a=`Unrecognized key(s) in object: ${qe.joinValues(t.keys,", ")}`;break;case ie.invalid_union:a="Invalid input";break;case ie.invalid_union_discriminator:a=`Invalid discriminator value. Expected ${qe.joinValues(t.options)}`;break;case ie.invalid_enum_value:a=`Invalid enum value. Expected ${qe.joinValues(t.options)}, received '${t.received}'`;break;case ie.invalid_arguments:a="Invalid function arguments";break;case ie.invalid_return_type:a="Invalid function return type";break;case ie.invalid_date:a="Invalid date";break;case ie.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(a=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(a=`${a} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?a=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?a=`Invalid input: must end with "${t.validation.endsWith}"`:qe.assertNever(t.validation):t.validation!=="regex"?a=`Invalid ${t.validation}`:a="Invalid";break;case ie.too_small:t.type==="array"?a=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?a=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?a=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?a=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?a=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:a="Invalid input";break;case ie.too_big:t.type==="array"?a=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?a=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?a=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?a=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?a=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:a="Invalid input";break;case ie.custom:a="Invalid input";break;case ie.invalid_intersection_types:a="Intersection results could not be merged";break;case ie.not_multiple_of:a=`Number must be a multiple of ${t.multipleOf}`;break;case ie.not_finite:a="Number must be finite";break;default:a=s.defaultError,qe.assertNever(t)}return{message:a}};let Dc=gr;function Ic(){return Dc}const _c=t=>{const{data:s,path:a,errorMaps:r,issueData:i}=t,n=[...a,...i.path||[]],l={...i,path:n};if(i.message!==void 0)return{...i,path:n,message:i.message};let o="";const d=r.filter(g=>!!g).slice().reverse();for(const g of d)o=g(l,{data:s,defaultError:o}).message;return{...i,path:n,message:o}};function pe(t,s){const a=Ic(),r=_c({issueData:s,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,a,a===gr?void 0:gr].filter(i=>!!i)});t.common.issues.push(r)}class St{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(s,a){const r=[];for(const i of a){if(i.status==="aborted")return Fe;i.status==="dirty"&&s.dirty(),r.push(i.value)}return{status:s.value,value:r}}static async mergeObjectAsync(s,a){const r=[];for(const i of a){const n=await i.key,l=await i.value;r.push({key:n,value:l})}return St.mergeObjectSync(s,r)}static mergeObjectSync(s,a){const r={};for(const i of a){const{key:n,value:l}=i;if(n.status==="aborted"||l.status==="aborted")return Fe;n.status==="dirty"&&s.dirty(),l.status==="dirty"&&s.dirty(),n.value!=="__proto__"&&(typeof l.value<"u"||i.alwaysSet)&&(r[n.value]=l.value)}return{status:s.value,value:r}}}const Fe=Object.freeze({status:"aborted"}),_s=t=>({status:"dirty",value:t}),Tt=t=>({status:"valid",value:t}),Wi=t=>t.status==="aborted",zi=t=>t.status==="dirty",ys=t=>t.status==="valid",fa=t=>typeof Promise<"u"&&t instanceof Promise;var ye;(function(t){t.errToObj=s=>typeof s=="string"?{message:s}:s||{},t.toString=s=>typeof s=="string"?s:s==null?void 0:s.message})(ye||(ye={}));class es{constructor(s,a,r,i){this._cachedPath=[],this.parent=s,this.data=a,this._path=r,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Hi=(t,s)=>{if(ys(s))return{success:!0,data:s.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const a=new Gt(t.common.issues);return this._error=a,this._error}}};function Ie(t){if(!t)return{};const{errorMap:s,invalid_type_error:a,required_error:r,description:i}=t;if(s&&(a||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return s?{errorMap:s,description:i}:{errorMap:(l,o)=>{const{message:d}=t;return l.code==="invalid_enum_value"?{message:d??o.defaultError}:typeof o.data>"u"?{message:d??r??o.defaultError}:l.code!=="invalid_type"?{message:o.defaultError}:{message:d??a??o.defaultError}},description:i}}class Le{get description(){return this._def.description}_getType(s){return zt(s.data)}_getOrReturnCtx(s,a){return a||{common:s.parent.common,data:s.data,parsedType:zt(s.data),schemaErrorMap:this._def.errorMap,path:s.path,parent:s.parent}}_processInputParams(s){return{status:new St,ctx:{common:s.parent.common,data:s.data,parsedType:zt(s.data),schemaErrorMap:this._def.errorMap,path:s.path,parent:s.parent}}}_parseSync(s){const a=this._parse(s);if(fa(a))throw new Error("Synchronous parse encountered promise.");return a}_parseAsync(s){const a=this._parse(s);return Promise.resolve(a)}parse(s,a){const r=this.safeParse(s,a);if(r.success)return r.data;throw r.error}safeParse(s,a){const r={common:{issues:[],async:(a==null?void 0:a.async)??!1,contextualErrorMap:a==null?void 0:a.errorMap},path:(a==null?void 0:a.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:s,parsedType:zt(s)},i=this._parseSync({data:s,path:r.path,parent:r});return Hi(r,i)}"~validate"(s){var r,i;const a={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:s,parsedType:zt(s)};if(!this["~standard"].async)try{const n=this._parseSync({data:s,path:[],parent:a});return ys(n)?{value:n.value}:{issues:a.common.issues}}catch(n){(i=(r=n==null?void 0:n.message)==null?void 0:r.toLowerCase())!=null&&i.includes("encountered")&&(this["~standard"].async=!0),a.common={issues:[],async:!0}}return this._parseAsync({data:s,path:[],parent:a}).then(n=>ys(n)?{value:n.value}:{issues:a.common.issues})}async parseAsync(s,a){const r=await this.safeParseAsync(s,a);if(r.success)return r.data;throw r.error}async safeParseAsync(s,a){const r={common:{issues:[],contextualErrorMap:a==null?void 0:a.errorMap,async:!0},path:(a==null?void 0:a.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:s,parsedType:zt(s)},i=this._parse({data:s,path:r.path,parent:r}),n=await(fa(i)?i:Promise.resolve(i));return Hi(r,n)}refine(s,a){const r=i=>typeof a=="string"||typeof a>"u"?{message:a}:typeof a=="function"?a(i):a;return this._refinement((i,n)=>{const l=s(i),o=()=>n.addIssue({code:ie.custom,...r(i)});return typeof Promise<"u"&&l instanceof Promise?l.then(d=>d?!0:(o(),!1)):l?!0:(o(),!1)})}refinement(s,a){return this._refinement((r,i)=>s(r)?!0:(i.addIssue(typeof a=="function"?a(r,i):a),!1))}_refinement(s){return new ws({schema:this,typeName:Ee.ZodEffects,effect:{type:"refinement",refinement:s}})}superRefine(s){return this._refinement(s)}constructor(s){this.spa=this.safeParseAsync,this._def=s,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:a=>this["~validate"](a)}}optional(){return Qt.create(this,this._def)}nullable(){return Ns.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Mt.create(this)}promise(){return va.create(this,this._def)}or(s){return ba.create([this,s],this._def)}and(s){return ya.create(this,s,this._def)}transform(s){return new ws({...Ie(this._def),schema:this,typeName:Ee.ZodEffects,effect:{type:"transform",transform:s}})}default(s){const a=typeof s=="function"?s:()=>s;return new xr({...Ie(this._def),innerType:this,defaultValue:a,typeName:Ee.ZodDefault})}brand(){return new ad({typeName:Ee.ZodBranded,type:this,...Ie(this._def)})}catch(s){const a=typeof s=="function"?s:()=>s;return new br({...Ie(this._def),innerType:this,catchValue:a,typeName:Ee.ZodCatch})}describe(s){const a=this.constructor;return new a({...this._def,description:s})}pipe(s){return Mr.create(this,s)}readonly(){return yr.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Bc=/^c[^\s-]{8,}$/i,Oc=/^[0-9a-z]+$/,Rc=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Uc=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Mc=/^[a-z0-9_-]{21}$/i,Lc=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,$c=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Vc=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,qc="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Ha;const Gc=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Wc=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,zc=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Hc=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Kc=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Qc=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,yl="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Xc=new RegExp(`^${yl}$`);function vl(t){let s="[0-5]\\d";t.precision?s=`${s}\\.\\d{${t.precision}}`:t.precision==null&&(s=`${s}(\\.\\d+)?`);const a=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${s})${a}`}function Jc(t){return new RegExp(`^${vl(t)}$`)}function Zc(t){let s=`${yl}T${vl(t)}`;const a=[];return a.push(t.local?"Z?":"Z"),t.offset&&a.push("([+-]\\d{2}:?\\d{2})"),s=`${s}(${a.join("|")})`,new RegExp(`^${s}$`)}function Yc(t,s){return!!((s==="v4"||!s)&&Gc.test(t)||(s==="v6"||!s)&&zc.test(t))}function ed(t,s){if(!Lc.test(t))return!1;try{const[a]=t.split(".");if(!a)return!1;const r=a.replace(/-/g,"+").replace(/_/g,"/").padEnd(a.length+(4-a.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||"typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||s&&i.alg!==s)}catch{return!1}}function td(t,s){return!!((s==="v4"||!s)&&Wc.test(t)||(s==="v6"||!s)&&Hc.test(t))}class Kt extends Le{_parse(s){if(this._def.coerce&&(s.data=String(s.data)),this._getType(s)!==fe.string){const n=this._getOrReturnCtx(s);return pe(n,{code:ie.invalid_type,expected:fe.string,received:n.parsedType}),Fe}const r=new St;let i;for(const n of this._def.checks)if(n.kind==="min")s.data.length<n.value&&(i=this._getOrReturnCtx(s,i),pe(i,{code:ie.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),r.dirty());else if(n.kind==="max")s.data.length>n.value&&(i=this._getOrReturnCtx(s,i),pe(i,{code:ie.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),r.dirty());else if(n.kind==="length"){const l=s.data.length>n.value,o=s.data.length<n.value;(l||o)&&(i=this._getOrReturnCtx(s,i),l?pe(i,{code:ie.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}):o&&pe(i,{code:ie.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}),r.dirty())}else if(n.kind==="email")Vc.test(s.data)||(i=this._getOrReturnCtx(s,i),pe(i,{validation:"email",code:ie.invalid_string,message:n.message}),r.dirty());else if(n.kind==="emoji")Ha||(Ha=new RegExp(qc,"u")),Ha.test(s.data)||(i=this._getOrReturnCtx(s,i),pe(i,{validation:"emoji",code:ie.invalid_string,message:n.message}),r.dirty());else if(n.kind==="uuid")Uc.test(s.data)||(i=this._getOrReturnCtx(s,i),pe(i,{validation:"uuid",code:ie.invalid_string,message:n.message}),r.dirty());else if(n.kind==="nanoid")Mc.test(s.data)||(i=this._getOrReturnCtx(s,i),pe(i,{validation:"nanoid",code:ie.invalid_string,message:n.message}),r.dirty());else if(n.kind==="cuid")Bc.test(s.data)||(i=this._getOrReturnCtx(s,i),pe(i,{validation:"cuid",code:ie.invalid_string,message:n.message}),r.dirty());else if(n.kind==="cuid2")Oc.test(s.data)||(i=this._getOrReturnCtx(s,i),pe(i,{validation:"cuid2",code:ie.invalid_string,message:n.message}),r.dirty());else if(n.kind==="ulid")Rc.test(s.data)||(i=this._getOrReturnCtx(s,i),pe(i,{validation:"ulid",code:ie.invalid_string,message:n.message}),r.dirty());else if(n.kind==="url")try{new URL(s.data)}catch{i=this._getOrReturnCtx(s,i),pe(i,{validation:"url",code:ie.invalid_string,message:n.message}),r.dirty()}else n.kind==="regex"?(n.regex.lastIndex=0,n.regex.test(s.data)||(i=this._getOrReturnCtx(s,i),pe(i,{validation:"regex",code:ie.invalid_string,message:n.message}),r.dirty())):n.kind==="trim"?s.data=s.data.trim():n.kind==="includes"?s.data.includes(n.value,n.position)||(i=this._getOrReturnCtx(s,i),pe(i,{code:ie.invalid_string,validation:{includes:n.value,position:n.position},message:n.message}),r.dirty()):n.kind==="toLowerCase"?s.data=s.data.toLowerCase():n.kind==="toUpperCase"?s.data=s.data.toUpperCase():n.kind==="startsWith"?s.data.startsWith(n.value)||(i=this._getOrReturnCtx(s,i),pe(i,{code:ie.invalid_string,validation:{startsWith:n.value},message:n.message}),r.dirty()):n.kind==="endsWith"?s.data.endsWith(n.value)||(i=this._getOrReturnCtx(s,i),pe(i,{code:ie.invalid_string,validation:{endsWith:n.value},message:n.message}),r.dirty()):n.kind==="datetime"?Zc(n).test(s.data)||(i=this._getOrReturnCtx(s,i),pe(i,{code:ie.invalid_string,validation:"datetime",message:n.message}),r.dirty()):n.kind==="date"?Xc.test(s.data)||(i=this._getOrReturnCtx(s,i),pe(i,{code:ie.invalid_string,validation:"date",message:n.message}),r.dirty()):n.kind==="time"?Jc(n).test(s.data)||(i=this._getOrReturnCtx(s,i),pe(i,{code:ie.invalid_string,validation:"time",message:n.message}),r.dirty()):n.kind==="duration"?$c.test(s.data)||(i=this._getOrReturnCtx(s,i),pe(i,{validation:"duration",code:ie.invalid_string,message:n.message}),r.dirty()):n.kind==="ip"?Yc(s.data,n.version)||(i=this._getOrReturnCtx(s,i),pe(i,{validation:"ip",code:ie.invalid_string,message:n.message}),r.dirty()):n.kind==="jwt"?ed(s.data,n.alg)||(i=this._getOrReturnCtx(s,i),pe(i,{validation:"jwt",code:ie.invalid_string,message:n.message}),r.dirty()):n.kind==="cidr"?td(s.data,n.version)||(i=this._getOrReturnCtx(s,i),pe(i,{validation:"cidr",code:ie.invalid_string,message:n.message}),r.dirty()):n.kind==="base64"?Kc.test(s.data)||(i=this._getOrReturnCtx(s,i),pe(i,{validation:"base64",code:ie.invalid_string,message:n.message}),r.dirty()):n.kind==="base64url"?Qc.test(s.data)||(i=this._getOrReturnCtx(s,i),pe(i,{validation:"base64url",code:ie.invalid_string,message:n.message}),r.dirty()):qe.assertNever(n);return{status:r.value,value:s.data}}_regex(s,a,r){return this.refinement(i=>s.test(i),{validation:a,code:ie.invalid_string,...ye.errToObj(r)})}_addCheck(s){return new Kt({...this._def,checks:[...this._def.checks,s]})}email(s){return this._addCheck({kind:"email",...ye.errToObj(s)})}url(s){return this._addCheck({kind:"url",...ye.errToObj(s)})}emoji(s){return this._addCheck({kind:"emoji",...ye.errToObj(s)})}uuid(s){return this._addCheck({kind:"uuid",...ye.errToObj(s)})}nanoid(s){return this._addCheck({kind:"nanoid",...ye.errToObj(s)})}cuid(s){return this._addCheck({kind:"cuid",...ye.errToObj(s)})}cuid2(s){return this._addCheck({kind:"cuid2",...ye.errToObj(s)})}ulid(s){return this._addCheck({kind:"ulid",...ye.errToObj(s)})}base64(s){return this._addCheck({kind:"base64",...ye.errToObj(s)})}base64url(s){return this._addCheck({kind:"base64url",...ye.errToObj(s)})}jwt(s){return this._addCheck({kind:"jwt",...ye.errToObj(s)})}ip(s){return this._addCheck({kind:"ip",...ye.errToObj(s)})}cidr(s){return this._addCheck({kind:"cidr",...ye.errToObj(s)})}datetime(s){return typeof s=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:s}):this._addCheck({kind:"datetime",precision:typeof(s==null?void 0:s.precision)>"u"?null:s==null?void 0:s.precision,offset:(s==null?void 0:s.offset)??!1,local:(s==null?void 0:s.local)??!1,...ye.errToObj(s==null?void 0:s.message)})}date(s){return this._addCheck({kind:"date",message:s})}time(s){return typeof s=="string"?this._addCheck({kind:"time",precision:null,message:s}):this._addCheck({kind:"time",precision:typeof(s==null?void 0:s.precision)>"u"?null:s==null?void 0:s.precision,...ye.errToObj(s==null?void 0:s.message)})}duration(s){return this._addCheck({kind:"duration",...ye.errToObj(s)})}regex(s,a){return this._addCheck({kind:"regex",regex:s,...ye.errToObj(a)})}includes(s,a){return this._addCheck({kind:"includes",value:s,position:a==null?void 0:a.position,...ye.errToObj(a==null?void 0:a.message)})}startsWith(s,a){return this._addCheck({kind:"startsWith",value:s,...ye.errToObj(a)})}endsWith(s,a){return this._addCheck({kind:"endsWith",value:s,...ye.errToObj(a)})}min(s,a){return this._addCheck({kind:"min",value:s,...ye.errToObj(a)})}max(s,a){return this._addCheck({kind:"max",value:s,...ye.errToObj(a)})}length(s,a){return this._addCheck({kind:"length",value:s,...ye.errToObj(a)})}nonempty(s){return this.min(1,ye.errToObj(s))}trim(){return new Kt({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Kt({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Kt({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(s=>s.kind==="datetime")}get isDate(){return!!this._def.checks.find(s=>s.kind==="date")}get isTime(){return!!this._def.checks.find(s=>s.kind==="time")}get isDuration(){return!!this._def.checks.find(s=>s.kind==="duration")}get isEmail(){return!!this._def.checks.find(s=>s.kind==="email")}get isURL(){return!!this._def.checks.find(s=>s.kind==="url")}get isEmoji(){return!!this._def.checks.find(s=>s.kind==="emoji")}get isUUID(){return!!this._def.checks.find(s=>s.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(s=>s.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(s=>s.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(s=>s.kind==="cuid2")}get isULID(){return!!this._def.checks.find(s=>s.kind==="ulid")}get isIP(){return!!this._def.checks.find(s=>s.kind==="ip")}get isCIDR(){return!!this._def.checks.find(s=>s.kind==="cidr")}get isBase64(){return!!this._def.checks.find(s=>s.kind==="base64")}get isBase64url(){return!!this._def.checks.find(s=>s.kind==="base64url")}get minLength(){let s=null;for(const a of this._def.checks)a.kind==="min"&&(s===null||a.value>s)&&(s=a.value);return s}get maxLength(){let s=null;for(const a of this._def.checks)a.kind==="max"&&(s===null||a.value<s)&&(s=a.value);return s}}Kt.create=t=>new Kt({checks:[],typeName:Ee.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...Ie(t)});function sd(t,s){const a=(t.toString().split(".")[1]||"").length,r=(s.toString().split(".")[1]||"").length,i=a>r?a:r,n=Number.parseInt(t.toFixed(i).replace(".","")),l=Number.parseInt(s.toFixed(i).replace(".",""));return n%l/10**i}class vs extends Le{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(s){if(this._def.coerce&&(s.data=Number(s.data)),this._getType(s)!==fe.number){const n=this._getOrReturnCtx(s);return pe(n,{code:ie.invalid_type,expected:fe.number,received:n.parsedType}),Fe}let r;const i=new St;for(const n of this._def.checks)n.kind==="int"?qe.isInteger(s.data)||(r=this._getOrReturnCtx(s,r),pe(r,{code:ie.invalid_type,expected:"integer",received:"float",message:n.message}),i.dirty()):n.kind==="min"?(n.inclusive?s.data<n.value:s.data<=n.value)&&(r=this._getOrReturnCtx(s,r),pe(r,{code:ie.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),i.dirty()):n.kind==="max"?(n.inclusive?s.data>n.value:s.data>=n.value)&&(r=this._getOrReturnCtx(s,r),pe(r,{code:ie.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),i.dirty()):n.kind==="multipleOf"?sd(s.data,n.value)!==0&&(r=this._getOrReturnCtx(s,r),pe(r,{code:ie.not_multiple_of,multipleOf:n.value,message:n.message}),i.dirty()):n.kind==="finite"?Number.isFinite(s.data)||(r=this._getOrReturnCtx(s,r),pe(r,{code:ie.not_finite,message:n.message}),i.dirty()):qe.assertNever(n);return{status:i.value,value:s.data}}gte(s,a){return this.setLimit("min",s,!0,ye.toString(a))}gt(s,a){return this.setLimit("min",s,!1,ye.toString(a))}lte(s,a){return this.setLimit("max",s,!0,ye.toString(a))}lt(s,a){return this.setLimit("max",s,!1,ye.toString(a))}setLimit(s,a,r,i){return new vs({...this._def,checks:[...this._def.checks,{kind:s,value:a,inclusive:r,message:ye.toString(i)}]})}_addCheck(s){return new vs({...this._def,checks:[...this._def.checks,s]})}int(s){return this._addCheck({kind:"int",message:ye.toString(s)})}positive(s){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ye.toString(s)})}negative(s){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ye.toString(s)})}nonpositive(s){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ye.toString(s)})}nonnegative(s){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ye.toString(s)})}multipleOf(s,a){return this._addCheck({kind:"multipleOf",value:s,message:ye.toString(a)})}finite(s){return this._addCheck({kind:"finite",message:ye.toString(s)})}safe(s){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ye.toString(s)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ye.toString(s)})}get minValue(){let s=null;for(const a of this._def.checks)a.kind==="min"&&(s===null||a.value>s)&&(s=a.value);return s}get maxValue(){let s=null;for(const a of this._def.checks)a.kind==="max"&&(s===null||a.value<s)&&(s=a.value);return s}get isInt(){return!!this._def.checks.find(s=>s.kind==="int"||s.kind==="multipleOf"&&qe.isInteger(s.value))}get isFinite(){let s=null,a=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(a===null||r.value>a)&&(a=r.value):r.kind==="max"&&(s===null||r.value<s)&&(s=r.value)}return Number.isFinite(a)&&Number.isFinite(s)}}vs.create=t=>new vs({checks:[],typeName:Ee.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Ie(t)});class Gs extends Le{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(s){if(this._def.coerce)try{s.data=BigInt(s.data)}catch{return this._getInvalidInput(s)}if(this._getType(s)!==fe.bigint)return this._getInvalidInput(s);let r;const i=new St;for(const n of this._def.checks)n.kind==="min"?(n.inclusive?s.data<n.value:s.data<=n.value)&&(r=this._getOrReturnCtx(s,r),pe(r,{code:ie.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),i.dirty()):n.kind==="max"?(n.inclusive?s.data>n.value:s.data>=n.value)&&(r=this._getOrReturnCtx(s,r),pe(r,{code:ie.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),i.dirty()):n.kind==="multipleOf"?s.data%n.value!==BigInt(0)&&(r=this._getOrReturnCtx(s,r),pe(r,{code:ie.not_multiple_of,multipleOf:n.value,message:n.message}),i.dirty()):qe.assertNever(n);return{status:i.value,value:s.data}}_getInvalidInput(s){const a=this._getOrReturnCtx(s);return pe(a,{code:ie.invalid_type,expected:fe.bigint,received:a.parsedType}),Fe}gte(s,a){return this.setLimit("min",s,!0,ye.toString(a))}gt(s,a){return this.setLimit("min",s,!1,ye.toString(a))}lte(s,a){return this.setLimit("max",s,!0,ye.toString(a))}lt(s,a){return this.setLimit("max",s,!1,ye.toString(a))}setLimit(s,a,r,i){return new Gs({...this._def,checks:[...this._def.checks,{kind:s,value:a,inclusive:r,message:ye.toString(i)}]})}_addCheck(s){return new Gs({...this._def,checks:[...this._def.checks,s]})}positive(s){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ye.toString(s)})}negative(s){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ye.toString(s)})}nonpositive(s){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ye.toString(s)})}nonnegative(s){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ye.toString(s)})}multipleOf(s,a){return this._addCheck({kind:"multipleOf",value:s,message:ye.toString(a)})}get minValue(){let s=null;for(const a of this._def.checks)a.kind==="min"&&(s===null||a.value>s)&&(s=a.value);return s}get maxValue(){let s=null;for(const a of this._def.checks)a.kind==="max"&&(s===null||a.value<s)&&(s=a.value);return s}}Gs.create=t=>new Gs({checks:[],typeName:Ee.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...Ie(t)});class hr extends Le{_parse(s){if(this._def.coerce&&(s.data=!!s.data),this._getType(s)!==fe.boolean){const r=this._getOrReturnCtx(s);return pe(r,{code:ie.invalid_type,expected:fe.boolean,received:r.parsedType}),Fe}return Tt(s.data)}}hr.create=t=>new hr({typeName:Ee.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Ie(t)});class xa extends Le{_parse(s){if(this._def.coerce&&(s.data=new Date(s.data)),this._getType(s)!==fe.date){const n=this._getOrReturnCtx(s);return pe(n,{code:ie.invalid_type,expected:fe.date,received:n.parsedType}),Fe}if(Number.isNaN(s.data.getTime())){const n=this._getOrReturnCtx(s);return pe(n,{code:ie.invalid_date}),Fe}const r=new St;let i;for(const n of this._def.checks)n.kind==="min"?s.data.getTime()<n.value&&(i=this._getOrReturnCtx(s,i),pe(i,{code:ie.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),r.dirty()):n.kind==="max"?s.data.getTime()>n.value&&(i=this._getOrReturnCtx(s,i),pe(i,{code:ie.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),r.dirty()):qe.assertNever(n);return{status:r.value,value:new Date(s.data.getTime())}}_addCheck(s){return new xa({...this._def,checks:[...this._def.checks,s]})}min(s,a){return this._addCheck({kind:"min",value:s.getTime(),message:ye.toString(a)})}max(s,a){return this._addCheck({kind:"max",value:s.getTime(),message:ye.toString(a)})}get minDate(){let s=null;for(const a of this._def.checks)a.kind==="min"&&(s===null||a.value>s)&&(s=a.value);return s!=null?new Date(s):null}get maxDate(){let s=null;for(const a of this._def.checks)a.kind==="max"&&(s===null||a.value<s)&&(s=a.value);return s!=null?new Date(s):null}}xa.create=t=>new xa({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Ee.ZodDate,...Ie(t)});class Ki extends Le{_parse(s){if(this._getType(s)!==fe.symbol){const r=this._getOrReturnCtx(s);return pe(r,{code:ie.invalid_type,expected:fe.symbol,received:r.parsedType}),Fe}return Tt(s.data)}}Ki.create=t=>new Ki({typeName:Ee.ZodSymbol,...Ie(t)});class Qi extends Le{_parse(s){if(this._getType(s)!==fe.undefined){const r=this._getOrReturnCtx(s);return pe(r,{code:ie.invalid_type,expected:fe.undefined,received:r.parsedType}),Fe}return Tt(s.data)}}Qi.create=t=>new Qi({typeName:Ee.ZodUndefined,...Ie(t)});class Xi extends Le{_parse(s){if(this._getType(s)!==fe.null){const r=this._getOrReturnCtx(s);return pe(r,{code:ie.invalid_type,expected:fe.null,received:r.parsedType}),Fe}return Tt(s.data)}}Xi.create=t=>new Xi({typeName:Ee.ZodNull,...Ie(t)});class Ji extends Le{constructor(){super(...arguments),this._any=!0}_parse(s){return Tt(s.data)}}Ji.create=t=>new Ji({typeName:Ee.ZodAny,...Ie(t)});class Zi extends Le{constructor(){super(...arguments),this._unknown=!0}_parse(s){return Tt(s.data)}}Zi.create=t=>new Zi({typeName:Ee.ZodUnknown,...Ie(t)});class ts extends Le{_parse(s){const a=this._getOrReturnCtx(s);return pe(a,{code:ie.invalid_type,expected:fe.never,received:a.parsedType}),Fe}}ts.create=t=>new ts({typeName:Ee.ZodNever,...Ie(t)});class Yi extends Le{_parse(s){if(this._getType(s)!==fe.undefined){const r=this._getOrReturnCtx(s);return pe(r,{code:ie.invalid_type,expected:fe.void,received:r.parsedType}),Fe}return Tt(s.data)}}Yi.create=t=>new Yi({typeName:Ee.ZodVoid,...Ie(t)});class Mt extends Le{_parse(s){const{ctx:a,status:r}=this._processInputParams(s),i=this._def;if(a.parsedType!==fe.array)return pe(a,{code:ie.invalid_type,expected:fe.array,received:a.parsedType}),Fe;if(i.exactLength!==null){const l=a.data.length>i.exactLength.value,o=a.data.length<i.exactLength.value;(l||o)&&(pe(a,{code:l?ie.too_big:ie.too_small,minimum:o?i.exactLength.value:void 0,maximum:l?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&a.data.length<i.minLength.value&&(pe(a,{code:ie.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&a.data.length>i.maxLength.value&&(pe(a,{code:ie.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),a.common.async)return Promise.all([...a.data].map((l,o)=>i.type._parseAsync(new es(a,l,a.path,o)))).then(l=>St.mergeArray(r,l));const n=[...a.data].map((l,o)=>i.type._parseSync(new es(a,l,a.path,o)));return St.mergeArray(r,n)}get element(){return this._def.type}min(s,a){return new Mt({...this._def,minLength:{value:s,message:ye.toString(a)}})}max(s,a){return new Mt({...this._def,maxLength:{value:s,message:ye.toString(a)}})}length(s,a){return new Mt({...this._def,exactLength:{value:s,message:ye.toString(a)}})}nonempty(s){return this.min(1,s)}}Mt.create=(t,s)=>new Mt({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Ee.ZodArray,...Ie(s)});function fs(t){if(t instanceof at){const s={};for(const a in t.shape){const r=t.shape[a];s[a]=Qt.create(fs(r))}return new at({...t._def,shape:()=>s})}else return t instanceof Mt?new Mt({...t._def,type:fs(t.element)}):t instanceof Qt?Qt.create(fs(t.unwrap())):t instanceof Ns?Ns.create(fs(t.unwrap())):t instanceof us?us.create(t.items.map(s=>fs(s))):t}class at extends Le{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const s=this._def.shape(),a=qe.objectKeys(s);return this._cached={shape:s,keys:a},this._cached}_parse(s){if(this._getType(s)!==fe.object){const g=this._getOrReturnCtx(s);return pe(g,{code:ie.invalid_type,expected:fe.object,received:g.parsedType}),Fe}const{status:r,ctx:i}=this._processInputParams(s),{shape:n,keys:l}=this._getCached(),o=[];if(!(this._def.catchall instanceof ts&&this._def.unknownKeys==="strip"))for(const g in i.data)l.includes(g)||o.push(g);const d=[];for(const g of l){const x=n[g],b=i.data[g];d.push({key:{status:"valid",value:g},value:x._parse(new es(i,b,i.path,g)),alwaysSet:g in i.data})}if(this._def.catchall instanceof ts){const g=this._def.unknownKeys;if(g==="passthrough")for(const x of o)d.push({key:{status:"valid",value:x},value:{status:"valid",value:i.data[x]}});else if(g==="strict")o.length>0&&(pe(i,{code:ie.unrecognized_keys,keys:o}),r.dirty());else if(g!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const g=this._def.catchall;for(const x of o){const b=i.data[x];d.push({key:{status:"valid",value:x},value:g._parse(new es(i,b,i.path,x)),alwaysSet:x in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const g=[];for(const x of d){const b=await x.key,u=await x.value;g.push({key:b,value:u,alwaysSet:x.alwaysSet})}return g}).then(g=>St.mergeObjectSync(r,g)):St.mergeObjectSync(r,d)}get shape(){return this._def.shape()}strict(s){return ye.errToObj,new at({...this._def,unknownKeys:"strict",...s!==void 0?{errorMap:(a,r)=>{var n,l;const i=((l=(n=this._def).errorMap)==null?void 0:l.call(n,a,r).message)??r.defaultError;return a.code==="unrecognized_keys"?{message:ye.errToObj(s).message??i}:{message:i}}}:{}})}strip(){return new at({...this._def,unknownKeys:"strip"})}passthrough(){return new at({...this._def,unknownKeys:"passthrough"})}extend(s){return new at({...this._def,shape:()=>({...this._def.shape(),...s})})}merge(s){return new at({unknownKeys:s._def.unknownKeys,catchall:s._def.catchall,shape:()=>({...this._def.shape(),...s._def.shape()}),typeName:Ee.ZodObject})}setKey(s,a){return this.augment({[s]:a})}catchall(s){return new at({...this._def,catchall:s})}pick(s){const a={};for(const r of qe.objectKeys(s))s[r]&&this.shape[r]&&(a[r]=this.shape[r]);return new at({...this._def,shape:()=>a})}omit(s){const a={};for(const r of qe.objectKeys(this.shape))s[r]||(a[r]=this.shape[r]);return new at({...this._def,shape:()=>a})}deepPartial(){return fs(this)}partial(s){const a={};for(const r of qe.objectKeys(this.shape)){const i=this.shape[r];s&&!s[r]?a[r]=i:a[r]=i.optional()}return new at({...this._def,shape:()=>a})}required(s){const a={};for(const r of qe.objectKeys(this.shape))if(s&&!s[r])a[r]=this.shape[r];else{let n=this.shape[r];for(;n instanceof Qt;)n=n._def.innerType;a[r]=n}return new at({...this._def,shape:()=>a})}keyof(){return jl(qe.objectKeys(this.shape))}}at.create=(t,s)=>new at({shape:()=>t,unknownKeys:"strip",catchall:ts.create(),typeName:Ee.ZodObject,...Ie(s)});at.strictCreate=(t,s)=>new at({shape:()=>t,unknownKeys:"strict",catchall:ts.create(),typeName:Ee.ZodObject,...Ie(s)});at.lazycreate=(t,s)=>new at({shape:t,unknownKeys:"strip",catchall:ts.create(),typeName:Ee.ZodObject,...Ie(s)});class ba extends Le{_parse(s){const{ctx:a}=this._processInputParams(s),r=this._def.options;function i(n){for(const o of n)if(o.result.status==="valid")return o.result;for(const o of n)if(o.result.status==="dirty")return a.common.issues.push(...o.ctx.common.issues),o.result;const l=n.map(o=>new Gt(o.ctx.common.issues));return pe(a,{code:ie.invalid_union,unionErrors:l}),Fe}if(a.common.async)return Promise.all(r.map(async n=>{const l={...a,common:{...a.common,issues:[]},parent:null};return{result:await n._parseAsync({data:a.data,path:a.path,parent:l}),ctx:l}})).then(i);{let n;const l=[];for(const d of r){const g={...a,common:{...a.common,issues:[]},parent:null},x=d._parseSync({data:a.data,path:a.path,parent:g});if(x.status==="valid")return x;x.status==="dirty"&&!n&&(n={result:x,ctx:g}),g.common.issues.length&&l.push(g.common.issues)}if(n)return a.common.issues.push(...n.ctx.common.issues),n.result;const o=l.map(d=>new Gt(d));return pe(a,{code:ie.invalid_union,unionErrors:o}),Fe}}get options(){return this._def.options}}ba.create=(t,s)=>new ba({options:t,typeName:Ee.ZodUnion,...Ie(s)});function fr(t,s){const a=zt(t),r=zt(s);if(t===s)return{valid:!0,data:t};if(a===fe.object&&r===fe.object){const i=qe.objectKeys(s),n=qe.objectKeys(t).filter(o=>i.indexOf(o)!==-1),l={...t,...s};for(const o of n){const d=fr(t[o],s[o]);if(!d.valid)return{valid:!1};l[o]=d.data}return{valid:!0,data:l}}else if(a===fe.array&&r===fe.array){if(t.length!==s.length)return{valid:!1};const i=[];for(let n=0;n<t.length;n++){const l=t[n],o=s[n],d=fr(l,o);if(!d.valid)return{valid:!1};i.push(d.data)}return{valid:!0,data:i}}else return a===fe.date&&r===fe.date&&+t==+s?{valid:!0,data:t}:{valid:!1}}class ya extends Le{_parse(s){const{status:a,ctx:r}=this._processInputParams(s),i=(n,l)=>{if(Wi(n)||Wi(l))return Fe;const o=fr(n.value,l.value);return o.valid?((zi(n)||zi(l))&&a.dirty(),{status:a.value,value:o.data}):(pe(r,{code:ie.invalid_intersection_types}),Fe)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([n,l])=>i(n,l)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}ya.create=(t,s,a)=>new ya({left:t,right:s,typeName:Ee.ZodIntersection,...Ie(a)});class us extends Le{_parse(s){const{status:a,ctx:r}=this._processInputParams(s);if(r.parsedType!==fe.array)return pe(r,{code:ie.invalid_type,expected:fe.array,received:r.parsedType}),Fe;if(r.data.length<this._def.items.length)return pe(r,{code:ie.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Fe;!this._def.rest&&r.data.length>this._def.items.length&&(pe(r,{code:ie.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),a.dirty());const n=[...r.data].map((l,o)=>{const d=this._def.items[o]||this._def.rest;return d?d._parse(new es(r,l,r.path,o)):null}).filter(l=>!!l);return r.common.async?Promise.all(n).then(l=>St.mergeArray(a,l)):St.mergeArray(a,n)}get items(){return this._def.items}rest(s){return new us({...this._def,rest:s})}}us.create=(t,s)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new us({items:t,typeName:Ee.ZodTuple,rest:null,...Ie(s)})};class en extends Le{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(s){const{status:a,ctx:r}=this._processInputParams(s);if(r.parsedType!==fe.map)return pe(r,{code:ie.invalid_type,expected:fe.map,received:r.parsedType}),Fe;const i=this._def.keyType,n=this._def.valueType,l=[...r.data.entries()].map(([o,d],g)=>({key:i._parse(new es(r,o,r.path,[g,"key"])),value:n._parse(new es(r,d,r.path,[g,"value"]))}));if(r.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const d of l){const g=await d.key,x=await d.value;if(g.status==="aborted"||x.status==="aborted")return Fe;(g.status==="dirty"||x.status==="dirty")&&a.dirty(),o.set(g.value,x.value)}return{status:a.value,value:o}})}else{const o=new Map;for(const d of l){const g=d.key,x=d.value;if(g.status==="aborted"||x.status==="aborted")return Fe;(g.status==="dirty"||x.status==="dirty")&&a.dirty(),o.set(g.value,x.value)}return{status:a.value,value:o}}}}en.create=(t,s,a)=>new en({valueType:s,keyType:t,typeName:Ee.ZodMap,...Ie(a)});class Ws extends Le{_parse(s){const{status:a,ctx:r}=this._processInputParams(s);if(r.parsedType!==fe.set)return pe(r,{code:ie.invalid_type,expected:fe.set,received:r.parsedType}),Fe;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(pe(r,{code:ie.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),a.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(pe(r,{code:ie.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),a.dirty());const n=this._def.valueType;function l(d){const g=new Set;for(const x of d){if(x.status==="aborted")return Fe;x.status==="dirty"&&a.dirty(),g.add(x.value)}return{status:a.value,value:g}}const o=[...r.data.values()].map((d,g)=>n._parse(new es(r,d,r.path,g)));return r.common.async?Promise.all(o).then(d=>l(d)):l(o)}min(s,a){return new Ws({...this._def,minSize:{value:s,message:ye.toString(a)}})}max(s,a){return new Ws({...this._def,maxSize:{value:s,message:ye.toString(a)}})}size(s,a){return this.min(s,a).max(s,a)}nonempty(s){return this.min(1,s)}}Ws.create=(t,s)=>new Ws({valueType:t,minSize:null,maxSize:null,typeName:Ee.ZodSet,...Ie(s)});class tn extends Le{get schema(){return this._def.getter()}_parse(s){const{ctx:a}=this._processInputParams(s);return this._def.getter()._parse({data:a.data,path:a.path,parent:a})}}tn.create=(t,s)=>new tn({getter:t,typeName:Ee.ZodLazy,...Ie(s)});class sn extends Le{_parse(s){if(s.data!==this._def.value){const a=this._getOrReturnCtx(s);return pe(a,{received:a.data,code:ie.invalid_literal,expected:this._def.value}),Fe}return{status:"valid",value:s.data}}get value(){return this._def.value}}sn.create=(t,s)=>new sn({value:t,typeName:Ee.ZodLiteral,...Ie(s)});function jl(t,s){return new js({values:t,typeName:Ee.ZodEnum,...Ie(s)})}class js extends Le{_parse(s){if(typeof s.data!="string"){const a=this._getOrReturnCtx(s),r=this._def.values;return pe(a,{expected:qe.joinValues(r),received:a.parsedType,code:ie.invalid_type}),Fe}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(s.data)){const a=this._getOrReturnCtx(s),r=this._def.values;return pe(a,{received:a.data,code:ie.invalid_enum_value,options:r}),Fe}return Tt(s.data)}get options(){return this._def.values}get enum(){const s={};for(const a of this._def.values)s[a]=a;return s}get Values(){const s={};for(const a of this._def.values)s[a]=a;return s}get Enum(){const s={};for(const a of this._def.values)s[a]=a;return s}extract(s,a=this._def){return js.create(s,{...this._def,...a})}exclude(s,a=this._def){return js.create(this.options.filter(r=>!s.includes(r)),{...this._def,...a})}}js.create=jl;class an extends Le{_parse(s){const a=qe.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(s);if(r.parsedType!==fe.string&&r.parsedType!==fe.number){const i=qe.objectValues(a);return pe(r,{expected:qe.joinValues(i),received:r.parsedType,code:ie.invalid_type}),Fe}if(this._cache||(this._cache=new Set(qe.getValidEnumValues(this._def.values))),!this._cache.has(s.data)){const i=qe.objectValues(a);return pe(r,{received:r.data,code:ie.invalid_enum_value,options:i}),Fe}return Tt(s.data)}get enum(){return this._def.values}}an.create=(t,s)=>new an({values:t,typeName:Ee.ZodNativeEnum,...Ie(s)});class va extends Le{unwrap(){return this._def.type}_parse(s){const{ctx:a}=this._processInputParams(s);if(a.parsedType!==fe.promise&&a.common.async===!1)return pe(a,{code:ie.invalid_type,expected:fe.promise,received:a.parsedType}),Fe;const r=a.parsedType===fe.promise?a.data:Promise.resolve(a.data);return Tt(r.then(i=>this._def.type.parseAsync(i,{path:a.path,errorMap:a.common.contextualErrorMap})))}}va.create=(t,s)=>new va({type:t,typeName:Ee.ZodPromise,...Ie(s)});class ws extends Le{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ee.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(s){const{status:a,ctx:r}=this._processInputParams(s),i=this._def.effect||null,n={addIssue:l=>{pe(r,l),l.fatal?a.abort():a.dirty()},get path(){return r.path}};if(n.addIssue=n.addIssue.bind(n),i.type==="preprocess"){const l=i.transform(r.data,n);if(r.common.async)return Promise.resolve(l).then(async o=>{if(a.value==="aborted")return Fe;const d=await this._def.schema._parseAsync({data:o,path:r.path,parent:r});return d.status==="aborted"?Fe:d.status==="dirty"||a.value==="dirty"?_s(d.value):d});{if(a.value==="aborted")return Fe;const o=this._def.schema._parseSync({data:l,path:r.path,parent:r});return o.status==="aborted"?Fe:o.status==="dirty"||a.value==="dirty"?_s(o.value):o}}if(i.type==="refinement"){const l=o=>{const d=i.refinement(o,n);if(r.common.async)return Promise.resolve(d);if(d instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?Fe:(o.status==="dirty"&&a.dirty(),l(o.value),{status:a.value,value:o.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>o.status==="aborted"?Fe:(o.status==="dirty"&&a.dirty(),l(o.value).then(()=>({status:a.value,value:o.value}))))}if(i.type==="transform")if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!ys(l))return Fe;const o=i.transform(l.value,n);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:a.value,value:o}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>ys(l)?Promise.resolve(i.transform(l.value,n)).then(o=>({status:a.value,value:o})):Fe);qe.assertNever(i)}}ws.create=(t,s,a)=>new ws({schema:t,typeName:Ee.ZodEffects,effect:s,...Ie(a)});ws.createWithPreprocess=(t,s,a)=>new ws({schema:s,effect:{type:"preprocess",transform:t},typeName:Ee.ZodEffects,...Ie(a)});class Qt extends Le{_parse(s){return this._getType(s)===fe.undefined?Tt(void 0):this._def.innerType._parse(s)}unwrap(){return this._def.innerType}}Qt.create=(t,s)=>new Qt({innerType:t,typeName:Ee.ZodOptional,...Ie(s)});class Ns extends Le{_parse(s){return this._getType(s)===fe.null?Tt(null):this._def.innerType._parse(s)}unwrap(){return this._def.innerType}}Ns.create=(t,s)=>new Ns({innerType:t,typeName:Ee.ZodNullable,...Ie(s)});class xr extends Le{_parse(s){const{ctx:a}=this._processInputParams(s);let r=a.data;return a.parsedType===fe.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:a.path,parent:a})}removeDefault(){return this._def.innerType}}xr.create=(t,s)=>new xr({innerType:t,typeName:Ee.ZodDefault,defaultValue:typeof s.default=="function"?s.default:()=>s.default,...Ie(s)});class br extends Le{_parse(s){const{ctx:a}=this._processInputParams(s),r={...a,common:{...a.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return fa(i)?i.then(n=>({status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new Gt(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Gt(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}br.create=(t,s)=>new br({innerType:t,typeName:Ee.ZodCatch,catchValue:typeof s.catch=="function"?s.catch:()=>s.catch,...Ie(s)});class rn extends Le{_parse(s){if(this._getType(s)!==fe.nan){const r=this._getOrReturnCtx(s);return pe(r,{code:ie.invalid_type,expected:fe.nan,received:r.parsedType}),Fe}return{status:"valid",value:s.data}}}rn.create=t=>new rn({typeName:Ee.ZodNaN,...Ie(t)});class ad extends Le{_parse(s){const{ctx:a}=this._processInputParams(s),r=a.data;return this._def.type._parse({data:r,path:a.path,parent:a})}unwrap(){return this._def.type}}class Mr extends Le{_parse(s){const{status:a,ctx:r}=this._processInputParams(s);if(r.common.async)return(async()=>{const n=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return n.status==="aborted"?Fe:n.status==="dirty"?(a.dirty(),_s(n.value)):this._def.out._parseAsync({data:n.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Fe:i.status==="dirty"?(a.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(s,a){return new Mr({in:s,out:a,typeName:Ee.ZodPipeline})}}class yr extends Le{_parse(s){const a=this._def.innerType._parse(s),r=i=>(ys(i)&&(i.value=Object.freeze(i.value)),i);return fa(a)?a.then(i=>r(i)):r(a)}unwrap(){return this._def.innerType}}yr.create=(t,s)=>new yr({innerType:t,typeName:Ee.ZodReadonly,...Ie(s)});var Ee;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Ee||(Ee={}));const rt=Kt.create,rd=vs.create,bs=hr.create;ts.create;Mt.create;const Lr=at.create;ba.create;ya.create;us.create;js.create;va.create;Qt.create;Ns.create;const id="pickntrust-admin-password";function Ve(){try{if(typeof window<"u"&&window.localStorage){const t=window.localStorage.getItem(id);if(t&&t.trim().length>0)return t.trim();const s=window.localStorage.getItem("adminPassword");if(s&&s.trim().length>0)return s.trim()}}catch{}return""}function nd(){var P,L,H,me,le,k,U,ae,xe;const{toast:t}=ht(),s=bt(),[a,r]=E.useState("products"),[i,n]=E.useState(!1),[l,o]=E.useState({}),[d,g]=E.useState(""),[x,b]=E.useState(!1),u=(v,M)=>{const te=typeof v=="string"?parseFloat(v.toString().replace(/,/g,"")):v;return Ua(te,M||"INR")},[f,w]=E.useState({name:"",description:"",price:"",originalPrice:"",currency:"INR",imageUrl:"",affiliateUrl:"",category:"",subcategory:"",gender:"",rating:"4.5",reviewCount:"100",discount:"",isFeatured:!0,isService:!1,isAIApp:!1,hasTimer:!1,timerDuration:"24",pricingType:"one-time",monthlyPrice:"",yearlyPrice:"",isFree:!1,customPricingDetails:"",displayPages:["home"],customFields:{}}),[B,C]=E.useState([]),[q,R]=E.useState(null),[Z,p]=E.useState(null),[I,F]=E.useState(""),[_,j]=E.useState([]),A=v=>_.includes(v),G=v=>{j(M=>M.includes(v)?M.filter(te=>te!==v):[...M,v])},J=()=>j([]),K=()=>{C([...B,{key:"",value:""}])},ee=v=>{const M=B.filter((Ke,Je)=>Je!==v);C(M);const te={...f.customFields},Te=B[v];Te.key&&delete te[Te.key],w({...f,customFields:te})},ue=(v,M,te)=>{const Te=[...B],Ke=Te[v].key;Te[v]={key:M,value:te},C(Te);const Je={...f.customFields};Ke&&Ke!==M&&delete Je[Ke],M&&(Je[M]=te),w({...f,customFields:Je})},{data:N=[],isLoading:$,error:ge}=Re({queryKey:["/api/products"],queryFn:async()=>{try{console.log("Fetching products from /api/products...");const v=await fetch("/api/products");if(console.log("Response status:",v.status),!v.ok){const te=await v.text();throw console.error("API Error:",v.status,te),new Error(`Failed to fetch products: ${v.status} ${te}`)}const M=await v.json();return console.log("API Response data:",M),Array.isArray(M)?(console.log("Data is array, returning:",M.length,"products"),M):M&&M.products&&Array.isArray(M.products)?(console.log("Data has products array, returning:",M.products.length,"products"),M.products):M&&typeof M=="object"?(console.log("Data is object but no products array, returning empty array"),[]):(console.log("Unexpected data format, returning empty array"),[])}catch(v){throw console.error("Fetch error:",v),v}},retry:1,retryDelay:1e3,staleTime:3e4}),Pe=be({mutationFn:async()=>{if(!Z)throw new Error("Please select a CSV file");const v=new FormData;v.append("file",Z),I&&v.append("password",I);const M=await fetch("/api/admin/products/bulk-upload",{method:"POST",body:v});if(!M.ok){const te=await M.text();throw new Error(te||"Bulk upload failed")}return M.json()},onSuccess:v=>{t({title:"CSV Bulk Upload Complete",description:`Inserted ${v.inserted}/${v.processed} rows. Failed: ${v.failed}`}),s.invalidateQueries({queryKey:["/api/products"]}),p(null)},onError:v=>{t({title:"Upload Error",description:(v==null?void 0:v.message)||"Failed to upload CSV",variant:"destructive"})}}),{data:Y=[]}=Re({queryKey:["/api/nav-tabs"],queryFn:async()=>{let v;try{v=await fetch("/api/nav-tabs",{method:"GET",headers:{"Content-Type":"application/json"},mode:"cors"})}catch{console.log("Direct call failed, trying proxy..."),v=await fetch("/api/nav-tabs")}return v.ok?v.json():[]},staleTime:0,refetchOnWindowFocus:!0,refetchInterval:3e4}),ke=[{id:"home",label:'<i className="fas fa-home"></i> Home Page',description:"Main website"},{id:"trending",label:"Trending",description:"Trending products page"},...(Array.isArray(Y)?Y:[]).filter(v=>v.is_active).sort((v,M)=>v.display_order-M.display_order).map(v=>({id:v.slug,label:`${v.name}`,description:v.description||"Navigation page"}))],{data:_e=[]}=Re({queryKey:["/api/categories"],queryFn:async()=>{const v=await fetch("/api/categories");if(!v.ok)throw new Error("Failed to fetch categories");return v.json()},retry:1,staleTime:5*60*1e3}),{data:je=[]}=Re({queryKey:["/api/categories/forms/products"],queryFn:async()=>{const v=await fetch("/api/categories/forms/products");if(!v.ok)throw new Error("Failed to fetch product categories");return v.json()},retry:1,staleTime:0,gcTime:60*1e3,refetchOnMount:"always",refetchOnReconnect:"always"}),{data:Be=[]}=Re({queryKey:["/api/categories/forms/services"],queryFn:async()=>{const v=await fetch("/api/categories/forms/services");if(!v.ok)throw new Error("Failed to fetch service categories");return v.json()},retry:1,staleTime:0,gcTime:60*1e3,refetchOnMount:"always",refetchOnReconnect:"always"}),{data:S=[]}=Re({queryKey:["/api/categories/forms/aiapps"],queryFn:async()=>{const v=await fetch("/api/categories/forms/aiapps");if(!v.ok)throw new Error("Failed to fetch AI app categories");return v.json()},retry:1,staleTime:0,gcTime:60*1e3,refetchOnMount:"always",refetchOnReconnect:"always"}),{data:m=[]}=Re({queryKey:["/api/categories/subcategories",f.category||""],queryFn:async()=>{if(!f.category)return[];const v=await fetch(`/api/categories/subcategories?parent=${encodeURIComponent(f.category)}`);return v.ok?v.json():[]},retry:1,staleTime:0,enabled:!!f.category}),c=be({mutationFn:async v=>{var as;const M=v.price?v.price.toString().replace(/[^\d.]/g,""):"0",te=v.originalPrice?v.originalPrice.toString().replace(/[^\d.]/g,""):null,Te=Object.keys(v.customFields||{}).length>0?JSON.stringify(v.customFields):null,Ke=v.monthlyPrice?v.monthlyPrice.toString().replace(/[^\d.]/g,""):"",Je=v.yearlyPrice?v.yearlyPrice.toString().replace(/[^\d.]/g,""):"";let Vt=Ke,lt=Je;v.pricingType==="monthly"&&!Ke&&M&&M!=="0"&&(Vt=M),v.pricingType==="yearly"&&!Je&&M&&M!=="0"&&(lt=M);const Ft={password:"pickntrust2025",name:v.name.trim(),description:v.description.trim(),price:parseFloat(M)||0,originalPrice:te?parseFloat(te):null,currency:v.currency||"INR",imageUrl:v.imageUrl.trim(),affiliateUrl:v.affiliateUrl.trim(),category:v.category,subcategory:v.subcategory||null,gender:v.gender||null,rating:parseFloat(v.rating)||4.5,reviewCount:parseInt(v.reviewCount)||100,discount:v.discount?parseInt(v.discount):null,isFeatured:!!v.isFeatured,isService:!!v.isService,isAIApp:!!v.isAIApp,isNew:!1,hasTimer:!!v.hasTimer,timerDuration:v.hasTimer?parseInt(v.timerDuration):null,customFields:Te,pricingType:v.pricingType||"one-time",monthlyPrice:Vt||null,yearlyPrice:lt||null,isFree:!!v.isFree,priceDescription:((as=v.customPricingDetails)==null?void 0:as.trim())||null,displayPages:Array.from(new Set([...v.displayPages||[],v.isAIApp?"apps":null].filter(Boolean)))};console.log("Sending product data:",Ft);const Et=await fetch("/api/admin/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ft)});if(!Et.ok){const rs=await Et.text();console.error("Server response:",rs);let is;try{is=JSON.parse(rs)}catch{is={message:rs||"Failed to add product"}}throw new Error(is.message||"Failed to add product")}return Et.json()},onSuccess:async v=>{if(s.invalidateQueries({queryKey:["/api/products"]}),s.invalidateQueries({queryKey:["/api/categories"]}),s.invalidateQueries({queryKey:["/api/categories/products"]}),s.invalidateQueries({queryKey:["/api/categories/services"]}),s.invalidateQueries({queryKey:["/api/products/apps"]}),s.invalidateQueries({queryKey:["/api/products/page/apps-ai-apps"]}),s.invalidateQueries({predicate:te=>te.queryKey[0]==="/api/products/apps"}),s.invalidateQueries({predicate:te=>te.queryKey[0]==="/api/apps/all-pages"}),s.invalidateQueries({queryKey:["/api/products/featured"]}),s.invalidateQueries({queryKey:["/api/products/services"]}),s.invalidateQueries({predicate:te=>te.queryKey[0]==="/api/products/page/top-picks"}),s.invalidateQueries({predicate:te=>te.queryKey[0]==="/api/services"}),["prime-picks","cue-picks","value-picks","click-picks","deals-hub","loot-box","top-picks","global-picks","trending"].forEach(te=>{s.invalidateQueries({queryKey:[`/api/products/page/${te}`]}),s.invalidateQueries({queryKey:[`/api/categories/page/${te}`]})}),v&&v.id)try{const te=f.isService||a==="services"?"service":"product";console.log(`<i className="fas fa-palette"></i> Triggering Canva automation for new ${te}:`,v.id);const Te=localStorage.getItem("adminPassword")||"pickntrust2025",Ke=await fetch("/api/admin/canva/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:Te,contentType:te,contentId:v.id})});if(Ke.ok){const Je=await Ke.json();console.log('<i className="fas fa-check-circle"></i> Canva automation triggered successfully:',Je),t({title:'<i className="fas fa-palette"></i> Automation Triggered!',description:"Product added and Canva automation started for social media posting."})}else console.log('<i className="fas fa-exclamation-triangle"></i> Canva automation failed, but product was added successfully'),t({title:'Product Added <i className="fas fa-check-circle"></i>',description:"Product added successfully! (Canva automation may be disabled)"})}catch(te){console.log('<i className="fas fa-exclamation-triangle"></i> Canva automation error:',te),t({title:'Product Added <i className="fas fa-check-circle"></i>',description:"Product added successfully! (Canva automation encountered an issue)"})}else t({title:"Success",description:"Product added successfully!"});w({name:"",description:"",price:"",originalPrice:"",currency:"INR",imageUrl:"",affiliateUrl:"",category:"",subcategory:"",gender:"",rating:"4.5",reviewCount:"100",discount:"",isFeatured:!0,isService:!1,isAIApp:!1,hasTimer:!1,timerDuration:"24",pricingType:"one-time",monthlyPrice:"",yearlyPrice:"",isFree:!1,customPricingDetails:"",displayPages:["home"],customFields:{}}),C([]),n(!1)},onError:v=>{t({title:"Error",description:v.message||"Failed to add product",variant:"destructive"})}}),y=be({mutationFn:async v=>{var as;if(!q)throw new Error("No product ID for update");const M=v.price?v.price.toString().replace(/[^\d.]/g,""):"0",te=v.originalPrice?v.originalPrice.toString().replace(/[^\d.]/g,""):null,Te=Object.keys(v.customFields||{}).length>0?JSON.stringify(v.customFields):null,Ke=v.monthlyPrice?v.monthlyPrice.toString().replace(/[^\d.]/g,""):"",Je=v.yearlyPrice?v.yearlyPrice.toString().replace(/[^\d.]/g,""):"";let Vt=Ke,lt=Je;v.pricingType==="monthly"&&!Ke&&M&&M!=="0"&&(Vt=M),v.pricingType==="yearly"&&!Je&&M&&M!=="0"&&(lt=M);const Ft={password:"pickntrust2025",name:v.name.trim(),description:v.description.trim(),price:parseFloat(M)||0,originalPrice:te?parseFloat(te):null,currency:v.currency||"INR",imageUrl:v.imageUrl.trim(),affiliateUrl:v.affiliateUrl.trim(),category:v.category,subcategory:v.subcategory||null,gender:v.gender||null,rating:parseFloat(v.rating)||4.5,reviewCount:parseInt(v.reviewCount)||100,discount:v.discount?parseInt(v.discount):null,isFeatured:!!v.isFeatured,isService:!!v.isService,isAIApp:!!v.isAIApp,isNew:!1,hasTimer:!!v.hasTimer,timerDuration:v.hasTimer?parseInt(v.timerDuration):null,customFields:Te,pricingType:v.pricingType||"one-time",monthlyPrice:Vt||null,yearlyPrice:lt||null,isFree:!!v.isFree,priceDescription:((as=v.customPricingDetails)==null?void 0:as.trim())||null,displayPages:Array.from(new Set([...v.displayPages||[],v.isAIApp?"apps":null].filter(Boolean)))};console.log("Updating product data:",Ft);const Et=await fetch(`/api/admin/products/${q}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ft)});if(!Et.ok){const rs=await Et.text();console.error("Server response:",rs);let is;try{is=JSON.parse(rs)}catch{is={message:rs||"Failed to update product"}}throw new Error(is.message||"Failed to update product")}return Et.json()},onSuccess:async v=>{s.invalidateQueries({queryKey:["/api/products"]}),s.invalidateQueries({queryKey:["/api/categories"]}),s.invalidateQueries({queryKey:["/api/categories/products"]}),s.invalidateQueries({queryKey:["/api/categories/services"]}),s.invalidateQueries({queryKey:["/api/products/apps"]}),s.invalidateQueries({queryKey:["/api/products/page/apps-ai-apps"]}),s.invalidateQueries({queryKey:["/api/products/featured"]}),s.invalidateQueries({queryKey:["/api/products/services"]}),["prime-picks","cue-picks","value-picks","click-picks","deals-hub","loot-box","top-picks","global-picks","trending"].forEach(te=>{s.invalidateQueries({queryKey:[`/api/products/page/${te}`]}),s.invalidateQueries({queryKey:[`/api/categories/page/${te}`]})}),t({title:"Success",description:"Product updated successfully!"}),w({name:"",description:"",price:"",originalPrice:"",currency:"INR",imageUrl:"",affiliateUrl:"",category:"",subcategory:"",gender:"",rating:"4.5",reviewCount:"100",discount:"",isFeatured:!0,isService:!1,isAIApp:!1,hasTimer:!1,timerDuration:"24",pricingType:"one-time",monthlyPrice:"",yearlyPrice:"",isFree:!1,customPricingDetails:"",displayPages:["home"],customFields:{}}),C([]),R(null),n(!1)},onError:v=>{t({title:"Error",description:v.message||"Failed to update product",variant:"destructive"})}}),O=be({mutationFn:async v=>{const M=await fetch("/api/products/extract",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:v})});if(!M.ok)throw new Error("Failed to extract product details");return M.json()},onSuccess:v=>{if(v.success&&v.data){const M=v.data;w({name:M.name||"",description:M.description||"",price:M.price||"",originalPrice:M.originalPrice||"",currency:M.currency||"INR",imageUrl:M.imageUrl||"",affiliateUrl:M.affiliateUrl||d,category:M.category||"Electronics & Gadgets",subcategory:"",gender:"",rating:M.rating||"4.5",reviewCount:M.reviewCount||"100",discount:M.discount||"",isFeatured:!0,isService:!1,isAIApp:!1,hasTimer:!1,timerDuration:"24",pricingType:"one-time",monthlyPrice:"",yearlyPrice:"",isFree:!1,customPricingDetails:"",displayPages:["home"],customFields:{}}),C([]),g(""),n(!0),t({title:"Product Extracted!",description:"Product details have been extracted. You can now edit and save."})}},onError:()=>{t({title:"Extraction Failed",description:"Could not extract product details from the URL. You can still add manually.",variant:"destructive"})}}),Q=be({mutationFn:async v=>{const te=await fetch(`/api/admin/products/${v}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:"pickntrust2025"})});if(!te.ok){const Te=await te.json();throw new Error(Te.message||"Failed to delete product")}return te.json()},onSuccess:()=>{t({title:"Success",description:"Product deleted from everywhere on the website!"}),s.invalidateQueries({queryKey:["/api/products"]}),s.invalidateQueries({queryKey:["/api/products/featured"]}),s.invalidateQueries({queryKey:["/api/products/services"]}),s.invalidateQueries({predicate:M=>M.queryKey[0]==="/api/products/category"}),["prime-picks","cue-picks","value-picks","click-picks","deals-hub","loot-box","top-picks","global-picks","trending"].forEach(M=>{s.invalidateQueries({queryKey:[`/api/products/page/${M}`]}),s.invalidateQueries({queryKey:[`/api/categories/page/${M}`]})}),s.invalidateQueries({queryKey:["/api/admin/stats"]}),s.removeQueries({predicate:M=>typeof M.queryKey[0]=="string"&&M.queryKey[0].includes("/api/products")})},onError:v=>{t({title:"Error",description:v.message||"Failed to delete product",variant:"destructive"})}}),V=v=>{if(v.preventDefault(),!f.name.trim()){t({title:"Validation Error",description:`${a==="services"?"Service":a==="apps"?"App":"Product"} name is required`,variant:"destructive"});return}if(a==="services"||a==="apps"){if(!f.isFree&&f.pricingType!=="free"){const M=f.pricingType==="custom",te=f.pricingType==="one-time",Te=f.pricingType==="monthly",Ke=f.pricingType==="yearly";if(!M&&te&&!f.price.trim()){t({title:"Validation Error",description:"Price is required for this pricing type",variant:"destructive"});return}if(!M&&Te&&!f.monthlyPrice.trim()){t({title:"Validation Error",description:"Monthly price is required for this pricing type",variant:"destructive"});return}if(!M&&Ke&&!f.yearlyPrice.trim()){t({title:"Validation Error",description:"Yearly price is required for this pricing type",variant:"destructive"});return}}}else if(!f.price.trim()){t({title:"Validation Error",description:"Product price is required",variant:"destructive"});return}if(!f.category){t({title:"Validation Error",description:"Please select a category",variant:"destructive"});return}if(!f.description.trim()){t({title:"Validation Error",description:`${a==="services"?"Service":"Product"} description is required`,variant:"destructive"});return}if(!f.imageUrl.trim()){t({title:"Validation Error",description:`${a==="services"?"Service":"Product"} image URL is required`,variant:"destructive"});return}if(!f.affiliateUrl.trim()){t({title:"Validation Error",description:"Affiliate URL is required",variant:"destructive"});return}console.log("Form validation passed. Submitting:",a==="services"?"service":"product",f),q?y.mutate(f):c.mutate(f)},se=()=>{if(!d.trim()){t({title:"URL Required",description:"Please enter a product URL to extract details.",variant:"destructive"});return}b(!0),O.mutate(d),setTimeout(()=>b(!1),2e3)},h=v=>{confirm("Are you sure you want to delete this product?")&&Q.mutate(v)},z=(v,M)=>{const te=`${window.location.origin}`,Te=String(M.currency||"INR").toUpperCase(),Ke=Ua(Number(M.price)||0,Te),Je=M.originalPrice?` (was ${Ua(Number(M.originalPrice)||0,Te)})`:"",Vt=`Check out this amazing deal: ${M.name} - ${Ke}${Je} at PickNTrust!`;let lt="";switch(v){case"facebook":lt="https://www.facebook.com/profile.php?id=61578969445670";break;case"telegram":lt="https://t.me/+m-O-S6SSpVU2NWU1";break;case"twitter":lt=`https://x.com/intent/tweet?text=${encodeURIComponent(Vt)}&url=${encodeURIComponent(te)}`;break;case"whatsapp":lt="https://web.whatsapp.com/channel/0029Vb6osphADTODpfUO4h0C";break;case"instagram":const Ft=`<i className="fas fa-shopping-bag"></i> Amazing Deal Alert! ${M.name}

<i className="fas fa-dollar-sign"></i> Price: ${M.price}${M.originalPrice?` (was ${M.originalPrice})`:""}

<i className="fas fa-sparkles"></i> Shop now at PickNTrust

#PickNTrust #Deals #${M.category.replace(/\s+/g,"")} #Shopping`;navigator.clipboard.writeText(Ft+`

`+te),window.open("https://www.instagram.com/","_blank"),t({title:"Instagram Ready!",description:"Content copied to clipboard and Instagram opened. Paste to create your post!"}),o(as=>({...as,[M.id]:!1}));return;case"youtube":lt="https://www.youtube.com/@PickNTrust";break;case"pinterest":lt="https://www.pinterest.com/PickNTrust/";break;case"linkedin":lt=`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(te)}`;break;case"reddit":lt=`https://www.reddit.com/submit?url=${encodeURIComponent(te)}&title=${encodeURIComponent(M.name)}`;break}lt&&window.open(lt,"_blank","width=600,height=400"),o(Ft=>({...Ft,[M.id]:!1}))},X=v=>{var M,te,Te;w({name:v.name,description:v.description,price:v.price.toString(),originalPrice:((M=v.originalPrice)==null?void 0:M.toString())||"",currency:v.currency||"INR",imageUrl:v.imageUrl,affiliateUrl:v.affiliateUrl,category:v.category,subcategory:v.subcategory||"",gender:"",rating:v.rating.toString(),reviewCount:v.reviewCount.toString(),discount:((te=v.discount)==null?void 0:te.toString())||"",isFeatured:v.isFeatured,isService:!!v.isService,isAIApp:!!v.isAIApp,hasTimer:!!v.hasTimer,timerDuration:((Te=v.timerDuration)==null?void 0:Te.toString())||"24",pricingType:v.pricingType||"one-time",monthlyPrice:v.monthlyPrice||"",yearlyPrice:v.yearlyPrice||"",isFree:!!v.isFree,customPricingDetails:v.priceDescription||"",displayPages:v.displayPages||["home"],customFields:{}}),C([]),R(v.id),n(!0),t({title:"Edit Mode",description:"Product loaded for editing. Make your changes and save."})},de=()=>{R(null),n(!1),w({name:"",description:"",price:"",originalPrice:"",currency:"INR",imageUrl:"",affiliateUrl:"",category:"",subcategory:"",gender:"",rating:"4.5",reviewCount:"100",discount:"",isFeatured:!0,isService:!1,isAIApp:!1,hasTimer:!1,timerDuration:"24",pricingType:"one-time",monthlyPrice:"",yearlyPrice:"",isFree:!1,customPricingDetails:"",displayPages:["home"],customFields:{}}),C([]),t({title:"Edit Cancelled",description:"Product editing has been cancelled."})},Se=(v,M)=>{if(v&&M){const te=parseFloat(v.replace(/,/g,"")),Te=parseFloat(M.replace(/,/g,""));if(Te>te&&Te>0)return Math.round((Te-te)/Te*100).toString()}return""},$e=(()=>{const v=M=>{const te=new Set,Te=[];for(const Ke of M){const Je=(Ke==null?void 0:Ke.name)??Ke;!Je||typeof Je!="string"||Ke!=null&&Ke.parentId||Je.includes(">")||te.has(Je)||(te.add(Je),Te.push(Je))}return Te};return a==="services"?Be.length>0?v(Be):["Credit Cards","Banking Services","Streaming Services","Software & Apps","Insurance","Investment","Mobile Apps","Subscription Services","Financial Services"]:a==="apps"?S.length>0?v(S):["AI Apps","Productivity Apps","Developer Tools","Design Apps","Writing Tools","Image Generation","Video Editing","Audio Tools","Data Analysis","Automation Tools","Business Intelligence","Machine Learning","Natural Language Processing","Computer Vision"]:je.length>0?v(je):["Electronics & Gadgets","Fashion & Clothing","Home & Kitchen","Health & Beauty","Sports & Fitness","Books & Education","Toys & Games","Automotive","Travel & Luggage","Pet Supplies","Office Supplies","Garden & Outdoor"]})();if(ge)return e.jsx(re,{children:e.jsxs(we,{children:[e.jsx(Ne,{className:"text-red-600",children:"Connection Error"}),e.jsxs(Ae,{className:"space-y-2",children:[e.jsx("p",{children:"Unable to connect to the server. This could be because:"}),e.jsxs("ul",{className:"list-disc list-inside text-sm space-y-1",children:[e.jsxs("li",{children:["The server is not running (try starting it with ",e.jsx("code",{className:"bg-gray-200 px-1 rounded",children:"npm run dev"}),")"]}),e.jsx("li",{children:"The server is running on a different port"}),e.jsx("li",{children:"There's a network connectivity issue"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(D,{onClick:()=>{window.location.reload()},variant:"outline",className:"mr-2",children:"Retry Connection"}),e.jsx(D,{onClick:()=>{n(!0),w({...f,isService:a==="services",isAIApp:a==="apps",category:""})},className:"bg-green-600 hover:bg-green-700",children:"Add Product Anyway"})]})]})]})});const Me=N.filter(v=>a==="services"?v.category==="Cards & Services"||v.isService===!0||$e.includes(v.category):a==="apps"?v.isAIApp===!0||$e.includes(v.category):v.category!=="Cards & Services"&&v.category!=="AI Apps"&&v.isService!==!0&&v.isAIApp!==!0&&!Be.map(M=>typeof M=="string"?M:M.name).includes(v.category));return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(re,{className:"bg-gradient-to-r from-blue-900/20 to-purple-900/20 border-blue-700",children:[e.jsxs(we,{children:[e.jsx(Ne,{className:"flex items-center gap-3 text-2xl",children:e.jsxs("div",{className:"flex items-center gap-2",children:[a==="products"?e.jsx("i",{className:"fas fa-box text-blue-400"}):a==="services"?e.jsx("i",{className:"fas fa-credit-card text-purple-400"}):e.jsx("i",{className:"fas fa-robot text-green-400"}),"Product, Service & Apps Management"]})}),e.jsx(Ae,{className:"text-blue-200",children:"Manage your products, services, and apps with comprehensive admin controls"})]}),e.jsx(ne,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(D,{variant:a==="products"?"default":"outline",onClick:()=>{r("products"),n(!1),w({...f,isService:!1,isAIApp:!1,category:"",customFields:{}})},className:`flex items-center gap-2 ${a==="products"?"bg-blue-600 text-white":"border-blue-600 text-blue-300 hover:bg-blue-800"}`,children:[e.jsx("i",{className:"fas fa-box"}),"Products Management"]}),e.jsxs(D,{variant:a==="services"?"default":"outline",onClick:()=>{r("services"),n(!1),w({...f,isService:!0,isAIApp:!1,category:"",customFields:{}})},className:`flex items-center gap-2 ${a==="services"?"bg-purple-600 text-white":"border-purple-600 text-purple-300 hover:bg-purple-800"}`,children:[e.jsx("i",{className:"fas fa-credit-card"}),"Cards & Services"]}),e.jsxs(D,{variant:a==="apps"?"default":"outline",onClick:()=>{r("apps"),n(!1),w({...f,isService:!1,isAIApp:!0,category:"",customFields:{}})},className:`flex items-center gap-2 ${a==="apps"?"bg-green-600 text-white":"border-green-600 text-green-300 hover:bg-green-800"}`,children:[e.jsx("i",{className:"fas fa-robot"}),"Apps"]})]})})]}),e.jsxs(re,{className:"border-2 border-dashed border-purple-400 bg-gradient-to-r from-purple-900/20 to-blue-900/20",children:[e.jsxs(we,{children:[e.jsxs(Ne,{className:"flex items-center gap-2 text-purple-300",children:[e.jsx(lr,{className:"w-5 h-5"}),"Smart ",a==="services"?"Service":a==="apps"?"App":"Product"," Extractor"]}),e.jsxs(Ae,{className:"text-blue-200",children:["Paste any ",a==="services"?"service":"product"," URL to automatically extract details (Amazon, eBay, Flipkart, etc.)"]})]}),e.jsxs(ne,{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx(W,{placeholder:`Paste ${a==="services"?"service":a==="apps"?"app":"product"} URL here (e.g., https://amazon.com/product/...)`,value:d,onChange:v=>g(v.target.value),className:"flex-1 bg-slate-800 border-slate-600 text-white placeholder-slate-400"}),e.jsx(D,{onClick:se,disabled:x||O.isPending,className:"bg-purple-600 hover:bg-purple-700 min-w-[140px]",children:x||O.isPending?e.jsxs(e.Fragment,{children:[e.jsx(xt,{className:"w-4 h-4 mr-2 animate-spin"}),"Extracting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(lr,{className:"w-4 h-4 mr-2"}),"Extract Details"]})})]}),e.jsxs("div",{className:"text-sm text-blue-200",children:[e.jsx("p",{className:"font-medium mb-2 text-purple-300",children:"Supported platforms:"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(Ce,{variant:"outline",className:"bg-slate-800 text-blue-300 border-slate-600",children:"Amazon"}),e.jsx(Ce,{variant:"outline",className:"bg-slate-800 text-blue-300 border-slate-600",children:"eBay"}),e.jsx(Ce,{variant:"outline",className:"bg-slate-800 text-blue-300 border-slate-600",children:"AliExpress"}),e.jsx(Ce,{variant:"outline",className:"bg-slate-800 text-blue-300 border-slate-600",children:"Flipkart"}),e.jsx(Ce,{variant:"outline",className:"bg-slate-800 text-blue-300 border-slate-600",children:"Shopify"}),e.jsx(Ce,{variant:"outline",className:"bg-slate-800 text-blue-300 border-slate-600",children:"And more..."})]})]})]})]}),e.jsxs(re,{children:[e.jsxs(we,{children:[e.jsxs(Ne,{children:["Add New ",a==="services"?"Service":a==="apps"?"App":"Product"]}),e.jsxs(Ae,{className:"text-blue-200",children:["Add a new ",a==="services"?"service":a==="apps"?"app":"product"," manually or use the extractor above"]})]}),e.jsx(ne,{children:i?e.jsxs("form",{onSubmit:V,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:[a==="services"?"Service":a==="apps"?"App":"Product"," Name"]}),e.jsx("input",{type:"text",value:f.name,onChange:v=>w({...f,name:v.target.value}),placeholder:a==="services"?"e.g., HDFC Credit Card":a==="apps"?"e.g., ChatGPT Plus":"e.g., Wireless Headphones",className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white placeholder-slate-400",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:"Category"}),e.jsxs("select",{value:f.category,onChange:v=>w({...f,category:v.target.value,subcategory:""}),className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white",required:!0,children:[e.jsx("option",{value:"",children:"Select Category"}),$e.map(v=>e.jsx("option",{value:v,children:v},v))]}),$e.length===0&&e.jsx("p",{className:"text-xs text-yellow-400 mt-1",children:"Loading categories... If this persists, categories may need to be added in the Categories tab."})]}),f.category&&m.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:"Subcategory (Optional)"}),e.jsxs("select",{value:f.subcategory,onChange:v=>w({...f,subcategory:v.target.value}),className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white",children:[e.jsx("option",{value:"",children:"Select Subcategory (Optional)"}),m.map(v=>e.jsx("option",{value:v.name,children:v.name},v.id))]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:"Gender (Optional)"}),e.jsxs("select",{value:f.gender||"",onChange:v=>w({...f,gender:v.target.value}),className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white",children:[e.jsx("option",{value:"",children:"Select Gender (Optional)"}),e.jsxs("option",{value:"men",children:[e.jsx("i",{className:"fas fa-male"})," Men"]}),e.jsxs("option",{value:"women",children:[e.jsx("i",{className:"fas fa-female"})," Women"]}),e.jsxs("option",{value:"boys",children:[e.jsx("i",{className:"fas fa-child"})," Boys"]}),e.jsxs("option",{value:"girls",children:[e.jsx("i",{className:"fas fa-child"})," Girls"]}),e.jsxs("option",{value:"common",children:[e.jsx("i",{className:"fas fa-globe"})," Common"]})]})]}),e.jsx("div",{})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:"Description"}),e.jsx("textarea",{value:f.description,onChange:v=>w({...f,description:v.target.value}),placeholder:"Product description...",className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white placeholder-slate-400",rows:3,required:!0})]}),a==="products"?e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-300",children:"Pricing Information"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:"Currency"}),e.jsx("select",{value:f.currency,onChange:v=>w({...f,currency:v.target.value}),className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white",children:Object.entries(Wt).map(([v,M])=>e.jsxs("option",{value:v,children:[M.symbol," ",v," - ",M.name]},v))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:["Price (",((P=Wt[f.currency])==null?void 0:P.symbol)||"",")"]}),e.jsx("input",{type:"text",value:f.price,onChange:v=>{const M=v.target.value.replace(/[^\d,]/g,""),te={...f,price:M},Te=Se(M,f.originalPrice);Te&&(te.discount=Te),w(te)},placeholder:"2,999",className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white placeholder-slate-400",required:!0}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Use commas for thousands (e.g., 2,999)"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:["Original Price (",((L=Wt[f.currency])==null?void 0:L.symbol)||"",")"]}),e.jsx("input",{type:"text",value:f.originalPrice,onChange:v=>{const M=v.target.value.replace(/[^\d,]/g,""),te={...f,originalPrice:M},Te=Se(f.price,M);Te&&(te.discount=Te),w(te)},placeholder:"3,999",className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white placeholder-slate-400"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Use commas for thousands (e.g., 3,999)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:"Discount (%)"}),e.jsx("input",{type:"number",value:f.discount,onChange:v=>w({...f,discount:v.target.value}),placeholder:"25",className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white placeholder-slate-400"})]})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:`text-lg font-semibold ${a==="services"?"text-purple-300":a==="apps"?"text-green-300":"text-blue-300"}`,children:"Pricing Information"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:"Pricing Type"}),e.jsxs("select",{value:f.pricingType||"one-time",onChange:v=>w({...f,pricingType:v.target.value}),className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white",children:[e.jsx("option",{value:"one-time",children:"One-time Payment"}),e.jsx("option",{value:"monthly",children:"Monthly Subscription"}),e.jsx("option",{value:"yearly",children:"Yearly Subscription"}),e.jsx("option",{value:"free",children:"Free"}),e.jsx("option",{value:"custom",children:"Custom Pricing"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:"Currency"}),e.jsx("select",{value:f.currency,onChange:v=>w({...f,currency:v.target.value}),className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white",children:Object.entries(Wt).map(([v,M])=>e.jsxs("option",{value:v,children:[M.symbol," ",v," - ",M.name]},v))})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"isFree",checked:f.isFree||f.pricingType==="free",onChange:v=>{const M=v.target.checked;w({...f,isFree:M,pricingType:M?"free":f.pricingType||"one-time"})},className:"mr-2"}),e.jsx("label",{htmlFor:"isFree",className:"text-sm font-medium text-blue-300",children:"Free Product/Service"})]}),!f.isFree&&f.pricingType!=="free"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(f.pricingType==="one-time"||f.pricingType==="custom")&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:["One-time Price (",((H=Wt[f.currency])==null?void 0:H.symbol)||"",")"]}),e.jsx("input",{type:"text",value:f.price,onChange:v=>{const M=v.target.value.replace(/[^\d,]/g,""),te={...f,price:M},Te=Se(M,f.originalPrice);Te&&(te.discount=Te),w(te)},placeholder:"2,999",className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white placeholder-slate-400",required:f.pricingType==="one-time"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Use commas for thousands (e.g., 2,999)"})]}),(f.pricingType==="monthly"||f.pricingType==="custom")&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:["Monthly Price (",((me=Wt[f.currency])==null?void 0:me.symbol)||"",")"]}),e.jsx("input",{type:"text",value:f.monthlyPrice,onChange:v=>{const M=v.target.value.replace(/[^\d,]/g,"");w({...f,monthlyPrice:M})},placeholder:"299",className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white placeholder-slate-400",required:f.pricingType==="monthly"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Monthly subscription price"})]}),(f.pricingType==="yearly"||f.pricingType==="custom")&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:["Yearly Price (",((le=Wt[f.currency])==null?void 0:le.symbol)||"",")"]}),e.jsx("input",{type:"text",value:f.yearlyPrice,onChange:v=>{const M=v.target.value.replace(/[^\d,]/g,"");w({...f,yearlyPrice:M})},placeholder:"2,999",className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white placeholder-slate-400",required:f.pricingType==="yearly"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Yearly subscription price"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:"Price Description"}),e.jsx("input",{type:"text",value:f.customPricingDetails||"",onChange:v=>w({...f,customPricingDetails:v.target.value}),placeholder:"e.g., Starting from, Per user, One-time setup fee, Contact for pricing",className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white placeholder-slate-400"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Optional description to clarify pricing structure"})]}),f.pricingType==="custom"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:"Custom Pricing Details"}),e.jsx("textarea",{value:f.customPricingDetails||"",onChange:v=>w({...f,customPricingDetails:v.target.value}),placeholder:"Describe your custom pricing structure, tiers, or contact information...",className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white placeholder-slate-400",rows:3})]}),!f.isFree&&f.pricingType!=="free"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:["Original Price (",((k=Wt[f.currency])==null?void 0:k.symbol)||"",")"]}),e.jsx("input",{type:"text",value:f.originalPrice,onChange:v=>{const M=v.target.value.replace(/[^\d,]/g,""),te={...f,originalPrice:M},Te=Se(f.price,M);Te&&(te.discount=Te),w(te)},placeholder:"3,999",className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white placeholder-slate-400"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Optional - for showing discounts"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:["Discount (%) ",e.jsx("span",{className:"text-xs text-green-400",children:"Auto-calculated"})]}),e.jsx("input",{type:"number",value:f.discount,onChange:v=>w({...f,discount:v.target.value}),placeholder:"25",className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white placeholder-slate-400",readOnly:!0}),e.jsx("p",{className:"text-xs text-green-400 mt-1",children:"Automatically calculated from prices"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:"Image URL"}),e.jsx("input",{type:"url",value:f.imageUrl,onChange:v=>w({...f,imageUrl:v.target.value}),placeholder:"https://example.com/image.jpg",className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white placeholder-slate-400",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:"Affiliate URL"}),e.jsx("input",{type:"url",value:f.affiliateUrl,onChange:v=>w({...f,affiliateUrl:v.target.value}),placeholder:"https://affiliate-link.com",className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white placeholder-slate-400",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:"Rating (1-5)"}),e.jsx("input",{type:"number",step:"0.1",min:"1",max:"5",value:f.rating,onChange:v=>w({...f,rating:v.target.value}),className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white placeholder-slate-400"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:"Review Count"}),e.jsx("input",{type:"number",value:f.reviewCount,onChange:v=>w({...f,reviewCount:v.target.value}),className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white placeholder-slate-400"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"featured",checked:f.isFeatured,onChange:v=>w({...f,isFeatured:v.target.checked}),className:"mr-2"}),e.jsx("label",{htmlFor:"featured",className:"text-sm font-medium text-blue-300",children:"Featured Product"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"isService",checked:f.isService,onChange:v=>w({...f,isService:v.target.checked}),className:"mr-2"}),e.jsxs("label",{htmlFor:"isService",className:"text-sm font-medium text-blue-300",children:[e.jsx("i",{className:"fas fa-credit-card"})," Service Product (Cards & Services)"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"isAIApp",checked:f.isAIApp,onChange:v=>w({...f,isAIApp:v.target.checked}),className:"mr-2"}),e.jsxs("label",{htmlFor:"isAIApp",className:"text-sm font-medium text-blue-300",children:[e.jsx("i",{className:"fas fa-robot"})," Apps & AI Apps"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"hasTimer",checked:f.hasTimer,onChange:v=>w({...f,hasTimer:v.target.checked}),className:"mr-2"}),e.jsx("label",{htmlFor:"hasTimer",className:"text-sm font-medium text-blue-300",children:"Add Countdown Timer"})]}),f.hasTimer&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:"Timer Duration (hours)"}),e.jsxs("select",{value:f.timerDuration,onChange:v=>w({...f,timerDuration:v.target.value}),className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white",children:[e.jsx("option",{value:"1",children:"1 hour"}),e.jsx("option",{value:"2",children:"2 hours"}),e.jsx("option",{value:"3",children:"3 hours"}),e.jsx("option",{value:"6",children:"6 hours"}),e.jsx("option",{value:"12",children:"12 hours"}),e.jsx("option",{value:"24",children:"24 hours (1 day)"}),e.jsx("option",{value:"48",children:"48 hours (2 days)"}),e.jsx("option",{value:"72",children:"72 hours (3 days)"}),e.jsx("option",{value:"168",children:"1 week"})]}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[e.jsx("i",{className:"fas fa-exclamation-triangle"})," Product will be automatically deleted when timer expires"]})]})]}),e.jsxs("div",{className:"bg-blue-900/30 border border-blue-600/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-blue-300 mb-3",children:[e.jsx("i",{className:"fas fa-globe"}),e.jsx("span",{className:"text-sm font-medium",children:"Where to Display This Product"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:ke.map(v=>e.jsxs("label",{className:"flex items-start space-x-2 cursor-pointer p-2 rounded hover:bg-blue-800/30 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:f.displayPages.includes(v.id),onChange:M=>{M.target.checked?w({...f,displayPages:[...f.displayPages,v.id]}):w({...f,displayPages:f.displayPages.filter(te=>te!==v.id)})},className:"mt-1 rounded border-blue-400 text-blue-600 focus:ring-blue-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-blue-200",children:v.label}),e.jsx("div",{className:"text-xs text-blue-400",children:v.description})]})]},v.id))}),e.jsxs("p",{className:"text-xs text-blue-400 mt-3",children:[e.jsx("i",{className:"fas fa-lightbulb"})," Select multiple pages to show this product in different sections. Pages are dynamically loaded from Navigation Management and update in real-time."]})]}),a==="services"&&e.jsxs("div",{className:"bg-purple-900/30 border border-purple-600/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-purple-300 mb-2",children:[e.jsx("i",{className:"fas fa-info-circle"}),e.jsx("span",{className:"text-sm font-medium",children:"Service Product Information"})]}),e.jsx("p",{className:"text-purple-200 text-xs",children:"You're adding a service product for the Cards & Services section. Use the description field to include service-specific details like provider, features, eligibility, and terms."})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("label",{className:"text-lg font-semibold text-blue-300",children:"Custom Fields"}),e.jsxs(D,{type:"button",onClick:K,variant:"outline",size:"sm",className:"text-blue-600 border-blue-600 hover:bg-blue-50",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Add Custom Field"]})]}),B.length>0&&e.jsx("div",{className:"space-y-3",children:B.map((v,M)=>e.jsxs("div",{className:"flex gap-3 items-end",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:`custom-key-${M}`,className:"block text-sm font-medium mb-2 text-blue-300",children:"Field Name"}),e.jsx("input",{id:`custom-key-${M}`,value:v.key,onChange:te=>ue(M,te.target.value,v.value),placeholder:"e.g., Brand, Color, Size",className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white placeholder-slate-400"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:`custom-value-${M}`,className:"block text-sm font-medium mb-2 text-blue-300",children:"Field Value"}),e.jsx("input",{id:`custom-value-${M}`,value:v.value,onChange:te=>ue(M,v.key,te.target.value),placeholder:"e.g., Nike, Red, Large",className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white placeholder-slate-400"})]}),e.jsx(D,{type:"button",onClick:()=>ee(M),variant:"outline",size:"sm",className:"text-red-600 border-red-600 hover:bg-red-50",children:e.jsx("i",{className:"fas fa-trash"})})]},M))}),B.length===0&&e.jsxs("div",{className:"text-center py-4 text-gray-500 text-sm",children:[e.jsx("i",{className:"fas fa-info-circle mr-2"}),'No custom fields added. Click "Add Custom Field" to add product-specific information.']})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(D,{type:"submit",disabled:c.isPending||y.isPending,className:q?"bg-blue-600 hover:bg-blue-700":"bg-green-600 hover:bg-green-700",children:q?y.isPending?"Updating...":"Update Product":c.isPending?"Adding...":"Add Product"}),e.jsx(D,{type:"button",variant:"outline",onClick:q?de:()=>n(!1),children:"Cancel"})]})]}):e.jsx("div",{className:"flex gap-4",children:e.jsx(D,{onClick:()=>{n(!0),w({...f,isService:a==="services",category:""})},className:`${a==="services"?"bg-purple-600 hover:bg-purple-700":a==="apps"?"bg-green-600 hover:bg-green-700":"bg-blue-600 hover:bg-blue-700"}`,children:a==="services"?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-credit-card mr-2"}),"Add Service Manually"]}):a==="apps"?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-robot mr-2"}),"Add App Manually"]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-box mr-2"}),"Add Product Manually"]})})})})]}),e.jsxs(re,{className:"border-2 border-dashed border-blue-500 bg-gradient-to-r from-blue-900/20 to-blue-900/10",children:[e.jsxs(we,{children:[e.jsxs(Ne,{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-file-csv text-blue-400"}),"CSV Bulk Upload (",a==="services"?"Services":a==="apps"?"Apps":"Products",")"]}),e.jsxs(Ae,{className:"text-blue-200",children:["Upload multiple ",a==="services"?"services":a==="apps"?"apps":"products"," in one go. Set `is_service` or `is_ai_app` in CSV to target Services or Apps. Accepted headers: name, description, price, original_price, category, image_url, affiliate_url, brand, is_featured, is_service, is_ai_app, gender."]})]}),e.jsxs(ne,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("input",{type:"file",accept:".csv,text/csv",onChange:v=>{var M;return p(((M=v.target.files)==null?void 0:M[0])||null)},className:"px-3 py-2 border border-slate-600 rounded-lg bg-slate-800 text-white"}),e.jsx("input",{type:"password",value:I,onChange:v=>F(v.target.value),placeholder:"Admin password",className:"px-3 py-2 border border-slate-600 rounded-lg bg-slate-800 text-white"}),e.jsx(D,{onClick:()=>Pe.mutate(),disabled:Pe.isPending||!Z,className:"bg-blue-600 hover:bg-blue-700 min-w-[180px]",children:Pe.isPending?e.jsxs(e.Fragment,{children:[e.jsx(xt,{className:"w-4 h-4 mr-2 animate-spin"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-upload mr-2"}),"Upload & Process CSV"]})})]}),e.jsxs("div",{className:"text-sm text-blue-200",children:[e.jsx("a",{href:"/product-bulk-template.csv",download:!0,className:"text-blue-300 hover:text-blue-200 underline",children:"Download CSV Template"}),e.jsx("span",{className:"mx-2",children:""}),e.jsx("a",{href:"/product-bulk-notes.txt",target:"_blank",rel:"noopener noreferrer",className:"text-blue-300 hover:text-blue-200 underline",children:"Field Notes & Valid Page Slugs"}),e.jsx("p",{className:"mt-2",children:"Notes:"}),e.jsxs("ul",{className:"list-disc ml-6 mt-1 space-y-1",children:[e.jsx("li",{children:"Column names must match exactly. Use commas, UTF-8 encoding."}),e.jsx("li",{children:"Set `is_service` to true for Services, `is_ai_app` to true for Apps."}),e.jsx("li",{children:"`price` and `original_price` can include symbols; they are normalized."}),e.jsxs("li",{children:["`display_pages` accepts comma-separated page slugs. Common slugs:",e.jsx("span",{className:"ml-1 font-mono",children:"prime-picks, cue-picks, value-picks, click-picks, global-picks, travel-picks, deals-hub, loot-box, top-picks, services, apps, homepage, trending"})]})]})]}),Pe.isSuccess&&e.jsx("div",{className:"text-xs text-blue-200",children:e.jsxs("p",{children:["Processed: ",String(((U=Pe.data)==null?void 0:U.processed)||0)," | Inserted: ",String(((ae=Pe.data)==null?void 0:ae.inserted)||0)," | Failed: ",String(((xe=Pe.data)==null?void 0:xe.failed)||0)]})})]})]}),e.jsxs(re,{children:[e.jsx(we,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(Ne,{children:["Current ",a==="services"?"Services":a==="apps"?"Apps":"Products"," (",Me.length,")"]}),e.jsxs(Ae,{className:"text-blue-200",children:["Manage all your ",a==="services"?"services":a==="apps"?"apps":"products"," with full control"]})]}),Me.length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[_.length>0&&e.jsxs(D,{variant:"outline",size:"sm",onClick:J,className:"border-slate-600 text-slate-300 hover:bg-slate-800/50",children:[e.jsx("i",{className:"fas fa-times mr-2"}),"Clear (",_.length,")"]}),_.length>0&&e.jsxs(D,{variant:"destructive",size:"sm",onClick:()=>{if(window.confirm(`Delete ${_.length} selected ${a==="services"?"services":a==="apps"?"apps":"products"}? This cannot be undone.`)){const v=_.map(M=>fetch(`/api/admin/products/${M}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:"pickntrust2025"})}));Promise.all(v).then(()=>{t({title:"Deleted",description:`${_.length} item(s) deleted successfully`}),J(),s.invalidateQueries({queryKey:["/api/products"]}),["prime-picks","cue-picks","value-picks","click-picks","deals-hub","loot-box","top-picks","global-picks","trending"].forEach(te=>{s.invalidateQueries({queryKey:[`/api/products/page/${te}`]}),s.invalidateQueries({queryKey:[`/api/categories/page/${te}`]})})}).catch(()=>{t({title:"Error",description:"Failed to delete some selected items",variant:"destructive"})})}},className:"bg-red-600 hover:bg-red-700",children:[e.jsx("i",{className:"fas fa-trash mr-2"}),"Delete Selected (",_.length,")"]}),e.jsxs(D,{variant:"destructive",size:"sm",onClick:()=>{if(window.confirm(`Are you sure you want to delete ALL ${a==="services"?"services":a==="apps"?"apps":"products"}? This action cannot be undone.`)){const v=Me.map(M=>fetch(`/api/admin/products/${M.id}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:"pickntrust2025"})}));Promise.all(v).then(()=>{t({title:"Success",description:`All ${a==="services"?"services":a==="apps"?"apps":"products"} deleted successfully`}),J(),s.invalidateQueries({queryKey:["/api/products"]}),["prime-picks","cue-picks","value-picks","click-picks","deals-hub","loot-box","top-picks","global-picks","trending"].forEach(te=>{s.invalidateQueries({queryKey:[`/api/products/page/${te}`]}),s.invalidateQueries({queryKey:[`/api/categories/page/${te}`]})})}).catch(()=>{t({title:"Error",description:"Failed to delete some items",variant:"destructive"})})}},className:"bg-red-600 hover:bg-red-700",children:[e.jsx("i",{className:"fas fa-trash mr-2"}),"Delete All ",a==="services"?"Services":a==="apps"?"Apps":"Products"]})]})]})}),e.jsx(ne,{children:$?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsxs("p",{className:"mt-2 text-gray-600",children:["Loading ",a==="services"?"services":"products","..."]})]}):Me.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"mb-4",children:a==="services"?e.jsx("i",{className:"fas fa-credit-card text-6xl text-purple-400 mb-4"}):a==="apps"?e.jsx("i",{className:"fas fa-robot text-6xl text-green-400 mb-4"}):e.jsx("i",{className:"fas fa-box text-6xl text-blue-400 mb-4"})}),e.jsxs("p",{className:"text-gray-600 mb-2",children:["No ",a==="services"?"services":a==="apps"?"apps":"products"," found in this category."]}),e.jsxs("p",{className:"text-gray-500 text-sm",children:["Add your first ",a==="services"?"service":a==="apps"?"app":"product"," using the form above."]})]}):e.jsx("div",{className:"space-y-4",children:Me.map(v=>e.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-lg hover:bg-gray-750 transition-colors ${a==="services"?"bg-purple-900/20 border border-purple-600/30":a==="apps"?"bg-green-900/20 border border-green-600/30":"bg-gray-800"}`,children:[e.jsx("div",{className:"flex items-center",children:e.jsx("input",{type:"checkbox",checked:A(v.id),onChange:()=>G(v.id),className:"w-4 h-4 accent-red-600 mr-2","aria-label":`Select ${a==="services"?"service":a==="apps"?"app":"product"}`})}),e.jsx("div",{className:"w-20 h-20 rounded-lg overflow-hidden flex-shrink-0",children:e.jsx("img",{src:v.imageUrl,alt:v.name,className:"w-full h-full object-cover",onError:M=>{M.target.src="https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=400"}})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-400 truncate",children:v.name}),a==="services"&&e.jsx("span",{className:"bg-purple-600 text-white px-2 py-1 rounded text-xs",children:"SERVICE"}),a==="apps"&&e.jsx("span",{className:"bg-green-600 text-white px-2 py-1 rounded text-xs",children:"APP"})]}),e.jsx("p",{className:"text-gray-300 text-sm mb-2 line-clamp-1",children:v.description}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsx("span",{className:"text-green-400 font-bold",children:u(v.price,v.currency)}),v.originalPrice&&e.jsx("span",{className:"text-gray-500 line-through",children:u(v.originalPrice,v.currency)}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-yellow-400",children:""}),e.jsx("span",{className:"text-white",children:v.rating}),e.jsxs("span",{className:"text-gray-400",children:["(",v.reviewCount,")"]})]}),e.jsx("span",{className:"text-gray-400",children:v.category}),v.isFeatured&&e.jsx("span",{className:"bg-purple-600 text-white px-2 py-1 rounded text-xs",children:"FEATURED"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>o(M=>({...M,[v.id]:!M[v.id]})),className:"p-2 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors",title:`Share ${a==="services"?"service":a==="apps"?"app":"product"}`,children:e.jsx("i",{className:"fas fa-share text-gray-300"})}),l[v.id]&&e.jsxs("div",{className:"absolute right-0 top-full mt-2 bg-white border rounded-lg shadow-lg p-2 z-50 min-w-[160px] max-h-[300px] overflow-y-auto",children:[e.jsxs("button",{onClick:()=>z("facebook",v),className:"flex items-center gap-2 px-3 py-2 text-sm hover:bg-blue-50 rounded w-full text-left text-gray-700",children:[e.jsx("i",{className:"fab fa-facebook text-blue-600"}),"Facebook"]}),e.jsxs("button",{onClick:()=>z("twitter",v),className:"flex items-center gap-2 px-3 py-2 text-sm hover:bg-gray-50 rounded w-full text-left text-gray-700",children:[e.jsx("div",{className:"w-4 h-4 bg-black rounded-sm flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-bold",children:""})}),"X (Twitter)"]}),e.jsxs("button",{onClick:()=>z("whatsapp",v),className:"flex items-center gap-2 px-3 py-2 text-sm hover:bg-green-50 rounded w-full text-left text-gray-700",children:[e.jsx("i",{className:"fab fa-whatsapp text-green-600"}),"WhatsApp"]}),e.jsxs("button",{onClick:()=>z("instagram",v),className:"flex items-center gap-2 px-3 py-2 text-sm hover:bg-purple-50 rounded w-full text-left text-gray-700",children:[e.jsx("i",{className:"fab fa-instagram text-purple-600"}),"Instagram"]}),e.jsxs("button",{onClick:()=>z("youtube",v),className:"flex items-center gap-2 px-3 py-2 text-sm hover:bg-red-50 rounded w-full text-left text-gray-700",children:[e.jsx("i",{className:"fab fa-youtube text-red-600"}),"YouTube"]}),e.jsxs("button",{onClick:()=>z("telegram",v),className:"flex items-center gap-2 px-3 py-2 text-sm hover:bg-blue-50 rounded w-full text-left text-gray-700",children:[e.jsx("i",{className:"fab fa-telegram text-blue-500"}),"Telegram"]}),e.jsxs("button",{onClick:()=>z("pinterest",v),className:"flex items-center gap-2 px-3 py-2 text-sm hover:bg-red-50 rounded w-full text-left text-gray-700",children:[e.jsx("i",{className:"fab fa-pinterest text-red-600"}),"Pinterest"]}),e.jsxs("button",{onClick:()=>z("linkedin",v),className:"flex items-center gap-2 px-3 py-2 text-sm hover:bg-blue-50 rounded w-full text-left text-gray-700",children:[e.jsx("i",{className:"fab fa-linkedin text-blue-700"}),"LinkedIn"]}),e.jsxs("button",{onClick:()=>z("reddit",v),className:"flex items-center gap-2 px-3 py-2 text-sm hover:bg-orange-50 rounded w-full text-left text-gray-700",children:[e.jsx("i",{className:"fab fa-reddit text-orange-600"}),"Reddit"]})]})]}),e.jsx("button",{onClick:()=>window.open(v.affiliateUrl,"_blank"),className:"p-2 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors",title:"Open affiliate link",children:e.jsx("i",{className:"fas fa-external-link-alt text-gray-300"})}),e.jsx("button",{onClick:()=>X(v),className:"p-2 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors",title:`Edit ${a==="services"?"service":a==="apps"?"app":"product"}`,children:e.jsx("i",{className:"fas fa-edit text-gray-300"})}),e.jsx("button",{onClick:()=>h(v.id),disabled:Q.isPending,className:"p-2 bg-red-600 hover:bg-red-700 rounded-lg transition-colors",title:`Delete ${a==="services"?"service":a==="apps"?"app":"product"}`,children:e.jsx("i",{className:"fas fa-trash text-white"})})]})]},v.id))})})]})]})}const vr=[{name:"Prime Picks",description:"Premium curated products",icon:"fas fa-star",color:"#A855F7",isForProducts:!0,displayOrder:10},{name:"Value Picks",description:"Best value curated products",icon:"fas fa-tags",color:"#10B981",isForProducts:!0,displayOrder:20},{name:"Click Picks",description:"Top click-through selections",icon:"fas fa-bolt",color:"#F59E0B",isForProducts:!0,displayOrder:30},{name:"Cue Picks",description:"Smart selections curated with precision",icon:"fas fa-check-circle",color:"#3B82F6",isForProducts:!0,displayOrder:40},{name:"Global Picks",description:"Curated products from across the world",icon:"fas fa-globe",color:"#6366F1",isForProducts:!0,displayOrder:50},{name:"Deals Hub",description:"Best deals across categories",icon:"fas fa-fire",color:"#DC2626",isForProducts:!0,displayOrder:60},{name:"Loot Box",description:"Special curated surprises",icon:"fas fa-gift",color:"#EC4899",isForProducts:!0,displayOrder:70}],ld=new Set(vr.map(t=>t.name.toLowerCase())),od=t=>ld.has(String(t||"").trim().toLowerCase());function cd(){const{toast:t}=ht(),s=bt(),[a,r]=E.useState(!1),[i,n]=E.useState(null),[l,o]=E.useState(new Set),[d,g]=E.useState([]),[x,b]=E.useState("all"),[u,f]=E.useState({name:"",description:"",icon:"fas fa-tag",color:"#6366F1",parentId:null,isForProducts:!1,isForServices:!1,isForAIApps:!1,displayOrder:0}),{data:w=[],isLoading:B,error:C}=Re({queryKey:["/api/categories"],queryFn:async()=>{const y=await fetch("/api/categories");if(!y.ok)throw new Error("Failed to fetch categories");return y.json()},retry:1}),q=Array.isArray(w)?vr.filter(y=>!w.some(O=>!O.parentId&&String(O.name||"").trim().toLowerCase()===y.name.toLowerCase())):vr;E.useEffect(()=>{g([])},[x]);const R=be({mutationFn:async y=>{const Q=await fetch("/api/admin/categories",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:"pickntrust2025",...y})});if(!Q.ok){const V=await Q.json();throw new Error(V.message||"Failed to add category")}return Q.json()},onSuccess:()=>{s.invalidateQueries({queryKey:["/api/categories"]}),f({name:"",description:"",icon:"fas fa-tag",color:"#6366F1",parentId:null,isForProducts:!1,isForServices:!1,isForAIApps:!1,displayOrder:0}),r(!1),t({title:"Success",description:"Category added successfully!"})},onError:y=>{t({title:"Error",description:y.message||"Failed to add category",variant:"destructive"})}}),Z=async()=>{try{for(const y of q)await R.mutateAsync({name:y.name,description:y.description||"",icon:y.icon||"fas fa-star",color:y.color||"#A855F7",parentId:null,isForProducts:y.isForProducts??!0,isForServices:y.isForServices??!1,isForAIApps:y.isForAIApps??!1,displayOrder:y.displayOrder??0});t({title:"Curated categories added",description:"Missing curated parents have been created."})}catch(y){t({title:"Seeding error",description:(y==null?void 0:y.message)||"Failed to seed curated categories",variant:"destructive"})}},p=be({mutationFn:async({categoryId:y,categoryData:O})=>{const V=await fetch(`/api/admin/categories/${y}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:"pickntrust2025",...O})});if(!V.ok){const se=await V.json();throw new Error(se.message||"Failed to update category")}return V.json()},onSuccess:()=>{s.invalidateQueries({queryKey:["/api/categories"]}),n(null),f({name:"",description:"",icon:"fas fa-tag",color:"#6366F1",parentId:null,isForProducts:!1,isForServices:!1,isForAIApps:!1,displayOrder:0}),r(!1),t({title:"Success",description:"Category updated successfully!"})},onError:y=>{t({title:"Error",description:y.message||"Failed to update category",variant:"destructive"})}}),I=be({mutationFn:async y=>{const Q=await fetch(`/api/admin/categories/${y}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:"pickntrust2025"})});if(!Q.ok){const V=await Q.json();throw new Error(V.message||"Failed to delete category")}return Q.json()},onSuccess:()=>{s.invalidateQueries({queryKey:["/api/categories"]}),t({title:"Success",description:"Category deleted successfully!"})},onError:y=>{t({title:"Error",description:y.message||"Failed to delete category",variant:"destructive"})}}),F=be({mutationFn:async y=>{const Q=await fetch("/api/admin/categories/bulk-delete",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:"pickntrust2025",ids:y})});if(!Q.ok){const V=await Q.json();throw new Error(V.message||"Failed to bulk delete categories")}return Q.json()},onSuccess:()=>{s.invalidateQueries({queryKey:["/api/categories"]}),g([]),t({title:"Success",description:"Selected categories deleted successfully!"})},onError:y=>{t({title:"Error",description:y.message||"Failed to bulk delete categories",variant:"destructive"})}}),_=be({mutationFn:async()=>{const O=await fetch("/api/admin/categories/delete-all",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:"pickntrust2025"})});if(!O.ok){const Q=await O.json();throw new Error(Q.message||"Failed to delete all categories")}return O.json()},onSuccess:()=>{s.invalidateQueries({queryKey:["/api/categories"]}),g([]),t({title:"Success",description:"All categories deleted successfully!"})},onError:y=>{t({title:"Error",description:y.message||"Failed to delete all categories",variant:"destructive"})}}),j=y=>{g(O=>O.includes(y)?O.filter(Q=>Q!==y):[...O,y])},A=()=>{const y=w.map(O=>O.id);g(y)},G=()=>g([]),J=()=>{d.length!==0&&confirm(`Delete ${d.length} selected categories (including their subcategories)?`)&&F.mutate(d)},K=()=>{confirm("Delete ALL categories and subcategories? This cannot be undone.")&&_.mutate()},ee=be({mutationFn:async y=>{const Q=await fetch("/api/admin/categories/reorder",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:"pickntrust2025",categoryOrders:y})});if(!Q.ok){const V=await Q.json();throw new Error(V.message||"Failed to reorder categories")}return Q.json()},onSuccess:()=>{s.invalidateQueries({queryKey:["/api/categories"]}),t({title:"Success",description:"Category order updated successfully!"})},onError:y=>{t({title:"Error",description:y.message||"Failed to reorder categories",variant:"destructive"})}}),ue=y=>{y.preventDefault();const O=u.name.trim();if(!O){t({title:"Error",description:"Category name is required",variant:"destructive"});return}try{if(w.map(V=>typeof V=="string"?V:V==null?void 0:V.name).filter(Boolean).map(V=>String(V).trim().toLowerCase()).includes(O.toLowerCase())){t({title:"Duplicate Category",description:"A category with this name already exists.",variant:"destructive"});return}}catch{}R.mutate({...u,name:O})},N=y=>{n(y),f({name:y.name,description:y.description,icon:y.icon,color:y.color,parentId:y.parentId??null,isForProducts:y.isForProducts??!1,isForServices:y.isForServices??!1,isForAIApps:y.isForAIApps??!1,displayOrder:y.displayOrder??0}),r(!0),window.scrollTo({top:0,behavior:"smooth"})},$=y=>{if(y.preventDefault(),!i||!u.name.trim()){t({title:"Error",description:"Category name is required",variant:"destructive"});return}try{const O=u.name.trim();if(w.filter(V=>typeof V=="string"?!0:(V==null?void 0:V.id)!==i.id).map(V=>typeof V=="string"?V:V==null?void 0:V.name).filter(Boolean).map(V=>String(V).trim().toLowerCase()).includes(O.toLowerCase())){t({title:"Duplicate Category",description:"Another category with this name already exists.",variant:"destructive"});return}}catch{}p.mutate({categoryId:i.id,categoryData:u})},ge=y=>{confirm("Are you sure you want to delete this category?")&&I.mutate(y)},Pe=()=>{n(null),f({name:"",description:"",icon:"fas fa-tag",color:"#6366F1",parentId:null,isForProducts:!1,isForServices:!1,isForAIApps:!1,displayOrder:0}),r(!1)},Y=(y,O)=>{const Q=w.findIndex(X=>X.id===y);if(Q===-1)return;const V=O==="up"?Q-1:Q+1;if(V<0||V>=w.length)return;const se=[...w],[h]=se.splice(Q,1);se.splice(V,0,h);const z=se.map((X,de)=>({id:X.id,displayOrder:(de+1)*10}));ee.mutate(z)},ke=y=>w.findIndex(Q=>Q.id===y)>0,_e=y=>w.findIndex(Q=>Q.id===y)<w.length-1,je=(y,O)=>{const Q=[{id:y,displayOrder:O}];ee.mutate(Q)},Be=y=>{o(O=>{const Q=new Set(O);return Q.has(y)?Q.delete(y):Q.add(y),Q})},S=y=>l.has(y),m=["fas fa-laptop","fas fa-tshirt","fas fa-home","fas fa-heart","fas fa-dumbbell","fas fa-book","fas fa-gamepad","fas fa-car","fas fa-suitcase","fas fa-paw","fas fa-briefcase","fas fa-leaf","fas fa-baby","fas fa-music","fas fa-palette","fas fa-utensils","fas fa-gem","fas fa-camera","fas fa-tools","fas fa-trophy","fas fa-code","fas fa-calendar","fas fa-gift","fas fa-graduation-cap","fas fa-play","fas fa-cloud","fas fa-shield-alt","fas fa-server","fas fa-paint-brush","fas fa-tasks","fas fa-chart-line","fas fa-shopping-cart","fas fa-comments","fas fa-coins","fas fa-robot"],c=["#6366F1","#EC4899","#10B981","#F59E0B","#EF4444","#8B5CF6","#06B6D4","#84CC16","#F97316","#14B8A6","#6B7280","#22C55E","#F472B6","#A855F7","#FB7185","#FBBF24","#C084FC","#60A5FA","#34D399","#F87171","#818CF8","#FB923C","#A78BFA"];return C?e.jsxs(re,{children:[e.jsxs(we,{children:[e.jsx(Ne,{className:"text-red-600",children:"Error Loading Categories"}),e.jsx(Ae,{className:"text-blue-200",children:"Failed to load categories. Using fallback data."})]}),e.jsx(ne,{children:e.jsx("p",{className:"text-gray-600",children:"The categories are being displayed from fallback data. Check your server connection and API endpoints."})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs(re,{children:[e.jsxs(we,{children:[e.jsx(Ne,{children:i?`Edit Category: ${i.name}`:"Add New Category"}),e.jsx(Ae,{className:"text-blue-200",children:i?"Update the category details below":"Create a new category for organizing products"})]}),e.jsx(ne,{children:a?e.jsxs("form",{onSubmit:i?$:ue,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:"Category Name"}),e.jsx("input",{type:"text",value:u.name,onChange:y=>f({...u,name:y.target.value}),placeholder:"e.g., Electronics & Gadgets",className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white placeholder-slate-400",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:"Description"}),e.jsx("input",{type:"text",value:u.description,onChange:y=>f({...u,description:y.target.value}),placeholder:"e.g., Latest tech & gadgets",className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white placeholder-slate-400",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:"Parent Category (Optional)"}),e.jsxs("select",{value:u.parentId||"",onChange:y=>f({...u,parentId:y.target.value?parseInt(y.target.value):null}),className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white",children:[e.jsx("option",{value:"",children:"None (Main Category)"}),w.filter(y=>!y.parentId&&y.id!==(i==null?void 0:i.id)).map(y=>e.jsx("option",{value:y.id,children:y.name},y.id))]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:'Select a parent category to create a subcategory, or leave as "None" for a main category.'})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:"Icon"}),e.jsx("select",{value:u.icon,onChange:y=>f({...u,icon:y.target.value}),className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white mb-2",children:m.map(y=>e.jsx("option",{value:y,children:y.replace("fas fa-","").replace("-"," ")},y))}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"block text-xs font-medium mb-1 text-blue-300",children:"Or enter custom icon class:"}),e.jsx("input",{type:"text",value:u.icon,onChange:y=>f({...u,icon:y.target.value}),placeholder:"e.g., fas fa-star, fab fa-apple, etc.",className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white placeholder-slate-400 text-sm"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:'Use FontAwesome classes like "fas fa-star" or "fab fa-apple"'})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:`${u.icon} text-xl mr-2 text-blue-400`}),e.jsx("span",{className:"text-sm text-blue-300",children:"Preview"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:"Color"}),e.jsx("div",{className:"grid grid-cols-6 gap-2 mb-2",children:c.map(y=>e.jsx("button",{type:"button",onClick:()=>f({...u,color:y}),className:`w-8 h-8 rounded-full border-2 ${u.color===y?"border-gray-800":"border-gray-300"}`,style:{backgroundColor:y}},y))}),e.jsx("input",{type:"color",value:u.color,onChange:y=>f({...u,color:y.target.value}),className:"w-full h-10 border border-slate-600 rounded-lg bg-slate-800"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:"Category Type"}),e.jsxs("div",{className:"flex gap-4 flex-wrap",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:u.isForProducts,onChange:y=>f({...u,isForProducts:y.target.checked}),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("span",{className:"text-blue-300",children:"For Products"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:u.isForServices,onChange:y=>f({...u,isForServices:y.target.checked}),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("span",{className:"text-blue-300",children:"For Services"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:u.isForAIApps,onChange:y=>f({...u,isForAIApps:y.target.checked}),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("span",{className:"text-blue-300",children:"For AI Apps"})]})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Select which type of content this category should be used for"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:"Display Order"}),e.jsx("input",{type:"number",value:u.displayOrder,onChange:y=>f({...u,displayOrder:parseInt(y.target.value)||0}),placeholder:"e.g., 0, 1, 2, 10, 20...",className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white placeholder-slate-400",min:"0"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Lower numbers appear first. Use 0, 1, 2... for sequential order, or 10, 20, 30... to allow easy insertion."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(D,{type:"submit",disabled:i?p.isPending:R.isPending,className:"bg-green-600 hover:bg-green-700",children:i?p.isPending?"Updating...":"Update Category":R.isPending?"Adding...":"Add Category"}),e.jsx(D,{type:"button",variant:"outline",onClick:Pe,children:"Cancel"})]})]}):e.jsx(D,{onClick:()=>r(!0),className:"bg-blue-600 hover:bg-blue-700",children:"Add Category"})})]}),e.jsxs(re,{children:[e.jsx(we,{children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs(Ne,{children:["Manage Categories (",w.length,")"]}),e.jsx(Ae,{className:"text-blue-200",children:"View and manage all categories"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 mr-2",children:[e.jsx("label",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Filter:"}),e.jsxs("select",{value:x,onChange:y=>b(y.target.value),className:"px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"products",children:"Products"}),e.jsx("option",{value:"services",children:"Services"}),e.jsx("option",{value:"apps",children:"AI & Apps"})]})]}),q.length>0&&e.jsxs(D,{variant:"outline",size:"sm",onClick:Z,disabled:R.isPending,className:"border-purple-300 dark:border-purple-600 text-purple-700 dark:text-purple-300 hover:bg-purple-50 dark:hover:bg-purple-900/20",title:"Add curated parent categories",children:[e.jsx("i",{className:"fas fa-star mr-1"}),"Add Curated Parents (",q.length,")"]}),e.jsxs(D,{variant:"outline",size:"sm",onClick:A,className:"border-gray-300 dark:border-gray-600",children:[e.jsx("i",{className:"fas fa-check-square mr-1"}),"Select All"]}),e.jsxs(D,{variant:"outline",size:"sm",onClick:G,className:"border-gray-300 dark:border-gray-600",children:[e.jsx("i",{className:"fas fa-eraser mr-1"}),"Clear"]}),e.jsxs(D,{variant:"destructive",size:"sm",disabled:d.length===0||F.isPending,onClick:J,className:"bg-red-600 hover:bg-red-700",children:[e.jsx("i",{className:"fas fa-trash mr-1"}),"Delete Selected (",d.length,")"]}),e.jsxs(D,{variant:"destructive",size:"sm",disabled:_.isPending,onClick:K,className:"bg-red-700 hover:bg-red-800",children:[e.jsx("i",{className:"fas fa-trash-alt mr-1"}),"Delete All"]})]})]})}),e.jsx(ne,{children:B?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Loading categories..."})]}):w.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-600",children:"No categories found. Add your first category above."})}):e.jsx("div",{className:"space-y-4",children:(()=>{const y=V=>{switch(x){case"products":return!!V.isForProducts;case"services":return!!V.isForServices;case"apps":return!!V.isForAIApps;case"all":default:return!0}},O=w.reduce((V,se)=>(se.parentId&&(V[se.parentId]||(V[se.parentId]=[]),y(se)&&V[se.parentId].push(se)),V),{});return w.filter(V=>V.parentId?!1:y(V)||O[V.id]&&O[V.id].length>0).map(V=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"border border-gray-300 dark:border-gray-600 rounded-lg p-4 hover:shadow-md transition-shadow bg-white dark:bg-gray-800",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[O[V.id]&&O[V.id].length>0&&e.jsx("button",{onClick:()=>Be(V.id),className:"w-8 h-8 rounded-full flex items-center justify-center hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:S(V.id)?"Expand subcategories":"Collapse subcategories",children:e.jsx("i",{className:`fas ${S(V.id)?"fa-chevron-right":"fa-chevron-down"} text-gray-600 dark:text-gray-400 text-sm`})}),e.jsx("input",{type:"checkbox",className:"h-4 w-4",checked:d.includes(V.id),onChange:()=>j(V.id),title:"Select category"}),e.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center shadow-md",style:{backgroundColor:V.color},children:e.jsx("i",{className:`${V.icon} text-white text-lg`})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-bold text-gray-900 dark:text-white text-lg",children:V.name}),e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200",children:"Main Category"}),od(V.name)&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-200",children:"Curated"}),O[V.id]&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200",children:[O[V.id].length," subcategories"]}),O[V.id]&&O[V.id].length>0&&e.jsxs("button",{onClick:()=>Be(V.id),className:"ml-2 text-sm text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:[S(V.id)?"Show":"Hide"," subcategories"]})]}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 mt-1",children:V.description}),e.jsxs("div",{className:"flex gap-1 mt-2 flex-wrap",children:[V.isForProducts&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:"Products"}),V.isForServices&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:"Services"}),V.isForAIApps&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",children:"AI Apps"}),!V.isForProducts&&!V.isForServices&&!V.isForAIApps&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200",children:"General"})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 ml-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("label",{className:"text-xs text-gray-600 dark:text-gray-400 whitespace-nowrap",children:"Order:"}),e.jsx("input",{type:"number",value:V.displayOrder||0,onChange:se=>je(V.id,parseInt(se.target.value)||0),className:"w-16 px-2 py-1 text-xs border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white",min:"0",step:"10",title:"Display order (lower numbers appear first)"})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(D,{variant:"outline",size:"sm",onClick:()=>Y(V.id,"up"),disabled:!ke(V.id)||ee.isPending,className:"text-gray-600 hover:text-gray-700 hover:bg-gray-50 dark:hover:bg-gray-900/20 border-gray-300 dark:border-gray-600 px-2",title:"Move up",children:e.jsx("i",{className:"fas fa-arrow-up text-xs"})}),e.jsx(D,{variant:"outline",size:"sm",onClick:()=>Y(V.id,"down"),disabled:!_e(V.id)||ee.isPending,className:"text-gray-600 hover:text-gray-700 hover:bg-gray-50 dark:hover:bg-gray-900/20 border-gray-300 dark:border-gray-600 px-2",title:"Move down",children:e.jsx("i",{className:"fas fa-arrow-down text-xs"})})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsxs(D,{variant:"outline",size:"sm",onClick:()=>N(V),className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50 dark:hover:bg-blue-900/20 border-blue-300 dark:border-blue-600",children:[e.jsx("i",{className:"fas fa-edit mr-1"}),"Edit"]}),e.jsxs(D,{variant:"outline",size:"sm",onClick:()=>ge(V.id),disabled:I.isPending,className:"text-white bg-red-600 hover:bg-red-700 border-red-600 hover:border-red-700",children:[e.jsx("i",{className:"fas fa-trash mr-1"}),"Delete"]})]})]})]})}),O[V.id]&&!S(V.id)&&e.jsx("div",{className:"ml-8 space-y-2 animate-in slide-in-from-top-2 duration-200",children:O[V.id].map(se=>e.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-3 hover:shadow-md transition-shadow bg-gray-50 dark:bg-gray-900/50",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsx("input",{type:"checkbox",className:"h-4 w-4",checked:d.includes(se.id),onChange:()=>j(se.id),title:"Select subcategory"}),e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center shadow-md",style:{backgroundColor:se.color},children:e.jsx("i",{className:`${se.icon} text-white text-sm`})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white text-base",children:se.name}),e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200",children:"Subcategory"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:se.description}),e.jsxs("div",{className:"flex gap-1 mt-2 flex-wrap",children:[se.isForProducts&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:"Products"}),se.isForServices&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:"Services"}),se.isForAIApps&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",children:"AI Apps"}),!se.isForProducts&&!se.isForServices&&!se.isForAIApps&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200",children:"General"})]})]})]}),e.jsxs("div",{className:"flex gap-1 ml-4",children:[e.jsxs(D,{variant:"outline",size:"sm",onClick:()=>N(se),className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50 dark:hover:bg-blue-900/20 border-blue-300 dark:border-blue-600",children:[e.jsx("i",{className:"fas fa-edit mr-1"}),"Edit"]}),e.jsxs(D,{variant:"outline",size:"sm",onClick:()=>ge(se.id),disabled:I.isPending,className:"text-white bg-red-600 hover:bg-red-700 border-red-600 hover:border-red-700",children:[e.jsx("i",{className:"fas fa-trash mr-1"}),"Delete"]})]})]})},se.id))})]},V.id))})()})})]})]})}function dd(){const{toast:t}=ht(),s=bt(),[a,r]=E.useState(!1),[i,n]=E.useState(!1),[l,o]=E.useState({title:"",excerpt:"",content:"",category:"",tags:"",imageUrl:"",pdfUrl:"",videoUrl:"",readTime:"3 min read",slug:"",publishDate:new Date().toISOString().split("T")[0],hasTimer:!1,timerDuration:"24"}),{data:d=[],isLoading:g}=Re({queryKey:["/api/categories"],queryFn:async()=>{const A=await fetch("/api/categories");if(!A.ok)throw new Error("Failed to fetch categories");const G=await A.json();return(Array.isArray(G)?G:[]).map(J=>({id:J.id||J.name,name:J.name,isForProducts:J.isForProducts,isForServices:J.isForServices,isForAIApps:J.isForAIApps}))},staleTime:0}),x=(d||[]).reduce((A,G)=>{const J=K=>{A[K]||(A[K]=[]),A[K].push(G)};return G.isForProducts&&J("Products"),G.isForServices&&J("Services"),G.isForAIApps&&J("AI Apps"),!G.isForProducts&&!G.isForServices&&!G.isForAIApps&&J("General"),A},{}),b=["Products","Services","AI Apps","General"],u=async A=>{var K;const G=(K=A.target.files)==null?void 0:K[0];if(!G)return;if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp","image/bmp","image/svg+xml","image/tiff","image/tif","image/ico","image/avif","image/heic","image/heif"].includes(G.type)){t({title:"Invalid File Type",description:"Please upload a valid image file (JPEG, PNG, GIF, WebP, BMP, SVG, TIFF, ICO, AVIF, HEIC)",variant:"destructive"});return}if(G.size>10*1024*1024){t({title:"File Too Large",description:"Please upload an image smaller than 10MB. For larger images, use an image URL instead.",variant:"destructive"});return}n(!0);try{const ee=await C(G),ue=new FileReader;ue.onload=N=>{var ke;const $=(ke=N.target)==null?void 0:ke.result;o({...l,imageUrl:$}),n(!1);const ge=G.type.split("/")[1].toUpperCase(),Pe=(G.size/1024/1024).toFixed(2),Y=(ee.size/1024/1024).toFixed(2);t({title:"Success",description:`${ge} image uploaded successfully! Original: ${Pe}MB  Optimized: ${Y}MB`})},ue.onerror=()=>{n(!1),t({title:"Upload Error",description:"Failed to read the image file. Please try again.",variant:"destructive"})},ue.readAsDataURL(ee)}catch{n(!1),t({title:"Error",description:"Failed to upload image. Try using a smaller image or an image URL instead.",variant:"destructive"})}},[f,w]=E.useState(!1),B=async A=>{var K;const G=(K=A.target.files)==null?void 0:K[0];if(!G)return;if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","text/plain","application/rtf","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation"].includes(G.type)){t({title:"Invalid File Type",description:"Please upload PDF, Word, Excel, PowerPoint, or a common document.",variant:"destructive"});return}try{const ee=new FormData;ee.append("file",G);const ue="https://pickntrust.com",N=ue?`${ue}/api/upload`:"/api/upload",$=await fetch(N,{method:"POST",body:ee});if(!$.ok){const Pe=await $.text();throw new Error(Pe||"Upload failed")}const ge=await $.json();o({...l,pdfUrl:ge.url}),t({title:"PDF Uploaded",description:"Your PDF has been uploaded successfully."})}catch(ee){t({title:"Upload Error",description:ee.message||"Failed to upload PDF",variant:"destructive"})}},C=A=>new Promise(G=>{const J=document.createElement("canvas"),K=J.getContext("2d"),ee=document.createElement("img");ee.onload=()=>{if(!K){G(A);return}const ue=1200,N=800;let{width:$,height:ge}=ee;$>ue&&(ge=ge*ue/$,$=ue),ge>N&&($=$*N/ge,ge=N),J.width=$,J.height=ge,K.drawImage(ee,0,0,$,ge),J.toBlob(Pe=>{if(Pe){const Y=new File([Pe],A.name,{type:A.type,lastModified:Date.now()});G(Y)}else G(A)},A.type,.8)},ee.onerror=()=>G(A),ee.src=URL.createObjectURL(A)}),{data:q=[],isLoading:R,error:Z}=Re({queryKey:["/api/blog"],queryFn:async()=>{try{const A=await fetch("/api/blog");if(!A.ok)throw new Error(`HTTP ${A.status}: ${A.statusText}`);const G=A.headers.get("content-type");if(!G||!G.includes("application/json")){const J=await A.text();throw console.error("Non-JSON response:",J),new Error("Server returned non-JSON response. Check server logs.")}return A.json()}catch(A){throw console.error("Blog fetch error:",A),A}},retry:1}),p=be({mutationFn:async A=>{try{const G="pickntrust2025",J=A.tags.split(",").map(N=>N.trim()).filter(N=>N.length>0),K={password:G,...A,tags:JSON.stringify(J),publishedAt:new Date().toISOString(),slug:A.slug||A.title.toLowerCase().replace(/[^a-z0-9]+/g,"-"),hasTimer:A.hasTimer,timerDuration:A.hasTimer?A.timerDuration:null},ee=await fetch("/api/admin/blog",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(K)});if(!ee.ok){const N=ee.headers.get("content-type");if(N&&N.includes("application/json")){const $=await ee.json();throw new Error($.message||`HTTP ${ee.status}: ${ee.statusText}`)}else{const $=await ee.text();throw console.error("Non-JSON error response:",$),new Error(`Server error: ${ee.status} ${ee.statusText}. Check server logs.`)}}return await ee.json()}catch(G){throw G}},onSuccess:async A=>{if(s.invalidateQueries({queryKey:["/api/blog"]}),A&&A.id)try{const G=localStorage.getItem("adminPassword")||"pickntrust2025",J=await fetch(`/api/admin/canva/settings?password=${G}`);if(J.ok){const K=await J.json();if(K.enableBlogPosts!==!1&&K.isEnabled){const ue=await fetch("/api/admin/canva/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:G,contentType:"blog",contentId:A.id})});if(ue.ok){const N=await ue.json();t({title:'<i className="fas fa-palette"></i> Blog Post Published!',description:"Blog post added and Canva automation started for social media posting."})}else t({title:'Blog Post Published <i className="fas fa-check-circle"></i>',description:"Blog post added successfully! (Canva automation may be disabled)"})}else t({title:'Blog Post Published <i className="fas fa-check-circle"></i>',description:"Blog post added successfully! (Blog automation is disabled)"})}else t({title:'Blog Post Published <i className="fas fa-check-circle"></i>',description:"Blog post added successfully!"})}catch{t({title:'Blog Post Published <i className="fas fa-check-circle"></i>',description:"Blog post added successfully! (Canva automation encountered an issue)"})}else t({title:"Success",description:"Blog post added successfully!"});o({title:"",excerpt:"",content:"",category:"",tags:"",imageUrl:"",pdfUrl:"",videoUrl:"",readTime:"3 min read",slug:"",publishDate:new Date().toISOString().split("T")[0],hasTimer:!1,timerDuration:"24"}),r(!1)},onError:A=>{t({title:"Error",description:A.message||"Failed to add blog post",variant:"destructive"})}}),I=be({mutationFn:async A=>{const J=await fetch(`/api/admin/blog/${A}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:"pickntrust2025"})});if(!J.ok){const K=await J.json();throw new Error(K.message||"Failed to delete blog post")}return J.json()},onSuccess:()=>{s.invalidateQueries({queryKey:["/api/blog"]}),t({title:"Success",description:"Blog post deleted successfully!"})},onError:A=>{t({title:"Error",description:A.message||"Failed to delete blog post",variant:"destructive"})}}),F=A=>{if(A.preventDefault(),!l.title.trim()){t({title:"Error",description:"Title is required",variant:"destructive"});return}if(f){if(!l.pdfUrl||!String(l.pdfUrl).trim()){t({title:"Error",description:"PDF file or URL is required in PDF mode",variant:"destructive"});return}}else if(!l.content.trim()){t({title:"Error",description:"Content is required in content mode",variant:"destructive"});return}p.mutate(l)},_=A=>{confirm("Are you sure you want to delete this blog post?")&&I.mutate(A)},j=A=>{o({title:A.title,excerpt:A.excerpt,content:A.content,category:A.category,tags:typeof A.tags=="string"?JSON.parse(A.tags).join(", "):A.tags,imageUrl:A.imageUrl,pdfUrl:A.pdfUrl||"",videoUrl:A.videoUrl||"",readTime:A.readTime,slug:A.slug,publishDate:new Date(A.publishedAt).toISOString().split("T")[0],hasTimer:A.hasTimer||!1,timerDuration:A.timerDuration||"24"}),r(!0),t({title:"Edit Mode",description:"Blog post loaded for editing. Make your changes and save."})};return Z?e.jsx(re,{children:e.jsxs(we,{children:[e.jsx(Ne,{className:"text-red-600",children:"Error Loading Blog Posts"}),e.jsx(Ae,{className:"text-gray-700",children:"Failed to load blog posts. Check your server connection."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[e.jsx("i",{className:"fas fa-edit"})," Image Blog Management"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Create engaging blog posts with high-quality images up to 10MB"})]}),e.jsxs(D,{onClick:()=>r(!0),className:"bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(tt,{className:"w-4 h-4 mr-2"}),"Add New Blog Post"]})]}),a&&e.jsxs(re,{className:"bg-gray-900 text-white border-gray-700",children:[e.jsxs(we,{children:[e.jsxs(Ne,{className:"flex items-center gap-2 text-orange-400",children:[e.jsx(tt,{className:"w-5 h-5"}),"Create New Blog Post"]}),e.jsx(Ae,{className:"text-gray-300",children:"Add engaging content with high-quality image support (up to 10MB) and optional auto-delete timer"})]}),e.jsx(ne,{className:"space-y-6",children:e.jsxs("form",{onSubmit:F,className:"space-y-6",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(D,{type:"button",variant:f?"outline":"default",onClick:()=>w(!1),className:f?"bg-transparent":"bg-blue-600",children:"Content Mode"}),e.jsx(D,{type:"button",variant:f?"default":"outline",onClick:()=>w(!0),className:f?"bg-purple-600":"bg-transparent",children:"PDF Mode"})]}),e.jsxs("div",{children:[e.jsx(T,{className:"text-white font-medium",children:"Blog Title *"}),e.jsx(W,{value:l.title,onChange:A=>o({...l,title:A.target.value}),placeholder:"10 Best Budget Smartphones Under 20,000",className:"bg-gray-800 border-gray-600 text-white mt-2",required:!0})]}),e.jsxs("div",{children:[e.jsx(T,{className:"text-white font-medium",children:"Excerpt *"}),e.jsx(vt,{value:l.excerpt,onChange:A=>o({...l,excerpt:A.target.value}),placeholder:"Short description for homepage",className:"bg-gray-800 border-gray-600 text-white mt-2",rows:4,required:!0})]}),!f&&e.jsxs("div",{children:[e.jsx(T,{className:"text-white font-medium",children:"Full Content *"}),e.jsx(vt,{value:l.content,onChange:A=>o({...l,content:A.target.value}),placeholder:"Full blog post content with Markdown formatting",className:"bg-gray-800 border-gray-600 text-white mt-2 font-mono text-sm",rows:12,required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(T,{className:"text-white font-medium",children:"Category *"}),e.jsxs(Ge,{value:l.category,onValueChange:A=>o({...l,category:A}),disabled:g,children:[e.jsx(We,{className:"bg-gray-800 border-gray-600 text-white mt-2",children:e.jsx(ze,{placeholder:g?"Loading categories...":"Select category"})}),e.jsx(He,{className:"bg-gray-800 border-gray-600",children:b.filter(A=>{var G;return(G=x[A])==null?void 0:G.length}).map((A,G,J)=>e.jsxs(el,{children:[e.jsx("div",{className:"px-2 py-1 text-xs uppercase tracking-wide font-bold text-white",children:A}),x[A].map(K=>e.jsx(ce,{value:K.name,className:"text-white hover:bg-gray-700",children:K.name},K.id)),G<J.length-1&&e.jsx(tl,{className:"bg-gray-700"})]},A))})]})]}),e.jsxs("div",{children:[e.jsx(T,{className:"text-white font-medium",children:"Tags"}),e.jsx(W,{value:l.tags,onChange:A=>o({...l,tags:A.target.value}),placeholder:"deals, budget, tech, gadgets",className:"bg-gray-800 border-gray-600 text-white mt-2"})]})]}),e.jsxs("div",{children:[e.jsx(T,{className:"text-white font-medium",children:"Blog Image"}),e.jsx(W,{value:l.imageUrl,onChange:A=>o({...l,imageUrl:A.target.value}),placeholder:"Paste image URL here or upload from device",className:"bg-gray-800 border-gray-600 text-white mt-2"}),e.jsxs("div",{className:"mt-2",children:[e.jsx("input",{type:"file",accept:"image/jpeg,image/jpg,image/png,image/gif,image/webp,image/bmp,image/svg+xml,image/tiff,image/ico,image/avif,image/heic",className:"hidden",id:"image-upload",onChange:u}),e.jsxs(D,{type:"button",variant:"outline",size:"sm",onClick:()=>{var A;return(A=document.getElementById("image-upload"))==null?void 0:A.click()},className:"text-xs",disabled:i,children:[e.jsx(Os,{className:"w-3 h-3 mr-1"}),i?"Uploading...":"Upload from Device"]}),e.jsxs("p",{className:"text-xs text-blue-400 mt-1",children:[e.jsx("i",{className:"fas fa-folder"})," Supports: JPEG, PNG, GIF, WebP, BMP, SVG, TIFF, ICO, AVIF, HEIC (max 10MB)"]})]}),l.imageUrl&&e.jsxs("div",{className:"mt-3 border border-gray-600 rounded-lg overflow-hidden",children:[e.jsx("img",{src:l.imageUrl,alt:"Preview",className:"w-full h-32 object-cover",onError:A=>{A.target.src="https://images.unsplash.com/photo-1486312338219-ce68d2c6f44d?w=400"}}),e.jsx("div",{className:"p-2 bg-gray-800",children:e.jsxs("p",{className:"text-xs text-green-400",children:[e.jsx("i",{className:"fas fa-check-circle"})," High-quality image loaded successfully"]})})]})]}),f&&e.jsxs("div",{children:[e.jsx(T,{className:"text-white font-medium",children:"Blog Document"}),e.jsx(W,{value:l.pdfUrl,onChange:A=>o({...l,pdfUrl:A.target.value}),placeholder:"Paste document URL here or upload from device",className:"bg-gray-800 border-gray-600 text-white mt-2"}),e.jsxs("div",{className:"mt-2",children:[e.jsx("input",{type:"file",accept:"application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-powerpoint,application/vnd.openxmlformats-officedocument.presentationml.presentation,text/plain,application/rtf,application/vnd.oasis.opendocument.text,application/vnd.oasis.opendocument.spreadsheet,application/vnd.oasis.opendocument.presentation",className:"hidden",id:"pdf-upload",onChange:B}),e.jsxs(D,{type:"button",variant:"outline",size:"sm",onClick:()=>{var A;return(A=document.getElementById("pdf-upload"))==null?void 0:A.click()},className:"text-xs",children:[e.jsx(Os,{className:"w-3 h-3 mr-1"})," Upload Document"]}),e.jsxs("p",{className:"text-xs text-blue-400 mt-1",children:[e.jsx("i",{className:"fas fa-file"})," Supports: PDF, DOC/DOCX, XLS/XLSX, PPT/PPTX, TXT, RTF, ODT/ODS/ODP"]})]})]}),e.jsxs("div",{children:[e.jsx(T,{className:"text-white font-medium",children:"Video URL (Optional)"}),e.jsx(W,{value:l.videoUrl,onChange:A=>o({...l,videoUrl:A.target.value}),placeholder:"https://www.youtube.com/watch?v=... or https://vimeo.com/...",className:"bg-gray-800 border-gray-600 text-white mt-2"}),e.jsxs("p",{className:"text-xs text-blue-400 mt-1",children:[e.jsx("i",{className:"fas fa-film"})," Supports: YouTube, Vimeo, TikTok, Instagram, Facebook, Twitter, Dailymotion, Twitch"]}),l.videoUrl&&e.jsx("div",{className:"mt-3 p-3 bg-gray-800 border border-gray-600 rounded-lg",children:e.jsxs("p",{className:"text-xs text-green-400",children:[e.jsx("i",{className:"fas fa-check-circle"})," Video URL added - will be displayed in blog post"]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"hasTimer",checked:l.hasTimer,onChange:A=>o({...l,hasTimer:A.target.checked}),className:"rounded border-gray-600 bg-gray-700"}),e.jsxs(T,{htmlFor:"hasTimer",className:"text-white text-sm",children:[e.jsx("i",{className:"fas fa-check-circle"})," Add Countdown Timer"]})]}),l.hasTimer&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{className:"text-white text-sm",children:"Timer Duration (hours)"}),e.jsxs(Ge,{value:l.timerDuration,onValueChange:A=>o({...l,timerDuration:A}),children:[e.jsx(We,{className:"bg-gray-800 border-gray-600 text-white",children:e.jsx(ze,{placeholder:"Select duration"})}),e.jsxs(He,{className:"bg-gray-800 border-gray-600",children:[e.jsx(ce,{value:"1",className:"text-white hover:bg-gray-700",children:"1 hour"}),e.jsx(ce,{value:"2",className:"text-white hover:bg-gray-700",children:"2 hours"}),e.jsx(ce,{value:"3",className:"text-white hover:bg-gray-700",children:"3 hours"}),e.jsx(ce,{value:"6",className:"text-white hover:bg-gray-700",children:"6 hours"}),e.jsx(ce,{value:"12",className:"text-white hover:bg-gray-700",children:"12 hours"}),e.jsx(ce,{value:"24",className:"text-white hover:bg-gray-700",children:"24 hours (1 day)"}),e.jsx(ce,{value:"48",className:"text-white hover:bg-gray-700",children:"48 hours (2 days)"}),e.jsx(ce,{value:"72",className:"text-white hover:bg-gray-700",children:"72 hours (3 days)"}),e.jsx(ce,{value:"168",className:"text-white hover:bg-gray-700",children:"168 hours (1 week)"})]})]}),e.jsxs("p",{className:"text-yellow-400 text-xs",children:[e.jsx("i",{className:"fas fa-exclamation-triangle"})," Blog post will be automatically deleted when timer expires"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(T,{className:"text-white font-medium",children:"Publish Date"}),e.jsx(W,{type:"date",value:l.publishDate,onChange:A=>o({...l,publishDate:A.target.value}),className:"bg-gray-800 border-gray-600 text-white mt-2"})]}),e.jsxs("div",{children:[e.jsx(T,{className:"text-white font-medium",children:"Read Time"}),e.jsx(W,{value:l.readTime,onChange:A=>o({...l,readTime:A.target.value}),placeholder:"3 min read",className:"bg-gray-800 border-gray-600 text-white mt-2"})]}),e.jsxs("div",{children:[e.jsx(T,{className:"text-white font-medium",children:"URL Slug"}),e.jsx(W,{value:l.slug,onChange:A=>o({...l,slug:A.target.value}),placeholder:"url-friendly-title",className:"bg-gray-800 border-gray-600 text-white mt-2"})]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4",children:[e.jsxs(D,{type:"button",variant:"outline",className:"text-blue-400 border-blue-400 hover:bg-blue-900",children:[e.jsx(kt,{className:"w-4 h-4 mr-2"}),"Live Preview"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(D,{type:"button",variant:"outline",onClick:()=>r(!1),className:"text-gray-400 border-gray-600 hover:bg-gray-800",children:"Cancel"}),e.jsx(D,{type:"submit",disabled:p.isPending,className:"bg-green-600 hover:bg-green-700 text-white",children:p.isPending?"Publishing...":"Publish Blog Post"})]})]})]})})]}),e.jsxs(re,{children:[e.jsxs(we,{children:[e.jsxs(Ne,{className:"flex items-center gap-2",children:[e.jsx(Zt,{className:"w-5 h-5"}),"Current Blog Posts (",q.length,")"]}),e.jsx(Ae,{className:"text-blue-200",children:"Manage all your high-quality image-based blog posts (up to 10MB each)"})]}),e.jsx(ne,{children:R?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Loading blog posts..."})]}):q.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-600",children:"No blog posts found. Add your first post above."})}):e.jsx("div",{className:"space-y-4",children:q.map(A=>e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-800 rounded-lg hover:bg-gray-750 transition-colors",children:[e.jsx("div",{className:"w-20 h-20 rounded-lg overflow-hidden flex-shrink-0",children:e.jsx("img",{src:A.imageUrl||"https://images.unsplash.com/photo-1486312338219-ce68d2c6f44d?w=400",alt:A.title,className:"w-full h-full object-cover",onError:G=>{G.target.src="https://images.unsplash.com/photo-1486312338219-ce68d2c6f44d?w=400"}})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-400 mb-1 truncate",children:A.title}),e.jsx("p",{className:"text-gray-300 text-sm mb-2 line-clamp-1",children:A.excerpt}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsx("span",{className:"text-gray-400",children:A.category}),e.jsx("span",{className:"text-gray-400",children:A.readTime}),e.jsx("span",{className:"text-gray-400",children:new Date(A.publishedAt).toLocaleDateString()}),A.hasTimer&&e.jsxs("span",{className:"bg-yellow-600 text-white px-2 py-1 rounded text-xs flex items-center gap-1",children:[e.jsx(pa,{className:"w-3 h-3"}),A.timerDuration,"h timer"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>window.open(`/blog/${A.slug}`,"_blank"),className:"p-2 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors",title:"View blog post",children:e.jsx("i",{className:"fas fa-external-link-alt text-gray-300"})}),e.jsx("button",{onClick:()=>j(A),className:"p-2 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors",title:"Edit blog post",children:e.jsx("i",{className:"fas fa-edit text-gray-300"})}),e.jsx("button",{onClick:()=>_(A.id),disabled:I.isPending,className:"p-2 bg-red-600 hover:bg-red-700 rounded-lg transition-colors",title:"Delete blog post",children:e.jsx("i",{className:"fas fa-trash text-white"})})]})]},A.id))})})]})]})}function ud(){const[t,s]=E.useState(null),{toast:a}=ht(),r=bt(),[i,n]=E.useState("any-website"),[l,o]=E.useState(!1),[d,g]=E.useState(!1),[x,b]=E.useState("auto"),[u,f]=E.useState(""),[w,B]=E.useState({title:"",description:"",category:"",tags:"",videoUrl:"",thumbnailUrl:"",platform:"any-website",duration:"",customFields:{},hasTimer:!1,timerDuration:"24",pages:[],showOnHomepage:!0,ctaText:"",ctaUrl:""}),C=S=>{const m=String(S||"").toLowerCase().trim();return m?m.replace(/\s+/g,"-").replace(/[^a-z0-9\-]/g,""):""},q=S=>String(S||"").split(",").map(m=>C(m)).filter(Boolean),{data:R=[]}=Re({queryKey:["/api/categories"],queryFn:async()=>{const S=await fetch("/api/categories");if(!S.ok)throw new Error("Failed to load categories");const m=await S.json();return(Array.isArray(m)?m:[]).map(c=>({id:c.id||c.name,name:c.name,isForProducts:c.isForProducts,isForServices:c.isForServices,isForAIApps:c.isForAIApps}))},staleTime:0,retry:1}),Z=(R||[]).reduce((S,m)=>{const c=y=>{S[y]||(S[y]=[]),S[y].push(m)};return m.isForProducts&&c("Products"),m.isForServices&&c("Services"),m.isForAIApps&&c("AI Apps"),!m.isForProducts&&!m.isForServices&&!m.isForAIApps&&c("General"),S},{}),p=["Products","Services","AI Apps","General"],I=[{id:"any-website",name:"Any Website",icon:e.jsx($s,{className:"w-5 h-5"}),color:"bg-gray-600",placeholder:"https://example.com/video.mp4"},{id:"youtube",name:"YouTube",icon:e.jsx(ui,{className:"w-5 h-5"}),color:"bg-red-600",placeholder:"https://www.youtube.com/watch?v=..."},{id:"instagram",name:"Instagram",icon:e.jsx(or,{className:"w-5 h-5"}),color:"bg-purple-600",placeholder:"https://www.instagram.com/p/..."},{id:"tiktok",name:"TikTok",icon:e.jsx(Lo,{className:"w-5 h-5"}),color:"bg-black",placeholder:"https://www.tiktok.com/@user/video/..."},{id:"vimeo",name:"Vimeo",icon:e.jsx(Dt,{className:"w-5 h-5"}),color:"bg-blue-500",placeholder:"https://vimeo.com/..."},{id:"facebook",name:"Facebook",icon:e.jsx("div",{className:"w-5 h-5 bg-blue-600 rounded text-white text-xs flex items-center justify-center font-bold",children:"f"}),color:"bg-blue-600",placeholder:"https://www.facebook.com/watch/?v=..."},{id:"file-upload",name:"File Upload",icon:e.jsx(Os,{className:"w-5 h-5"}),color:"bg-green-600",placeholder:"Upload video file from device"}],F=(S,m)=>{if(!S||x!=="auto")return"";const c=S.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/);if(c)return`https://img.youtube.com/vi/${c[1]}/hqdefault.jpg`;const y=S.match(/vimeo\.com\/(\d+)/);return y?`https://vumbnail.com/${y[1]}.jpg`:S.includes("instagram.com")?"https://images.unsplash.com/photo-1611262588024-d12430b98920?w=400&h=300&fit=crop":S.includes("tiktok.com")?"https://images.unsplash.com/photo-1611605698335-8b1569810432?w=400&h=300&fit=crop":S.includes("facebook.com")?"https://images.unsplash.com/photo-1611162617474-5b21e879e113?w=400&h=300&fit=crop":""};E.useEffect(()=>{if(w.videoUrl&&x==="auto"){const S=F(w.videoUrl);S&&B(m=>({...m,thumbnailUrl:S}))}},[w.videoUrl,i,x]);const _=async S=>{var y;const m=(y=S.target.files)==null?void 0:y[0];if(!m)return;if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp","image/bmp","image/svg+xml","image/tiff","image/ico","image/avif"].includes(m.type)){a({title:"Invalid Image Format",description:"Please upload a valid image file",variant:"destructive"});return}if(m.size>10*1024*1024){a({title:"Image Too Large",description:"Please upload a thumbnail smaller than 10MB.",variant:"destructive"});return}g(!0);try{const O=new FileReader;O.onload=Q=>{var se;const V=(se=Q.target)==null?void 0:se.result;B({...w,thumbnailUrl:V}),b("upload"),g(!1),a({title:"Success",description:"Thumbnail uploaded successfully!"})},O.readAsDataURL(m)}catch{g(!1),a({title:"Error",description:"Failed to upload thumbnail",variant:"destructive"})}},j=()=>"https://pickntrust.com",A=S=>!S||S.startsWith("http")||S.startsWith("data:")||S.startsWith("blob:")?S:S.startsWith("/")?j()+S:S,G=async S=>{var y;const m=(y=S.target.files)==null?void 0:y[0];if(!m)return;if(!["video/mp4","video/webm","video/ogg","video/mov","video/avi","video/wmv","video/flv","video/mkv","video/m4v","video/3gp"].includes(m.type)){a({title:"Invalid Video Format",description:"Please upload a valid video file",variant:"destructive"});return}if(m.size>100*1024*1024){a({title:"Video File Too Large",description:"Please upload a video smaller than 100MB.",variant:"destructive"});return}o(!0);try{const O=new FormData;O.append("file",m);const Q=await fetch("/api/upload",{method:"POST",body:O}),V=Q.headers.get("content-type")||"";let se=null;if(V.includes("application/json"))se=await Q.json();else{const z=await Q.text().catch(()=>"");throw new Error(`Unexpected response (not JSON): ${z.slice(0,200)}`)}if(!Q.ok||!(se!=null&&se.url))throw new Error((se==null?void 0:se.message)||"Upload failed");const h=se.url;B({...w,videoUrl:h,platform:"file-upload"}),o(!1),a({title:"Success",description:"Video uploaded successfully!"})}catch(O){o(!1),a({title:"Error",description:String((O==null?void 0:O.message)||O)||"Failed to upload video",variant:"destructive"})}},J=(S,m)=>{if(!S)return null;if(m==="file-upload"||S.startsWith("data:video/"))return e.jsxs("div",{className:"relative",children:[e.jsx("video",{src:A(S),className:"w-full h-32 object-cover rounded",controls:!1,muted:!0,preload:"metadata"}),e.jsx("div",{className:"absolute inset-0 bg-black/30 flex items-center justify-center rounded",children:e.jsx("div",{className:"bg-white/90 rounded-full p-3",children:e.jsx(Dt,{className:"w-6 h-6 text-gray-800"})})})]});const c=S.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/);return c?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:`https://img.youtube.com/vi/${c[1]}/maxresdefault.jpg`,alt:"Video thumbnail",className:"w-full h-32 object-cover rounded"}),e.jsx("div",{className:"absolute inset-0 bg-black/30 flex items-center justify-center rounded",children:e.jsx("div",{className:"bg-red-600 rounded-full p-3",children:e.jsx(ui,{className:"w-6 h-6 text-white"})})})]}):e.jsx("div",{className:"w-full h-32 bg-gray-700 rounded flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Dt,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),e.jsxs("p",{className:"text-xs text-gray-400 capitalize",children:[m," Video"]})]})})},{data:K=[],isLoading:ee}=Re({queryKey:["/api/video-content"],queryFn:async()=>{try{const S=await fetch("/api/video-content");return S.ok?S.json():[]}catch(S){return console.log("Failed to fetch video content:",S),[]}},retry:!1,refetchOnWindowFocus:!1}),{data:ue=[]}=Re({queryKey:["/api/nav-tabs"],queryFn:async()=>{try{const S=await fetch("/api/nav-tabs");return S.ok?S.json():[]}catch(S){return console.log("Failed to fetch navigation tabs:",S),[]}},retry:!1,refetchOnWindowFocus:!1}),N=[{value:"home",label:"Home Page",description:"Main website homepage"},{value:"trending",label:"Trending Page",description:"Trending products and content"},{value:"services",label:"Services Page",description:"Services and subscriptions"},{value:"apps",label:"Apps Page",description:"Apps and AI tools"},{value:"blog",label:"Blog Page",description:"Blog articles and posts"},{value:"top-picks",label:"Top Picks",description:"Today's top picks and featured deals"},...(Array.isArray(ue)?ue:[]).filter(S=>S&&S.is_active).sort((S,m)=>(S.display_order||0)-(m.display_order||0)).map(S=>({value:S.slug||"",label:`${S.name||"Unnamed"}`,description:S.description||"Navigation page"}))],$=be({mutationFn:async S=>{const m={password:"pickntrust2025",title:S.title,description:S.description||"",category:S.category||"",tags:S.tags?S.tags.split(",").map(y=>y.trim()):[],videoUrl:S.videoUrl,thumbnailUrl:S.thumbnailUrl||"",platform:S.platform,duration:S.duration||"",hasTimer:!!S.hasTimer,timerDuration:S.hasTimer?parseInt(S.timerDuration):null,pages:S.pages||[],showOnHomepage:!!S.showOnHomepage,ctaText:S.ctaText||"",ctaUrl:S.ctaUrl||""},c=await fetch("/api/admin/video-content",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)});if(!c.ok)throw new Error("Failed to add video");return c.json()},onSuccess:()=>{a({title:"Success!",description:"Video content added successfully."}),r.invalidateQueries({queryKey:["/api/video-content"]}),B({title:"",description:"",category:"",tags:"",videoUrl:"",thumbnailUrl:"",platform:"any-website",duration:"",customFields:{},hasTimer:!1,timerDuration:"24",pages:[],showOnHomepage:!0,ctaText:"",ctaUrl:""}),f("")},onError:S=>{a({title:"Error",description:S.message||"Failed to add video content",variant:"destructive"})}}),ge=be({mutationFn:async({id:S,data:m})=>{const c={password:"pickntrust2025",title:m.title,description:m.description||"",category:m.category||"",tags:m.tags?m.tags.split(",").map(se=>se.trim()):[],videoUrl:m.videoUrl,thumbnailUrl:m.thumbnailUrl||"",platform:m.platform,duration:m.duration||"",hasTimer:!!m.hasTimer,timerDuration:m.hasTimer?parseInt(m.timerDuration):null,pages:m.pages||[],showOnHomepage:!!m.showOnHomepage,ctaText:m.ctaText||"",ctaUrl:m.ctaUrl||""},y=encodeURIComponent((c.pages||[]).join(",")),O=c.showOnHomepage?"true":"false",Q=`/api/admin/video-content/${S}?password=pickntrust2025&pages=${y}&showOnHomepage=${O}`,V=await fetch(Q,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(!V.ok)throw new Error("Failed to update video");return V.json()},onSuccess:()=>{a({title:"Updated!",description:"Video content updated successfully."}),r.invalidateQueries({queryKey:["/api/video-content"]}),s(null),B({title:"",description:"",category:"",tags:"",videoUrl:"",thumbnailUrl:"",platform:"any-website",duration:"",customFields:{},hasTimer:!1,timerDuration:"24",pages:[],showOnHomepage:!0,ctaText:"",ctaUrl:""}),f("")},onError:S=>{a({title:"Error",description:S.message||"Failed to update video content",variant:"destructive"})}}),Pe=be({mutationFn:async S=>{const m=await fetch(`/api/admin/video-content/${S}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:"pickntrust2025"})});if(!m.ok)throw new Error("Failed to delete video");return m.json()},onSuccess:()=>{a({title:"Success",description:"Video content deleted successfully!"}),r.invalidateQueries({queryKey:["/api/video-content"]})},onError:S=>{a({title:"Error",description:S.message||"Failed to delete video content",variant:"destructive"})}}),Y=be({mutationFn:async()=>{const S=await fetch("/api/admin/video-content/bulk-delete",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:"pickntrust2025"})});if(!S.ok)throw new Error("Failed to delete all videos");return S.json()},onSuccess:()=>{a({title:"Success",description:"All videos deleted successfully!"}),r.invalidateQueries({queryKey:["/api/video-content"]})},onError:S=>{a({title:"Error",description:S.message||"Failed to delete all videos",variant:"destructive"})}}),ke=S=>{if(S.preventDefault(),!w.title.trim()||!w.videoUrl.trim()){a({title:"Error",description:"Title and video URL are required",variant:"destructive"});return}const m=q(u),c=Array.from(new Set([...w.pages||[],...m]));t?ge.mutate({id:t,data:{...w,platform:i,pages:c}}):$.mutate({...w,platform:i,pages:c})},_e=S=>{confirm("Are you sure you want to delete this video content?")&&Pe.mutate(S)},je=()=>{if(!Array.isArray(K)||K.length===0){a({title:"No Videos",description:"There are no videos to delete.",variant:"destructive"});return}const S=`Are you sure you want to delete ALL ${K.length} videos? This action cannot be undone!`;confirm(S)&&Y.mutate()},Be=I.find(S=>S.id===i);return e.jsxs("div",{className:"space-y-6",children:[e.jsx(re,{className:"bg-gradient-to-r from-purple-900 to-blue-900 text-white border-purple-700",children:e.jsxs(we,{children:[e.jsxs(Ne,{className:"flex items-center gap-3 text-2xl",children:[e.jsx(Dt,{className:"w-8 h-8 text-purple-300"}),e.jsx("i",{className:"fas fa-video"})," Video Content Manager"]}),e.jsx(Ae,{className:"text-purple-200",children:"Upload video files or add videos from any platform with auto-generated thumbnails"})]})}),e.jsx("div",{className:"flex flex-wrap gap-2",children:I.map(S=>e.jsxs(D,{variant:i===S.id?"default":"outline",onClick:()=>{n(S.id),B({...w,platform:S.id})},className:`flex items-center gap-2 ${i===S.id?`${S.color} text-white`:"border-gray-600 text-gray-300 hover:bg-gray-800"}`,children:[S.icon,S.name]},S.id))}),e.jsxs(re,{className:"bg-gray-900 text-white border-gray-700",children:[e.jsxs(we,{children:[e.jsxs(Ne,{className:"flex items-center gap-2 text-orange-400",children:[Be==null?void 0:Be.icon,"Add ",Be==null?void 0:Be.name," Video"]}),e.jsx(Ae,{className:"text-gray-300",children:"Add videos with automatic thumbnail extraction and timer functionality"})]}),e.jsx(ne,{children:e.jsxs("form",{onSubmit:ke,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(T,{className:"text-white font-medium",children:"Video URL *"}),e.jsx(W,{value:w.videoUrl,onChange:S=>B({...w,videoUrl:S.target.value}),placeholder:Be==null?void 0:Be.placeholder,className:"bg-gray-800 border-gray-600 text-white mt-2",required:!0}),e.jsxs("div",{className:"mt-3 p-4 bg-gray-800 rounded-lg border border-gray-600",children:[e.jsx(T,{className:"text-white font-medium mb-2 block",children:"Or Upload Video File"}),e.jsx("input",{type:"file",accept:"video/*",className:"hidden",id:"video-upload",onChange:G}),e.jsxs(D,{type:"button",variant:"outline",size:"sm",onClick:()=>{var S;return(S=document.getElementById("video-upload"))==null?void 0:S.click()},className:"w-full",disabled:l,children:[e.jsx(Os,{className:"w-4 h-4 mr-2"}),l?"Uploading...":"Upload Video File"]}),e.jsxs("p",{className:"text-xs text-purple-400 mt-2",children:[e.jsx("i",{className:"fas fa-film"})," Supports: MP4, WebM, OGG, MOV, AVI, WMV, FLV, MKV, M4V, 3GP (max 100MB)"]})]})]}),e.jsx("div",{children:w.videoUrl&&e.jsxs("div",{children:[e.jsx(T,{className:"text-white font-medium",children:"Preview"}),e.jsx("div",{className:"mt-2 border border-gray-600 rounded-lg overflow-hidden",children:J(w.videoUrl,w.platform)})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(T,{className:"text-white font-medium",children:"Title *"}),e.jsx(W,{value:w.title,onChange:S=>B({...w,title:S.target.value}),placeholder:"Amazing Video Title",className:"bg-gray-800 border-gray-600 text-white mt-2",required:!0})]}),e.jsxs("div",{children:[e.jsx(T,{className:"text-white font-medium",children:"Category"}),e.jsxs(Ge,{value:w.category,onValueChange:S=>B({...w,category:S}),children:[e.jsx(We,{className:"bg-gray-800 border-gray-600 text-white mt-2",children:e.jsx(ze,{placeholder:"Select category"})}),e.jsx(He,{className:"bg-gray-800 border-gray-600",children:p.filter(S=>{var m;return(m=Z[S])==null?void 0:m.length}).map((S,m,c)=>e.jsxs(el,{children:[e.jsx("div",{className:"px-2 py-1 text-xs uppercase tracking-wide font-bold text-white",children:S}),Z[S].map(y=>e.jsx(ce,{value:y.name,className:"text-white hover:bg-gray-700",children:y.name},y.id??y.name)),m<c.length-1&&e.jsx(tl,{className:"bg-gray-700"})]},S))})]})]})]}),e.jsxs("div",{children:[e.jsx(T,{className:"text-white font-medium",children:"Description"}),e.jsx(vt,{value:w.description,onChange:S=>B({...w,description:S.target.value}),placeholder:"Detailed description of the video content...",className:"bg-gray-800 border-gray-600 text-white mt-2",rows:4})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(T,{className:"text-white font-medium",children:"Tags"}),e.jsx(W,{value:w.tags,onChange:S=>B({...w,tags:S.target.value}),placeholder:"viral, trending, funny",className:"bg-gray-800 border-gray-600 text-white mt-2"})]}),e.jsxs("div",{children:[e.jsx(T,{className:"text-white font-medium",children:"Duration"}),e.jsx(W,{value:w.duration,onChange:S=>B({...w,duration:S.target.value}),placeholder:"5:30",className:"bg-gray-800 border-gray-600 text-white mt-2"})]})]}),e.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg border border-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Zt,{className:"w-5 h-5 text-blue-400"}),e.jsx(T,{className:"text-white font-medium",children:"Video Thumbnail"})]}),e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",id:"auto-thumbnail",name:"thumbnailMode",checked:x==="auto",onChange:()=>{b("auto");const S=F(w.videoUrl);S&&B({...w,thumbnailUrl:S})},className:"rounded border-gray-600 bg-gray-700"}),e.jsx(T,{htmlFor:"auto-thumbnail",className:"text-white text-sm",children:"Auto-generate (Default)"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",id:"manual-thumbnail",name:"thumbnailMode",checked:x==="manual",onChange:()=>b("manual"),className:"rounded border-gray-600 bg-gray-700"}),e.jsx(T,{htmlFor:"manual-thumbnail",className:"text-white text-sm",children:"Manual URL"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",id:"upload-thumbnail",name:"thumbnailMode",checked:x==="upload",onChange:()=>b("upload"),className:"rounded border-gray-600 bg-gray-700"}),e.jsx(T,{htmlFor:"upload-thumbnail",className:"text-white text-sm",children:"Upload Image"})]})]}),x==="auto"&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{value:w.thumbnailUrl,placeholder:"Auto-generated from video URL",className:"bg-gray-700 border-gray-600 text-white",disabled:!0}),e.jsxs(D,{type:"button",variant:"outline",size:"sm",onClick:()=>{const S=F(w.videoUrl);S?(B({...w,thumbnailUrl:S}),a({title:"Success",description:"Thumbnail auto-generated!"})):a({title:"Info",description:"Auto-generation not available for this platform."})},disabled:!w.videoUrl,children:[e.jsx(Ut,{className:"w-3 h-3 mr-1"}),"Regenerate"]})]}),e.jsxs("p",{className:"text-xs text-blue-400",children:[e.jsx("i",{className:"fas fa-sparkles"})," Automatically extracts thumbnail from YouTube, Vimeo, and other supported platforms"]})]}),x==="manual"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{value:w.thumbnailUrl,onChange:S=>B({...w,thumbnailUrl:S.target.value}),placeholder:"https://example.com/thumbnail.jpg",className:"bg-gray-700 border-gray-600 text-white"}),e.jsxs("p",{className:"text-xs text-green-400",children:[e.jsx("i",{className:"fas fa-link"})," Enter a direct URL to your custom thumbnail image"]})]}),x==="upload"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"file",accept:"image/*",className:"hidden",id:"thumbnail-upload",onChange:_}),e.jsxs(D,{type:"button",variant:"outline",size:"sm",onClick:()=>{var S;return(S=document.getElementById("thumbnail-upload"))==null?void 0:S.click()},className:"w-full",disabled:d,children:[e.jsx(Os,{className:"w-4 h-4 mr-2"}),d?"Uploading...":"Upload Thumbnail Image"]}),e.jsxs("p",{className:"text-xs text-purple-400",children:[e.jsx("i",{className:"fas fa-folder"})," Supports: JPEG, PNG, GIF, WebP, BMP, SVG, TIFF, ICO, AVIF (max 10MB)"]})]}),w.thumbnailUrl&&e.jsxs("div",{className:"mt-3 border border-gray-600 rounded-lg overflow-hidden",children:[e.jsx("img",{src:w.thumbnailUrl,alt:"Thumbnail preview",className:"w-full h-32 object-cover",onError:S=>{S.target.src="https://images.unsplash.com/photo-1486312338219-ce68d2c6f44d?w=400"}}),e.jsx("div",{className:"p-2 bg-gray-800",children:e.jsxs("p",{className:"text-xs text-green-400",children:[e.jsx("i",{className:"fas fa-check-circle"})," Thumbnail loaded successfully"]})})]})]}),e.jsxs("div",{className:"p-4 bg-gray-800 rounded-lg border border-gray-600",children:[e.jsx("h3",{className:"text-white font-medium mb-4",children:" Video Display Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"showOnHomepage",checked:w.showOnHomepage,onChange:S=>B({...w,showOnHomepage:S.target.checked}),className:"rounded"}),e.jsxs(T,{htmlFor:"showOnHomepage",className:"text-white",children:[e.jsx("i",{className:"fas fa-home"})," Show on Homepage"]})]}),e.jsxs("div",{children:[e.jsxs(T,{className:"text-white font-medium mb-3 block",children:[e.jsx("i",{className:"fas fa-file-alt"})," Additional Pages (Select Multiple)"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 max-h-40 overflow-y-auto",children:N.map(S=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:`page-${S.value}`,checked:w.pages.includes(S.value),onChange:m=>{m.target.checked?B({...w,pages:[...w.pages,S.value]}):B({...w,pages:w.pages.filter(c=>c!==S.value)})},className:"rounded"}),e.jsx(T,{htmlFor:`page-${S.value}`,className:"text-white text-sm",children:S.label})]},S.value))}),e.jsxs("p",{className:"text-xs text-blue-400 mt-2",children:[e.jsx("i",{className:"fas fa-sparkles"})," Video will appear on homepage (if checked) and all selected pages"]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs(T,{className:"text-white font-medium mb-2 block",children:[e.jsx("i",{className:"fas fa-keyboard"})," Manual page slugs (comma-separated)"]}),e.jsx(W,{value:u,onChange:S=>f(S.target.value),placeholder:"e.g., videos, apps, services",className:"bg-gray-800 border-gray-600 text-white"}),e.jsxs("p",{className:"text-xs text-purple-400 mt-2",children:[e.jsx("i",{className:"fas fa-info-circle"})," These slugs will be added along with selected pages when you save."]}),(()=>{const S=Array.from(new Set([...w.pages||[],...q(u)]));return e.jsxs("p",{className:"text-xs text-green-400 mt-1",children:[e.jsx("i",{className:"fas fa-list"})," Effective pages: ",S.length?S.join(", "):"none"]})})()]})]})]})]}),e.jsxs("div",{className:"p-4 bg-gray-800 rounded-lg border border-gray-600",children:[e.jsxs("h3",{className:"text-white font-medium mb-4",children:[e.jsx("i",{className:"fas fa-link"})," Call-to-Action Button (Optional)"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(T,{className:"text-white font-medium",children:"Button Text"}),e.jsx(W,{value:w.ctaText,onChange:S=>B({...w,ctaText:S.target.value}),placeholder:"e.g., Learn More, Buy Now, Visit Site",className:"bg-gray-700 border-gray-600 text-white mt-2"})]}),e.jsxs("div",{children:[e.jsx(T,{className:"text-white font-medium",children:"Button URL"}),e.jsx(W,{value:w.ctaUrl,onChange:S=>B({...w,ctaUrl:S.target.value}),placeholder:"https://example.com",className:"bg-gray-700 border-gray-600 text-white mt-2",type:"url"})]})]}),w.ctaText&&w.ctaUrl&&e.jsxs("div",{className:"mt-3 p-3 bg-green-900/30 border border-green-600/50 rounded-lg",children:[e.jsx("div",{className:"flex items-center gap-2 text-green-400",children:e.jsxs("span",{className:"text-sm font-medium",children:[e.jsx("i",{className:"fas fa-check-circle"})," CTA Button Preview"]})}),e.jsx("button",{className:"mt-2 px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium",children:w.ctaText}),e.jsxs("p",{className:"text-green-300 text-xs mt-1",children:["Will link to: ",w.ctaUrl]})]})]}),e.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg border border-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(pa,{className:"w-5 h-5 text-yellow-400"}),e.jsx(T,{className:"text-white font-medium",children:"Auto-Delete Timer"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"hasTimer",checked:w.hasTimer,onChange:S=>B({...w,hasTimer:S.target.checked}),className:"rounded border-gray-600 bg-gray-700"}),e.jsx(T,{htmlFor:"hasTimer",className:"text-white text-sm",children:"Enable auto-delete after specified hours"})]}),w.hasTimer&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(Ge,{value:w.timerDuration,onValueChange:S=>B({...w,timerDuration:S}),children:[e.jsx(We,{className:"bg-gray-700 border-gray-600 text-white w-40",children:e.jsx(ze,{})}),e.jsxs(He,{className:"bg-gray-800 border-gray-600",children:[e.jsx(ce,{value:"1",className:"text-white hover:bg-gray-700",children:"1 hour"}),e.jsx(ce,{value:"6",className:"text-white hover:bg-gray-700",children:"6 hours"}),e.jsx(ce,{value:"12",className:"text-white hover:bg-gray-700",children:"12 hours"}),e.jsx(ce,{value:"24",className:"text-white hover:bg-gray-700",children:"24 hours (1 day)"}),e.jsx(ce,{value:"48",className:"text-white hover:bg-gray-700",children:"48 hours (2 days)"}),e.jsx(ce,{value:"72",className:"text-white hover:bg-gray-700",children:"72 hours (3 days)"}),e.jsx(ce,{value:"168",className:"text-white hover:bg-gray-700",children:"168 hours (1 week)"})]})]})})]}),w.hasTimer&&e.jsxs("div",{className:"mt-3 p-3 bg-yellow-900/30 border border-yellow-600/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-yellow-400",children:[e.jsx("i",{className:"fas fa-exclamation-triangle"}),e.jsx("span",{className:"text-sm font-medium",children:"Auto-Delete Warning"})]}),e.jsxs("p",{className:"text-yellow-300 text-xs mt-1",children:["This video will be automatically deleted after ",w.timerDuration," hours. The countdown is hidden from frontend users."]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[t&&e.jsx(D,{type:"button",variant:"outline",className:"border-gray-600 text-gray-200",onClick:()=>{s(null)},children:"Cancel Edit"}),e.jsx(D,{type:"submit",disabled:t?ge.isPending:$.isPending,className:"bg-green-600 hover:bg-green-700 text-white px-8",children:t?ge.isPending?"Saving Changes...":"Save Changes":$.isPending?"Adding Video...":"Add Video Content"})]})]})})]}),e.jsxs(re,{children:[e.jsx(we,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(Ne,{children:["Video Library (",Array.isArray(K)?K.length:0,")"]}),e.jsx(Ae,{children:"Manage all your video content with editing, timer status, and organization tools"})]}),Array.isArray(K)&&K.length>0&&e.jsxs(D,{variant:"destructive",size:"sm",onClick:je,disabled:Y.isPending,className:"bg-red-600 hover:bg-red-700",children:[e.jsx(Yt,{className:"w-4 h-4 mr-2"}),Y.isPending?"Deleting...":"Delete All"]})]})}),e.jsx(ne,{children:ee?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Loading video content..."})]}):!Array.isArray(K)||K.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Dt,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No video content found. Add your first video above."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:K.map(S=>{var m,c;return e.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"relative",children:[J(S.videoUrl,S.platform),e.jsx(Ce,{className:`absolute top-2 right-2 ${((m=I.find(y=>y.id===S.platform))==null?void 0:m.color)||"bg-gray-600"}`,children:((c=I.find(y=>y.id===S.platform))==null?void 0:c.name)||S.platform}),S.hasTimer&&e.jsxs(Ce,{className:"absolute top-2 left-2 bg-yellow-600 text-white",children:[e.jsx(pa,{className:"w-3 h-3 mr-1"}),S.timerDuration,"h"]})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-semibold text-white mb-2 line-clamp-2",children:S.title}),e.jsx("p",{className:"text-gray-400 text-sm mb-3 line-clamp-2",children:S.description}),e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ce,{variant:"secondary",className:"text-xs",children:S.category}),S.duration&&e.jsx("span",{className:"text-xs text-gray-400",children:S.duration})]})}),e.jsxs("div",{className:"flex flex-wrap gap-1 mb-3",children:[S.showOnHomepage&&e.jsxs(Ce,{className:"bg-blue-600 text-white text-xs",children:[e.jsx("i",{className:"fas fa-home"})," Homepage"]}),S.pages&&S.pages.length>0&&e.jsxs(Ce,{className:"bg-green-600 text-white text-xs",children:[" ",S.pages.length," Page",S.pages.length>1?"s":""]}),S.ctaText&&S.ctaUrl&&e.jsxs(Ce,{className:"bg-purple-600 text-white text-xs",children:[e.jsx("i",{className:"fas fa-link"})," CTA"]}),!S.showOnHomepage&&(!S.pages||S.pages.length===0)&&e.jsx(Ce,{className:"bg-gray-600 text-white text-xs",children:" Not displayed"})]}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(D,{variant:"ghost",size:"sm",className:"text-gray-400 hover:text-white",onClick:()=>window.open(A(S.videoUrl),"_blank"),title:"View video",children:e.jsx(kt,{className:"w-4 h-4"})}),e.jsx(D,{variant:"ghost",size:"sm",className:"text-gray-400 hover:text-white",onClick:()=>{B({title:S.title,description:S.description||"",category:S.category||"",tags:Array.isArray(S.tags)?S.tags.join(", "):S.tags||"",videoUrl:S.videoUrl,thumbnailUrl:S.thumbnailUrl||"",platform:S.platform,duration:S.duration||"",customFields:S.customFields||{},hasTimer:S.hasTimer||!1,timerDuration:S.timerDuration?S.timerDuration.toString():"24",pages:S.pages||[],showOnHomepage:S.showOnHomepage??!0,ctaText:S.ctaText||"",ctaUrl:S.ctaUrl||""}),s(S.id),n(S.platform),S.thumbnailUrl&&(S.thumbnailUrl.includes("youtube.com")||S.thumbnailUrl.includes("vimeo.com")?b("auto"):S.thumbnailUrl.startsWith("data:image/")?b("upload"):b("manual")),a({title:"Edit Mode",description:"Video content loaded for editing. Make your changes and save."}),window.scrollTo({top:0,behavior:"smooth"})},title:"Edit video",children:e.jsx(Lt,{className:"w-4 h-4"})}),e.jsx(D,{variant:"ghost",size:"sm",className:"text-red-400 hover:text-red-300",onClick:()=>_e(S.id),disabled:Pe.isPending,title:"Delete video",children:e.jsx(Yt,{className:"w-4 h-4"})})]})})]})]},S.id)})})})]})]})}function na({value:t,onChange:s,label:a,className:r=""}){const[i,n]=E.useState(!1),[l,o]=E.useState(!1),[d,g]=E.useState("RGB"),[x,b]=E.useState([]),u=[["#000000","#7F7F7F","#880015","#ED1C24","#FF7F27","#FFF200","#22B14C","#00A2E8","#3F48CC","#A349A4"],["#FFFFFF","#C3C3C3","#B97A57","#FFAEC9","#FFC90E","#EFE4B0","#B5E61D","#99D9EA","#7092BE","#C8BFE7"],["#F7F7F7","#A0A0A0","#C49C94","#F7977A","#F9AD81","#FDC68A","#C4DF9B","#A2D2FF","#738BD7","#D8A1D6"],["#E6E6E6","#7F7F7F","#A67C52","#F15A24","#F26522","#F7931E","#8DC73F","#39B54A","#00AEEF","#652C91"],["#CCCCCC","#595959","#8C6239","#C1272D","#E4002B","#F15A29","#8CC63F","#00A651","#0071BC","#92278F"],["#B3B3B3","#3F3F3F","#603813","#9E0B0F","#DA020E","#DD4124","#79B82F","#00A99D","#0054A6","#6B1E99"]],f=["#E74C3C","#F39C12","#F1C40F","#2ECC71","#1ABC9C","#3498DB","#9B59B6","#E67E22","#95A5A6","#34495E"],w=[["#FFB3BA","#FF6B6B","#8B4513","#CD5C5C","#DC143C","#AFEEEE","#40E0D0","#4169E1","#6495ED","#98FB98"],["#FFEB9C","#FFD700","#DEB887","#D2691E","#FF4500","#DA70D6","#9370DB","#4B0082","#483D8B","#C0C0C0"],["#90EE90","#32CD32","#228B22","#006400","#FFB6C1","#FF1493","#DC143C","#B22222","#8A2BE2","#9400D3"],["#98FB98","#00FA9A","#00CED1","#9932CC","#FF6347","#FF8C00","#FFD700","#808080","#696969","#2F4F4F"]],B=F=>{const _=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(F);return _?{r:parseInt(_[1],16),g:parseInt(_[2],16),b:parseInt(_[3],16)}:{r:0,g:0,b:0}},C=(F,_,j)=>"#"+((1<<24)+(F<<16)+(_<<8)+j).toString(16).slice(1),q=B(t),[R,Z]=E.useState(q),p=(F,_)=>{const j={...R,[F]:_};Z(j),s(C(j.r,j.g,j.b))},I=F=>{!x.includes(F)&&x.length<24&&b([...x,F])};return e.jsxs("div",{className:`relative ${r}`,children:[a&&e.jsx(T,{className:"text-white font-medium mb-2 block",children:a}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 rounded border-2 border-gray-600 cursor-pointer",style:{backgroundColor:t},onClick:()=>n(!i)}),e.jsx("button",{type:"button",className:"text-gray-400 text-sm",onClick:()=>n(!i),children:e.jsx($o,{className:"w-4 h-4"})})]}),e.jsx(W,{value:t,onChange:F=>s(F.target.value),className:"bg-gray-900 border-gray-600 text-white flex-1",placeholder:"#3b82f6"})]}),i&&e.jsx(re,{className:"absolute top-full left-0 z-50 w-80 mt-2 bg-gray-800 border-gray-600",children:e.jsxs(ne,{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",className:"rounded"}),e.jsx("span",{className:"text-white text-sm",children:"Automatic"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-white text-sm font-medium mb-2",children:"Theme Colors"}),e.jsx("div",{className:"space-y-1",children:u.map((F,_)=>e.jsx("div",{className:"flex gap-1",children:F.map((j,A)=>e.jsx("button",{className:"w-6 h-6 rounded border border-gray-600 hover:scale-110 transition-transform",style:{backgroundColor:j},onClick:()=>{s(j),n(!1)}},A))},_))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-white text-sm font-medium mb-2",children:"Standard Colors"}),e.jsx("div",{className:"flex gap-1",children:f.map((F,_)=>e.jsx("button",{className:"w-6 h-6 rounded border border-gray-600 hover:scale-110 transition-transform",style:{backgroundColor:F},onClick:()=>{s(F),n(!1)}},_))})]}),e.jsxs(D,{variant:"ghost",className:"w-full text-blue-400 hover:bg-gray-700 justify-start",onClick:()=>o(!0),children:[e.jsx(cr,{className:"w-4 h-4 mr-2"}),"More Colors..."]})]})}),l&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs(re,{className:"w-[600px] max-h-[90vh] overflow-y-auto bg-gray-800 border-gray-600",children:[e.jsx(we,{children:e.jsx(Ne,{className:"text-white",children:"Edit colours"})}),e.jsxs(ne,{className:"space-y-6",children:[e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"w-full h-48 rounded-lg relative cursor-crosshair",style:{background:"linear-gradient(to right, #ff0000, #ffff00, #00ff00, #00ffff, #0000ff, #ff00ff, #ff0000)"},children:e.jsx("div",{className:"absolute w-4 h-4 border-2 border-white rounded-full transform -translate-x-2 -translate-y-2",style:{left:"10%",top:"20%"}})}),e.jsxs("div",{className:"mt-4 flex items-center gap-3",children:[e.jsx("div",{className:"w-full h-6 rounded",style:{background:"linear-gradient(to right, #000000, #ffffff)"}}),e.jsx("div",{className:"w-4 h-6 bg-white border border-gray-400 rounded"})]})]}),e.jsxs("div",{className:"w-48 space-y-4",children:[e.jsx(W,{value:t,onChange:F=>s(F.target.value),className:"bg-gray-700 border-gray-600 text-white",placeholder:"#3b82f6"}),e.jsxs(Ge,{value:d,onValueChange:g,children:[e.jsx(We,{className:"bg-gray-700 border-gray-600 text-white",children:e.jsx(ze,{})}),e.jsxs(He,{className:"bg-gray-700 border-gray-600",children:[e.jsx(ce,{value:"RGB",className:"text-white",children:"RGB"}),e.jsx(ce,{value:"HSL",className:"text-white",children:"HSL"}),e.jsx(ce,{value:"HSV",className:"text-white",children:"HSV"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-white text-sm mb-1",children:[e.jsx("span",{children:"Red"}),e.jsx("span",{children:R.r})]}),e.jsx("input",{type:"range",min:"0",max:"255",value:R.r,onChange:F=>p("r",parseInt(F.target.value)),className:"w-full h-2 bg-gray-600 rounded-lg appearance-none slider-thumb"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-white text-sm mb-1",children:[e.jsx("span",{children:"Green"}),e.jsx("span",{children:R.g})]}),e.jsx("input",{type:"range",min:"0",max:"255",value:R.g,onChange:F=>p("g",parseInt(F.target.value)),className:"w-full h-2 bg-gray-600 rounded-lg appearance-none slider-thumb"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-white text-sm mb-1",children:[e.jsx("span",{children:"Blue"}),e.jsx("span",{children:R.b})]}),e.jsx("input",{type:"range",min:"0",max:"255",value:R.b,onChange:F=>p("b",parseInt(F.target.value)),className:"w-full h-2 bg-gray-600 rounded-lg appearance-none slider-thumb"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-white text-sm font-medium mb-3",children:"Basic colours"}),e.jsx("div",{className:"space-y-2",children:w.map((F,_)=>e.jsx("div",{className:"flex gap-2",children:F.map((j,A)=>e.jsx("button",{className:"w-8 h-8 rounded border border-gray-600 hover:scale-110 transition-transform",style:{backgroundColor:j},onClick:()=>{s(j),I(j)}},A))},_))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h4",{className:"text-white text-sm font-medium",children:"Customised colours"}),e.jsx(D,{variant:"ghost",size:"sm",className:"text-gray-400 hover:text-white",onClick:()=>I(t),children:e.jsx(tt,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"grid grid-cols-6 gap-2",children:Array.from({length:24},(F,_)=>e.jsx("button",{className:"w-8 h-8 rounded border-2 border-dashed border-gray-600 hover:border-gray-400 transition-colors",style:{backgroundColor:x[_]||"transparent",borderStyle:x[_]?"solid":"dashed"},onClick:()=>{x[_]&&s(x[_])}},_))})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(D,{variant:"ghost",onClick:()=>o(!1),className:"text-gray-400 hover:text-white",children:"Cancel"}),e.jsx(D,{onClick:()=>{o(!1),n(!1),I(t)},className:"bg-orange-600 hover:bg-orange-700 text-white",children:"OK"})]})]})]})}),e.jsx("style",{dangerouslySetInnerHTML:{__html:`
          .slider-thumb::-webkit-slider-thumb {
            appearance: none;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #3b82f6;
            cursor: pointer;
            border: 2px solid white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
          }
          
          .slider-thumb::-moz-range-thumb {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #3b82f6;
            cursor: pointer;
            border: 2px solid white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
          }
        `}})]})}const jr={home:{name:"Home Page",icon:"",description:"Main landing page with featured content"},blog:{name:"Blog Listing",icon:"",description:"Blog posts listing page"},"blog-post":{name:"Blog Posts",icon:"",description:"Individual blog post pages"},apps:{name:"Apps & AI Tools",icon:"",description:"Apps and AI tools showcase"},videos:{name:"Videos",icon:"",description:"Video content and reviews"},services:{name:"Services",icon:"",description:"Services and subscriptions"},"top-picks":{name:"Top Picks",icon:"",description:"Editor's choice products"},"travel-picks":{name:"Travel Picks",icon:"",description:"Travel deals and recommendations"},"prime-picks":{name:"Prime Picks",icon:"",description:"Premium product selections"},"value-picks":{name:"Value Picks",icon:"",description:"Best value for money deals"},"click-picks":{name:"Click Picks",icon:"",description:"One-click shopping deals"},"cue-picks":{name:"Cue Picks",icon:"",description:"Trending and curated picks"},"global-picks":{name:"Global Picks",icon:"",description:"International product selections"},"deals-hub":{name:"Deals Hub",icon:"",description:"Hot deals and discounts"},"loot-box":{name:"Loot Box",icon:"",description:"Mystery deals and surprises"},trending:{name:"Trending",icon:"",description:"Most popular and trending products"},flights:{name:"Flights",icon:"",description:"Flight booking and deals"},hotels:{name:"Hotels",icon:"",description:"Hotel booking and deals"},search:{name:"Search Results",icon:"",description:"Product search results"},"browse-categories":{name:"Browse Categories",icon:"",description:"Product category browser"},wishlist:{name:"Wishlist",icon:"",description:"User wishlist and saved items"}};function $r(){return Object.keys(jr).map(a=>{const r=jr[a];return{id:a,path:a==="home"?"/":`/${a}`,...r}}).sort((a,r)=>a.name.localeCompare(r.name))}function md(t){const s=jr[t];return s?{id:t,path:t==="home"?"/":`/${t}`,...s}:null}function nn(t){const s=md(t);return s?`${s.icon} ${s.name}`:t}async function pd(){try{const t=await fetch("/api/pages");if(!t.ok)throw new Error(`API request failed: ${t.status}`);const s=await t.json();if(s.success&&Array.isArray(s.pages))return s.pages;throw new Error("Invalid API response format")}catch(t){return console.error("Failed to fetch pages from API:",t),$r()}}async function wl(){try{return await pd()}catch(t){return console.warn("API unavailable, using static pages:",t),$r()}}function gd(){var F,_;const{toast:t}=ht(),s=bt(),[a,r]=E.useState(!1),[i,n]=E.useState([]);E.useEffect(()=>{(async()=>{try{const A=await wl();n(A)}catch(A){console.error("Failed to load pages:",A);const G=$r();n(G)}})()},[]);const[l,o]=E.useState({message:"",textColor:"#ffffff",backgroundColor:"#3b82f6",fontSize:"Medium (16px)",fontWeight:"Normal",textDecoration:"None",fontStyle:"Normal",animationSpeed:"Medium (30s)",textBorderWidth:"None (0px)",textBorderStyle:"Solid",textBorderColor:"#000000",bannerBorderWidth:"None (0px)",bannerBorderStyle:"Solid",bannerBorderColor:"#000000",page:"",isGlobal:!0}),{data:d=[],isLoading:g,error:x}=Re({queryKey:["/api/admin/announcements"],queryFn:async()=>{const A=await fetch("/api/admin/announcements?password=pickntrust2025");if(!A.ok)throw new Error("Failed to fetch announcements");return A.json()},retry:1}),b=be({mutationFn:async j=>{const A="pickntrust2025",G={...j,fontSize:j.fontSize.includes("(")?j.fontSize.match(/\(([^)]+)\)/)[1]:j.fontSize,animationSpeed:j.animationSpeed.includes("(")?j.animationSpeed.match(/\(([^)]+)\)/)[1].replace("s",""):j.animationSpeed,textBorderWidth:j.textBorderWidth.includes("(")?j.textBorderWidth.match(/\(([^)]+)\)/)[1]:j.textBorderWidth,bannerBorderWidth:j.bannerBorderWidth.includes("(")?j.bannerBorderWidth.match(/\(([^)]+)\)/)[1]:j.bannerBorderWidth},J=await fetch("/api/admin/announcements",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:A,...G})});if(!J.ok){const K=await J.json();throw new Error(K.message||"Failed to add announcement")}return J.json()},onSuccess:()=>{s.invalidateQueries({queryKey:["/api/admin/announcements"]}),o({message:"",textColor:"#ffffff",backgroundColor:"#3b82f6",fontSize:"Medium (16px)",fontWeight:"Normal",textDecoration:"None",fontStyle:"Normal",animationSpeed:"Medium (30s)",textBorderWidth:"None (0px)",textBorderStyle:"Solid",textBorderColor:"#000000",bannerBorderWidth:"None (0px)",bannerBorderStyle:"Solid",bannerBorderColor:"#000000",page:"",isGlobal:!0}),r(!1),t({title:"Success",description:"Announcement created successfully!"})},onError:j=>{t({title:"Error",description:j.message||"Failed to create announcement",variant:"destructive"})}}),u=be({mutationFn:async j=>{const G=await fetch(`/api/admin/announcements/${j}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:"pickntrust2025"})});if(!G.ok){const J=await G.json();throw new Error(J.message||"Failed to delete announcement")}return G.json()},onSuccess:()=>{s.invalidateQueries({queryKey:["/api/admin/announcements"]}),t({title:"Success",description:"Announcement deleted successfully!"})},onError:j=>{t({title:"Error",description:j.message||"Failed to delete announcement",variant:"destructive"})}}),f=j=>{if(j.preventDefault(),!l.message.trim()){t({title:"Error",description:"Announcement message is required",variant:"destructive"});return}b.mutate(l)},w=j=>{confirm("Are you sure you want to delete this announcement?")&&u.mutate(j)},B=["Extra Small (10px)","Small (12px)","Medium (16px)","Large (20px)","Extra Large (24px)","Huge (28px)","Giant (32px)","Massive (40px)"],C=["Thin","Extra Light","Light","Normal","Medium","Semi Bold","Bold","Extra Bold","Black"],q=["Normal","Italic","Oblique"],R=["None","Underline","Overline","Line Through","Underline Overline"],Z=["Lightning (5s)","Very Fast (10s)","Fast (20s)","Medium (30s)","Slow (40s)","Very Slow (60s)","Crawl (90s)"],p=["None (0px)","Hair (0.5px)","Thin (1px)","Medium (2px)","Thick (3px)","Extra Thick (5px)","Ultra Thick (8px)"],I=["Solid","Dashed","Dotted","Double","Groove","Ridge","Inset","Outset"];return x?e.jsx(re,{children:e.jsxs(we,{children:[e.jsx(Ne,{className:"text-red-600",children:"Error Loading Announcements"}),e.jsx(Ae,{children:"Failed to load announcements. Check your server connection."})]})}):e.jsxs("div",{className:"space-y-6 bg-gray-900 min-h-screen p-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Vo,{className:"w-6 h-6 text-blue-400"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-400",children:"Announcement Banner"}),e.jsx("p",{className:"text-gray-400",children:"Manage the scrolling announcement banner shown on the homepage"})]})]}),e.jsx(re,{className:"bg-gray-800 border-gray-700",children:e.jsx(ne,{className:"p-6",children:e.jsx("div",{className:"border-2 border-dashed border-gray-600 rounded-lg p-8 text-center",children:e.jsx("p",{className:"text-gray-400",children:d.length>0&&d.some(j=>j.isActive)?`Active announcement: "${(F=d.find(j=>j.isActive))==null?void 0:F.message}"`:"No active announcement. Create one below."})})})}),e.jsxs(re,{className:"bg-gray-800 border-gray-700",children:[e.jsx(we,{children:e.jsx(Ne,{className:"text-blue-400",children:"Create New Announcement"})}),e.jsx(ne,{className:"space-y-6",children:e.jsxs("form",{onSubmit:f,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(T,{className:"text-white font-medium",children:"Announcement Message"}),e.jsx(vt,{value:l.message,onChange:j=>o({...l,message:j.target.value}),placeholder:"Enter your announcement message (use emojis for more appeal!)",className:"bg-gray-900 border-gray-600 text-white mt-2",rows:3,required:!0})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(T,{className:"text-white font-medium",children:"Page Targeting"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(T,{className:"text-white font-medium",children:"Announcement Type"}),e.jsxs(Ge,{value:l.isGlobal?"global":"page-specific",onValueChange:j=>o({...l,isGlobal:j==="global",page:j==="global"?"":l.page}),children:[e.jsx(We,{className:"bg-gray-900 border-gray-600 text-white mt-2",children:e.jsx(ze,{})}),e.jsxs(He,{className:"bg-gray-900 border-gray-600",children:[e.jsx(ce,{value:"global",className:"text-white hover:bg-gray-700",children:" Global (All Pages)"}),e.jsx(ce,{value:"page-specific",className:"text-white hover:bg-gray-700",children:" Page-Specific"})]})]})]}),!l.isGlobal&&e.jsxs("div",{children:[e.jsx(T,{className:"text-white font-medium",children:"Target Page"}),e.jsxs(Ge,{value:l.page,onValueChange:j=>o({...l,page:j}),children:[e.jsx(We,{className:"bg-gray-900 border-gray-600 text-white mt-2",children:e.jsx(ze,{placeholder:"Select a page"})}),e.jsx(He,{className:"bg-gray-900 border-gray-600",children:i.map(j=>e.jsxs(ce,{value:j.id,className:"text-white hover:bg-gray-700",children:[j.icon," ",j.name]},j.id))})]})]})]}),e.jsx("p",{className:"text-gray-400 text-sm",children:l.isGlobal?"This announcement will appear on all pages of the website.":"This announcement will only appear on the selected page."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(na,{label:"Text Color",value:l.textColor,onChange:j=>o({...l,textColor:j})}),e.jsx(na,{label:"Background Color",value:l.backgroundColor,onChange:j=>o({...l,backgroundColor:j})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(T,{className:"text-white font-medium",children:"Font Size"}),e.jsxs(Ge,{value:l.fontSize,onValueChange:j=>o({...l,fontSize:j}),children:[e.jsx(We,{className:"bg-gray-900 border-gray-600 text-white mt-2",children:e.jsx(ze,{})}),e.jsx(He,{className:"bg-gray-900 border-gray-600",children:B.map(j=>e.jsx(ce,{value:j,className:"text-white hover:bg-gray-700",children:j},j))})]})]}),e.jsxs("div",{children:[e.jsx(T,{className:"text-white font-medium",children:"Font Weight"}),e.jsxs(Ge,{value:l.fontWeight,onValueChange:j=>o({...l,fontWeight:j}),children:[e.jsx(We,{className:"bg-gray-900 border-gray-600 text-white mt-2",children:e.jsx(ze,{})}),e.jsx(He,{className:"bg-gray-900 border-gray-600",children:C.map(j=>e.jsx(ce,{value:j,className:"text-white hover:bg-gray-700",children:j},j))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(T,{className:"text-white font-medium",children:"Font Style"}),e.jsxs(Ge,{value:l.fontStyle,onValueChange:j=>o({...l,fontStyle:j}),children:[e.jsx(We,{className:"bg-gray-900 border-gray-600 text-white mt-2",children:e.jsx(ze,{})}),e.jsx(He,{className:"bg-gray-900 border-gray-600",children:q.map(j=>e.jsx(ce,{value:j,className:"text-white hover:bg-gray-700",children:j},j))})]})]}),e.jsxs("div",{children:[e.jsx(T,{className:"text-white font-medium",children:"Text Decoration"}),e.jsxs(Ge,{value:l.textDecoration,onValueChange:j=>o({...l,textDecoration:j}),children:[e.jsx(We,{className:"bg-gray-900 border-gray-600 text-white mt-2",children:e.jsx(ze,{})}),e.jsx(He,{className:"bg-gray-900 border-gray-600",children:R.map(j=>e.jsx(ce,{value:j,className:"text-white hover:bg-gray-700",children:j},j))})]})]})]}),e.jsxs("div",{children:[e.jsx(T,{className:"text-white font-medium",children:"Animation Speed"}),e.jsxs(Ge,{value:l.animationSpeed,onValueChange:j=>o({...l,animationSpeed:j}),children:[e.jsx(We,{className:"bg-gray-900 border-gray-600 text-white mt-2",children:e.jsx(ze,{})}),e.jsx(He,{className:"bg-gray-900 border-gray-600",children:Z.map(j=>e.jsx(ce,{value:j,className:"text-white hover:bg-gray-700",children:j},j))})]})]}),e.jsxs(re,{className:"bg-gray-900 border-blue-600",children:[e.jsx(we,{className:"pb-3",children:e.jsxs(Ne,{className:"text-blue-400 text-lg flex items-center gap-2",children:[e.jsx(sl,{className:"w-5 h-5"}),"Text Border Options"]})}),e.jsx(ne,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(T,{className:"text-white font-medium",children:"Border Width"}),e.jsxs(Ge,{value:l.textBorderWidth,onValueChange:j=>o({...l,textBorderWidth:j}),children:[e.jsx(We,{className:"bg-gray-800 border-gray-600 text-white mt-2",children:e.jsx(ze,{})}),e.jsx(He,{className:"bg-gray-800 border-gray-600",children:p.map(j=>e.jsx(ce,{value:j,className:"text-white hover:bg-gray-700",children:j},j))})]})]}),e.jsxs("div",{children:[e.jsx(T,{className:"text-white font-medium",children:"Border Style"}),e.jsxs(Ge,{value:l.textBorderStyle,onValueChange:j=>o({...l,textBorderStyle:j}),children:[e.jsx(We,{className:"bg-gray-800 border-gray-600 text-white mt-2",children:e.jsx(ze,{})}),e.jsx(He,{className:"bg-gray-800 border-gray-600",children:I.map(j=>e.jsx(ce,{value:j,className:"text-white hover:bg-gray-700",children:j},j))})]})]}),e.jsx(na,{label:"Border Color",value:l.textBorderColor,onChange:j=>o({...l,textBorderColor:j})})]})})]}),e.jsxs(re,{className:"bg-gray-900 border-green-600",children:[e.jsx(we,{className:"pb-3",children:e.jsxs(Ne,{className:"text-green-400 text-lg flex items-center gap-2",children:[e.jsx(Ot,{className:"w-5 h-5"}),"Banner Border Options"]})}),e.jsx(ne,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(T,{className:"text-white font-medium",children:"Border Width"}),e.jsxs(Ge,{value:l.bannerBorderWidth,onValueChange:j=>o({...l,bannerBorderWidth:j}),children:[e.jsx(We,{className:"bg-gray-800 border-gray-600 text-white mt-2",children:e.jsx(ze,{})}),e.jsx(He,{className:"bg-gray-800 border-gray-600",children:p.map(j=>e.jsx(ce,{value:j,className:"text-white hover:bg-gray-700",children:j},j))})]})]}),e.jsxs("div",{children:[e.jsx(T,{className:"text-white font-medium",children:"Border Style"}),e.jsxs(Ge,{value:l.bannerBorderStyle,onValueChange:j=>o({...l,bannerBorderStyle:j}),children:[e.jsx(We,{className:"bg-gray-800 border-gray-600 text-white mt-2",children:e.jsx(ze,{})}),e.jsx(He,{className:"bg-gray-800 border-gray-600",children:I.map(j=>e.jsx(ce,{value:j,className:"text-white hover:bg-gray-700",children:j},j))})]})]}),e.jsx(na,{label:"Border Color",value:l.bannerBorderColor,onChange:j=>o({...l,bannerBorderColor:j})})]})})]}),e.jsxs("div",{children:[e.jsx(T,{className:"text-white font-medium",children:"Preview"}),e.jsx("div",{className:"mt-2 bg-blue-600 rounded-lg p-4 overflow-hidden",children:e.jsx("div",{className:"text-center whitespace-nowrap animate-marquee",style:{color:l.textColor,backgroundColor:l.backgroundColor,fontSize:l.fontSize.includes("(")?(_=l.fontSize.match(/\(([^)]+)\)/))==null?void 0:_[1]:"16px",fontWeight:l.fontWeight.toLowerCase(),fontStyle:l.fontStyle.toLowerCase(),textDecoration:l.textDecoration.toLowerCase().replace(" ","-"),padding:"12px",borderRadius:"4px"},children:l.message||"Your announcement will appear here..."})})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4",children:[e.jsxs(D,{type:"button",variant:"outline",className:"text-blue-400 border-blue-400 hover:bg-blue-900",children:[e.jsx(kt,{className:"w-4 h-4 mr-2"}),"Live Preview"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(D,{type:"button",variant:"outline",onClick:()=>r(!1),className:"text-gray-400 border-gray-600 hover:bg-gray-800",children:"Cancel"}),e.jsx(D,{type:"submit",disabled:b.isPending,className:"bg-blue-600 hover:bg-blue-700 text-white",children:b.isPending?"Saving...":"Save Announcement"})]})]})]})})]}),d.length>0&&e.jsxs(re,{className:"bg-gray-800 border-gray-700",children:[e.jsxs(we,{children:[e.jsxs(Ne,{className:"text-white",children:["Manage Announcements (",d.length,")"]}),e.jsx(Ae,{className:"text-gray-400",children:"View and manage all announcements"})]}),e.jsx(ne,{children:g?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-400",children:"Loading announcements..."})]}):e.jsx("div",{className:"space-y-4",children:d.map(j=>e.jsx("div",{className:"border border-gray-600 rounded-lg p-4 hover:shadow-md transition-shadow bg-gray-900",children:e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("h3",{className:"font-semibold text-white",children:["Announcement #",j.id]}),j.isActive&&e.jsx(Ce,{className:"bg-green-600 text-white",children:"Active"}),j.isGlobal?e.jsx(Ce,{className:"bg-blue-600 text-white",children:" Global"}):e.jsx(Ce,{className:"bg-purple-600 text-white",children:j.page?nn(j.page):" Page-Specific"})]}),e.jsx("div",{className:"p-3 rounded mb-2 text-center",style:{backgroundColor:j.backgroundColor,color:j.textColor,fontSize:j.fontSize,fontWeight:j.fontWeight},children:j.message}),e.jsxs("div",{className:"text-sm text-gray-400",children:[e.jsxs("p",{children:["Animation Speed: ",j.animationSpeed,"s"]}),e.jsxs("p",{children:["Target: ",j.isGlobal?"All Pages (Global)":`${j.page?nn(j.page):"Page-Specific"} Only`]}),e.jsxs("p",{children:["Created: ",j.createdAt?new Date(j.createdAt).toLocaleDateString():"Unknown"]})]})]}),e.jsx(D,{variant:"outline",size:"sm",onClick:()=>w(j.id),disabled:u.isPending,className:"text-red-400 border-red-400 hover:bg-red-900/20",children:"Delete"})]})},j.id))})})]})]})}const hd=[{id:"1",name:"Product Price Monitor",description:"Automatically check and update product prices from affiliate sources",type:"price_update",status:"active",schedule:"Every 6 hours",lastRun:new Date(Date.now()-2*60*60*1e3),nextRun:new Date(Date.now()+4*60*60*1e3),successRate:98.5},{id:"2",name:"New Product Discovery",description:"Scan affiliate networks for trending products in selected categories",type:"product_sync",status:"active",schedule:"Daily at 2:00 AM",lastRun:new Date(Date.now()-8*60*60*1e3),nextRun:new Date(Date.now()+16*60*60*1e3),successRate:92.1},{id:"3",name:"Weekly Newsletter",description:"Generate and send weekly newsletter with top deals and new products",type:"email_campaign",status:"paused",schedule:"Weekly on Sunday",lastRun:new Date(Date.now()-7*24*60*60*1e3),nextRun:new Date(Date.now()+2*24*60*60*1e3),successRate:95.8},{id:"4",name:"Content Auto-Generation",description:"Generate product descriptions and blog content using AI",type:"content_generation",status:"active",schedule:"Every 12 hours",lastRun:new Date(Date.now()-5*60*60*1e3),nextRun:new Date(Date.now()+7*60*60*1e3),successRate:87.3},{id:"5",name:"Analytics Report",description:"Generate daily analytics reports and performance insights",type:"analytics",status:"active",schedule:"Daily at 6:00 AM",lastRun:new Date(Date.now()-18*60*60*1e3),nextRun:new Date(Date.now()+6*60*60*1e3),successRate:99.2},{id:"6",name:"Database Backup",description:"Automated backup of all database content and configurations",type:"backup",status:"active",schedule:"Daily at 3:00 AM",lastRun:new Date(Date.now()-21*60*60*1e3),nextRun:new Date(Date.now()+3*60*60*1e3),successRate:100}];function fd(){const{toast:t}=ht(),s=bt(),[a,r]=E.useState(hd),[i,n]=E.useState(!1),[l,o]=E.useState({name:"",description:"",type:"product_sync",schedule:"daily"}),[d,g]=E.useState([]),[x,b]=E.useState(!1),[u,f]=E.useState({key:"",name:"",apiUrl:"",apiKey:"",apiSecret:"",webhookUrl:"",color:"text-purple-300",icon:mi}),[w,B]=E.useState({templates:[],audio:[]}),[C,q]=E.useState(null),[R,Z]=E.useState(!1),[p,I]=E.useState({isEnabled:!1,autoGenerateCaptions:!0,autoGenerateHashtags:!0,platforms:["instagram","facebook"],scheduleType:"immediate",scheduleDelayMinutes:0,enableBlogPosts:!0,enableVideos:!0}),[F,_]=E.useState(!1),[j,A]=E.useState({instagram:[""],"instagram-reels":[""],facebook:[""],twitter:[""],whatsapp:[""],telegram:[""],youtube:[""],"youtube-shorts":[""]}),[G,J]=E.useState([""]),[K,ee]=E.useState({instagram:null,"instagram-reels":null,facebook:null,twitter:null,whatsapp:null,telegram:null,youtube:null,"youtube-shorts":null}),[ue,N]=E.useState(null),$=()=>{if(!u.key||!u.name){t({title:"Error",description:"Platform key and name are required",variant:"destructive"});return}({...u,key:u.key.toLowerCase().replace(/\s+/g,"_"),id:Date.now().toString()})},ge=async()=>{try{const U=await(await fetch("/api/admin/backend-templates?password=admin")).json();U.success&&B({templates:U.templates||[],audio:U.audio||[]})}catch(k){console.error("Error fetching backend templates:",k)}},Pe=async()=>{try{const U=await(await fetch("/api/admin/backend-templates/stats?password=admin")).json();U.success&&q(U.stats)}catch(k){console.error("Error fetching template stats:",k)}},Y=async()=>{try{const U=await(await fetch("/api/admin/backend-templates/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:"admin",productData:{id:Date.now(),name:"Test Electronics Product",description:"A high-tech gadget for testing our smart template system",price:"1,999",category:"electronics",imageUrl:"/placeholder-image.png"}})})).json();if(U.success)t({title:"Template Test Successful",description:`Generated content: ${U.generatedUrl}`});else throw new Error(U.error||"Test failed")}catch(k){console.error("Template test failed:",k),t({title:"Template Test Failed",description:k.message,variant:"destructive"})}};E.useEffect(()=>{ge(),Pe()},[]);const ke=k=>{g(U=>U.filter(ae=>ae.id!==k)),t({title:"Platform Removed",description:"Platform has been removed successfully"})},_e=async k=>{try{t({title:"Platform Test",description:`Testing connection to ${k.name}...`})}catch{t({title:"Test Failed",description:"Failed to connect to platform",variant:"destructive"})}},{data:je,isLoading:Be}=Re({queryKey:["canva-settings"],queryFn:async()=>{const k=Ve(),U=await fetch(`/api/admin/canva/settings?password=${encodeURIComponent(k)}`);if(!U.ok){const xe=await U.json().catch(()=>({}));throw new Error(xe.error||xe.message||"Failed to fetch Canva settings")}const ae=await U.json();return(ae==null?void 0:ae.settings)||{is_enabled:!1,auto_generate_captions:!0,auto_generate_hashtags:!0,platforms:["instagram","facebook"],schedule_type:"immediate",schedule_delay_minutes:0,enable_blog_posts:!0,enable_videos:!0}}}),S=be({mutationFn:async k=>{const U=Ve(),ae=await fetch("/api/admin/canva/settings",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:U,...k})});if(!ae.ok){const xe=await ae.json().catch(()=>({}));throw new Error(xe.error||xe.message||"Failed to update Canva settings")}return ae.json()},onSuccess:k=>{t({title:e.jsxs("span",{className:"inline-flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-check-circle"}),e.jsx("span",{children:"Settings Saved"})]}),description:"Canva automation settings updated successfully."});const U=k&&k.settings?k.settings:k;if(U){const ae={...U,platforms:Array.isArray(U.platforms)?U.platforms:JSON.parse(U.platforms||"[]")};I(ae)}s.invalidateQueries({queryKey:["canva-settings"]}),s.refetchQueries({queryKey:["canva-settings"]}),_(!1)},onError:k=>{t({title:e.jsxs("span",{className:"inline-flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-times-circle"}),e.jsx("span",{children:"Error"})]}),description:k.message||"Failed to update Canva settings.",variant:"destructive"}),s.refetchQueries({queryKey:["canva-settings"]})}}),m=be({mutationFn:async()=>{const k=Ve(),U=await fetch("/api/admin/canva/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:k})});if(!U.ok){const ae=await U.json().catch(()=>({}));throw new Error(ae.error||ae.message||"Failed to test Canva automation")}return U.json()},onSuccess:k=>{t({title:"Test Successful",description:k.message||"Canva automation test completed successfully."})},onError:k=>{t({title:"Test Failed",description:k.message||"Failed to test Canva automation.",variant:"destructive"})}}),[c,y]=E.useState(""),[O,Q]=E.useState(""),[V,se]=E.useState(""),[h,z]=E.useState(!1),[X,de]=E.useState(50),[Se,De]=E.useState(!1),$e=async()=>{try{De(!0);const U={password:Ve(),platforms:p.platforms||[],caption:p.defaultCaption||"",hashtags:p.defaultHashtags||""};c&&(U.contentType=c),O&&(U.pageType=O),V&&(U.category=V),U.isFeatured=!!h,U.limit=Number(X)||50;const ae=await fetch("/api/admin/canva/backfill",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(U)}),xe=await ae.json().catch(()=>({}));if(!ae.ok)throw new Error(xe.error||xe.message||"Failed to enqueue backfill");t({title:"Backfill Enqueued",description:`Enqueued ${xe.enqueued||0}, skipped ${xe.skipped||0}.`})}catch(k){t({title:"Backfill Failed",description:k.message||"Could not enqueue backfill posts.",variant:"destructive"})}finally{De(!1)}};E.useEffect(()=>{if(je&&!S.isPending){const k={isEnabled:je.is_enabled??je.isEnabled??!1,apiKey:je.api_key??je.apiKey??"",apiSecret:je.api_secret??je.apiSecret??"",defaultTemplateId:je.default_template_id??je.defaultTemplateId??"",autoGenerateCaptions:(je.auto_generate_captions??je.autoGenerateCaptions)!==!1,autoGenerateHashtags:(je.auto_generate_hashtags??je.autoGenerateHashtags)!==!1,defaultCaption:je.default_caption??je.defaultCaption??"",defaultHashtags:je.default_hashtags??je.defaultHashtags??"",platforms:Array.isArray(je.platforms)?je.platforms:typeof je.platforms=="string"?JSON.parse(je.platforms||"[]"):["instagram","facebook"],scheduleType:je.schedule_type??je.scheduleType??"immediate",scheduleDelayMinutes:je.schedule_delay_minutes??je.scheduleDelayMinutes??0,enableBlogPosts:(je.enable_blog_posts??je.enableBlogPosts)!==!1,enableVideos:(je.enable_videos??je.enableVideos)!==!1};I(k)}},[je,S.isPending]);const Me=be({mutationFn:async({taskId:k,newStatus:U})=>(await new Promise(ae=>setTimeout(ae,1e3)),{taskId:k,newStatus:U}),onSuccess:({taskId:k,newStatus:U})=>{r(ae=>ae.map(xe=>xe.id===k?{...xe,status:U}:xe)),t({title:"Task Updated",description:`Automation task ${U==="active"?"activated":U==="paused"?"paused":"stopped"} successfully.`})},onError:()=>{t({title:"Error",description:"Failed to update automation task.",variant:"destructive"})}}),P=be({mutationFn:async k=>(await new Promise(U=>setTimeout(U,1500)),{id:Date.now().toString(),...k,status:"active",successRate:0,nextRun:new Date(Date.now()+60*60*1e3)}),onSuccess:k=>{r(U=>[...U,k]),o({name:"",description:"",type:"product_sync",schedule:"daily"}),n(!1),t({title:"Task Created",description:"New automation task created successfully."})},onError:()=>{t({title:"Error",description:"Failed to create automation task.",variant:"destructive"})}}),L=(k,U)=>{const ae=U==="active"?"paused":"active";Me.mutate({taskId:k,newStatus:ae})},H=()=>{if(!l.name.trim()||!l.description.trim()){t({title:"Validation Error",description:"Please fill in all required fields.",variant:"destructive"});return}P.mutate(l)},me=k=>{switch(k){case"product_sync":return e.jsx(al,{className:"w-4 h-4"});case"price_update":return e.jsx($a,{className:"w-4 h-4"});case"email_campaign":return e.jsx(yi,{className:"w-4 h-4"});case"content_generation":return e.jsx(ra,{className:"w-4 h-4"});case"analytics":return e.jsx(da,{className:"w-4 h-4"});case"backup":return e.jsx(xs,{className:"w-4 h-4"});default:return e.jsx(pi,{className:"w-4 h-4"})}},le=k=>k.toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[e.jsx(re,{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:e.jsx(ne,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-100 text-sm",children:"Active Tasks"}),e.jsx("p",{className:"text-2xl font-bold",children:a.filter(k=>k.status==="active").length})]}),e.jsx(ra,{className:"w-8 h-8 text-blue-200"})]})})}),e.jsx(re,{className:"bg-gradient-to-r from-green-500 to-green-600 text-white",children:e.jsx(ne,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-100 text-sm",children:"Success Rate"}),e.jsxs("p",{className:"text-2xl font-bold",children:[Math.round(a.reduce((k,U)=>k+U.successRate,0)/a.length),"%"]})]}),e.jsx(Vs,{className:"w-8 h-8 text-green-200"})]})})}),e.jsx(re,{className:"bg-gradient-to-r from-purple-500 to-purple-600 text-white",children:e.jsx(ne,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-purple-100 text-sm",children:"Scheduled"}),e.jsx("p",{className:"text-2xl font-bold",children:a.filter(k=>k.nextRun).length})]}),e.jsx(qo,{className:"w-8 h-8 text-purple-200"})]})})}),e.jsx(re,{className:"bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:e.jsx(ne,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-orange-100 text-sm",children:"Total Tasks"}),e.jsx("p",{className:"text-2xl font-bold",children:a.length})]}),e.jsx(pi,{className:"w-8 h-8 text-orange-200"})]})})})]}),e.jsxs(re,{className:"bg-gradient-to-r from-purple-200 to-pink-300 text-black border-0 shadow-xl",children:[e.jsxs(we,{children:[e.jsxs(Ne,{className:"flex items-center gap-2 text-black font-bold text-lg",children:[e.jsx(mi,{className:"w-5 h-5"}),e.jsx("i",{className:"fas fa-palette"})," Social Media Automation with Canva",e.jsx(Ce,{variant:p.isEnabled?"default":"secondary",className:"bg-white/80 text-black border-gray-300 font-semibold",children:p.isEnabled?e.jsxs("span",{className:"inline-flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-check-circle"}),e.jsx("span",{children:"ON"})]}):e.jsxs("span",{className:"inline-flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-times-circle"}),e.jsx("span",{children:"OFF"})]})})]}),e.jsx(Ae,{className:"text-black font-medium",children:"Automatically create and post beautiful social media content using Canva templates"})]}),e.jsx(ne,{children:Be?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(Ut,{className:"w-6 h-6 animate-spin mr-2 text-white"}),e.jsx("span",{className:"text-white",children:"Loading settings..."})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white/15 backdrop-blur-sm p-4 rounded-lg border border-white/30 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-white text-pink-600 rounded-full w-7 h-7 flex items-center justify-center text-sm font-bold shadow-md",children:"1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-black text-base",children:"Turn On Automation"}),e.jsx("p",{className:"text-sm text-black font-medium",children:p.isEnabled?" Automation is running":" Click to start automation"})]})]}),e.jsx(et,{checked:p.isEnabled,onCheckedChange:k=>{const U={...p},ae={...p,isEnabled:k};I(ae),S.mutate(ae,{onError:()=>{I(U)}})},className:"data-[state=checked]:bg-green-500",disabled:S.isPending})]}),e.jsx("div",{className:"mt-4",children:e.jsxs(D,{onClick:$e,disabled:Se,className:"bg-white text-pink-600 hover:bg-pink-50 border-0",children:[Se?e.jsx(Ut,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(Ma,{className:"w-4 h-4 mr-2"}),"Enqueue Backfill Posts"]})})]}),e.jsxs("div",{className:"bg-white/15 backdrop-blur-sm p-4 rounded-lg border border-white/30 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"bg-white text-pink-600 rounded-full w-7 h-7 flex items-center justify-center text-sm font-bold shadow-md",children:"2"}),e.jsx("h4",{className:"font-bold text-black text-base",children:"Choose Social Media Platforms"})]}),e.jsx("p",{className:"text-sm text-black font-medium mb-3",children:"Select where you want to post your content:"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{key:"instagram",name:"Instagram",icon:or,color:"text-pink-300"},{key:"facebook",name:"Facebook",icon:gi,color:"text-blue-300"},{key:"twitter",name:"Twitter/X",icon:hi,color:"text-blue-200"},{key:"whatsapp",name:"WhatsApp",icon:fi,color:"text-green-300"},{key:"telegram",name:"Telegram",icon:Ma,color:"text-blue-300"},{key:"youtube",name:"YouTube",icon:Dt,color:"text-red-300"},...d].map(k=>e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-white/20 rounded-lg border border-white/30 hover:bg-white/25 transition-colors shadow-sm",children:[e.jsx(Zo,{id:k.key,checked:p.platforms.includes(k.key),onCheckedChange:U=>{const ae=U?[...p.platforms,k.key]:p.platforms.filter(v=>v!==k.key),xe={...p,platforms:ae};I(xe),S.mutate(xe)}}),e.jsx(k.icon,{className:`w-4 h-4 ${k.color} drop-shadow-sm`}),e.jsx(T,{htmlFor:k.key,className:"text-sm font-semibold cursor-pointer text-black",children:k.name})]},k.key))}),e.jsx("div",{className:"mt-4 flex justify-center",children:e.jsxs(D,{onClick:()=>b(!0),variant:"outline",className:"bg-white/10 border-white/30 text-black hover:bg-white/20 transition-colors",children:[e.jsx(tt,{className:"w-4 h-4 mr-2"}),"Add Custom Platform"]})}),d.length>0&&e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx(T,{className:"text-sm font-semibold text-black",children:"Custom Platforms:"}),d.map(k=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/10 rounded-lg border border-white/20",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k.icon,{className:`w-4 h-4 ${k.color}`}),e.jsx("span",{className:"text-sm font-medium text-black",children:k.name}),e.jsx(Ce,{variant:"secondary",className:"text-xs",children:k.key})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{onClick:()=>_e(k),size:"sm",variant:"outline",className:"text-xs",children:"Test"}),e.jsx(D,{onClick:()=>ke(k.id),size:"sm",variant:"destructive",className:"text-xs",children:"Remove"})]})]},k.id))]}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("div",{children:[e.jsxs(T,{htmlFor:"manual-caption",className:"text-sm font-semibold text-black mb-2 block",children:[e.jsx("i",{className:"fas fa-edit"})," Manual Caption (Optional)"]}),e.jsx(vt,{id:"manual-caption",placeholder:"Write your custom caption here...",value:p.defaultCaption||"",onChange:k=>{const U={...p,defaultCaption:k.target.value};I(U),S.mutate(U)},className:"bg-white/20 border-white/30 text-black placeholder:text-gray-600 focus:bg-white/30 transition-colors",rows:3})]}),e.jsxs("div",{children:[e.jsxs(T,{htmlFor:"manual-hashtags",className:"text-sm font-semibold text-black mb-2 block",children:[e.jsx("i",{className:"fas fa-tag"})," Manual Hashtags (Optional)"]}),e.jsx(W,{id:"manual-hashtags",placeholder:"#example #hashtags #socialmedia",value:p.defaultHashtags||"",onChange:k=>{const U={...p,defaultHashtags:k.target.value};I(U),S.mutate(U)},className:"bg-white/20 border-white/30 text-black placeholder:text-gray-600 focus:bg-white/30 transition-colors"})]})]}),e.jsxs("div",{className:"mt-4 p-4 bg-white/10 rounded-lg border border-white/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(cr,{className:"w-5 h-5 text-black"}),e.jsxs(T,{className:"text-sm font-semibold text-black",children:[e.jsx("i",{className:"fas fa-palette"})," Canva Template Settings"]})]}),e.jsx(et,{checked:F,onCheckedChange:_,className:"data-[state=checked]:bg-pink-500"})]}),F&&e.jsxs("div",{className:"space-y-4 animate-in slide-in-from-top-2 duration-200",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsxs(T,{htmlFor:"api-key",className:"text-sm font-semibold text-black mb-2 block",children:[e.jsx("i",{className:"fas fa-key"})," API Key"]}),e.jsx(W,{id:"api-key",type:"password",placeholder:"Enter your Canva API key",value:p.apiKey||"",onChange:k=>{const U={...p,apiKey:k.target.value};I(U),S.mutate(U)},className:"bg-white/20 border-white/30 text-black placeholder:text-gray-600 focus:bg-white/30 transition-colors"})]}),e.jsxs("div",{children:[e.jsxs(T,{htmlFor:"api-secret",className:"text-sm font-semibold text-black mb-2 block",children:[e.jsx("i",{className:"fas fa-lock"})," API Secret"]}),e.jsx(W,{id:"api-secret",type:"password",placeholder:"Enter your Canva API secret",value:p.apiSecret||"",onChange:k=>{const U={...p,apiSecret:k.target.value};I(U),S.mutate(U)},className:"bg-white/20 border-white/30 text-black placeholder:text-gray-600 focus:bg-white/30 transition-colors"})]})]}),e.jsxs("div",{children:[e.jsxs(T,{className:"text-sm font-semibold text-black mb-3 block",children:[e.jsx("i",{className:"fas fa-mobile-alt"})," Platform Templates"]}),e.jsx("div",{className:"space-y-3",children:[{key:"instagram",name:"Instagram",icon:or,color:"text-pink-500"},{key:"instagram-reels",name:"Instagram Reels",icon:Dt,color:"text-pink-600"},{key:"facebook",name:"Facebook",icon:gi,color:"text-blue-500"},{key:"twitter",name:"Twitter/X",icon:hi,color:"text-blue-400"},{key:"whatsapp",name:"WhatsApp",icon:fi,color:"text-green-500"},{key:"telegram",name:"Telegram",icon:Ma,color:"text-blue-500"},{key:"youtube",name:"YouTube",icon:Dt,color:"text-red-500"},{key:"youtube-shorts",name:"YouTube Shorts",icon:xi,color:"text-red-600"}].map(k=>e.jsxs("div",{className:"p-3 bg-white/10 rounded-lg border border-white/20",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(k.icon,{className:`w-4 h-4 ${k.color}`}),e.jsxs("span",{className:"text-sm font-medium text-black",children:[k.name," Templates"]})]}),e.jsxs("div",{className:"space-y-2",children:[j[k.key].map((U,ae)=>e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx(D,{type:"button",variant:"ghost",size:"sm",onClick:()=>{const xe={...K};xe[k.key]=K[k.key]===ae?null:ae,ee(xe)},className:`w-6 h-6 p-0 rounded-full border-2 ${K[k.key]===ae?"bg-green-500 border-green-500 text-white":"bg-white/20 border-white/40 text-gray-600 hover:bg-white/30"}`,children:K[k.key]===ae?e.jsx("i",{className:"fas fa-check"}):null}),e.jsx(W,{placeholder:`${k.name} template ID`,value:U,onChange:xe=>{const v={...j};v[k.key][ae]=xe.target.value,A(v)},className:"bg-white/20 border-white/30 text-black placeholder:text-gray-600 focus:bg-white/30 transition-colors flex-1"})]}),j[k.key].length>1&&e.jsx(D,{type:"button",variant:"outline",size:"sm",onClick:()=>{const xe={...j};xe[k.key].splice(ae,1),A(xe);const v={...K};v[k.key]!==null&&v[k.key]>=xe[k.key].length&&(v[k.key]=xe[k.key].length>0?Math.max(0,xe[k.key].length-1):null),ee(v)},className:"bg-red-500/20 border-red-300 text-red-700 hover:bg-red-500/30",children:e.jsx("i",{className:"fas fa-times-circle"})})]},ae)),e.jsx(D,{type:"button",variant:"outline",size:"sm",onClick:()=>{const U={...j};U[k.key].push(""),A(U)},className:"bg-green-500/20 border-green-300 text-green-700 hover:bg-green-500/30 w-full",children:" Add Template"})]})]},k.key))})]}),e.jsxs("div",{children:[e.jsxs(T,{className:"text-sm font-semibold text-black mb-2 block",children:[e.jsx("i",{className:"fas fa-clipboard"})," Extra Templates"]}),e.jsxs("div",{className:"space-y-2",children:[G.map((k,U)=>e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx(D,{type:"button",variant:"ghost",size:"sm",onClick:()=>{N(ue===U?null:U)},className:`w-6 h-6 p-0 rounded-full border-2 ${ue===U?"bg-green-500 border-green-500 text-white":"bg-white/20 border-white/40 text-gray-600 hover:bg-white/30"}`,children:ue===U?e.jsx("i",{className:"fas fa-check"}):null}),e.jsx(W,{placeholder:"Extra template ID",value:k,onChange:ae=>{const xe=[...G];xe[U]=ae.target.value,J(xe)},className:"bg-white/20 border-white/30 text-black placeholder:text-gray-600 focus:bg-white/30 transition-colors flex-1"})]}),G.length>1&&e.jsx(D,{type:"button",variant:"outline",size:"sm",onClick:()=>{const ae=[...G];ae.splice(U,1),J(ae),ue!==null&&ue>=ae.length&&N(ae.length>0?Math.max(0,ae.length-1):null)},className:"bg-red-500/20 border-red-300 text-red-700 hover:bg-red-500/30",children:e.jsx("i",{className:"fas fa-times-circle"})})]},U)),e.jsx(D,{type:"button",variant:"outline",size:"sm",onClick:()=>{J([...G,""])},className:"bg-green-500/20 border-green-300 text-green-700 hover:bg-green-500/30 w-full",children:" Add Extra Template"})]})]})]})]})]}),e.jsxs("div",{className:"bg-white/15 backdrop-blur-sm p-4 rounded-lg border border-white/30 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"bg-white text-pink-600 rounded-full w-7 h-7 flex items-center justify-center text-sm font-bold shadow-md",children:"3"}),e.jsx("h4",{className:"font-bold text-black text-base",children:"Content Options"})]}),e.jsx("p",{className:"text-sm text-black font-medium mb-3",children:"What should we automatically add to your posts?"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/20 rounded-lg border border-white/30 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(sl,{className:"w-4 h-4 text-pink-100 drop-shadow-sm"}),e.jsx(T,{className:"text-sm font-semibold text-black",children:"Auto-write captions"})]}),e.jsx(et,{checked:p.autoGenerateCaptions,onCheckedChange:k=>{const U={...p},ae={...p,autoGenerateCaptions:k};I(ae),S.mutate(ae,{onError:()=>{I(U)}})},disabled:S.isPending})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/20 rounded-lg border border-white/30 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(La,{className:"w-4 h-4 text-pink-100 drop-shadow-sm"}),e.jsx(T,{className:"text-sm font-semibold text-black",children:"Auto-generate hashtags"})]}),e.jsx(et,{checked:p.autoGenerateHashtags,onCheckedChange:k=>{const U={...p},ae={...p,autoGenerateHashtags:k};I(ae),S.mutate(ae,{onError:()=>{I(U)}})},disabled:S.isPending})]}),e.jsxs("div",{children:[e.jsx(T,{className:"text-sm font-semibold text-black mb-2 block",children:"Page Type"}),e.jsx(W,{placeholder:"e.g. home, services, deals",value:O,onChange:k=>Q(k.target.value),className:"bg-white/20 border-white/30 text-black placeholder:text-gray-600 focus:bg-white/30 transition-colors"})]}),e.jsxs("div",{children:[e.jsx(T,{className:"text-sm font-semibold text-black mb-2 block",children:"Category"}),e.jsx(W,{placeholder:"e.g. electronics, fashion",value:V,onChange:k=>se(k.target.value),className:"bg-white/20 border-white/30 text-black placeholder:text-gray-600 focus:bg-white/30 transition-colors"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(T,{className:"text-sm font-semibold text-black",children:"Featured Only"}),e.jsx(et,{checked:h,onCheckedChange:z,className:"data-[state=checked]:bg-pink-500"})]}),e.jsxs("div",{children:[e.jsx(T,{className:"text-sm font-semibold text-black mb-2 block",children:"Max Posts"}),e.jsx(W,{type:"number",min:1,max:500,value:X,onChange:k=>de(Math.max(1,Math.min(500,Number(k.target.value||0)))),className:"bg-white/20 border-white/30 text-black placeholder:text-gray-600 focus:bg-white/30 transition-colors"})]})]})]}),e.jsxs("div",{className:"bg-white/15 backdrop-blur-sm p-4 rounded-lg border border-white/30 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"bg-white text-pink-600 rounded-full w-7 h-7 flex items-center justify-center text-sm font-bold shadow-md",children:"4"}),e.jsx("h4",{className:"font-bold text-black text-base",children:"Test or Go Live"})]}),e.jsx("p",{className:"text-sm text-black font-medium mb-3",children:"Test your automation or create content manually:"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(D,{onClick:()=>m.mutate(),disabled:m.isPending||!p.isEnabled,className:"bg-white text-pink-600 hover:bg-pink-50 border-0",children:[m.isPending?e.jsx(Ut,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(xi,{className:"w-4 h-4 mr-2"}),e.jsx("i",{className:"fas fa-flask"})," Test Automation"]}),e.jsxs(D,{variant:"outline",className:"border-white/30 text-white hover:bg-white/10",children:[e.jsx("i",{className:"fas fa-mobile-alt"})," Manual Post"]})]})]}),e.jsxs("div",{className:"bg-white/15 backdrop-blur-sm p-4 rounded-lg border border-white/30 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"bg-white text-pink-600 rounded-full w-7 h-7 flex items-center justify-center text-sm font-bold shadow-md",children:"5"}),e.jsx("h4",{className:"font-bold text-black text-base",children:"Backfill Canva Posts"})]}),e.jsx("p",{className:"text-sm text-black font-medium mb-3",children:"Select filters and enqueue pending posts for selected platforms."}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:e.jsxs("div",{children:[e.jsx(T,{className:"text-sm font-semibold text-black mb-2 block",children:"Content Type"}),e.jsx(W,{placeholder:"e.g. product, blog, video",value:c,onChange:k=>y(k.target.value),className:"bg-white/20 border-white/30 text-black placeholder:text-gray-600 focus:bg-white/30 transition-colors"})]})})]})]})})]}),e.jsxs(re,{className:"bg-gradient-to-r from-purple-200 to-indigo-300 text-black border-0 shadow-xl",children:[e.jsxs(we,{children:[e.jsxs(Ne,{className:"flex items-center gap-2 text-black font-bold text-lg",children:[e.jsx(cr,{className:"w-5 h-5"})," Smart Backend Template System"]}),e.jsx(Ae,{className:"text-black font-medium",children:"Universal template library with AI-powered selection and rotation"})]}),e.jsx(ne,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white/20 backdrop-blur-sm p-4 rounded-lg border border-white/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Zt,{className:"w-5 h-5 text-purple-600"}),e.jsx("h4",{className:"font-semibold text-black",children:"Templates"})]}),e.jsx("p",{className:"text-2xl font-bold text-black",children:w.templates.length}),e.jsx("p",{className:"text-sm text-gray-700",children:"Available templates"})]}),e.jsxs("div",{className:"bg-white/20 backdrop-blur-sm p-4 rounded-lg border border-white/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(La,{className:"w-5 h-5 text-purple-600"}),e.jsx("h4",{className:"font-semibold text-black",children:"Audio Files"})]}),e.jsx("p",{className:"text-2xl font-bold text-black",children:w.audio.length}),e.jsx("p",{className:"text-sm text-gray-700",children:"Background music"})]}),e.jsxs("div",{className:"bg-white/20 backdrop-blur-sm p-4 rounded-lg border border-white/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(da,{className:"w-5 h-5 text-purple-600"}),e.jsx("h4",{className:"font-semibold text-black",children:"Total Usage"})]}),e.jsx("p",{className:"text-2xl font-bold text-black",children:(C==null?void 0:C.totalUsage)||0}),e.jsx("p",{className:"text-sm text-gray-700",children:"Content generated"})]}),e.jsxs("div",{className:"bg-white/20 backdrop-blur-sm p-4 rounded-lg border border-white/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx($a,{className:"w-5 h-5 text-purple-600"}),e.jsx("h4",{className:"font-semibold text-black",children:"Categories"})]}),e.jsx("p",{className:"text-2xl font-bold text-black",children:C?Object.keys(C.categoryDistribution||{}).length:0}),e.jsx("p",{className:"text-sm text-gray-700",children:"Content types"})]})]}),e.jsxs("div",{className:"bg-white/15 backdrop-blur-sm p-4 rounded-lg border border-white/30 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-black text-base mb-1",children:" Template Library Management"}),e.jsx("p",{className:"text-sm text-black font-medium",children:"Upload templates and audio files to the universal folders"})]}),e.jsx(et,{checked:R,onCheckedChange:Z,className:"data-[state=checked]:bg-purple-500"})]}),R&&e.jsxs("div",{className:"space-y-4 mt-4 p-4 bg-white/5 rounded-lg border border-white/10",children:[e.jsxs("div",{className:"bg-white/10 p-4 rounded-lg border border-white/20",children:[e.jsx("h5",{className:"font-semibold text-black mb-2",children:" Upload Instructions:"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm text-black",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium mb-1",children:" Templates:"}),e.jsx("p",{children:"Copy image/video files to:"}),e.jsx("code",{className:"bg-black/20 px-2 py-1 rounded text-xs",children:"backend-assets/templates/universal/"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium mb-1",children:" Audio:"}),e.jsx("p",{children:"Copy music files to:"}),e.jsx("code",{className:"bg-black/20 px-2 py-1 rounded text-xs",children:"backend-assets/audio/universal/"})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs(D,{onClick:()=>Y(),className:"bg-purple-600 hover:bg-purple-700 text-white",children:[e.jsx(bi,{className:"w-4 h-4 mr-2"}),"Test Template Generation"]}),e.jsxs(D,{onClick:()=>ge(),variant:"outline",className:"bg-white/10 border-white/30 text-black hover:bg-white/20",children:[e.jsx(Ut,{className:"w-4 h-4 mr-2"}),"Refresh Library"]}),e.jsxs(D,{onClick:()=>Pe(),variant:"outline",className:"bg-white/10 border-white/30 text-black hover:bg-white/20",children:[e.jsx(da,{className:"w-4 h-4 mr-2"}),"Update Stats"]})]}),e.jsxs("div",{className:"bg-blue-500/10 p-4 rounded-lg border border-blue-500/20",children:[e.jsx("h5",{className:"font-semibold text-black mb-2",children:" Supported File Extensions:"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm text-black",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium mb-1",children:" Template Files:"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.jsx("span",{className:"bg-black/20 px-2 py-1 rounded text-xs",children:".jpg"}),e.jsx("span",{className:"bg-black/20 px-2 py-1 rounded text-xs",children:".jpeg"}),e.jsx("span",{className:"bg-black/20 px-2 py-1 rounded text-xs",children:".png"}),e.jsx("span",{className:"bg-black/20 px-2 py-1 rounded text-xs",children:".gif"}),e.jsx("span",{className:"bg-black/20 px-2 py-1 rounded text-xs",children:".webp"}),e.jsx("span",{className:"bg-black/20 px-2 py-1 rounded text-xs",children:".svg"}),e.jsx("span",{className:"bg-black/20 px-2 py-1 rounded text-xs",children:".mp4"}),e.jsx("span",{className:"bg-black/20 px-2 py-1 rounded text-xs",children:".webm"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium mb-1",children:" Audio Files:"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.jsx("span",{className:"bg-black/20 px-2 py-1 rounded text-xs",children:".mp3"}),e.jsx("span",{className:"bg-black/20 px-2 py-1 rounded text-xs",children:".wav"}),e.jsx("span",{className:"bg-black/20 px-2 py-1 rounded text-xs",children:".ogg"}),e.jsx("span",{className:"bg-black/20 px-2 py-1 rounded text-xs",children:".m4a"}),e.jsx("span",{className:"bg-black/20 px-2 py-1 rounded text-xs",children:".aac"}),e.jsx("span",{className:"bg-black/20 px-2 py-1 rounded text-xs",children:".flac"})]})]})]})]}),w.templates.length>0&&e.jsxs("div",{className:"bg-white/10 p-4 rounded-lg border border-white/20",children:[e.jsx("h5",{className:"font-semibold text-black mb-3",children:" Template Library:"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:w.templates.slice(0,8).map((k,U)=>{var ae;return e.jsxs("div",{className:"bg-white/20 p-3 rounded-lg border border-white/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Zt,{className:"w-4 h-4 text-purple-600"}),e.jsx("span",{className:"text-xs font-medium text-black truncate",children:k.filename||`Template ${U+1}`})]}),e.jsxs("div",{className:"text-xs text-gray-700",children:[e.jsxs("p",{children:["Style: ",((ae=k.characteristics)==null?void 0:ae.style)||"Unknown"]}),e.jsxs("p",{children:["Type: ",k.type||"image"]})]})]},k.id||U)})}),w.templates.length>8&&e.jsxs("p",{className:"text-sm text-gray-700 mt-2 text-center",children:["+",w.templates.length-8," more templates"]})]}),w.audio.length>0&&e.jsxs("div",{className:"bg-white/10 p-4 rounded-lg border border-white/20",children:[e.jsx("h5",{className:"font-semibold text-black mb-3",children:" Audio Library:"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:w.audio.slice(0,6).map((k,U)=>{var ae;return e.jsxs("div",{className:"bg-white/20 p-3 rounded-lg border border-white/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(La,{className:"w-4 h-4 text-purple-600"}),e.jsx("span",{className:"text-xs font-medium text-black truncate",children:k.filename||`Audio ${U+1}`})]}),e.jsxs("div",{className:"text-xs text-gray-700",children:[e.jsxs("p",{children:["Genre: ",((ae=k.characteristics)==null?void 0:ae.genre)||"Unknown"]}),e.jsxs("p",{children:["Duration: ",k.duration||0,"s"]})]})]},k.id||U)})}),w.audio.length>6&&e.jsxs("p",{className:"text-sm text-gray-700 mt-2 text-center",children:["+",w.audio.length-6," more audio files"]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-500/20 to-indigo-500/20 p-4 rounded-lg border border-white/30",children:[e.jsx("h5",{className:"font-semibold text-black mb-2",children:" Smart Features:"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm text-black",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium mb-1",children:" AI-Powered Selection:"}),e.jsx("p",{children:"Automatically matches templates to product categories, colors, and mood"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium mb-1",children:" Smart Rotation:"}),e.jsx("p",{children:"Prevents repetition by rotating templates and tracking usage history"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium mb-1",children:" Performance Learning:"}),e.jsx("p",{children:"Learns from engagement metrics to improve future selections"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium mb-1",children:" Universal Compatibility:"}),e.jsx("p",{children:"Works with any content type - no category folders needed"})]})]})]})]})]})]})})]}),e.jsxs(re,{children:[e.jsxs(we,{children:[e.jsxs(Ne,{className:"flex items-center gap-2",children:[e.jsx(tt,{className:"w-5 h-5"}),"Create Automation Task"]}),e.jsx(Ae,{children:"Set up automated tasks to streamline your workflow"})]}),e.jsx(ne,{children:i?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(T,{htmlFor:"taskName",children:"Task Name"}),e.jsx(W,{id:"taskName",value:l.name,onChange:k=>o({...l,name:k.target.value}),placeholder:"e.g., Daily Price Updates"})]}),e.jsxs("div",{children:[e.jsx(T,{htmlFor:"taskType",children:"Task Type"}),e.jsxs(Ge,{value:l.type,onValueChange:k=>o({...l,type:k}),children:[e.jsx(We,{children:e.jsx(ze,{})}),e.jsxs(He,{children:[e.jsx(ce,{value:"product_sync",children:"Product Sync"}),e.jsx(ce,{value:"price_update",children:"Price Update"}),e.jsx(ce,{value:"email_campaign",children:"Email Campaign"}),e.jsx(ce,{value:"content_generation",children:"Content Generation"}),e.jsx(ce,{value:"analytics",children:"Analytics"}),e.jsx(ce,{value:"backup",children:"Backup"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(T,{htmlFor:"taskDescription",children:"Description"}),e.jsx(W,{id:"taskDescription",value:l.description,onChange:k=>o({...l,description:k.target.value}),placeholder:"Describe what this automation task will do"})]}),e.jsxs("div",{children:[e.jsx(T,{htmlFor:"taskSchedule",children:"Schedule"}),e.jsxs(Ge,{value:l.schedule,onValueChange:k=>o({...l,schedule:k}),children:[e.jsx(We,{children:e.jsx(ze,{})}),e.jsxs(He,{children:[e.jsx(ce,{value:"hourly",children:"Every Hour"}),e.jsx(ce,{value:"every-6-hours",children:"Every 6 Hours"}),e.jsx(ce,{value:"every-12-hours",children:"Every 12 Hours"}),e.jsx(ce,{value:"daily",children:"Daily"}),e.jsx(ce,{value:"weekly",children:"Weekly"}),e.jsx(ce,{value:"monthly",children:"Monthly"})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(D,{onClick:H,disabled:P.isPending,className:"bg-green-600 hover:bg-green-700",children:P.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Ut,{className:"w-4 h-4 mr-2 animate-spin"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Vs,{className:"w-4 h-4 mr-2"}),"Create Task"]})}),e.jsx(D,{variant:"outline",onClick:()=>n(!1),children:"Cancel"})]})]}):e.jsxs(D,{onClick:()=>n(!0),className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(tt,{className:"w-4 h-4 mr-2"}),"New Automation Task"]})})]}),e.jsxs(re,{className:"bg-gradient-to-r from-indigo-200 to-purple-300 text-black border-0 shadow-xl",children:[e.jsxs(we,{children:[e.jsxs(Ne,{className:"flex items-center gap-2 text-black font-bold text-lg",children:[e.jsx(ra,{className:"w-5 h-5"}),e.jsx("i",{className:"fas fa-robot"})," Automation Tasks (",a.length,")"]}),e.jsx(Ae,{className:"text-black font-medium",children:"Manage your automated workflows and schedules"})]}),e.jsx(ne,{children:e.jsx("div",{className:"space-y-4",children:a.map(k=>e.jsx("div",{className:"bg-white/10 backdrop-blur-sm border border-white/20 rounded-lg p-4 hover:bg-white/15 transition-all duration-300",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${k.status==="active"?"bg-green-400":k.status==="paused"?"bg-yellow-400":"bg-red-400"} mt-2`}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"text-black",children:me(k.type)}),e.jsx("h3",{className:"font-semibold text-black",children:k.name}),e.jsx(Ce,{className:`${k.status==="active"?"bg-green-500 text-white":k.status==="paused"?"bg-yellow-500 text-white":"bg-red-500 text-white"} border-0`,children:k.status})]}),e.jsx("p",{className:"text-sm text-black mb-3",children:k.description}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-black",children:"Schedule:"}),e.jsx("p",{className:"font-medium text-black",children:k.schedule})]}),k.lastRun&&e.jsxs("div",{children:[e.jsx("span",{className:"text-black",children:"Last Run:"}),e.jsx("p",{className:"font-medium text-black",children:le(k.lastRun)})]}),k.nextRun&&e.jsxs("div",{children:[e.jsx("span",{className:"text-black",children:"Next Run:"}),e.jsx("p",{className:"font-medium text-black",children:le(k.nextRun)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-black",children:"Success Rate:"}),e.jsxs("p",{className:"font-medium text-black",children:[k.successRate,"%"]})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsx(D,{size:"sm",onClick:()=>L(k.id,k.status),disabled:Me.isPending,className:`${k.status==="active"?"bg-yellow-500 hover:bg-yellow-600 text-white":"bg-green-500 hover:bg-green-600 text-white"} border-0`,children:k.status==="active"?e.jsxs(e.Fragment,{children:[e.jsx(Go,{className:"w-4 h-4 mr-1"}),"Pause"]}):e.jsxs(e.Fragment,{children:[e.jsx(Wo,{className:"w-4 h-4 mr-1"}),"Start"]})}),e.jsxs(D,{size:"sm",className:"bg-blue-500 hover:bg-blue-600 text-white border-0",children:[e.jsx(Ot,{className:"w-4 h-4 mr-1"}),"Configure"]})]})]})},k.id))})})]}),e.jsxs(re,{className:"bg-gradient-to-r from-blue-200 to-cyan-300 text-black border-0 shadow-xl",children:[e.jsxs(we,{children:[e.jsxs(Ne,{className:"flex items-center gap-2 text-black font-bold text-lg",children:[e.jsx(bi,{className:"w-5 h-5"}),e.jsx("i",{className:"fas fa-bolt"})," Quick Setup Templates"]}),e.jsx(Ae,{className:"text-black font-medium",children:"Pre-configured automation templates for common tasks"})]}),e.jsx(ne,{children:e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg p-4 hover:shadow-lg transition-all duration-300 cursor-pointer transform hover:scale-105",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx($a,{className:"w-5 h-5 text-blue-100"}),e.jsx("h4",{className:"font-semibold text-white",children:"Price Monitoring"})]}),e.jsx("p",{className:"text-sm text-blue-100 mb-3",children:"Monitor product prices and update automatically"}),e.jsx(D,{size:"sm",className:"w-full bg-white text-blue-600 hover:bg-blue-50 border-0",children:"Setup Now"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-lg p-4 hover:shadow-lg transition-all duration-300 cursor-pointer transform hover:scale-105",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(yi,{className:"w-5 h-5 text-green-100"}),e.jsx("h4",{className:"font-semibold text-white",children:"Email Campaigns"})]}),e.jsx("p",{className:"text-sm text-green-100 mb-3",children:"Automated email marketing and newsletters"}),e.jsx(D,{size:"sm",className:"w-full bg-white text-green-600 hover:bg-green-50 border-0",children:"Setup Now"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg p-4 hover:shadow-lg transition-all duration-300 cursor-pointer transform hover:scale-105",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ra,{className:"w-5 h-5 text-purple-100"}),e.jsx("h4",{className:"font-semibold text-white",children:"Content Generation"})]}),e.jsx("p",{className:"text-sm text-purple-100 mb-3",children:"AI-powered content creation and optimization"}),e.jsx(D,{size:"sm",className:"w-full bg-white text-purple-600 hover:bg-purple-50 border-0",children:"Setup Now"})]})]})})]}),x&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Add Custom Platform"}),e.jsx(D,{onClick:()=>b(!1),variant:"ghost",size:"sm",className:"text-gray-500 hover:text-gray-700",children:""})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(T,{htmlFor:"platform-name",className:"text-sm font-medium text-gray-700",children:"Platform Name *"}),e.jsx(W,{id:"platform-name",placeholder:"e.g., Discord, Reddit, TikTok",value:u.name,onChange:k=>f(U=>({...U,name:k.target.value,key:k.target.value.toLowerCase().replace(/\s+/g,"_")})),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(T,{htmlFor:"platform-key",className:"text-sm font-medium text-gray-700",children:"Platform Key *"}),e.jsx(W,{id:"platform-key",placeholder:"e.g., discord, reddit, tiktok",value:u.key,onChange:k=>f(U=>({...U,key:k.target.value.toLowerCase().replace(/\s+/g,"_")})),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(T,{htmlFor:"api-url",className:"text-sm font-medium text-gray-700",children:"API URL"}),e.jsx(W,{id:"api-url",placeholder:"https://api.platform.com/v1/",value:u.apiUrl,onChange:k=>f(U=>({...U,apiUrl:k.target.value})),className:"mt-1"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(T,{htmlFor:"api-key",className:"text-sm font-medium text-gray-700",children:"API Key"}),e.jsx(W,{id:"api-key",placeholder:"Your API key",value:u.apiKey,onChange:k=>f(U=>({...U,apiKey:k.target.value})),className:"mt-1",type:"password"})]}),e.jsxs("div",{children:[e.jsx(T,{htmlFor:"api-secret",className:"text-sm font-medium text-gray-700",children:"API Secret"}),e.jsx(W,{id:"api-secret",placeholder:"Your API secret",value:u.apiSecret,onChange:k=>f(U=>({...U,apiSecret:k.target.value})),className:"mt-1",type:"password"})]})]}),e.jsxs("div",{children:[e.jsx(T,{htmlFor:"webhook-url",className:"text-sm font-medium text-gray-700",children:"Webhook URL (Optional)"}),e.jsx(W,{id:"webhook-url",placeholder:"https://hooks.platform.com/webhook",value:u.webhookUrl,onChange:k=>f(U=>({...U,webhookUrl:k.target.value})),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(T,{className:"text-sm font-medium text-gray-700",children:"Icon Color"}),e.jsxs(Ge,{value:u.color,onValueChange:k=>f(U=>({...U,color:k})),children:[e.jsx(We,{className:"mt-1",children:e.jsx(ze,{})}),e.jsxs(He,{children:[e.jsx(ce,{value:"text-purple-300",children:"Purple"}),e.jsx(ce,{value:"text-pink-300",children:"Pink"}),e.jsx(ce,{value:"text-blue-300",children:"Blue"}),e.jsx(ce,{value:"text-green-300",children:"Green"}),e.jsx(ce,{value:"text-yellow-300",children:"Yellow"}),e.jsx(ce,{value:"text-red-300",children:"Red"}),e.jsx(ce,{value:"text-orange-300",children:"Orange"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx(D,{onClick:()=>b(!1),variant:"outline",children:"Cancel"}),e.jsx(D,{onClick:$,className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Add Platform"})]})]})})]})}function pt(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var xd=typeof Symbol=="function"&&Symbol.observable||"@@observable",ln=xd,on=()=>Math.random().toString(36).substring(7).split("").join("."),bd={INIT:`@@redux/INIT${on()}`,REPLACE:`@@redux/REPLACE${on()}`},cn=bd;function yd(t){if(typeof t!="object"||t===null)return!1;let s=t;for(;Object.getPrototypeOf(s)!==null;)s=Object.getPrototypeOf(s);return Object.getPrototypeOf(t)===s||Object.getPrototypeOf(t)===null}function Nl(t,s,a){if(typeof t!="function")throw new Error(pt(2));if(typeof s=="function"&&typeof a=="function"||typeof a=="function"&&typeof arguments[3]=="function")throw new Error(pt(0));if(typeof s=="function"&&typeof a>"u"&&(a=s,s=void 0),typeof a<"u"){if(typeof a!="function")throw new Error(pt(1));return a(Nl)(t,s)}let r=t,i=s,n=new Map,l=n,o=0,d=!1;function g(){l===n&&(l=new Map,n.forEach((C,q)=>{l.set(q,C)}))}function x(){if(d)throw new Error(pt(3));return i}function b(C){if(typeof C!="function")throw new Error(pt(4));if(d)throw new Error(pt(5));let q=!0;g();const R=o++;return l.set(R,C),function(){if(q){if(d)throw new Error(pt(6));q=!1,g(),l.delete(R),n=null}}}function u(C){if(!yd(C))throw new Error(pt(7));if(typeof C.type>"u")throw new Error(pt(8));if(typeof C.type!="string")throw new Error(pt(17));if(d)throw new Error(pt(9));try{d=!0,i=r(i,C)}finally{d=!1}return(n=l).forEach(R=>{R()}),C}function f(C){if(typeof C!="function")throw new Error(pt(10));r=C,u({type:cn.REPLACE})}function w(){const C=b;return{subscribe(q){if(typeof q!="object"||q===null)throw new Error(pt(11));function R(){const p=q;p.next&&p.next(x())}return R(),{unsubscribe:C(R)}},[ln](){return this}}}return u({type:cn.INIT}),{dispatch:u,subscribe:b,getState:x,replaceReducer:f,[ln]:w}}function dn(t,s){return function(...a){return s(t.apply(this,a))}}function un(t,s){if(typeof t=="function")return dn(t,s);if(typeof t!="object"||t===null)throw new Error(pt(16));const a={};for(const r in t){const i=t[r];typeof i=="function"&&(a[r]=dn(i,s))}return a}function kl(...t){return t.length===0?s=>s:t.length===1?t[0]:t.reduce((s,a)=>(...r)=>s(a(...r)))}function vd(...t){return s=>(a,r)=>{const i=s(a,r);let n=()=>{throw new Error(pt(15))};const l={getState:i.getState,dispatch:(d,...g)=>n(d,...g)},o=t.map(d=>d(l));return n=kl(...o)(i.dispatch),{...i,dispatch:n}}}var jd={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ta=E;function wd(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var Nd=typeof Object.is=="function"?Object.is:wd,kd=ta.useSyncExternalStore,Sd=ta.useRef,Cd=ta.useEffect,Ad=ta.useMemo,Pd=ta.useDebugValue;jd.useSyncExternalStoreWithSelector=function(t,s,a,r,i){var n=Sd(null);if(n.current===null){var l={hasValue:!1,value:null};n.current=l}else l=n.current;n=Ad(function(){function d(f){if(!g){if(g=!0,x=f,f=r(f),i!==void 0&&l.hasValue){var w=l.value;if(i(w,f))return b=w}return b=f}if(w=b,Nd(x,f))return w;var B=r(f);return i!==void 0&&i(w,B)?(x=f,w):(x=f,b=B)}var g=!1,x,b,u=a===void 0?null:a;return[function(){return d(s())},u===null?void 0:function(){return d(u())}]},[s,a,r,i]);var o=kd(t,n[0],n[1]);return Cd(function(){l.hasValue=!0,l.value=o},[o]),Pd(o),o};var Td=E.version.startsWith("19"),Fd=Symbol.for(Td?"react.transitional.element":"react.element"),Ed=Symbol.for("react.portal"),Dd=Symbol.for("react.fragment"),Id=Symbol.for("react.strict_mode"),_d=Symbol.for("react.profiler"),Bd=Symbol.for("react.consumer"),Od=Symbol.for("react.context"),Sl=Symbol.for("react.forward_ref"),Rd=Symbol.for("react.suspense"),Ud=Symbol.for("react.suspense_list"),Vr=Symbol.for("react.memo"),Md=Symbol.for("react.lazy"),Ld=Sl,$d=Vr;function Vd(t){if(typeof t=="object"&&t!==null){const{$$typeof:s}=t;switch(s){case Fd:switch(t=t.type,t){case Dd:case _d:case Id:case Rd:case Ud:return t;default:switch(t=t&&t.$$typeof,t){case Od:case Sl:case Md:case Vr:return t;case Bd:return t;default:return s}}case Ed:return s}}}function qd(t){return Vd(t)===Vr}function Gd(t,s,a,r,{areStatesEqual:i,areOwnPropsEqual:n,areStatePropsEqual:l}){let o=!1,d,g,x,b,u;function f(R,Z){return d=R,g=Z,x=t(d,g),b=s(r,g),u=a(x,b,g),o=!0,u}function w(){return x=t(d,g),s.dependsOnOwnProps&&(b=s(r,g)),u=a(x,b,g),u}function B(){return t.dependsOnOwnProps&&(x=t(d,g)),s.dependsOnOwnProps&&(b=s(r,g)),u=a(x,b,g),u}function C(){const R=t(d,g),Z=!l(R,x);return x=R,Z&&(u=a(x,b,g)),u}function q(R,Z){const p=!n(Z,g),I=!i(R,d,Z,g);return d=R,g=Z,p&&I?w():p?B():I?C():u}return function(Z,p){return o?q(Z,p):f(Z,p)}}function Wd(t,{initMapStateToProps:s,initMapDispatchToProps:a,initMergeProps:r,...i}){const n=s(t,i),l=a(t,i),o=r(t,i);return Gd(n,l,o,t,i)}function zd(t,s){const a={};for(const r in t){const i=t[r];typeof i=="function"&&(a[r]=(...n)=>s(i(...n)))}return a}function wr(t){return function(a){const r=t(a);function i(){return r}return i.dependsOnOwnProps=!1,i}}function mn(t){return t.dependsOnOwnProps?!!t.dependsOnOwnProps:t.length!==1}function Cl(t,s){return function(r,{displayName:i}){const n=function(o,d){return n.dependsOnOwnProps?n.mapToProps(o,d):n.mapToProps(o,void 0)};return n.dependsOnOwnProps=!0,n.mapToProps=function(o,d){n.mapToProps=t,n.dependsOnOwnProps=mn(t);let g=n(o,d);return typeof g=="function"&&(n.mapToProps=g,n.dependsOnOwnProps=mn(g),g=n(o,d)),g},n}}function qr(t,s){return(a,r)=>{throw new Error(`Invalid value of type ${typeof t} for ${s} argument when connecting component ${r.wrappedComponentName}.`)}}function Hd(t){return t&&typeof t=="object"?wr(s=>zd(t,s)):t?typeof t=="function"?Cl(t):qr(t,"mapDispatchToProps"):wr(s=>({dispatch:s}))}function Kd(t){return t?typeof t=="function"?Cl(t):qr(t,"mapStateToProps"):wr(()=>({}))}function Qd(t,s,a){return{...a,...t,...s}}function Xd(t){return function(a,{displayName:r,areMergedPropsEqual:i}){let n=!1,l;return function(d,g,x){const b=t(d,g,x);return n?i(b,l)||(l=b):(n=!0,l=b),l}}}function Jd(t){return t?typeof t=="function"?Xd(t):qr(t,"mergeProps"):()=>Qd}function Zd(t){t()}function Yd(){let t=null,s=null;return{clear(){t=null,s=null},notify(){Zd(()=>{let a=t;for(;a;)a.callback(),a=a.next})},get(){const a=[];let r=t;for(;r;)a.push(r),r=r.next;return a},subscribe(a){let r=!0;const i=s={callback:a,next:null,prev:s};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:s=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var pn={notify(){},get:()=>[]};function Al(t,s){let a,r=pn,i=0,n=!1;function l(B){x();const C=r.subscribe(B);let q=!1;return()=>{q||(q=!0,C(),b())}}function o(){r.notify()}function d(){w.onStateChange&&w.onStateChange()}function g(){return n}function x(){i++,a||(a=s?s.addNestedSub(d):t.subscribe(d),r=Yd())}function b(){i--,a&&i===0&&(a(),a=void 0,r.clear(),r=pn)}function u(){n||(n=!0,x())}function f(){n&&(n=!1,b())}const w={addNestedSub:l,notifyNestedSubs:o,handleChangeWrapper:d,isSubscribed:g,trySubscribe:u,tryUnsubscribe:f,getListeners:()=>r};return w}var eu=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",tu=eu(),su=()=>typeof navigator<"u"&&navigator.product==="ReactNative",au=su(),ru=()=>tu||au?E.useLayoutEffect:E.useEffect,ja=ru();function gn(t,s){return t===s?t!==0||s!==0||1/t===1/s:t!==t&&s!==s}function Ka(t,s){if(gn(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;const a=Object.keys(t),r=Object.keys(s);if(a.length!==r.length)return!1;for(let i=0;i<a.length;i++)if(!Object.prototype.hasOwnProperty.call(s,a[i])||!gn(t[a[i]],s[a[i]]))return!1;return!0}var iu={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},nu={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},lu={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Pl={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},ou={[Ld]:lu,[$d]:Pl};function hn(t){return qd(t)?Pl:ou[t.$$typeof]||iu}var cu=Object.defineProperty,du=Object.getOwnPropertyNames,fn=Object.getOwnPropertySymbols,uu=Object.getOwnPropertyDescriptor,mu=Object.getPrototypeOf,xn=Object.prototype;function Nr(t,s){if(typeof s!="string"){if(xn){const n=mu(s);n&&n!==xn&&Nr(t,n)}let a=du(s);fn&&(a=a.concat(fn(s)));const r=hn(t),i=hn(s);for(let n=0;n<a.length;++n){const l=a[n];if(!nu[l]&&!(i&&i[l])&&!(r&&r[l])){const o=uu(s,l);try{cu(t,l,o)}catch{}}}}return t}var Qa=Symbol.for("react-redux-context"),Xa=typeof globalThis<"u"?globalThis:{};function pu(){if(!E.createContext)return{};const t=Xa[Qa]??(Xa[Qa]=new Map);let s=t.get(E.createContext);return s||(s=E.createContext(null),t.set(E.createContext,s)),s}var Tl=pu(),gu=[null,null];function hu(t,s,a){ja(()=>t(...s),a)}function fu(t,s,a,r,i,n){t.current=r,a.current=!1,i.current&&(i.current=null,n())}function xu(t,s,a,r,i,n,l,o,d,g,x){if(!t)return()=>{};let b=!1,u=null;const f=()=>{if(b||!o.current)return;const B=s.getState();let C,q;try{C=r(B,i.current)}catch(R){q=R,u=R}q||(u=null),C===n.current?l.current||g():(n.current=C,d.current=C,l.current=!0,x())};return a.onStateChange=f,a.trySubscribe(),f(),()=>{if(b=!0,a.tryUnsubscribe(),a.onStateChange=null,u)throw u}}function bu(t,s){return t===s}function yu(t,s,a,{pure:r,areStatesEqual:i=bu,areOwnPropsEqual:n=Ka,areStatePropsEqual:l=Ka,areMergedPropsEqual:o=Ka,forwardRef:d=!1,context:g=Tl}={}){const x=g,b=Kd(t),u=Hd(s),f=Jd(a),w=!!t;return C=>{const q=C.displayName||C.name||"Component",R=`Connect(${q})`,Z={shouldHandleStateChanges:w,displayName:R,wrappedComponentName:q,WrappedComponent:C,initMapStateToProps:b,initMapDispatchToProps:u,initMergeProps:f,areStatesEqual:i,areStatePropsEqual:l,areOwnPropsEqual:n,areMergedPropsEqual:o};function p(_){const[j,A,G]=E.useMemo(()=>{const{reactReduxForwardedRef:h,...z}=_;return[_.context,h,z]},[_]),J=E.useMemo(()=>{let h=x;return j!=null&&j.Consumer,h},[j,x]),K=E.useContext(J),ee=!!_.store&&!!_.store.getState&&!!_.store.dispatch,ue=!!K&&!!K.store,N=ee?_.store:K.store,$=ue?K.getServerState:N.getState,ge=E.useMemo(()=>Wd(N.dispatch,Z),[N]),[Pe,Y]=E.useMemo(()=>{if(!w)return gu;const h=Al(N,ee?void 0:K.subscription),z=h.notifyNestedSubs.bind(h);return[h,z]},[N,ee,K]),ke=E.useMemo(()=>ee?K:{...K,subscription:Pe},[ee,K,Pe]),_e=E.useRef(void 0),je=E.useRef(G),Be=E.useRef(void 0),S=E.useRef(!1),m=E.useRef(!1),c=E.useRef(void 0);ja(()=>(m.current=!0,()=>{m.current=!1}),[]);const y=E.useMemo(()=>()=>Be.current&&G===je.current?Be.current:ge(N.getState(),G),[N,G]),O=E.useMemo(()=>z=>Pe?xu(w,N,Pe,ge,je,_e,S,m,Be,Y,z):()=>{},[Pe]);hu(fu,[je,_e,S,G,Be,Y]);let Q;try{Q=E.useSyncExternalStore(O,y,$?()=>ge($(),G):y)}catch(h){throw c.current&&(h.message+=`
The error may be correlated with this previous error:
${c.current.stack}

`),h}ja(()=>{c.current=void 0,Be.current=void 0,_e.current=Q});const V=E.useMemo(()=>E.createElement(C,{...Q,ref:A}),[A,C,Q]);return E.useMemo(()=>w?E.createElement(J.Provider,{value:ke},V):V,[J,V,ke])}const F=E.memo(p);if(F.WrappedComponent=C,F.displayName=p.displayName=R,d){const j=E.forwardRef(function(G,J){return E.createElement(F,{...G,reactReduxForwardedRef:J})});return j.displayName=R,j.WrappedComponent=C,Nr(j,C)}return Nr(F,C)}}var Fl=yu;function vu(t){const{children:s,context:a,serverState:r,store:i}=t,n=E.useMemo(()=>{const d=Al(i);return{store:i,subscription:d,getServerState:r?()=>r:void 0}},[i,r]),l=E.useMemo(()=>i.getState(),[i]);ja(()=>{const{subscription:d}=n;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),l!==i.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[n,l]);const o=a||Tl;return E.createElement(o.Provider,{value:n},s)}var ju=vu,wu="Invariant failed";function Nu(t,s){throw new Error(wu)}var Bt=function(s){var a=s.top,r=s.right,i=s.bottom,n=s.left,l=r-n,o=i-a,d={top:a,right:r,bottom:i,left:n,width:l,height:o,x:n,y:a,center:{x:(r+n)/2,y:(i+a)/2}};return d},Gr=function(s,a){return{top:s.top-a.top,left:s.left-a.left,bottom:s.bottom+a.bottom,right:s.right+a.right}},bn=function(s,a){return{top:s.top+a.top,left:s.left+a.left,bottom:s.bottom-a.bottom,right:s.right-a.right}},ku=function(s,a){return{top:s.top+a.y,left:s.left+a.x,bottom:s.bottom+a.y,right:s.right+a.x}},Ja={top:0,right:0,bottom:0,left:0},Wr=function(s){var a=s.borderBox,r=s.margin,i=r===void 0?Ja:r,n=s.border,l=n===void 0?Ja:n,o=s.padding,d=o===void 0?Ja:o,g=Bt(Gr(a,i)),x=Bt(bn(a,l)),b=Bt(bn(x,d));return{marginBox:g,borderBox:Bt(a),paddingBox:x,contentBox:b,margin:i,border:l,padding:d}},Ct=function(s){var a=s.slice(0,-2),r=s.slice(-2);if(r!=="px")return 0;var i=Number(a);return isNaN(i)&&Nu(),i},Su=function(){return{x:window.pageXOffset,y:window.pageYOffset}},wa=function(s,a){var r=s.borderBox,i=s.border,n=s.margin,l=s.padding,o=ku(r,a);return Wr({borderBox:o,border:i,margin:n,padding:l})},Na=function(s,a){return a===void 0&&(a=Su()),wa(s,a)},El=function(s,a){var r={top:Ct(a.marginTop),right:Ct(a.marginRight),bottom:Ct(a.marginBottom),left:Ct(a.marginLeft)},i={top:Ct(a.paddingTop),right:Ct(a.paddingRight),bottom:Ct(a.paddingBottom),left:Ct(a.paddingLeft)},n={top:Ct(a.borderTopWidth),right:Ct(a.borderRightWidth),bottom:Ct(a.borderBottomWidth),left:Ct(a.borderLeftWidth)};return Wr({borderBox:s,margin:r,padding:i,border:n})},Dl=function(s){var a=s.getBoundingClientRect(),r=window.getComputedStyle(s);return El(a,r)},zs=function(s){var a=[],r=null,i=function(){for(var l=arguments.length,o=new Array(l),d=0;d<l;d++)o[d]=arguments[d];a=o,!r&&(r=requestAnimationFrame(function(){r=null,s.apply(void 0,a)}))};return i.cancel=function(){r&&(cancelAnimationFrame(r),r=null)},i};function ka(){return ka=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)({}).hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},ka.apply(null,arguments)}function Il(t,s){}Il.bind(null,"warn");Il.bind(null,"error");function Xt(){}function Cu(t,s){return{...t,...s}}function At(t,s,a){const r=s.map(i=>{const n=Cu(a,i.options);return t.addEventListener(i.eventName,i.fn,n),function(){t.removeEventListener(i.eventName,i.fn,n)}});return function(){r.forEach(n=>{n()})}}const Au="Invariant failed";class Sa extends Error{}Sa.prototype.toString=function(){return this.message};function oe(t,s){throw new Sa(Au)}class Pu extends Oe.Component{constructor(...s){super(...s),this.callbacks=null,this.unbind=Xt,this.onWindowError=a=>{const r=this.getCallbacks();r.isDragging()&&r.tryAbort(),a.error instanceof Sa&&a.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=a=>{this.callbacks=a}}componentDidMount(){this.unbind=At(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(s){if(s instanceof Sa){this.setState({});return}throw s}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const Tu=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Ca=t=>t+1,Fu=t=>`
  You have lifted an item in position ${Ca(t.source.index)}
`,_l=(t,s)=>{const a=t.droppableId===s.droppableId,r=Ca(t.index),i=Ca(s.index);return a?`
      You have moved the item from position ${r}
      to position ${i}
    `:`
    You have moved the item from position ${r}
    in list ${t.droppableId}
    to list ${s.droppableId}
    in position ${i}
  `},Bl=(t,s,a)=>s.droppableId===a.droppableId?`
      The item ${t}
      has been combined with ${a.draggableId}`:`
      The item ${t}
      in list ${s.droppableId}
      has been combined with ${a.draggableId}
      in list ${a.droppableId}
    `,Eu=t=>{const s=t.destination;if(s)return _l(t.source,s);const a=t.combine;return a?Bl(t.draggableId,t.source,a):"You are over an area that cannot be dropped on"},yn=t=>`
  The item has returned to its starting position
  of ${Ca(t.index)}
`,Du=t=>{if(t.reason==="CANCEL")return`
      Movement cancelled.
      ${yn(t.source)}
    `;const s=t.destination,a=t.combine;return s?`
      You have dropped the item.
      ${_l(t.source,s)}
    `:a?`
      You have dropped the item.
      ${Bl(t.draggableId,t.source,a)}
    `:`
    The item has been dropped while not over a drop area.
    ${yn(t.source)}
  `},ma={dragHandleUsageInstructions:Tu,onDragStart:Fu,onDragUpdate:Eu,onDragEnd:Du};function Iu(t,s){return!!(t===s||Number.isNaN(t)&&Number.isNaN(s))}function Ol(t,s){if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(!Iu(t[a],s[a]))return!1;return!0}function Ue(t,s){const a=E.useState(()=>({inputs:s,result:t()}))[0],r=E.useRef(!0),i=E.useRef(a),l=r.current||!!(s&&i.current.inputs&&Ol(s,i.current.inputs))?i.current:{inputs:s,result:t()};return E.useEffect(()=>{r.current=!1,i.current=l},[l]),l.result}function ve(t,s){return Ue(()=>t,s)}const dt={x:0,y:0},ut=(t,s)=>({x:t.x+s.x,y:t.y+s.y}),jt=(t,s)=>({x:t.x-s.x,y:t.y-s.y}),Jt=(t,s)=>t.x===s.x&&t.y===s.y,As=t=>({x:t.x!==0?-t.x:0,y:t.y!==0?-t.y:0}),ms=(t,s,a=0)=>t==="x"?{x:s,y:a}:{x:a,y:s},Hs=(t,s)=>Math.sqrt((s.x-t.x)**2+(s.y-t.y)**2),vn=(t,s)=>Math.min(...s.map(a=>Hs(t,a))),Rl=t=>s=>({x:t(s.x),y:t(s.y)});var _u=(t,s)=>{const a=Bt({top:Math.max(s.top,t.top),right:Math.min(s.right,t.right),bottom:Math.min(s.bottom,t.bottom),left:Math.max(s.left,t.left)});return a.width<=0||a.height<=0?null:a};const sa=(t,s)=>({top:t.top+s.y,left:t.left+s.x,bottom:t.bottom+s.y,right:t.right+s.x}),jn=t=>[{x:t.left,y:t.top},{x:t.right,y:t.top},{x:t.left,y:t.bottom},{x:t.right,y:t.bottom}],Bu={top:0,right:0,bottom:0,left:0},Ou=(t,s)=>s?sa(t,s.scroll.diff.displacement):t,Ru=(t,s,a)=>a&&a.increasedBy?{...t,[s.end]:t[s.end]+a.increasedBy[s.line]}:t,Uu=(t,s)=>s&&s.shouldClipSubject?_u(s.pageMarginBox,t):Bt(t);var ks=({page:t,withPlaceholder:s,axis:a,frame:r})=>{const i=Ou(t.marginBox,r),n=Ru(i,a,s),l=Uu(n,r);return{page:t,withPlaceholder:s,active:l}},zr=(t,s)=>{t.frame||oe();const a=t.frame,r=jt(s,a.scroll.initial),i=As(r),n={...a,scroll:{initial:a.scroll.initial,current:s,diff:{value:r,displacement:i},max:a.scroll.max}},l=ks({page:t.subject.page,withPlaceholder:t.subject.withPlaceholder,axis:t.axis,frame:n});return{...t,frame:n,subject:l}};function ct(t,s=Ol){let a=null;function r(...i){if(a&&a.lastThis===this&&s(i,a.lastArgs))return a.lastResult;const n=t.apply(this,i);return a={lastResult:n,lastArgs:i,lastThis:this},n}return r.clear=function(){a=null},r}const Ul=ct(t=>t.reduce((s,a)=>(s[a.descriptor.id]=a,s),{})),Ml=ct(t=>t.reduce((s,a)=>(s[a.descriptor.id]=a,s),{})),Ea=ct(t=>Object.values(t)),Mu=ct(t=>Object.values(t));var Ps=ct((t,s)=>Mu(s).filter(r=>t===r.descriptor.droppableId).sort((r,i)=>r.descriptor.index-i.descriptor.index));function Hr(t){return t.at&&t.at.type==="REORDER"?t.at.destination:null}function Da(t){return t.at&&t.at.type==="COMBINE"?t.at.combine:null}var Ia=ct((t,s)=>s.filter(a=>a.descriptor.id!==t.descriptor.id)),Lu=({isMovingForward:t,draggable:s,destination:a,insideDestination:r,previousImpact:i})=>{if(!a.isCombineEnabled||!Hr(i))return null;function l(f){const w={type:"COMBINE",combine:{draggableId:f,droppableId:a.descriptor.id}};return{...i,at:w}}const o=i.displaced.all,d=o.length?o[0]:null;if(t)return d?l(d):null;const g=Ia(s,r);if(!d){if(!g.length)return null;const f=g[g.length-1];return l(f.descriptor.id)}const x=g.findIndex(f=>f.descriptor.id===d);x===-1&&oe();const b=x-1;if(b<0)return null;const u=g[b];return l(u.descriptor.id)},Ts=(t,s)=>t.descriptor.droppableId===s.descriptor.id;const Ll={point:dt,value:0},Ks={invisible:{},visible:{},all:[]},$u={displaced:Ks,displacedBy:Ll,at:null};var Pt=(t,s)=>a=>t<=a&&a<=s,$l=t=>{const s=Pt(t.top,t.bottom),a=Pt(t.left,t.right);return r=>{if(s(r.top)&&s(r.bottom)&&a(r.left)&&a(r.right))return!0;const n=s(r.top)||s(r.bottom),l=a(r.left)||a(r.right);if(n&&l)return!0;const d=r.top<t.top&&r.bottom>t.bottom,g=r.left<t.left&&r.right>t.right;return d&&g?!0:d&&l||g&&n}},Vu=t=>{const s=Pt(t.top,t.bottom),a=Pt(t.left,t.right);return r=>s(r.top)&&s(r.bottom)&&a(r.left)&&a(r.right)};const Kr={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},Vl={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var qu=t=>s=>{const a=Pt(s.top,s.bottom),r=Pt(s.left,s.right);return i=>t===Kr?a(i.top)&&a(i.bottom):r(i.left)&&r(i.right)};const Gu=(t,s)=>{const a=s.frame?s.frame.scroll.diff.displacement:dt;return sa(t,a)},Wu=(t,s,a)=>s.subject.active?a(s.subject.active)(t):!1,zu=(t,s,a)=>a(s)(t),Qr=({target:t,destination:s,viewport:a,withDroppableDisplacement:r,isVisibleThroughFrameFn:i})=>{const n=r?Gu(t,s):t;return Wu(n,s,i)&&zu(n,a,i)},Hu=t=>Qr({...t,isVisibleThroughFrameFn:$l}),ql=t=>Qr({...t,isVisibleThroughFrameFn:Vu}),Ku=t=>Qr({...t,isVisibleThroughFrameFn:qu(t.destination.axis)}),Qu=(t,s,a)=>{if(typeof a=="boolean")return a;if(!s)return!0;const{invisible:r,visible:i}=s;if(r[t])return!1;const n=i[t];return n?n.shouldAnimate:!0};function Xu(t,s){const a=t.page.marginBox,r={top:s.point.y,right:0,bottom:0,left:s.point.x};return Bt(Gr(a,r))}function Qs({afterDragging:t,destination:s,displacedBy:a,viewport:r,forceShouldAnimate:i,last:n}){return t.reduce(function(o,d){const g=Xu(d,a),x=d.descriptor.id;if(o.all.push(x),!Hu({target:g,destination:s,viewport:r,withDroppableDisplacement:!0}))return o.invisible[d.descriptor.id]=!0,o;const u=Qu(x,n,i),f={draggableId:x,shouldAnimate:u};return o.visible[x]=f,o},{all:[],visible:{},invisible:{}})}function Ju(t,s){if(!t.length)return 0;const a=t[t.length-1].descriptor.index;return s.inHomeList?a:a+1}function wn({insideDestination:t,inHomeList:s,displacedBy:a,destination:r}){const i=Ju(t,{inHomeList:s});return{displaced:Ks,displacedBy:a,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:i}}}}function Aa({draggable:t,insideDestination:s,destination:a,viewport:r,displacedBy:i,last:n,index:l,forceShouldAnimate:o}){const d=Ts(t,a);if(l==null)return wn({insideDestination:s,inHomeList:d,displacedBy:i,destination:a});const g=s.find(w=>w.descriptor.index===l);if(!g)return wn({insideDestination:s,inHomeList:d,displacedBy:i,destination:a});const x=Ia(t,s),b=s.indexOf(g),u=x.slice(b);return{displaced:Qs({afterDragging:u,destination:a,displacedBy:i,last:n,viewport:r.frame,forceShouldAnimate:o}),displacedBy:i,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:l}}}}function ss(t,s){return!!s.effected[t]}var Zu=({isMovingForward:t,destination:s,draggables:a,combine:r,afterCritical:i})=>{if(!s.isCombineEnabled)return null;const n=r.draggableId,o=a[n].descriptor.index;return ss(n,i)?t?o:o-1:t?o+1:o},Yu=({isMovingForward:t,isInHomeList:s,insideDestination:a,location:r})=>{if(!a.length)return null;const i=r.index,n=t?i+1:i-1,l=a[0].descriptor.index,o=a[a.length-1].descriptor.index,d=s?o:o+1;return n<l||n>d?null:n},em=({isMovingForward:t,isInHomeList:s,draggable:a,draggables:r,destination:i,insideDestination:n,previousImpact:l,viewport:o,afterCritical:d})=>{const g=l.at;if(g||oe(),g.type==="REORDER"){const b=Yu({isMovingForward:t,isInHomeList:s,location:g.destination,insideDestination:n});return b==null?null:Aa({draggable:a,insideDestination:n,destination:i,viewport:o,last:l.displaced,displacedBy:l.displacedBy,index:b})}const x=Zu({isMovingForward:t,destination:i,displaced:l.displaced,draggables:r,combine:g.combine,afterCritical:d});return x==null?null:Aa({draggable:a,insideDestination:n,destination:i,viewport:o,last:l.displaced,displacedBy:l.displacedBy,index:x})},tm=({displaced:t,afterCritical:s,combineWith:a,displacedBy:r})=>{const i=!!(t.visible[a]||t.invisible[a]);return ss(a,s)?i?dt:As(r.point):i?r.point:dt},sm=({afterCritical:t,impact:s,draggables:a})=>{const r=Da(s);r||oe();const i=r.draggableId,n=a[i].page.borderBox.center,l=tm({displaced:s.displaced,afterCritical:t,combineWith:i,displacedBy:s.displacedBy});return ut(n,l)};const Gl=(t,s)=>s.margin[t.start]+s.borderBox[t.size]/2,am=(t,s)=>s.margin[t.end]+s.borderBox[t.size]/2,Xr=(t,s,a)=>s[t.crossAxisStart]+a.margin[t.crossAxisStart]+a.borderBox[t.crossAxisSize]/2,Nn=({axis:t,moveRelativeTo:s,isMoving:a})=>ms(t.line,s.marginBox[t.end]+Gl(t,a),Xr(t,s.marginBox,a)),kn=({axis:t,moveRelativeTo:s,isMoving:a})=>ms(t.line,s.marginBox[t.start]-am(t,a),Xr(t,s.marginBox,a)),rm=({axis:t,moveInto:s,isMoving:a})=>ms(t.line,s.contentBox[t.start]+Gl(t,a),Xr(t,s.contentBox,a));var im=({impact:t,draggable:s,draggables:a,droppable:r,afterCritical:i})=>{const n=Ps(r.descriptor.id,a),l=s.page,o=r.axis;if(!n.length)return rm({axis:o,moveInto:r.page,isMoving:l});const{displaced:d,displacedBy:g}=t,x=d.all[0];if(x){const u=a[x];if(ss(x,i))return kn({axis:o,moveRelativeTo:u.page,isMoving:l});const f=wa(u.page,g.point);return kn({axis:o,moveRelativeTo:f,isMoving:l})}const b=n[n.length-1];if(b.descriptor.id===s.descriptor.id)return l.borderBox.center;if(ss(b.descriptor.id,i)){const u=wa(b.page,As(i.displacedBy.point));return Nn({axis:o,moveRelativeTo:u,isMoving:l})}return Nn({axis:o,moveRelativeTo:b.page,isMoving:l})},kr=(t,s)=>{const a=t.frame;return a?ut(s,a.scroll.diff.displacement):s};const nm=({impact:t,draggable:s,droppable:a,draggables:r,afterCritical:i})=>{const n=s.page.borderBox.center,l=t.at;return!a||!l?n:l.type==="REORDER"?im({impact:t,draggable:s,draggables:r,droppable:a,afterCritical:i}):sm({impact:t,draggables:r,afterCritical:i})};var _a=t=>{const s=nm(t),a=t.droppable;return a?kr(a,s):s},Wl=(t,s)=>{const a=jt(s,t.scroll.initial),r=As(a);return{frame:Bt({top:s.y,bottom:s.y+t.frame.height,left:s.x,right:s.x+t.frame.width}),scroll:{initial:t.scroll.initial,max:t.scroll.max,current:s,diff:{value:a,displacement:r}}}};function Sn(t,s){return t.map(a=>s[a])}function lm(t,s){for(let a=0;a<s.length;a++){const r=s[a].visible[t];if(r)return r}return null}var om=({impact:t,viewport:s,destination:a,draggables:r,maxScrollChange:i})=>{const n=Wl(s,ut(s.scroll.current,i)),l=a.frame?zr(a,ut(a.frame.scroll.current,i)):a,o=t.displaced,d=Qs({afterDragging:Sn(o.all,r),destination:a,displacedBy:t.displacedBy,viewport:n.frame,last:o,forceShouldAnimate:!1}),g=Qs({afterDragging:Sn(o.all,r),destination:l,displacedBy:t.displacedBy,viewport:s.frame,last:o,forceShouldAnimate:!1}),x={},b={},u=[o,d,g];return o.all.forEach(w=>{const B=lm(w,u);if(B){b[w]=B;return}x[w]=!0}),{...t,displaced:{all:o.all,invisible:x,visible:b}}},cm=(t,s)=>ut(t.scroll.diff.displacement,s),Jr=({pageBorderBoxCenter:t,draggable:s,viewport:a})=>{const r=cm(a,t),i=jt(r,s.page.borderBox.center);return ut(s.client.borderBox.center,i)},zl=({draggable:t,destination:s,newPageBorderBoxCenter:a,viewport:r,withDroppableDisplacement:i,onlyOnMainAxis:n=!1})=>{const l=jt(a,t.page.borderBox.center),d={target:sa(t.page.borderBox,l),destination:s,withDroppableDisplacement:i,viewport:r};return n?Ku(d):ql(d)},dm=({isMovingForward:t,draggable:s,destination:a,draggables:r,previousImpact:i,viewport:n,previousPageBorderBoxCenter:l,previousClientSelection:o,afterCritical:d})=>{if(!a.isEnabled)return null;const g=Ps(a.descriptor.id,r),x=Ts(s,a),b=Lu({isMovingForward:t,draggable:s,destination:a,insideDestination:g,previousImpact:i})||em({isMovingForward:t,isInHomeList:x,draggable:s,draggables:r,destination:a,insideDestination:g,previousImpact:i,viewport:n,afterCritical:d});if(!b)return null;const u=_a({impact:b,draggable:s,droppable:a,draggables:r,afterCritical:d});if(zl({draggable:s,destination:a,newPageBorderBoxCenter:u,viewport:n.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:Jr({pageBorderBoxCenter:u,draggable:s,viewport:n}),impact:b,scrollJumpRequest:null};const w=jt(u,l),B=om({impact:b,viewport:n,destination:a,draggables:r,maxScrollChange:w});return{clientSelection:o,impact:B,scrollJumpRequest:w}};const mt=t=>{const s=t.subject.active;return s||oe(),s};var um=({isMovingForward:t,pageBorderBoxCenter:s,source:a,droppables:r,viewport:i})=>{const n=a.subject.active;if(!n)return null;const l=a.axis,o=Pt(n[l.start],n[l.end]),d=Ea(r).filter(x=>x!==a).filter(x=>x.isEnabled).filter(x=>!!x.subject.active).filter(x=>$l(i.frame)(mt(x))).filter(x=>{const b=mt(x);return t?n[l.crossAxisEnd]<b[l.crossAxisEnd]:b[l.crossAxisStart]<n[l.crossAxisStart]}).filter(x=>{const b=mt(x),u=Pt(b[l.start],b[l.end]);return o(b[l.start])||o(b[l.end])||u(n[l.start])||u(n[l.end])}).sort((x,b)=>{const u=mt(x)[l.crossAxisStart],f=mt(b)[l.crossAxisStart];return t?u-f:f-u}).filter((x,b,u)=>mt(x)[l.crossAxisStart]===mt(u[0])[l.crossAxisStart]);if(!d.length)return null;if(d.length===1)return d[0];const g=d.filter(x=>Pt(mt(x)[l.start],mt(x)[l.end])(s[l.line]));return g.length===1?g[0]:g.length>1?g.sort((x,b)=>mt(x)[l.start]-mt(b)[l.start])[0]:d.sort((x,b)=>{const u=vn(s,jn(mt(x))),f=vn(s,jn(mt(b)));return u!==f?u-f:mt(x)[l.start]-mt(b)[l.start]})[0]};const Cn=(t,s)=>{const a=t.page.borderBox.center;return ss(t.descriptor.id,s)?jt(a,s.displacedBy.point):a},mm=(t,s)=>{const a=t.page.borderBox;return ss(t.descriptor.id,s)?sa(a,As(s.displacedBy.point)):a};var pm=({pageBorderBoxCenter:t,viewport:s,destination:a,insideDestination:r,afterCritical:i})=>r.filter(l=>ql({target:mm(l,i),destination:a,viewport:s.frame,withDroppableDisplacement:!0})).sort((l,o)=>{const d=Hs(t,kr(a,Cn(l,i))),g=Hs(t,kr(a,Cn(o,i)));return d<g?-1:g<d?1:l.descriptor.index-o.descriptor.index})[0]||null,aa=ct(function(s,a){const r=a[s.line];return{value:r,point:ms(s.line,r)}});const gm=(t,s,a)=>{const r=t.axis;if(t.descriptor.mode==="virtual")return ms(r.line,s[r.line]);const i=t.subject.page.contentBox[r.size],d=Ps(t.descriptor.id,a).reduce((g,x)=>g+x.client.marginBox[r.size],0)+s[r.line]-i;return d<=0?null:ms(r.line,d)},Hl=(t,s)=>({...t,scroll:{...t.scroll,max:s}}),Kl=(t,s,a)=>{const r=t.frame;Ts(s,t)&&oe(),t.subject.withPlaceholder&&oe();const i=aa(t.axis,s.displaceBy).point,n=gm(t,i,a),l={placeholderSize:i,increasedBy:n,oldFrameMaxScroll:t.frame?t.frame.scroll.max:null};if(!r){const x=ks({page:t.subject.page,withPlaceholder:l,axis:t.axis,frame:t.frame});return{...t,subject:x}}const o=n?ut(r.scroll.max,n):r.scroll.max,d=Hl(r,o),g=ks({page:t.subject.page,withPlaceholder:l,axis:t.axis,frame:d});return{...t,subject:g,frame:d}},hm=t=>{const s=t.subject.withPlaceholder;s||oe();const a=t.frame;if(!a){const l=ks({page:t.subject.page,axis:t.axis,frame:null,withPlaceholder:null});return{...t,subject:l}}const r=s.oldFrameMaxScroll;r||oe();const i=Hl(a,r),n=ks({page:t.subject.page,axis:t.axis,frame:i,withPlaceholder:null});return{...t,subject:n,frame:i}};var fm=({previousPageBorderBoxCenter:t,moveRelativeTo:s,insideDestination:a,draggable:r,draggables:i,destination:n,viewport:l,afterCritical:o})=>{if(!s){if(a.length)return null;const b={displaced:Ks,displacedBy:Ll,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:0}}},u=_a({impact:b,draggable:r,droppable:n,draggables:i,afterCritical:o}),f=Ts(r,n)?n:Kl(n,r,i);return zl({draggable:r,destination:f,newPageBorderBoxCenter:u,viewport:l.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?b:null}const d=t[n.axis.line]<=s.page.borderBox.center[n.axis.line],g=(()=>{const b=s.descriptor.index;return s.descriptor.id===r.descriptor.id||d?b:b+1})(),x=aa(n.axis,r.displaceBy);return Aa({draggable:r,insideDestination:a,destination:n,viewport:l,displacedBy:x,last:Ks,index:g})},xm=({isMovingForward:t,previousPageBorderBoxCenter:s,draggable:a,isOver:r,draggables:i,droppables:n,viewport:l,afterCritical:o})=>{const d=um({isMovingForward:t,pageBorderBoxCenter:s,source:r,droppables:n,viewport:l});if(!d)return null;const g=Ps(d.descriptor.id,i),x=pm({pageBorderBoxCenter:s,viewport:l,destination:d,insideDestination:g,afterCritical:o}),b=fm({previousPageBorderBoxCenter:s,destination:d,draggable:a,draggables:i,moveRelativeTo:x,insideDestination:g,viewport:l,afterCritical:o});if(!b)return null;const u=_a({impact:b,draggable:a,droppable:d,draggables:i,afterCritical:o});return{clientSelection:Jr({pageBorderBoxCenter:u,draggable:a,viewport:l}),impact:b,scrollJumpRequest:null}},wt=t=>{const s=t.at;return s?s.type==="REORDER"?s.destination.droppableId:s.combine.droppableId:null};const bm=(t,s)=>{const a=wt(t);return a?s[a]:null};var ym=({state:t,type:s})=>{const a=bm(t.impact,t.dimensions.droppables),r=!!a,i=t.dimensions.droppables[t.critical.droppable.id],n=a||i,l=n.axis.direction,o=l==="vertical"&&(s==="MOVE_UP"||s==="MOVE_DOWN")||l==="horizontal"&&(s==="MOVE_LEFT"||s==="MOVE_RIGHT");if(o&&!r)return null;const d=s==="MOVE_DOWN"||s==="MOVE_RIGHT",g=t.dimensions.draggables[t.critical.draggable.id],x=t.current.page.borderBoxCenter,{draggables:b,droppables:u}=t.dimensions;return o?dm({isMovingForward:d,previousPageBorderBoxCenter:x,draggable:g,destination:n,draggables:b,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):xm({isMovingForward:d,previousPageBorderBoxCenter:x,draggable:g,isOver:n,draggables:b,droppables:u,viewport:t.viewport,afterCritical:t.afterCritical})};function os(t){return t.phase==="DRAGGING"||t.phase==="COLLECTING"}function Ql(t){const s=Pt(t.top,t.bottom),a=Pt(t.left,t.right);return function(i){return s(i.y)&&a(i.x)}}function vm(t,s){return t.left<s.right&&t.right>s.left&&t.top<s.bottom&&t.bottom>s.top}function jm({pageBorderBox:t,draggable:s,candidates:a}){const r=s.page.borderBox.center,i=a.map(n=>{const l=n.axis,o=ms(n.axis.line,t.center[l.line],n.page.borderBox.center[l.crossAxisLine]);return{id:n.descriptor.id,distance:Hs(r,o)}}).sort((n,l)=>l.distance-n.distance);return i[0]?i[0].id:null}function wm({pageBorderBox:t,draggable:s,droppables:a}){const r=Ea(a).filter(i=>{if(!i.isEnabled)return!1;const n=i.subject.active;if(!n||!vm(t,n))return!1;if(Ql(n)(t.center))return!0;const l=i.axis,o=n.center[l.crossAxisLine],d=t[l.crossAxisStart],g=t[l.crossAxisEnd],x=Pt(n[l.crossAxisStart],n[l.crossAxisEnd]),b=x(d),u=x(g);return!b&&!u?!0:b?d<o:g>o});return r.length?r.length===1?r[0].descriptor.id:jm({pageBorderBox:t,draggable:s,candidates:r}):null}const Xl=(t,s)=>Bt(sa(t,s));var Nm=(t,s)=>{const a=t.frame;return a?Xl(s,a.scroll.diff.value):s};function Jl({displaced:t,id:s}){return!!(t.visible[s]||t.invisible[s])}function km({draggable:t,closest:s,inHomeList:a}){return s?a&&s.descriptor.index>t.descriptor.index?s.descriptor.index-1:s.descriptor.index:null}var Sm=({pageBorderBoxWithDroppableScroll:t,draggable:s,destination:a,insideDestination:r,last:i,viewport:n,afterCritical:l})=>{const o=a.axis,d=aa(a.axis,s.displaceBy),g=d.value,x=t[o.start],b=t[o.end],f=Ia(s,r).find(B=>{const C=B.descriptor.id,q=B.page.borderBox.center[o.line],R=ss(C,l),Z=Jl({displaced:i,id:C});return R?Z?b<=q:x<q-g:Z?b<=q+g:x<q})||null,w=km({draggable:s,closest:f,inHomeList:Ts(s,a)});return Aa({draggable:s,insideDestination:r,destination:a,viewport:n,last:i,displacedBy:d,index:w})};const Cm=4;var Am=({draggable:t,pageBorderBoxWithDroppableScroll:s,previousImpact:a,destination:r,insideDestination:i,afterCritical:n})=>{if(!r.isCombineEnabled)return null;const l=r.axis,o=aa(r.axis,t.displaceBy),d=o.value,g=s[l.start],x=s[l.end],u=Ia(t,i).find(w=>{const B=w.descriptor.id,C=w.page.borderBox,R=C[l.size]/Cm,Z=ss(B,n),p=Jl({displaced:a.displaced,id:B});return Z?p?x>C[l.start]+R&&x<C[l.end]-R:g>C[l.start]-d+R&&g<C[l.end]-d-R:p?x>C[l.start]+d+R&&x<C[l.end]+d-R:g>C[l.start]+R&&g<C[l.end]-R});return u?{displacedBy:o,displaced:a.displaced,at:{type:"COMBINE",combine:{draggableId:u.descriptor.id,droppableId:r.descriptor.id}}}:null},Zl=({pageOffset:t,draggable:s,draggables:a,droppables:r,previousImpact:i,viewport:n,afterCritical:l})=>{const o=Xl(s.page.borderBox,t),d=wm({pageBorderBox:o,draggable:s,droppables:r});if(!d)return $u;const g=r[d],x=Ps(g.descriptor.id,a),b=Nm(g,o);return Am({pageBorderBoxWithDroppableScroll:b,draggable:s,previousImpact:i,destination:g,insideDestination:x,afterCritical:l})||Sm({pageBorderBoxWithDroppableScroll:b,draggable:s,destination:g,insideDestination:x,last:i.displaced,viewport:n,afterCritical:l})},Zr=(t,s)=>({...t,[s.descriptor.id]:s});const Pm=({previousImpact:t,impact:s,droppables:a})=>{const r=wt(t),i=wt(s);if(!r||r===i)return a;const n=a[r];if(!n.subject.withPlaceholder)return a;const l=hm(n);return Zr(a,l)};var Tm=({draggable:t,draggables:s,droppables:a,previousImpact:r,impact:i})=>{const n=Pm({previousImpact:r,impact:i,droppables:a}),l=wt(i);if(!l)return n;const o=a[l];if(Ts(t,o)||o.subject.withPlaceholder)return n;const d=Kl(o,t,s);return Zr(n,d)},Ms=({state:t,clientSelection:s,dimensions:a,viewport:r,impact:i,scrollJumpRequest:n})=>{const l=r||t.viewport,o=a||t.dimensions,d=s||t.current.client.selection,g=jt(d,t.initial.client.selection),x={offset:g,selection:d,borderBoxCenter:ut(t.initial.client.borderBoxCenter,g)},b={selection:ut(x.selection,l.scroll.current),borderBoxCenter:ut(x.borderBoxCenter,l.scroll.current),offset:ut(x.offset,l.scroll.diff.value)},u={client:x,page:b};if(t.phase==="COLLECTING")return{...t,dimensions:o,viewport:l,current:u};const f=o.draggables[t.critical.draggable.id],w=i||Zl({pageOffset:b.offset,draggable:f,draggables:o.draggables,droppables:o.droppables,previousImpact:t.impact,viewport:l,afterCritical:t.afterCritical}),B=Tm({draggable:f,impact:w,previousImpact:t.impact,draggables:o.draggables,droppables:o.droppables});return{...t,current:u,dimensions:{draggables:o.draggables,droppables:B},impact:w,viewport:l,scrollJumpRequest:n||null,forceShouldAnimate:n?!1:null}};function Fm(t,s){return t.map(a=>s[a])}var Yl=({impact:t,viewport:s,draggables:a,destination:r,forceShouldAnimate:i})=>{const n=t.displaced,l=Fm(n.all,a),o=Qs({afterDragging:l,destination:r,displacedBy:t.displacedBy,viewport:s.frame,forceShouldAnimate:i,last:n});return{...t,displaced:o}},eo=({impact:t,draggable:s,droppable:a,draggables:r,viewport:i,afterCritical:n})=>{const l=_a({impact:t,draggable:s,draggables:r,droppable:a,afterCritical:n});return Jr({pageBorderBoxCenter:l,draggable:s,viewport:i})},to=({state:t,dimensions:s,viewport:a})=>{t.movementMode!=="SNAP"&&oe();const r=t.impact,i=a||t.viewport,n=s||t.dimensions,{draggables:l,droppables:o}=n,d=l[t.critical.draggable.id],g=wt(r);g||oe();const x=o[g],b=Yl({impact:r,viewport:i,destination:x,draggables:l}),u=eo({impact:b,draggable:d,droppable:x,draggables:l,viewport:i,afterCritical:t.afterCritical});return Ms({impact:b,clientSelection:u,state:t,dimensions:n,viewport:i})},Em=t=>({index:t.index,droppableId:t.droppableId}),so=({draggable:t,home:s,draggables:a,viewport:r})=>{const i=aa(s.axis,t.displaceBy),n=Ps(s.descriptor.id,a),l=n.indexOf(t);l===-1&&oe();const o=n.slice(l+1),d=o.reduce((u,f)=>(u[f.descriptor.id]=!0,u),{}),g={inVirtualList:s.descriptor.mode==="virtual",displacedBy:i,effected:d};return{impact:{displaced:Qs({afterDragging:o,destination:s,displacedBy:i,last:null,viewport:r.frame,forceShouldAnimate:!1}),displacedBy:i,at:{type:"REORDER",destination:Em(t.descriptor)}},afterCritical:g}},Dm=(t,s)=>({draggables:t.draggables,droppables:Zr(t.droppables,s)}),Im=({draggable:t,offset:s,initialWindowScroll:a})=>{const r=wa(t.client,s),i=Na(r,a);return{...t,placeholder:{...t.placeholder,client:r},client:r,page:i}},_m=t=>{const s=t.frame;return s||oe(),s},Bm=({additions:t,updatedDroppables:s,viewport:a})=>{const r=a.scroll.diff.value;return t.map(i=>{const n=i.descriptor.droppableId,l=s[n],d=_m(l).scroll.diff.value,g=ut(r,d);return Im({draggable:i,offset:g,initialWindowScroll:a.scroll.initial})})},Om=({state:t,published:s})=>{const a=s.modified.map(q=>{const R=t.dimensions.droppables[q.droppableId];return zr(R,q.scroll)}),r={...t.dimensions.droppables,...Ul(a)},i=Ml(Bm({additions:s.additions,updatedDroppables:r,viewport:t.viewport})),n={...t.dimensions.draggables,...i};s.removals.forEach(q=>{delete n[q]});const l={droppables:r,draggables:n},o=wt(t.impact),d=o?l.droppables[o]:null,g=l.draggables[t.critical.draggable.id],x=l.droppables[t.critical.droppable.id],{impact:b,afterCritical:u}=so({draggable:g,home:x,draggables:n,viewport:t.viewport}),f=d&&d.isCombineEnabled?t.impact:b,w=Zl({pageOffset:t.current.page.offset,draggable:l.draggables[t.critical.draggable.id],draggables:l.draggables,droppables:l.droppables,previousImpact:f,viewport:t.viewport,afterCritical:u}),B={...t,phase:"DRAGGING",impact:w,onLiftImpact:b,dimensions:l,afterCritical:u,forceShouldAnimate:!1};return t.phase==="COLLECTING"?B:{...B,phase:"DROP_PENDING",reason:t.reason,isWaiting:!1}};const Sr=t=>t.movementMode==="SNAP",Za=(t,s,a)=>{const r=Dm(t.dimensions,s);return!Sr(t)||a?Ms({state:t,dimensions:r}):to({state:t,dimensions:r})};function Ya(t){return t.isDragging&&t.movementMode==="SNAP"?{...t,scrollJumpRequest:null}:t}const An={phase:"IDLE",completed:null,shouldFlush:!1};var Rm=(t=An,s)=>{if(s.type==="FLUSH")return{...An,shouldFlush:!0};if(s.type==="INITIAL_PUBLISH"){t.phase!=="IDLE"&&oe();const{critical:a,clientSelection:r,viewport:i,dimensions:n,movementMode:l}=s.payload,o=n.draggables[a.draggable.id],d=n.droppables[a.droppable.id],g={selection:r,borderBoxCenter:o.client.borderBox.center,offset:dt},x={client:g,page:{selection:ut(g.selection,i.scroll.initial),borderBoxCenter:ut(g.selection,i.scroll.initial),offset:ut(g.selection,i.scroll.diff.value)}},b=Ea(n.droppables).every(B=>!B.isFixedOnPage),{impact:u,afterCritical:f}=so({draggable:o,home:d,draggables:n.draggables,viewport:i});return{phase:"DRAGGING",isDragging:!0,critical:a,movementMode:l,dimensions:n,initial:x,current:x,isWindowScrollAllowed:b,impact:u,afterCritical:f,onLiftImpact:u,viewport:i,scrollJumpRequest:null,forceShouldAnimate:null}}if(s.type==="COLLECTION_STARTING")return t.phase==="COLLECTING"||t.phase==="DROP_PENDING"?t:(t.phase!=="DRAGGING"&&oe(),{...t,phase:"COLLECTING"});if(s.type==="PUBLISH_WHILE_DRAGGING")return t.phase==="COLLECTING"||t.phase==="DROP_PENDING"||oe(),Om({state:t,published:s.payload});if(s.type==="MOVE"){if(t.phase==="DROP_PENDING")return t;os(t)||oe();const{client:a}=s.payload;return Jt(a,t.current.client.selection)?t:Ms({state:t,clientSelection:a,impact:Sr(t)?t.impact:null})}if(s.type==="UPDATE_DROPPABLE_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="COLLECTING")return Ya(t);os(t)||oe();const{id:a,newScroll:r}=s.payload,i=t.dimensions.droppables[a];if(!i)return t;const n=zr(i,r);return Za(t,n,!1)}if(s.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(t.phase==="DROP_PENDING")return t;os(t)||oe();const{id:a,isEnabled:r}=s.payload,i=t.dimensions.droppables[a];i||oe(),i.isEnabled===r&&oe();const n={...i,isEnabled:r};return Za(t,n,!0)}if(s.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(t.phase==="DROP_PENDING")return t;os(t)||oe();const{id:a,isCombineEnabled:r}=s.payload,i=t.dimensions.droppables[a];i||oe(),i.isCombineEnabled===r&&oe();const n={...i,isCombineEnabled:r};return Za(t,n,!0)}if(s.type==="MOVE_BY_WINDOW_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="DROP_ANIMATING")return t;os(t)||oe(),t.isWindowScrollAllowed||oe();const a=s.payload.newScroll;if(Jt(t.viewport.scroll.current,a))return Ya(t);const r=Wl(t.viewport,a);return Sr(t)?to({state:t,viewport:r}):Ms({state:t,viewport:r})}if(s.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!os(t))return t;const a=s.payload.maxScroll;if(Jt(a,t.viewport.scroll.max))return t;const r={...t.viewport,scroll:{...t.viewport.scroll,max:a}};return{...t,viewport:r}}if(s.type==="MOVE_UP"||s.type==="MOVE_DOWN"||s.type==="MOVE_LEFT"||s.type==="MOVE_RIGHT"){if(t.phase==="COLLECTING"||t.phase==="DROP_PENDING")return t;t.phase!=="DRAGGING"&&oe();const a=ym({state:t,type:s.type});return a?Ms({state:t,impact:a.impact,clientSelection:a.clientSelection,scrollJumpRequest:a.scrollJumpRequest}):t}if(s.type==="DROP_PENDING"){const a=s.payload.reason;return t.phase!=="COLLECTING"&&oe(),{...t,phase:"DROP_PENDING",isWaiting:!0,reason:a}}if(s.type==="DROP_ANIMATE"){const{completed:a,dropDuration:r,newHomeClientOffset:i}=s.payload;return t.phase==="DRAGGING"||t.phase==="DROP_PENDING"||oe(),{phase:"DROP_ANIMATING",completed:a,dropDuration:r,newHomeClientOffset:i,dimensions:t.dimensions}}if(s.type==="DROP_COMPLETE"){const{completed:a}=s.payload;return{phase:"IDLE",completed:a,shouldFlush:!1}}return t};function Qe(t,s){return t instanceof Object&&"type"in t&&t.type===s}const Um=t=>({type:"BEFORE_INITIAL_CAPTURE",payload:t}),Mm=t=>({type:"LIFT",payload:t}),Lm=t=>({type:"INITIAL_PUBLISH",payload:t}),$m=t=>({type:"PUBLISH_WHILE_DRAGGING",payload:t}),Vm=()=>({type:"COLLECTION_STARTING",payload:null}),qm=t=>({type:"UPDATE_DROPPABLE_SCROLL",payload:t}),Gm=t=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:t}),Wm=t=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:t}),ao=t=>({type:"MOVE",payload:t}),zm=t=>({type:"MOVE_BY_WINDOW_SCROLL",payload:t}),Hm=t=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:t}),Km=()=>({type:"MOVE_UP",payload:null}),Qm=()=>({type:"MOVE_DOWN",payload:null}),Xm=()=>({type:"MOVE_RIGHT",payload:null}),Jm=()=>({type:"MOVE_LEFT",payload:null}),Yr=()=>({type:"FLUSH",payload:null}),Zm=t=>({type:"DROP_ANIMATE",payload:t}),ei=t=>({type:"DROP_COMPLETE",payload:t}),ro=t=>({type:"DROP",payload:t}),Ym=t=>({type:"DROP_PENDING",payload:t}),io=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var ep=t=>({getState:s,dispatch:a})=>r=>i=>{if(!Qe(i,"LIFT")){r(i);return}const{id:n,clientSelection:l,movementMode:o}=i.payload,d=s();d.phase==="DROP_ANIMATING"&&a(ei({completed:d.completed})),s().phase!=="IDLE"&&oe(),a(Yr()),a(Um({draggableId:n,movementMode:o}));const x={draggableId:n,scrollOptions:{shouldPublishImmediately:o==="SNAP"}},{critical:b,dimensions:u,viewport:f}=t.startPublishing(x);a(Lm({critical:b,dimensions:u,clientSelection:l,movementMode:o,viewport:f}))},tp=t=>()=>s=>a=>{Qe(a,"INITIAL_PUBLISH")&&t.dragging(),Qe(a,"DROP_ANIMATE")&&t.dropping(a.payload.completed.result.reason),(Qe(a,"FLUSH")||Qe(a,"DROP_COMPLETE"))&&t.resting(),s(a)};const ti={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},Xs={opacity:{drop:0,combining:.7},scale:{drop:.75}},no={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},ns=`${no.outOfTheWay}s ${ti.outOfTheWay}`,Ls={fluid:`opacity ${ns}`,snap:`transform ${ns}, opacity ${ns}`,drop:t=>{const s=`${t}s ${ti.drop}`;return`transform ${s}, opacity ${s}`},outOfTheWay:`transform ${ns}`,placeholder:`height ${ns}, width ${ns}, margin ${ns}`},Pn=t=>Jt(t,dt)?void 0:`translate(${t.x}px, ${t.y}px)`,Cr={moveTo:Pn,drop:(t,s)=>{const a=Pn(t);if(a)return s?`${a} scale(${Xs.scale.drop})`:a}},{minDropTime:Ar,maxDropTime:lo}=no,sp=lo-Ar,Tn=1500,ap=.6;var rp=({current:t,destination:s,reason:a})=>{const r=Hs(t,s);if(r<=0)return Ar;if(r>=Tn)return lo;const i=r/Tn,n=Ar+sp*i,l=a==="CANCEL"?n*ap:n;return Number(l.toFixed(2))},ip=({impact:t,draggable:s,dimensions:a,viewport:r,afterCritical:i})=>{const{draggables:n,droppables:l}=a,o=wt(t),d=o?l[o]:null,g=l[s.descriptor.droppableId],x=eo({impact:t,draggable:s,draggables:n,afterCritical:i,droppable:d||g,viewport:r});return jt(x,s.client.borderBox.center)},np=({draggables:t,reason:s,lastImpact:a,home:r,viewport:i,onLiftImpact:n})=>!a.at||s!=="DROP"?{impact:Yl({draggables:t,impact:n,destination:r,viewport:i,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:a.at.type==="REORDER"?{impact:a,didDropInsideDroppable:!0}:{impact:{...a,displaced:Ks},didDropInsideDroppable:!0};const lp=({getState:t,dispatch:s})=>a=>r=>{if(!Qe(r,"DROP")){a(r);return}const i=t(),n=r.payload.reason;if(i.phase==="COLLECTING"){s(Ym({reason:n}));return}if(i.phase==="IDLE")return;i.phase==="DROP_PENDING"&&i.isWaiting&&oe(),i.phase==="DRAGGING"||i.phase==="DROP_PENDING"||oe();const o=i.critical,d=i.dimensions,g=d.draggables[i.critical.draggable.id],{impact:x,didDropInsideDroppable:b}=np({reason:n,lastImpact:i.impact,afterCritical:i.afterCritical,onLiftImpact:i.onLiftImpact,home:i.dimensions.droppables[i.critical.droppable.id],viewport:i.viewport,draggables:i.dimensions.draggables}),u=b?Hr(x):null,f=b?Da(x):null,w={index:o.draggable.index,droppableId:o.droppable.id},B={draggableId:g.descriptor.id,type:g.descriptor.type,source:w,reason:n,mode:i.movementMode,destination:u,combine:f},C=ip({impact:x,draggable:g,dimensions:d,viewport:i.viewport,afterCritical:i.afterCritical}),q={critical:i.critical,afterCritical:i.afterCritical,result:B,impact:x};if(!(!Jt(i.current.client.offset,C)||!!B.combine)){s(ei({completed:q}));return}const Z=rp({current:i.current.client.offset,destination:C,reason:n});s(Zm({newHomeClientOffset:C,dropDuration:Z,completed:q}))};var oo=()=>({x:window.pageXOffset,y:window.pageYOffset});function op(t){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:s=>{s.target!==window&&s.target!==window.document||t()}}}function cp({onWindowScroll:t}){function s(){t(oo())}const a=zs(s),r=op(a);let i=Xt;function n(){return i!==Xt}function l(){n()&&oe(),i=At(window,[r])}function o(){n()||oe(),a.cancel(),i(),i=Xt}return{start:l,stop:o,isActive:n}}const dp=t=>Qe(t,"DROP_COMPLETE")||Qe(t,"DROP_ANIMATE")||Qe(t,"FLUSH"),up=t=>{const s=cp({onWindowScroll:a=>{t.dispatch(zm({newScroll:a}))}});return a=>r=>{!s.isActive()&&Qe(r,"INITIAL_PUBLISH")&&s.start(),s.isActive()&&dp(r)&&s.stop(),a(r)}};var mp=t=>{let s=!1,a=!1;const r=setTimeout(()=>{a=!0}),i=n=>{s||a||(s=!0,t(n),clearTimeout(r))};return i.wasCalled=()=>s,i},pp=()=>{const t=[],s=i=>{const n=t.findIndex(o=>o.timerId===i);n===-1&&oe();const[l]=t.splice(n,1);l.callback()};return{add:i=>{const n=setTimeout(()=>s(n)),l={timerId:n,callback:i};t.push(l)},flush:()=>{if(!t.length)return;const i=[...t];t.length=0,i.forEach(n=>{clearTimeout(n.timerId),n.callback()})}}};const gp=(t,s)=>t==null&&s==null?!0:t==null||s==null?!1:t.droppableId===s.droppableId&&t.index===s.index,hp=(t,s)=>t==null&&s==null?!0:t==null||s==null?!1:t.draggableId===s.draggableId&&t.droppableId===s.droppableId,fp=(t,s)=>{if(t===s)return!0;const a=t.draggable.id===s.draggable.id&&t.draggable.droppableId===s.draggable.droppableId&&t.draggable.type===s.draggable.type&&t.draggable.index===s.draggable.index,r=t.droppable.id===s.droppable.id&&t.droppable.type===s.droppable.type;return a&&r},Es=(t,s)=>{s()},la=(t,s)=>({draggableId:t.draggable.id,type:t.droppable.type,source:{droppableId:t.droppable.id,index:t.draggable.index},mode:s});function er(t,s,a,r){if(!t){a(r(s));return}const i=mp(a);t(s,{announce:i}),i.wasCalled()||a(r(s))}var xp=(t,s)=>{const a=pp();let r=null;const i=(b,u)=>{r&&oe(),Es("onBeforeCapture",()=>{const f=t().onBeforeCapture;f&&f({draggableId:b,mode:u})})},n=(b,u)=>{r&&oe(),Es("onBeforeDragStart",()=>{const f=t().onBeforeDragStart;f&&f(la(b,u))})},l=(b,u)=>{r&&oe();const f=la(b,u);r={mode:u,lastCritical:b,lastLocation:f.source,lastCombine:null},a.add(()=>{Es("onDragStart",()=>er(t().onDragStart,f,s,ma.onDragStart))})},o=(b,u)=>{const f=Hr(u),w=Da(u);r||oe();const B=!fp(b,r.lastCritical);B&&(r.lastCritical=b);const C=!gp(r.lastLocation,f);C&&(r.lastLocation=f);const q=!hp(r.lastCombine,w);if(q&&(r.lastCombine=w),!B&&!C&&!q)return;const R={...la(b,r.mode),combine:w,destination:f};a.add(()=>{Es("onDragUpdate",()=>er(t().onDragUpdate,R,s,ma.onDragUpdate))})},d=()=>{r||oe(),a.flush()},g=b=>{r||oe(),r=null,Es("onDragEnd",()=>er(t().onDragEnd,b,s,ma.onDragEnd))};return{beforeCapture:i,beforeStart:n,start:l,update:o,flush:d,drop:g,abort:()=>{if(!r)return;const b={...la(r.lastCritical,r.mode),combine:null,destination:null,reason:"CANCEL"};g(b)}}},bp=(t,s)=>{const a=xp(t,s);return r=>i=>n=>{if(Qe(n,"BEFORE_INITIAL_CAPTURE")){a.beforeCapture(n.payload.draggableId,n.payload.movementMode);return}if(Qe(n,"INITIAL_PUBLISH")){const o=n.payload.critical;a.beforeStart(o,n.payload.movementMode),i(n),a.start(o,n.payload.movementMode);return}if(Qe(n,"DROP_COMPLETE")){const o=n.payload.completed.result;a.flush(),i(n),a.drop(o);return}if(i(n),Qe(n,"FLUSH")){a.abort();return}const l=r.getState();l.phase==="DRAGGING"&&a.update(l.critical,l.impact)}};const yp=t=>s=>a=>{if(!Qe(a,"DROP_ANIMATION_FINISHED")){s(a);return}const r=t.getState();r.phase!=="DROP_ANIMATING"&&oe(),t.dispatch(ei({completed:r.completed}))},vp=t=>{let s=null,a=null;function r(){a&&(cancelAnimationFrame(a),a=null),s&&(s(),s=null)}return i=>n=>{if((Qe(n,"FLUSH")||Qe(n,"DROP_COMPLETE")||Qe(n,"DROP_ANIMATION_FINISHED"))&&r(),i(n),!Qe(n,"DROP_ANIMATE"))return;const l={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){t.getState().phase==="DROP_ANIMATING"&&t.dispatch(io())}};a=requestAnimationFrame(()=>{a=null,s=At(window,[l])})}};var jp=t=>()=>s=>a=>{(Qe(a,"DROP_COMPLETE")||Qe(a,"FLUSH")||Qe(a,"DROP_ANIMATE"))&&t.stopPublishing(),s(a)},wp=t=>{let s=!1;return()=>a=>r=>{if(Qe(r,"INITIAL_PUBLISH")){s=!0,t.tryRecordFocus(r.payload.critical.draggable.id),a(r),t.tryRestoreFocusRecorded();return}if(a(r),!!s){if(Qe(r,"FLUSH")){s=!1,t.tryRestoreFocusRecorded();return}if(Qe(r,"DROP_COMPLETE")){s=!1;const i=r.payload.completed.result;i.combine&&t.tryShiftRecord(i.draggableId,i.combine.draggableId),t.tryRestoreFocusRecorded()}}}};const Np=t=>Qe(t,"DROP_COMPLETE")||Qe(t,"DROP_ANIMATE")||Qe(t,"FLUSH");var kp=t=>s=>a=>r=>{if(Np(r)){t.stop(),a(r);return}if(Qe(r,"INITIAL_PUBLISH")){a(r);const i=s.getState();i.phase!=="DRAGGING"&&oe(),t.start(i);return}a(r),t.scroll(s.getState())};const Sp=t=>s=>a=>{if(s(a),!Qe(a,"PUBLISH_WHILE_DRAGGING"))return;const r=t.getState();r.phase==="DROP_PENDING"&&(r.isWaiting||t.dispatch(ro({reason:r.reason})))},Cp=kl;var Ap=({dimensionMarshal:t,focusMarshal:s,styleMarshal:a,getResponders:r,announce:i,autoScroller:n})=>Nl(Rm,Cp(vd(tp(a),jp(t),ep(t),lp,yp,vp,Sp,kp(n),up,wp(s),bp(r,i))));const tr=()=>({additions:{},removals:{},modified:{}});function Pp({registry:t,callbacks:s}){let a=tr(),r=null;const i=()=>{r||(s.collectionStarting(),r=requestAnimationFrame(()=>{r=null;const{additions:d,removals:g,modified:x}=a,b=Object.keys(d).map(w=>t.draggable.getById(w).getDimension(dt)).sort((w,B)=>w.descriptor.index-B.descriptor.index),u=Object.keys(x).map(w=>{const C=t.droppable.getById(w).callbacks.getScrollWhileDragging();return{droppableId:w,scroll:C}}),f={additions:b,removals:Object.keys(g),modified:u};a=tr(),s.publish(f)}))};return{add:d=>{const g=d.descriptor.id;a.additions[g]=d,a.modified[d.descriptor.droppableId]=!0,a.removals[g]&&delete a.removals[g],i()},remove:d=>{const g=d.descriptor;a.removals[g.id]=!0,a.modified[g.droppableId]=!0,a.additions[g.id]&&delete a.additions[g.id],i()},stop:()=>{r&&(cancelAnimationFrame(r),r=null,a=tr())}}}var co=({scrollHeight:t,scrollWidth:s,height:a,width:r})=>{const i=jt({x:s,y:t},{x:r,y:a});return{x:Math.max(0,i.x),y:Math.max(0,i.y)}},uo=()=>{const t=document.documentElement;return t||oe(),t},mo=()=>{const t=uo();return co({scrollHeight:t.scrollHeight,scrollWidth:t.scrollWidth,width:t.clientWidth,height:t.clientHeight})},Tp=()=>{const t=oo(),s=mo(),a=t.y,r=t.x,i=uo(),n=i.clientWidth,l=i.clientHeight,o=r+n,d=a+l;return{frame:Bt({top:a,left:r,right:o,bottom:d}),scroll:{initial:t,current:t,max:s,diff:{value:dt,displacement:dt}}}},Fp=({critical:t,scrollOptions:s,registry:a})=>{const r=Tp(),i=r.scroll.current,n=t.droppable,l=a.droppable.getAllByType(n.type).map(x=>x.callbacks.getDimensionAndWatchScroll(i,s)),o=a.draggable.getAllByType(t.draggable.type).map(x=>x.getDimension(i));return{dimensions:{draggables:Ml(o),droppables:Ul(l)},critical:t,viewport:r}};function Fn(t,s,a){return!(a.descriptor.id===s.id||a.descriptor.type!==s.type||t.droppable.getById(a.descriptor.droppableId).descriptor.mode!=="virtual")}var Ep=(t,s)=>{let a=null;const r=Pp({callbacks:{publish:s.publishWhileDragging,collectionStarting:s.collectionStarting},registry:t}),i=(u,f)=>{t.droppable.exists(u)||oe(),a&&s.updateDroppableIsEnabled({id:u,isEnabled:f})},n=(u,f)=>{a&&(t.droppable.exists(u)||oe(),s.updateDroppableIsCombineEnabled({id:u,isCombineEnabled:f}))},l=(u,f)=>{a&&(t.droppable.exists(u)||oe(),s.updateDroppableScroll({id:u,newScroll:f}))},o=(u,f)=>{a&&t.droppable.getById(u).callbacks.scroll(f)},d=()=>{if(!a)return;r.stop();const u=a.critical.droppable;t.droppable.getAllByType(u.type).forEach(f=>f.callbacks.dragStopped()),a.unsubscribe(),a=null},g=u=>{a||oe();const f=a.critical.draggable;u.type==="ADDITION"&&Fn(t,f,u.value)&&r.add(u.value),u.type==="REMOVAL"&&Fn(t,f,u.value)&&r.remove(u.value)};return{updateDroppableIsEnabled:i,updateDroppableIsCombineEnabled:n,scrollDroppable:o,updateDroppableScroll:l,startPublishing:u=>{a&&oe();const f=t.draggable.getById(u.draggableId),w=t.droppable.getById(f.descriptor.droppableId),B={draggable:f.descriptor,droppable:w.descriptor},C=t.subscribe(g);return a={critical:B,unsubscribe:C},Fp({critical:B,registry:t,scrollOptions:u.scrollOptions})},stopPublishing:d}},po=(t,s)=>t.phase==="IDLE"?!0:t.phase!=="DROP_ANIMATING"||t.completed.result.draggableId===s?!1:t.completed.result.reason==="DROP",Dp=t=>{window.scrollBy(t.x,t.y)};const Ip=ct(t=>Ea(t).filter(s=>!(!s.isEnabled||!s.frame))),_p=(t,s)=>Ip(s).find(r=>(r.frame||oe(),Ql(r.frame.pageMarginBox)(t)))||null;var Bp=({center:t,destination:s,droppables:a})=>{if(s){const i=a[s];return i.frame?i:null}return _p(t,a)};const Js={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:t=>t**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var Op=(t,s,a=()=>Js)=>{const r=a(),i=t[s.size]*r.startFromPercentage,n=t[s.size]*r.maxScrollAtPercentage;return{startScrollingFrom:i,maxScrollValueAt:n}},go=({startOfRange:t,endOfRange:s,current:a})=>{const r=s-t;return r===0?0:(a-t)/r},si=1,Rp=(t,s,a=()=>Js)=>{const r=a();if(t>s.startScrollingFrom)return 0;if(t<=s.maxScrollValueAt)return r.maxPixelScroll;if(t===s.startScrollingFrom)return si;const n=1-go({startOfRange:s.maxScrollValueAt,endOfRange:s.startScrollingFrom,current:t}),l=r.maxPixelScroll*r.ease(n);return Math.ceil(l)},Up=(t,s,a)=>{const r=a(),i=r.durationDampening.accelerateAt,n=r.durationDampening.stopDampeningAt,l=s,o=n,g=Date.now()-l;if(g>=n)return t;if(g<i)return si;const x=go({startOfRange:i,endOfRange:o,current:g}),b=t*r.ease(x);return Math.ceil(b)},En=({distanceToEdge:t,thresholds:s,dragStartTime:a,shouldUseTimeDampening:r,getAutoScrollerOptions:i})=>{const n=Rp(t,s,i);return n===0?0:r?Math.max(Up(n,a,i),si):n},Dn=({container:t,distanceToEdges:s,dragStartTime:a,axis:r,shouldUseTimeDampening:i,getAutoScrollerOptions:n})=>{const l=Op(t,r,n);return s[r.end]<s[r.start]?En({distanceToEdge:s[r.end],thresholds:l,dragStartTime:a,shouldUseTimeDampening:i,getAutoScrollerOptions:n}):-1*En({distanceToEdge:s[r.start],thresholds:l,dragStartTime:a,shouldUseTimeDampening:i,getAutoScrollerOptions:n})},Mp=({container:t,subject:s,proposedScroll:a})=>{const r=s.height>t.height,i=s.width>t.width;return!i&&!r?a:i&&r?null:{x:i?0:a.x,y:r?0:a.y}};const Lp=Rl(t=>t===0?0:t);var ho=({dragStartTime:t,container:s,subject:a,center:r,shouldUseTimeDampening:i,getAutoScrollerOptions:n})=>{const l={top:r.y-s.top,right:s.right-r.x,bottom:s.bottom-r.y,left:r.x-s.left},o=Dn({container:s,distanceToEdges:l,dragStartTime:t,axis:Kr,shouldUseTimeDampening:i,getAutoScrollerOptions:n}),d=Dn({container:s,distanceToEdges:l,dragStartTime:t,axis:Vl,shouldUseTimeDampening:i,getAutoScrollerOptions:n}),g=Lp({x:d,y:o});if(Jt(g,dt))return null;const x=Mp({container:s,subject:a,proposedScroll:g});return x?Jt(x,dt)?null:x:null};const $p=Rl(t=>t===0?0:t>0?1:-1),ai=(()=>{const t=(s,a)=>s<0?s:s>a?s-a:0;return({current:s,max:a,change:r})=>{const i=ut(s,r),n={x:t(i.x,a.x),y:t(i.y,a.y)};return Jt(n,dt)?null:n}})(),fo=({max:t,current:s,change:a})=>{const r={x:Math.max(s.x,t.x),y:Math.max(s.y,t.y)},i=$p(a),n=ai({max:r,current:s,change:i});return!n||i.x!==0&&n.x===0||i.y!==0&&n.y===0},ri=(t,s)=>fo({current:t.scroll.current,max:t.scroll.max,change:s}),Vp=(t,s)=>{if(!ri(t,s))return null;const a=t.scroll.max,r=t.scroll.current;return ai({current:r,max:a,change:s})},ii=(t,s)=>{const a=t.frame;return a?fo({current:a.scroll.current,max:a.scroll.max,change:s}):!1},qp=(t,s)=>{const a=t.frame;return!a||!ii(t,s)?null:ai({current:a.scroll.current,max:a.scroll.max,change:s})};var Gp=({viewport:t,subject:s,center:a,dragStartTime:r,shouldUseTimeDampening:i,getAutoScrollerOptions:n})=>{const l=ho({dragStartTime:r,container:t.frame,subject:s,center:a,shouldUseTimeDampening:i,getAutoScrollerOptions:n});return l&&ri(t,l)?l:null},Wp=({droppable:t,subject:s,center:a,dragStartTime:r,shouldUseTimeDampening:i,getAutoScrollerOptions:n})=>{const l=t.frame;if(!l)return null;const o=ho({dragStartTime:r,container:l.pageMarginBox,subject:s,center:a,shouldUseTimeDampening:i,getAutoScrollerOptions:n});return o&&ii(t,o)?o:null},In=({state:t,dragStartTime:s,shouldUseTimeDampening:a,scrollWindow:r,scrollDroppable:i,getAutoScrollerOptions:n})=>{const l=t.current.page.borderBoxCenter,d=t.dimensions.draggables[t.critical.draggable.id].page.marginBox;if(t.isWindowScrollAllowed){const b=t.viewport,u=Gp({dragStartTime:s,viewport:b,subject:d,center:l,shouldUseTimeDampening:a,getAutoScrollerOptions:n});if(u){r(u);return}}const g=Bp({center:l,destination:wt(t.impact),droppables:t.dimensions.droppables});if(!g)return;const x=Wp({dragStartTime:s,droppable:g,subject:d,center:l,shouldUseTimeDampening:a,getAutoScrollerOptions:n});x&&i(g.descriptor.id,x)},zp=({scrollWindow:t,scrollDroppable:s,getAutoScrollerOptions:a=()=>Js})=>{const r=zs(t),i=zs(s);let n=null;const l=g=>{n||oe();const{shouldUseTimeDampening:x,dragStartTime:b}=n;In({state:g,scrollWindow:r,scrollDroppable:i,dragStartTime:b,shouldUseTimeDampening:x,getAutoScrollerOptions:a})};return{start:g=>{n&&oe();const x=Date.now();let b=!1;const u=()=>{b=!0};In({state:g,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:u,scrollDroppable:u,getAutoScrollerOptions:a}),n={dragStartTime:x,shouldUseTimeDampening:b},b&&l(g)},stop:()=>{n&&(r.cancel(),i.cancel(),n=null)},scroll:l}},Hp=({move:t,scrollDroppable:s,scrollWindow:a})=>{const r=(o,d)=>{const g=ut(o.current.client.selection,d);t({client:g})},i=(o,d)=>{if(!ii(o,d))return d;const g=qp(o,d);if(!g)return s(o.descriptor.id,d),null;const x=jt(d,g);return s(o.descriptor.id,x),jt(d,x)},n=(o,d,g)=>{if(!o||!ri(d,g))return g;const x=Vp(d,g);if(!x)return a(g),null;const b=jt(g,x);return a(b),jt(g,b)};return o=>{const d=o.scrollJumpRequest;if(!d)return;const g=wt(o.impact);g||oe();const x=i(o.dimensions.droppables[g],d);if(!x)return;const b=o.viewport,u=n(o.isWindowScrollAllowed,b,x);u&&r(o,u)}},Kp=({scrollDroppable:t,scrollWindow:s,move:a,getAutoScrollerOptions:r})=>{const i=zp({scrollWindow:s,scrollDroppable:t,getAutoScrollerOptions:r}),n=Hp({move:a,scrollWindow:s,scrollDroppable:t});return{scroll:d=>{if(!(r().disabled||d.phase!=="DRAGGING")){if(d.movementMode==="FLUID"){i.scroll(d);return}d.scrollJumpRequest&&n(d)}},start:i.start,stop:i.stop}};const Ss="data-rfd",Cs=(()=>{const t=`${Ss}-drag-handle`;return{base:t,draggableId:`${t}-draggable-id`,contextId:`${t}-context-id`}})(),Pr=(()=>{const t=`${Ss}-draggable`;return{base:t,contextId:`${t}-context-id`,id:`${t}-id`}})(),Qp=(()=>{const t=`${Ss}-droppable`;return{base:t,contextId:`${t}-context-id`,id:`${t}-id`}})(),_n={contextId:`${Ss}-scroll-container-context-id`},Xp=t=>s=>`[${s}="${t}"]`,Ds=(t,s)=>t.map(a=>{const r=a.styles[s];return r?`${a.selector} { ${r} }`:""}).join(" "),Jp="pointer-events: none;";var Zp=t=>{const s=Xp(t),a=(()=>{const o=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:s(Cs.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:o,dragging:Jp,dropAnimating:o}}})(),r=(()=>{const o=`
      transition: ${Ls.outOfTheWay};
    `;return{selector:s(Pr.contextId),styles:{dragging:o,dropAnimating:o,userCancel:o}}})(),i={selector:s(Qp.contextId),styles:{always:"overflow-anchor: none;"}},l=[r,a,i,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:Ds(l,"always"),resting:Ds(l,"resting"),dragging:Ds(l,"dragging"),dropAnimating:Ds(l,"dropAnimating"),userCancel:Ds(l,"userCancel")}};const Nt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?E.useLayoutEffect:E.useEffect,sr=()=>{const t=document.querySelector("head");return t||oe(),t},Bn=t=>{const s=document.createElement("style");return t&&s.setAttribute("nonce",t),s.type="text/css",s};function Yp(t,s){const a=Ue(()=>Zp(t),[t]),r=E.useRef(null),i=E.useRef(null),n=ve(ct(b=>{const u=i.current;u||oe(),u.textContent=b}),[]),l=ve(b=>{const u=r.current;u||oe(),u.textContent=b},[]);Nt(()=>{!r.current&&!i.current||oe();const b=Bn(s),u=Bn(s);return r.current=b,i.current=u,b.setAttribute(`${Ss}-always`,t),u.setAttribute(`${Ss}-dynamic`,t),sr().appendChild(b),sr().appendChild(u),l(a.always),n(a.resting),()=>{const f=w=>{const B=w.current;B||oe(),sr().removeChild(B),w.current=null};f(r),f(i)}},[s,l,n,a.always,a.resting,t]);const o=ve(()=>n(a.dragging),[n,a.dragging]),d=ve(b=>{if(b==="DROP"){n(a.dropAnimating);return}n(a.userCancel)},[n,a.dropAnimating,a.userCancel]),g=ve(()=>{i.current&&n(a.resting)},[n,a.resting]);return Ue(()=>({dragging:o,dropping:d,resting:g}),[o,d,g])}function xo(t,s){return Array.from(t.querySelectorAll(s))}var bo=t=>t&&t.ownerDocument&&t.ownerDocument.defaultView?t.ownerDocument.defaultView:window;function Ba(t){return t instanceof bo(t).HTMLElement}function eg(t,s){const a=`[${Cs.contextId}="${t}"]`,r=xo(document,a);if(!r.length)return null;const i=r.find(n=>n.getAttribute(Cs.draggableId)===s);return!i||!Ba(i)?null:i}function tg(t){const s=E.useRef({}),a=E.useRef(null),r=E.useRef(null),i=E.useRef(!1),n=ve(function(u,f){const w={id:u,focus:f};return s.current[u]=w,function(){const C=s.current;C[u]!==w&&delete C[u]}},[]),l=ve(function(u){const f=eg(t,u);f&&f!==document.activeElement&&f.focus()},[t]),o=ve(function(u,f){a.current===u&&(a.current=f)},[]),d=ve(function(){r.current||i.current&&(r.current=requestAnimationFrame(()=>{r.current=null;const u=a.current;u&&l(u)}))},[l]),g=ve(function(u){a.current=null;const f=document.activeElement;f&&f.getAttribute(Cs.draggableId)===u&&(a.current=u)},[]);return Nt(()=>(i.current=!0,function(){i.current=!1;const u=r.current;u&&cancelAnimationFrame(u)}),[]),Ue(()=>({register:n,tryRecordFocus:g,tryRestoreFocusRecorded:d,tryShiftRecord:o}),[n,g,d,o])}function sg(){const t={draggables:{},droppables:{}},s=[];function a(b){return s.push(b),function(){const f=s.indexOf(b);f!==-1&&s.splice(f,1)}}function r(b){s.length&&s.forEach(u=>u(b))}function i(b){return t.draggables[b]||null}function n(b){const u=i(b);return u||oe(),u}const l={register:b=>{t.draggables[b.descriptor.id]=b,r({type:"ADDITION",value:b})},update:(b,u)=>{const f=t.draggables[u.descriptor.id];f&&f.uniqueId===b.uniqueId&&(delete t.draggables[u.descriptor.id],t.draggables[b.descriptor.id]=b)},unregister:b=>{const u=b.descriptor.id,f=i(u);f&&b.uniqueId===f.uniqueId&&(delete t.draggables[u],t.droppables[b.descriptor.droppableId]&&r({type:"REMOVAL",value:b}))},getById:n,findById:i,exists:b=>!!i(b),getAllByType:b=>Object.values(t.draggables).filter(u=>u.descriptor.type===b)};function o(b){return t.droppables[b]||null}function d(b){const u=o(b);return u||oe(),u}const g={register:b=>{t.droppables[b.descriptor.id]=b},unregister:b=>{const u=o(b.descriptor.id);u&&b.uniqueId===u.uniqueId&&delete t.droppables[b.descriptor.id]},getById:d,findById:o,exists:b=>!!o(b),getAllByType:b=>Object.values(t.droppables).filter(u=>u.descriptor.type===b)};function x(){t.draggables={},t.droppables={},s.length=0}return{draggable:l,droppable:g,subscribe:a,clean:x}}function ag(){const t=Ue(sg,[]);return E.useEffect(()=>function(){t.clean()},[t]),t}var ni=Oe.createContext(null),Pa=()=>{const t=document.body;return t||oe(),t};const rg={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},ig=t=>`rfd-announcement-${t}`;function ng(t){const s=Ue(()=>ig(t),[t]),a=E.useRef(null);return E.useEffect(function(){const n=document.createElement("div");return a.current=n,n.id=s,n.setAttribute("aria-live","assertive"),n.setAttribute("aria-atomic","true"),ka(n.style,rg),Pa().appendChild(n),function(){setTimeout(function(){const d=Pa();d.contains(n)&&d.removeChild(n),n===a.current&&(a.current=null)})}},[s]),ve(i=>{const n=a.current;if(n){n.textContent=i;return}},[])}const lg={separator:"::"};function li(t,s=lg){const a=Oe.useId();return Ue(()=>`${t}${s.separator}${a}`,[s.separator,t,a])}function og({contextId:t,uniqueId:s}){return`rfd-hidden-text-${t}-${s}`}function cg({contextId:t,text:s}){const a=li("hidden-text",{separator:"-"}),r=Ue(()=>og({contextId:t,uniqueId:a}),[a,t]);return E.useEffect(function(){const n=document.createElement("div");return n.id=r,n.textContent=s,n.style.display="none",Pa().appendChild(n),function(){const o=Pa();o.contains(n)&&o.removeChild(n)}},[r,s]),r}var Oa=Oe.createContext(null);function yo(t){const s=E.useRef(t);return E.useEffect(()=>{s.current=t}),s}function dg(){let t=null;function s(){return!!t}function a(l){return l===t}function r(l){t&&oe();const o={abandon:l};return t=o,o}function i(){t||oe(),t=null}function n(){t&&(t.abandon(),i())}return{isClaimed:s,isActive:a,claim:r,release:i,tryAbandon:n}}function Zs(t){return t.phase==="IDLE"||t.phase==="DROP_ANIMATING"?!1:t.isDragging}const ug=9,mg=13,oi=27,vo=32,pg=33,gg=34,hg=35,fg=36,xg=37,bg=38,yg=39,vg=40,jg={[mg]:!0,[ug]:!0};var jo=t=>{jg[t.keyCode]&&t.preventDefault()};const Ra=(()=>{const t="visibilitychange";return typeof document>"u"?t:[t,`ms${t}`,`webkit${t}`,`moz${t}`,`o${t}`].find(r=>`on${r}`in document)||t})(),wo=0,On=5;function wg(t,s){return Math.abs(s.x-t.x)>=On||Math.abs(s.y-t.y)>=On}const Rn={type:"IDLE"};function Ng({cancel:t,completed:s,getPhase:a,setPhase:r}){return[{eventName:"mousemove",fn:i=>{const{button:n,clientX:l,clientY:o}=i;if(n!==wo)return;const d={x:l,y:o},g=a();if(g.type==="DRAGGING"){i.preventDefault(),g.actions.move(d);return}g.type!=="PENDING"&&oe();const x=g.point;if(!wg(x,d))return;i.preventDefault();const b=g.actions.fluidLift(d);r({type:"DRAGGING",actions:b})}},{eventName:"mouseup",fn:i=>{const n=a();if(n.type!=="DRAGGING"){t();return}i.preventDefault(),n.actions.drop({shouldBlockNextClick:!0}),s()}},{eventName:"mousedown",fn:i=>{a().type==="DRAGGING"&&i.preventDefault(),t()}},{eventName:"keydown",fn:i=>{if(a().type==="PENDING"){t();return}if(i.keyCode===oi){i.preventDefault(),t();return}jo(i)}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{a().type==="PENDING"&&t()}},{eventName:"webkitmouseforcedown",fn:i=>{const n=a();if(n.type==="IDLE"&&oe(),n.actions.shouldRespectForcePress()){t();return}i.preventDefault()}},{eventName:Ra,fn:t}]}function kg(t){const s=E.useRef(Rn),a=E.useRef(Xt),r=Ue(()=>({eventName:"mousedown",fn:function(b){if(b.defaultPrevented||b.button!==wo||b.ctrlKey||b.metaKey||b.shiftKey||b.altKey)return;const u=t.findClosestDraggableId(b);if(!u)return;const f=t.tryGetLock(u,l,{sourceEvent:b});if(!f)return;b.preventDefault();const w={x:b.clientX,y:b.clientY};a.current(),g(f,w)}}),[t]),i=Ue(()=>({eventName:"webkitmouseforcewillbegin",fn:x=>{if(x.defaultPrevented)return;const b=t.findClosestDraggableId(x);if(!b)return;const u=t.findOptionsForDraggable(b);u&&(u.shouldRespectForcePress||t.canGetLock(b)&&x.preventDefault())}}),[t]),n=ve(function(){const b={passive:!1,capture:!0};a.current=At(window,[i,r],b)},[i,r]),l=ve(()=>{s.current.type!=="IDLE"&&(s.current=Rn,a.current(),n())},[n]),o=ve(()=>{const x=s.current;l(),x.type==="DRAGGING"&&x.actions.cancel({shouldBlockNextClick:!0}),x.type==="PENDING"&&x.actions.abort()},[l]),d=ve(function(){const b={capture:!0,passive:!1},u=Ng({cancel:o,completed:l,getPhase:()=>s.current,setPhase:f=>{s.current=f}});a.current=At(window,u,b)},[o,l]),g=ve(function(b,u){s.current.type!=="IDLE"&&oe(),s.current={type:"PENDING",point:u,actions:b},d()},[d]);Nt(function(){return n(),function(){a.current()}},[n])}function Sg(){}const Cg={[gg]:!0,[pg]:!0,[fg]:!0,[hg]:!0};function Ag(t,s){function a(){s(),t.cancel()}function r(){s(),t.drop()}return[{eventName:"keydown",fn:i=>{if(i.keyCode===oi){i.preventDefault(),a();return}if(i.keyCode===vo){i.preventDefault(),r();return}if(i.keyCode===vg){i.preventDefault(),t.moveDown();return}if(i.keyCode===bg){i.preventDefault(),t.moveUp();return}if(i.keyCode===yg){i.preventDefault(),t.moveRight();return}if(i.keyCode===xg){i.preventDefault(),t.moveLeft();return}if(Cg[i.keyCode]){i.preventDefault();return}jo(i)}},{eventName:"mousedown",fn:a},{eventName:"mouseup",fn:a},{eventName:"click",fn:a},{eventName:"touchstart",fn:a},{eventName:"resize",fn:a},{eventName:"wheel",fn:a,options:{passive:!0}},{eventName:Ra,fn:a}]}function Pg(t){const s=E.useRef(Sg),a=Ue(()=>({eventName:"keydown",fn:function(n){if(n.defaultPrevented||n.keyCode!==vo)return;const l=t.findClosestDraggableId(n);if(!l)return;const o=t.tryGetLock(l,x,{sourceEvent:n});if(!o)return;n.preventDefault();let d=!0;const g=o.snapLift();s.current();function x(){d||oe(),d=!1,s.current(),r()}s.current=At(window,Ag(g,x),{capture:!0,passive:!1})}}),[t]),r=ve(function(){const n={passive:!1,capture:!0};s.current=At(window,[a],n)},[a]);Nt(function(){return r(),function(){s.current()}},[r])}const ar={type:"IDLE"},Tg=120,Fg=.15;function Eg({cancel:t,getPhase:s}){return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:a=>{a.preventDefault()}},{eventName:"keydown",fn:a=>{if(s().type!=="DRAGGING"){t();return}a.keyCode===oi&&a.preventDefault(),t()}},{eventName:Ra,fn:t}]}function Dg({cancel:t,completed:s,getPhase:a}){return[{eventName:"touchmove",options:{capture:!1},fn:r=>{const i=a();if(i.type!=="DRAGGING"){t();return}i.hasMoved=!0;const{clientX:n,clientY:l}=r.touches[0],o={x:n,y:l};r.preventDefault(),i.actions.move(o)}},{eventName:"touchend",fn:r=>{const i=a();if(i.type!=="DRAGGING"){t();return}r.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),s()}},{eventName:"touchcancel",fn:r=>{if(a().type!=="DRAGGING"){t();return}r.preventDefault(),t()}},{eventName:"touchforcechange",fn:r=>{const i=a();i.type==="IDLE"&&oe();const n=r.touches[0];if(!n||!(n.force>=Fg))return;const o=i.actions.shouldRespectForcePress();if(i.type==="PENDING"){o&&t();return}if(o){if(i.hasMoved){r.preventDefault();return}t();return}r.preventDefault()}},{eventName:Ra,fn:t}]}function Ig(t){const s=E.useRef(ar),a=E.useRef(Xt),r=ve(function(){return s.current},[]),i=ve(function(f){s.current=f},[]),n=Ue(()=>({eventName:"touchstart",fn:function(f){if(f.defaultPrevented)return;const w=t.findClosestDraggableId(f);if(!w)return;const B=t.tryGetLock(w,o,{sourceEvent:f});if(!B)return;const C=f.touches[0],{clientX:q,clientY:R}=C,Z={x:q,y:R};a.current(),b(B,Z)}}),[t]),l=ve(function(){const f={capture:!0,passive:!1};a.current=At(window,[n],f)},[n]),o=ve(()=>{const u=s.current;u.type!=="IDLE"&&(u.type==="PENDING"&&clearTimeout(u.longPressTimerId),i(ar),a.current(),l())},[l,i]),d=ve(()=>{const u=s.current;o(),u.type==="DRAGGING"&&u.actions.cancel({shouldBlockNextClick:!0}),u.type==="PENDING"&&u.actions.abort()},[o]),g=ve(function(){const f={capture:!0,passive:!1},w={cancel:d,completed:o,getPhase:r},B=At(window,Dg(w),f),C=At(window,Eg(w),f);a.current=function(){B(),C()}},[d,r,o]),x=ve(function(){const f=r();f.type!=="PENDING"&&oe();const w=f.actions.fluidLift(f.point);i({type:"DRAGGING",actions:w,hasMoved:!1})},[r,i]),b=ve(function(f,w){r().type!=="IDLE"&&oe();const B=setTimeout(x,Tg);i({type:"PENDING",point:w,actions:f,longPressTimerId:B}),g()},[g,r,i,x]);Nt(function(){return l(),function(){a.current();const w=r();w.type==="PENDING"&&(clearTimeout(w.longPressTimerId),i(ar))}},[r,l,i]),Nt(function(){return At(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const _g=["input","button","textarea","select","option","optgroup","video","audio"];function No(t,s){if(s==null)return!1;if(_g.includes(s.tagName.toLowerCase()))return!0;const r=s.getAttribute("contenteditable");return r==="true"||r===""?!0:s===t?!1:No(t,s.parentElement)}function Bg(t,s){const a=s.target;return Ba(a)?No(t,a):!1}var Og=t=>Bt(t.getBoundingClientRect()).center;function Rg(t){return t instanceof bo(t).Element}const Ug=(()=>{const t="matches";return typeof document>"u"?t:[t,"msMatchesSelector","webkitMatchesSelector"].find(r=>r in Element.prototype)||t})();function ko(t,s){return t==null?null:t[Ug](s)?t:ko(t.parentElement,s)}function Mg(t,s){return t.closest?t.closest(s):ko(t,s)}function Lg(t){return`[${Cs.contextId}="${t}"]`}function $g(t,s){const a=s.target;if(!Rg(a))return null;const r=Lg(t),i=Mg(a,r);return!i||!Ba(i)?null:i}function Vg(t,s){const a=$g(t,s);return a?a.getAttribute(Cs.draggableId):null}function qg(t,s){const a=`[${Pr.contextId}="${t}"]`,i=xo(document,a).find(n=>n.getAttribute(Pr.id)===s);return!i||!Ba(i)?null:i}function Gg(t){t.preventDefault()}function oa({expected:t,phase:s,isLockActive:a,shouldWarn:r}){return!(!a()||t!==s)}function So({lockAPI:t,store:s,registry:a,draggableId:r}){if(t.isClaimed())return!1;const i=a.draggable.findById(r);return!(!i||!i.options.isEnabled||!po(s.getState(),r))}function Wg({lockAPI:t,contextId:s,store:a,registry:r,draggableId:i,forceSensorStop:n,sourceEvent:l}){if(!So({lockAPI:t,store:a,registry:r,draggableId:i}))return null;const d=r.draggable.getById(i),g=qg(s,d.descriptor.id);if(!g||l&&!d.options.canDragInteractiveElements&&Bg(g,l))return null;const x=t.claim(n||Xt);let b="PRE_DRAG";function u(){return d.options.shouldRespectForcePress}function f(){return t.isActive(x)}function w(I,F){oa({expected:I,phase:b,isLockActive:f,shouldWarn:!0})&&a.dispatch(F())}const B=w.bind(null,"DRAGGING");function C(I){function F(){t.release(),b="COMPLETED"}b!=="PRE_DRAG"&&(F(),oe()),a.dispatch(Mm(I.liftActionArgs)),b="DRAGGING";function _(j,A={shouldBlockNextClick:!1}){if(I.cleanup(),A.shouldBlockNextClick){const G=At(window,[{eventName:"click",fn:Gg,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(G)}F(),a.dispatch(ro({reason:j}))}return{isActive:()=>oa({expected:"DRAGGING",phase:b,isLockActive:f,shouldWarn:!1}),shouldRespectForcePress:u,drop:j=>_("DROP",j),cancel:j=>_("CANCEL",j),...I.actions}}function q(I){const F=zs(j=>{B(()=>ao({client:j}))});return{...C({liftActionArgs:{id:i,clientSelection:I,movementMode:"FLUID"},cleanup:()=>F.cancel(),actions:{move:F}}),move:F}}function R(){const I={moveUp:()=>B(Km),moveRight:()=>B(Xm),moveDown:()=>B(Qm),moveLeft:()=>B(Jm)};return C({liftActionArgs:{id:i,clientSelection:Og(g),movementMode:"SNAP"},cleanup:Xt,actions:I})}function Z(){oa({expected:"PRE_DRAG",phase:b,isLockActive:f,shouldWarn:!0})&&t.release()}return{isActive:()=>oa({expected:"PRE_DRAG",phase:b,isLockActive:f,shouldWarn:!1}),shouldRespectForcePress:u,fluidLift:q,snapLift:R,abort:Z}}const zg=[kg,Pg,Ig];function Hg({contextId:t,store:s,registry:a,customSensors:r,enableDefaultSensors:i}){const n=[...i?zg:[],...r||[]],l=E.useState(()=>dg())[0],o=ve(function(C,q){Zs(C)&&!Zs(q)&&l.tryAbandon()},[l]);Nt(function(){let C=s.getState();return s.subscribe(()=>{const R=s.getState();o(C,R),C=R})},[l,s,o]),Nt(()=>l.tryAbandon,[l.tryAbandon]);const d=ve(B=>So({lockAPI:l,registry:a,store:s,draggableId:B}),[l,a,s]),g=ve((B,C,q)=>Wg({lockAPI:l,registry:a,contextId:t,store:s,draggableId:B,forceSensorStop:C||null,sourceEvent:q&&q.sourceEvent?q.sourceEvent:null}),[t,l,a,s]),x=ve(B=>Vg(t,B),[t]),b=ve(B=>{const C=a.draggable.findById(B);return C?C.options:null},[a.draggable]),u=ve(function(){l.isClaimed()&&(l.tryAbandon(),s.getState().phase!=="IDLE"&&s.dispatch(Yr()))},[l,s]),f=ve(()=>l.isClaimed(),[l]),w=Ue(()=>({canGetLock:d,tryGetLock:g,findClosestDraggableId:x,findOptionsForDraggable:b,tryReleaseLock:u,isLockClaimed:f}),[d,g,x,b,u,f]);for(let B=0;B<n.length;B++)n[B](w)}const Kg=t=>({onBeforeCapture:s=>{const a=()=>{t.onBeforeCapture&&t.onBeforeCapture(s)};Yn.flushSync(a)},onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragEnd:t.onDragEnd,onDragUpdate:t.onDragUpdate}),Qg=t=>({...Js,...t.autoScrollerOptions,durationDampening:{...Js.durationDampening,...t.autoScrollerOptions}});function Is(t){return t.current||oe(),t.current}function Xg(t){const{contextId:s,setCallbacks:a,sensors:r,nonce:i,dragHandleUsageInstructions:n}=t,l=E.useRef(null),o=yo(t),d=ve(()=>Kg(o.current),[o]),g=ve(()=>Qg(o.current),[o]),x=ng(s),b=cg({contextId:s,text:n}),u=Yp(s,i),f=ve(G=>{Is(l).dispatch(G)},[]),w=Ue(()=>un({publishWhileDragging:$m,updateDroppableScroll:qm,updateDroppableIsEnabled:Gm,updateDroppableIsCombineEnabled:Wm,collectionStarting:Vm},f),[f]),B=ag(),C=Ue(()=>Ep(B,w),[B,w]),q=Ue(()=>Kp({scrollWindow:Dp,scrollDroppable:C.scrollDroppable,getAutoScrollerOptions:g,...un({move:ao},f)}),[C.scrollDroppable,f,g]),R=tg(s),Z=Ue(()=>Ap({announce:x,autoScroller:q,dimensionMarshal:C,focusMarshal:R,getResponders:d,styleMarshal:u}),[x,q,C,R,d,u]);l.current=Z;const p=ve(()=>{const G=Is(l);G.getState().phase!=="IDLE"&&G.dispatch(Yr())},[]),I=ve(()=>{const G=Is(l).getState();return G.phase==="DROP_ANIMATING"?!0:G.phase==="IDLE"?!1:G.isDragging},[]),F=Ue(()=>({isDragging:I,tryAbort:p}),[I,p]);a(F);const _=ve(G=>po(Is(l).getState(),G),[]),j=ve(()=>os(Is(l).getState()),[]),A=Ue(()=>({marshal:C,focus:R,contextId:s,canLift:_,isMovementAllowed:j,dragHandleUsageInstructionsId:b,registry:B}),[s,C,b,R,_,j,B]);return Hg({contextId:s,store:Z,registry:B,customSensors:r||null,enableDefaultSensors:t.enableDefaultSensors!==!1}),E.useEffect(()=>p,[p]),Oe.createElement(Oa.Provider,{value:A},Oe.createElement(ju,{context:ni,store:Z},t.children))}function Jg(){return Oe.useId()}function Co(t){const s=Jg(),a=t.dragHandleUsageInstructions||ma.dragHandleUsageInstructions;return Oe.createElement(Pu,null,r=>Oe.createElement(Xg,{nonce:t.nonce,contextId:s,setCallbacks:r,dragHandleUsageInstructions:a,enableDefaultSensors:t.enableDefaultSensors,sensors:t.sensors,onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragUpdate:t.onDragUpdate,onDragEnd:t.onDragEnd,autoScrollerOptions:t.autoScrollerOptions},t.children))}const Un={dragging:5e3,dropAnimating:4500},Zg=(t,s)=>s?Ls.drop(s.duration):t?Ls.snap:Ls.fluid,Yg=(t,s)=>{if(t)return s?Xs.opacity.drop:Xs.opacity.combining},eh=t=>t.forceShouldAnimate!=null?t.forceShouldAnimate:t.mode==="SNAP";function th(t){const a=t.dimension.client,{offset:r,combineWith:i,dropping:n}=t,l=!!i,o=eh(t),d=!!n,g=d?Cr.drop(r,l):Cr.moveTo(r);return{position:"fixed",top:a.marginBox.top,left:a.marginBox.left,boxSizing:"border-box",width:a.borderBox.width,height:a.borderBox.height,transition:Zg(o,n),transform:g,opacity:Yg(l,d),zIndex:d?Un.dropAnimating:Un.dragging,pointerEvents:"none"}}function sh(t){return{transform:Cr.moveTo(t.offset),transition:t.shouldAnimateDisplacement?void 0:"none"}}function ah(t){return t.type==="DRAGGING"?th(t):sh(t)}function rh(t,s,a=dt){const r=window.getComputedStyle(s),i=s.getBoundingClientRect(),n=El(i,r),l=Na(n,a),o={client:n,tagName:s.tagName.toLowerCase(),display:r.display},d={x:n.marginBox.width,y:n.marginBox.height};return{descriptor:t,placeholder:o,displaceBy:d,client:n,page:l}}function ih(t){const s=li("draggable"),{descriptor:a,registry:r,getDraggableRef:i,canDragInteractiveElements:n,shouldRespectForcePress:l,isEnabled:o}=t,d=Ue(()=>({canDragInteractiveElements:n,shouldRespectForcePress:l,isEnabled:o}),[n,o,l]),g=ve(f=>{const w=i();return w||oe(),rh(a,w,f)},[a,i]),x=Ue(()=>({uniqueId:s,descriptor:a,options:d,getDimension:g}),[a,g,d,s]),b=E.useRef(x),u=E.useRef(!0);Nt(()=>(r.draggable.register(b.current),()=>r.draggable.unregister(b.current)),[r.draggable]),Nt(()=>{if(u.current){u.current=!1;return}const f=b.current;b.current=x,r.draggable.update(x,f)},[x,r.draggable])}var ci=Oe.createContext(null);function Ta(t){const s=E.useContext(t);return s||oe(),s}function nh(t){t.preventDefault()}const lh=t=>{const s=E.useRef(null),a=ve((F=null)=>{s.current=F},[]),r=ve(()=>s.current,[]),{contextId:i,dragHandleUsageInstructionsId:n,registry:l}=Ta(Oa),{type:o,droppableId:d}=Ta(ci),g=Ue(()=>({id:t.draggableId,index:t.index,type:o,droppableId:d}),[t.draggableId,t.index,o,d]),{children:x,draggableId:b,isEnabled:u,shouldRespectForcePress:f,canDragInteractiveElements:w,isClone:B,mapped:C,dropAnimationFinished:q}=t;if(!B){const F=Ue(()=>({descriptor:g,registry:l,getDraggableRef:r,canDragInteractiveElements:w,shouldRespectForcePress:f,isEnabled:u}),[g,l,r,w,f,u]);ih(F)}const R=Ue(()=>u?{tabIndex:0,role:"button","aria-describedby":n,"data-rfd-drag-handle-draggable-id":b,"data-rfd-drag-handle-context-id":i,draggable:!1,onDragStart:nh}:null,[i,n,b,u]),Z=ve(F=>{C.type==="DRAGGING"&&C.dropping&&F.propertyName==="transform"&&Yn.flushSync(q)},[q,C]),p=Ue(()=>{const F=ah(C),_=C.type==="DRAGGING"&&C.dropping?Z:void 0;return{innerRef:a,draggableProps:{"data-rfd-draggable-context-id":i,"data-rfd-draggable-id":b,style:F,onTransitionEnd:_},dragHandleProps:R}},[i,R,b,C,Z,a]),I=Ue(()=>({draggableId:g.id,type:g.type,source:{index:g.index,droppableId:g.droppableId}}),[g.droppableId,g.id,g.index,g.type]);return Oe.createElement(Oe.Fragment,null,x(p,C.snapshot,I))};var Ao=(t,s)=>t===s,Po=t=>{const{combine:s,destination:a}=t;return a?a.droppableId:s?s.droppableId:null};const oh=t=>t.combine?t.combine.draggableId:null,ch=t=>t.at&&t.at.type==="COMBINE"?t.at.combine.draggableId:null;function dh(){const t=ct((i,n)=>({x:i,y:n})),s=ct((i,n,l=null,o=null,d=null)=>({isDragging:!0,isClone:n,isDropAnimating:!!d,dropAnimation:d,mode:i,draggingOver:l,combineWith:o,combineTargetFor:null})),a=ct((i,n,l,o,d=null,g=null,x=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:d,combineWith:g,mode:n,offset:i,dimension:l,forceShouldAnimate:x,snapshot:s(n,o,d,g,null)}}));return(i,n)=>{if(Zs(i)){if(i.critical.draggable.id!==n.draggableId)return null;const l=i.current.client.offset,o=i.dimensions.draggables[n.draggableId],d=wt(i.impact),g=ch(i.impact),x=i.forceShouldAnimate;return a(t(l.x,l.y),i.movementMode,o,n.isClone,d,g,x)}if(i.phase==="DROP_ANIMATING"){const l=i.completed;if(l.result.draggableId!==n.draggableId)return null;const o=n.isClone,d=i.dimensions.draggables[n.draggableId],g=l.result,x=g.mode,b=Po(g),u=oh(g),w={duration:i.dropDuration,curve:ti.drop,moveTo:i.newHomeClientOffset,opacity:u?Xs.opacity.drop:null,scale:u?Xs.scale.drop:null};return{mapped:{type:"DRAGGING",offset:i.newHomeClientOffset,dimension:d,dropping:w,draggingOver:b,combineWith:u,mode:x,forceShouldAnimate:null,snapshot:s(x,o,b,u,w)}}}return null}}function To(t=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:t,combineWith:null}}const uh={mapped:{type:"SECONDARY",offset:dt,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:To(null)}};function mh(){const t=ct((l,o)=>({x:l,y:o})),s=ct(To),a=ct((l,o=null,d)=>({mapped:{type:"SECONDARY",offset:l,combineTargetFor:o,shouldAnimateDisplacement:d,snapshot:s(o)}})),r=l=>l?a(dt,l,!0):null,i=(l,o,d,g)=>{const x=d.displaced.visible[l],b=!!(g.inVirtualList&&g.effected[l]),u=Da(d),f=u&&u.draggableId===l?o:null;if(!x){if(!b)return r(f);if(d.displaced.invisible[l])return null;const C=As(g.displacedBy.point),q=t(C.x,C.y);return a(q,f,!0)}if(b)return r(f);const w=d.displacedBy.point,B=t(w.x,w.y);return a(B,f,x.shouldAnimate)};return(l,o)=>{if(Zs(l))return l.critical.draggable.id===o.draggableId?null:i(o.draggableId,l.critical.draggable.id,l.impact,l.afterCritical);if(l.phase==="DROP_ANIMATING"){const d=l.completed;return d.result.draggableId===o.draggableId?null:i(o.draggableId,d.result.draggableId,d.impact,d.afterCritical)}return null}}const ph=()=>{const t=dh(),s=mh();return(r,i)=>t(r,i)||s(r,i)||uh},gh={dropAnimationFinished:io},hh=Fl(ph,gh,null,{context:ni,areStatePropsEqual:Ao})(lh);function Fo(t){return Ta(ci).isUsingCloneFor===t.draggableId&&!t.isClone?null:Oe.createElement(hh,t)}function Eo(t){const s=typeof t.isDragDisabled=="boolean"?!t.isDragDisabled:!0,a=!!t.disableInteractiveElementBlocking,r=!!t.shouldRespectForcePress;return Oe.createElement(Fo,ka({},t,{isClone:!1,isEnabled:s,canDragInteractiveElements:a,shouldRespectForcePress:r}))}const Do=t=>s=>t===s,fh=Do("scroll"),xh=Do("auto"),Mn=(t,s)=>s(t.overflowX)||s(t.overflowY),bh=t=>{const s=window.getComputedStyle(t),a={overflowX:s.overflowX,overflowY:s.overflowY};return Mn(a,fh)||Mn(a,xh)},yh=()=>!1,Io=t=>t==null?null:t===document.body?yh()?t:null:t===document.documentElement?null:bh(t)?t:Io(t.parentElement);var Tr=t=>({x:t.scrollLeft,y:t.scrollTop});const _o=t=>t?window.getComputedStyle(t).position==="fixed"?!0:_o(t.parentElement):!1;var vh=t=>{const s=Io(t),a=_o(t);return{closestScrollable:s,isFixedOnPage:a}},jh=({descriptor:t,isEnabled:s,isCombineEnabled:a,isFixedOnPage:r,direction:i,client:n,page:l,closest:o})=>{const d=(()=>{if(!o)return null;const{scrollSize:u,client:f}=o,w=co({scrollHeight:u.scrollHeight,scrollWidth:u.scrollWidth,height:f.paddingBox.height,width:f.paddingBox.width});return{pageMarginBox:o.page.marginBox,frameClient:f,scrollSize:u,shouldClipSubject:o.shouldClipSubject,scroll:{initial:o.scroll,current:o.scroll,max:w,diff:{value:dt,displacement:dt}}}})(),g=i==="vertical"?Kr:Vl,x=ks({page:l,withPlaceholder:null,axis:g,frame:d});return{descriptor:t,isCombineEnabled:a,isFixedOnPage:r,axis:g,isEnabled:s,client:n,page:l,frame:d,subject:x}};const wh=(t,s)=>{const a=Dl(t);if(!s||t!==s)return a;const r=a.paddingBox.top-s.scrollTop,i=a.paddingBox.left-s.scrollLeft,n=r+s.scrollHeight,l=i+s.scrollWidth,d=Gr({top:r,right:l,bottom:n,left:i},a.border);return Wr({borderBox:d,margin:a.margin,border:a.border,padding:a.padding})};var Nh=({ref:t,descriptor:s,env:a,windowScroll:r,direction:i,isDropDisabled:n,isCombineEnabled:l,shouldClipSubject:o})=>{const d=a.closestScrollable,g=wh(t,d),x=Na(g,r),b=(()=>{if(!d)return null;const f=Dl(d),w={scrollHeight:d.scrollHeight,scrollWidth:d.scrollWidth};return{client:f,page:Na(f,r),scroll:Tr(d),scrollSize:w,shouldClipSubject:o}})();return jh({descriptor:s,isEnabled:!n,isCombineEnabled:l,isFixedOnPage:a.isFixedOnPage,direction:i,client:g,page:x,closest:b})};const kh={passive:!1},Sh={passive:!0};var Ln=t=>t.shouldPublishImmediately?kh:Sh;const ca=t=>t&&t.env.closestScrollable||null;function Ch(t){const s=E.useRef(null),a=Ta(Oa),r=li("droppable"),{registry:i,marshal:n}=a,l=yo(t),o=Ue(()=>({id:t.droppableId,type:t.type,mode:t.mode}),[t.droppableId,t.mode,t.type]),d=E.useRef(o),g=Ue(()=>ct((p,I)=>{s.current||oe();const F={x:p,y:I};n.updateDroppableScroll(o.id,F)}),[o.id,n]),x=ve(()=>{const p=s.current;return!p||!p.env.closestScrollable?dt:Tr(p.env.closestScrollable)},[]),b=ve(()=>{const p=x();g(p.x,p.y)},[x,g]),u=Ue(()=>zs(b),[b]),f=ve(()=>{const p=s.current,I=ca(p);if(p&&I||oe(),p.scrollOptions.shouldPublishImmediately){b();return}u()},[u,b]),w=ve((p,I)=>{s.current&&oe();const F=l.current,_=F.getDroppableRef();_||oe();const j=vh(_),A={ref:_,descriptor:o,env:j,scrollOptions:I};s.current=A;const G=Nh({ref:_,descriptor:o,env:j,windowScroll:p,direction:F.direction,isDropDisabled:F.isDropDisabled,isCombineEnabled:F.isCombineEnabled,shouldClipSubject:!F.ignoreContainerClipping}),J=j.closestScrollable;return J&&(J.setAttribute(_n.contextId,a.contextId),J.addEventListener("scroll",f,Ln(A.scrollOptions))),G},[a.contextId,o,f,l]),B=ve(()=>{const p=s.current,I=ca(p);return p&&I||oe(),Tr(I)},[]),C=ve(()=>{const p=s.current;p||oe();const I=ca(p);s.current=null,I&&(u.cancel(),I.removeAttribute(_n.contextId),I.removeEventListener("scroll",f,Ln(p.scrollOptions)))},[f,u]),q=ve(p=>{const I=s.current;I||oe();const F=ca(I);F||oe(),F.scrollTop+=p.y,F.scrollLeft+=p.x},[]),R=Ue(()=>({getDimensionAndWatchScroll:w,getScrollWhileDragging:B,dragStopped:C,scroll:q}),[C,w,B,q]),Z=Ue(()=>({uniqueId:r,descriptor:o,callbacks:R}),[R,o,r]);Nt(()=>(d.current=Z.descriptor,i.droppable.register(Z),()=>{s.current&&C(),i.droppable.unregister(Z)}),[R,o,C,Z,n,i.droppable]),Nt(()=>{s.current&&n.updateDroppableIsEnabled(d.current.id,!t.isDropDisabled)},[t.isDropDisabled,n]),Nt(()=>{s.current&&n.updateDroppableIsCombineEnabled(d.current.id,t.isCombineEnabled)},[t.isCombineEnabled,n])}function rr(){}const $n={width:0,height:0,margin:Bu},Ah=({isAnimatingOpenOnMount:t,placeholder:s,animate:a})=>t||a==="close"?$n:{height:s.client.borderBox.height,width:s.client.borderBox.width,margin:s.client.margin},Ph=({isAnimatingOpenOnMount:t,placeholder:s,animate:a})=>{const r=Ah({isAnimatingOpenOnMount:t,placeholder:s,animate:a});return{display:s.display,boxSizing:"border-box",width:r.width,height:r.height,marginTop:r.margin.top,marginRight:r.margin.right,marginBottom:r.margin.bottom,marginLeft:r.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:a!=="none"?Ls.placeholder:null}},Th=t=>{const s=E.useRef(null),a=ve(()=>{s.current&&(clearTimeout(s.current),s.current=null)},[]),{animate:r,onTransitionEnd:i,onClose:n,contextId:l}=t,[o,d]=E.useState(t.animate==="open");E.useEffect(()=>o?r!=="open"?(a(),d(!1),rr):s.current?rr:(s.current=setTimeout(()=>{s.current=null,d(!1)}),a):rr,[r,o,a]);const g=ve(b=>{b.propertyName==="height"&&(i(),r==="close"&&n())},[r,n,i]),x=Ph({isAnimatingOpenOnMount:o,animate:t.animate,placeholder:t.placeholder});return Oe.createElement(t.placeholder.tagName,{style:x,"data-rfd-placeholder-context-id":l,onTransitionEnd:g,ref:t.innerRef})};var Fh=Oe.memo(Th);class Eh extends Oe.PureComponent{constructor(...s){super(...s),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(s,a){return s.shouldAnimate?s.on?{isVisible:!0,data:s.on,animate:"open"}:a.isVisible?{isVisible:!0,data:a.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!s.on,data:s.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const s={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(s)}}const Dh=t=>{const s=E.useContext(Oa);s||oe();const{contextId:a,isMovementAllowed:r}=s,i=E.useRef(null),n=E.useRef(null),{children:l,droppableId:o,type:d,mode:g,direction:x,ignoreContainerClipping:b,isDropDisabled:u,isCombineEnabled:f,snapshot:w,useClone:B,updateViewportMaxScroll:C,getContainerForClone:q}=t,R=ve(()=>i.current,[]),Z=ve((J=null)=>{i.current=J},[]);ve(()=>n.current,[]);const p=ve((J=null)=>{n.current=J},[]),I=ve(()=>{r()&&C({maxScroll:mo()})},[r,C]);Ch({droppableId:o,type:d,mode:g,direction:x,isDropDisabled:u,isCombineEnabled:f,ignoreContainerClipping:b,getDroppableRef:R});const F=Ue(()=>Oe.createElement(Eh,{on:t.placeholder,shouldAnimate:t.shouldAnimatePlaceholder},({onClose:J,data:K,animate:ee})=>Oe.createElement(Fh,{placeholder:K,onClose:J,innerRef:p,animate:ee,contextId:a,onTransitionEnd:I})),[a,I,t.placeholder,t.shouldAnimatePlaceholder,p]),_=Ue(()=>({innerRef:Z,placeholder:F,droppableProps:{"data-rfd-droppable-id":o,"data-rfd-droppable-context-id":a}}),[a,o,F,Z]),j=B?B.dragging.draggableId:null,A=Ue(()=>({droppableId:o,type:d,isUsingCloneFor:j}),[o,j,d]);function G(){if(!B)return null;const{dragging:J,render:K}=B,ee=Oe.createElement(Fo,{draggableId:J.draggableId,index:J.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(ue,N)=>K(ue,N,J));return Ro.createPortal(ee,q())}return Oe.createElement(ci.Provider,{value:A},l(_,w),G())};function Ih(){return document.body||oe(),document.body}const Vn={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:Ih},Bo=t=>{let s={...t},a;for(a in Vn)t[a]===void 0&&(s={...s,[a]:Vn[a]});return s},ir=(t,s)=>t===s.droppable.type,qn=(t,s)=>s.draggables[t.draggable.id],_h=()=>{const t={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},s={...t,shouldAnimatePlaceholder:!1},a=ct(n=>({draggableId:n.id,type:n.type,source:{index:n.index,droppableId:n.droppableId}})),r=ct((n,l,o,d,g,x)=>{const b=g.descriptor.id;if(g.descriptor.droppableId===n){const w=x?{render:x,dragging:a(g.descriptor)}:null,B={isDraggingOver:o,draggingOverWith:o?b:null,draggingFromThisWith:b,isUsingPlaceholder:!0};return{placeholder:g.placeholder,shouldAnimatePlaceholder:!1,snapshot:B,useClone:w}}if(!l)return s;if(!d)return t;const f={isDraggingOver:o,draggingOverWith:b,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:g.placeholder,shouldAnimatePlaceholder:!0,snapshot:f,useClone:null}});return(n,l)=>{const o=Bo(l),d=o.droppableId,g=o.type,x=!o.isDropDisabled,b=o.renderClone;if(Zs(n)){const u=n.critical;if(!ir(g,u))return s;const f=qn(u,n.dimensions),w=wt(n.impact)===d;return r(d,x,w,w,f,b)}if(n.phase==="DROP_ANIMATING"){const u=n.completed;if(!ir(g,u.critical))return s;const f=qn(u.critical,n.dimensions);return r(d,x,Po(u.result)===d,wt(u.impact)===d,f,b)}if(n.phase==="IDLE"&&n.completed&&!n.shouldFlush){const u=n.completed;if(!ir(g,u.critical))return s;const f=wt(u.impact)===d,w=!!(u.impact.at&&u.impact.at.type==="COMBINE"),B=u.critical.droppable.id===d;return f?w?t:s:B?t:s}return s}},Bh={updateViewportMaxScroll:Hm},Oo=Fl(_h,Bh,(t,s,a)=>({...Bo(a),...t,...s}),{context:ni,areStatePropsEqual:Ao})(Dh),Oh=["#000000","#6B7280","#DC2626","#EF4444","#F97316","#EAB308","#22C55E","#3B82F6","#8B5CF6","#EC4899","#FFFFFF","#9CA3AF","#92400E","#F8BBD0","#FCD34D","#FEF3C7","#BBF7D0","#BFDBFE","#DDD6FE","#FBCFE8","#F9FAFB","#D1D5DB","#A78BFA","#FBBF24","#F59E0B","#FBBF24","#D9F99D","#DBEAFE","#C7D2FE","#F3E8FF","#F3F4F6","#6B7280","#8B4513","#FF6347","#FF8C00","#FFD700","#ADFF2F","#00CED1","#1E90FF","#9932CC","#E5E7EB","#4B5563","#A0522D","#CD5C5C","#DC143C","#B22222","#32CD32","#228B22","#4169E1","#8A2BE2","#D1D5DB","#374151","#8B4513","#B22222","#FF0000","#FF4500","#7CFC00","#20B2AA","#0000FF","#4B0082"],Rh=["#EF4444","#F97316","#EAB308","#22C55E","#06B6D4","#3B82F6","#8B5CF6","#F97316","#6B7280","#374151"];function Uh(){const{toast:t}=ht(),s=bt(),[a,r]=E.useState(!1),[i,n]=E.useState(null),[l,o]=E.useState({name:"",slug:"",icon:"fas fa-star",color_from:"#3B82F6",color_to:"#1D4ED8",colorStyle:"gradient",description:""}),{data:d=[],isLoading:g}=Re({queryKey:["/api/admin/nav-tabs"],queryFn:async()=>{let F;try{F=await fetch("/api/admin/nav-tabs",{method:"GET",headers:{"Content-Type":"application/json","x-admin-password":Ve()},mode:"cors"})}catch{console.log("Direct call failed, trying proxy..."),F=await fetch("/api/admin/nav-tabs",{method:"GET",headers:{"Content-Type":"application/json","x-admin-password":Ve()}})}if(!F.ok)throw new Error("Failed to fetch navigation tabs");return F.json()},staleTime:0}),x=be({mutationFn:async F=>{let _;try{_=await fetch("/api/admin/nav-tabs",{method:"POST",headers:{"Content-Type":"application/json","x-admin-password":Ve()},mode:"cors",body:JSON.stringify({...F,password:Ve()})})}catch{console.log("Direct call failed, trying proxy..."),_=await fetch("/api/admin/nav-tabs",{method:"POST",headers:{"Content-Type":"application/json","x-admin-password":Ve()},body:JSON.stringify({...F,password:Ve()})})}if(!_.ok){const j=await _.json();throw new Error(j.message||"Failed to create navigation tab")}return _.json()},onSuccess:()=>{s.invalidateQueries({queryKey:["/api/admin/nav-tabs"]}),s.invalidateQueries({queryKey:["/api/nav-tabs"]}),s.invalidateQueries({predicate:F=>{var _;return!!((_=F.queryKey[0])!=null&&_.toString().includes("/api/nav-tabs/"))}}),s.refetchQueries({queryKey:["/api/nav-tabs"]}),r(!1),o({name:"",slug:"",icon:"fas fa-star",color_from:"#3B82F6",color_to:"#1D4ED8",colorStyle:"gradient",description:""}),t({title:"Success",description:"Navigation tab created successfully"})},onError:F=>{console.error("Update mutation error:",F),t({title:"Update Failed",description:`Failed to update navigation tab: ${F.message}`,variant:"destructive"})}}),b=be({mutationFn:async({id:F,..._})=>{const j=await fetch(`/api/admin/nav-tabs/${F}`,{method:"PUT",headers:{"Content-Type":"application/json","x-admin-password":Ve()},body:JSON.stringify({..._,password:Ve()})});if(!j.ok){const G=await j.json().catch(()=>({message:"Network error"}));throw console.error("API Error:",G),new Error(G.message||"Failed to update navigation tab")}return await j.json()},onSuccess:F=>{s.invalidateQueries({queryKey:["/api/admin/nav-tabs"]}),s.invalidateQueries({queryKey:["/api/nav-tabs"]}),s.invalidateQueries({predicate:_=>{var j;return!!((j=_.queryKey[0])!=null&&j.toString().includes("/api/nav-tabs/"))}}),s.refetchQueries({queryKey:["/api/nav-tabs"]}),n(null),t({title:"Success",description:"Navigation tab updated successfully"})},onError:F=>{t({title:"Error",description:F.message,variant:"destructive"})}}),u=be({mutationFn:async({id:F})=>{const _=await fetch(`/api/admin/nav-tabs/${F}`,{method:"DELETE",headers:{"Content-Type":"application/json","x-admin-password":Ve()},body:JSON.stringify({password:Ve()})});if(!_.ok){const j=await _.json();throw new Error(j.message||"Failed to delete navigation tab")}return _.json()},onSuccess:()=>{s.invalidateQueries({queryKey:["/api/admin/nav-tabs"]}),s.invalidateQueries({queryKey:["/api/nav-tabs"]}),s.invalidateQueries({predicate:F=>{var _;return!!((_=F.queryKey[0])!=null&&_.toString().includes("/api/nav-tabs/"))}}),s.refetchQueries({queryKey:["/api/nav-tabs"]}),t({title:"Success",description:"Navigation tab deleted successfully"})},onError:F=>{t({title:"Error",description:F.message,variant:"destructive"})}}),f=be({mutationFn:async({tabOrders:F,password:_})=>{const j=await fetch("/api/admin/nav-tabs/reorder",{method:"PUT",headers:{"Content-Type":"application/json","x-admin-password":Ve()},body:JSON.stringify({tabOrders:F,password:_})});if(!j.ok){const A=await j.json();throw new Error(A.message||"Failed to reorder navigation tabs")}return j.json()},onSuccess:()=>{s.invalidateQueries({queryKey:["/api/admin/nav-tabs"]}),s.invalidateQueries({queryKey:["/api/nav-tabs"]}),s.invalidateQueries({predicate:F=>{var _;return!!((_=F.queryKey[0])!=null&&_.toString().includes("/api/nav-tabs/"))}}),s.refetchQueries({queryKey:["/api/nav-tabs"]}),t({title:"Success",description:"Navigation tabs reordered successfully"})},onError:F=>{t({title:"Error",description:F.message,variant:"destructive"})}}),w=async F=>{F.preventDefault(),i?b.mutate({id:i,...l}):x.mutate({...l})},B=async F=>{confirm("Are you sure you want to delete this navigation tab?")&&u.mutate({id:F})},C=F=>{n(F.id),o({name:F.name,slug:F.slug,icon:F.icon,color_from:F.color_from,color_to:F.color_to,colorStyle:F.colorStyle||"gradient",description:F.description||""}),r(!0)},q=()=>{r(!1),n(null),o({name:"",slug:"",icon:"fas fa-star",color_from:"#3B82F6",color_to:"#1D4ED8",colorStyle:"gradient",description:""})},R=F=>F.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim(),Z=F=>{o(_=>({..._,name:F,slug:i?_.slug:R(F)}))},p=F=>{if(!F.destination)return;const _=Array.from(d),[j]=_.splice(F.source.index,1);_.splice(F.destination.index,0,j);const A=prompt("Enter admin password to reorder tabs:");if(!A)return;const G=_.map((J,K)=>({id:J.id}));f.mutate({tabOrders:G,password:A})},I=async F=>{try{let _;try{_=await fetch(`/api/admin/nav-tabs/${F.id}`,{method:"PUT",headers:{"Content-Type":"application/json","x-admin-password":Ve()},mode:"cors",body:JSON.stringify({is_active:!F.is_active,password:Ve()})})}catch{console.log("Direct call failed, trying proxy..."),_=await fetch(`/api/admin/nav-tabs/${F.id}`,{method:"PUT",headers:{"Content-Type":"application/json","x-admin-password":Ve()},body:JSON.stringify({is_active:!F.is_active,password:Ve()})})}if(_.ok)s.invalidateQueries({queryKey:["/api/admin/nav-tabs"]}),s.invalidateQueries({queryKey:["/api/nav-tabs"]}),s.invalidateQueries({predicate:j=>{var A;return!!((A=j.queryKey[0])!=null&&A.toString().includes("/api/nav-tabs/"))}}),s.refetchQueries({queryKey:["/api/nav-tabs"]}),t({title:"Success",description:`Tab ${F.is_active?"deactivated":"activated"} successfully`});else{const j=await _.json().catch(()=>({message:"Network error"}));throw new Error(j.message||"Failed to toggle tab status")}}catch(_){const j=_ instanceof Error?_.message:"Unknown error occurred";t({title:"Error",description:`Failed to toggle tab status: ${j}`,variant:"destructive"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Navigation Management"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage navigation tabs and create new pages"})]}),e.jsxs(D,{onClick:()=>r(!0),className:"bg-blue-600 hover:bg-blue-700",disabled:a,children:[e.jsx(tt,{className:"w-4 h-4 mr-2"}),"Add Navigation Tab"]})]}),a&&e.jsxs(re,{className:"border-blue-200 bg-blue-50 dark:bg-blue-900/20",children:[e.jsxs(we,{children:[e.jsx(Ne,{className:"text-blue-800 dark:text-blue-200",children:i?"Edit Navigation Tab":"Add New Navigation Tab"}),e.jsx(Ae,{children:i?"Update the navigation tab details":"Create a new navigation tab and its dedicated page"})]}),e.jsx(ne,{children:e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(T,{htmlFor:"name",children:"Tab Name"}),e.jsx(W,{id:"name",value:l.name,onChange:F=>Z(F.target.value),placeholder:"e.g., Tech Picks",required:!0})]}),e.jsxs("div",{children:[e.jsx(T,{htmlFor:"slug",children:"URL Slug"}),e.jsx(W,{id:"slug",value:l.slug,onChange:F=>o(_=>({..._,slug:F.target.value})),placeholder:"e.g., tech-picks",required:!0})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(T,{htmlFor:"icon",children:"Icon Class"}),e.jsx(W,{id:"icon",value:l.icon,onChange:F=>o(_=>({..._,icon:F.target.value})),placeholder:"e.g., fas fa-laptop"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[e.jsx(T,{className:"text-gray-700 dark:text-gray-300",children:"Color Style"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(D,{type:"button",size:"sm",variant:l.colorStyle==="gradient"?"default":"outline",onClick:()=>o(F=>({...F,colorStyle:"gradient"})),children:"Gradient"}),e.jsx(D,{type:"button",size:"sm",variant:l.colorStyle==="palette"?"default":"outline",onClick:()=>o(F=>({...F,colorStyle:"palette"})),children:"Color Palette"})]})]}),l.colorStyle==="gradient"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(T,{htmlFor:"color_from",className:"text-gray-700 dark:text-gray-300",children:"Gradient Start Color"}),e.jsx(W,{id:"color_from",type:"color",value:l.color_from,onChange:F=>o(_=>({..._,color_from:F.target.value})),className:"bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600"})]}),e.jsxs("div",{children:[e.jsx(T,{htmlFor:"color_to",className:"text-gray-700 dark:text-gray-300",children:"Gradient End Color"}),e.jsx(W,{id:"color_to",type:"color",value:l.color_to,onChange:F=>o(_=>({..._,color_to:F.target.value})),className:"bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600"})]})]}),l.colorStyle==="palette"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx(T,{className:"text-gray-700 dark:text-gray-300 mb-3 block",children:"Theme Colors"}),e.jsx("div",{className:"grid grid-cols-10 gap-2 mb-4",children:Oh.map((F,_)=>e.jsx("button",{type:"button",className:`w-8 h-8 rounded border-2 hover:scale-110 transition-transform ${l.color_from===F?"border-gray-900 dark:border-white shadow-lg":"border-gray-300 dark:border-gray-600"}`,style:{backgroundColor:F},onClick:()=>o(j=>({...j,color_from:F,color_to:F})),title:F},_))}),e.jsx(T,{className:"text-gray-700 dark:text-gray-300 mb-3 block",children:"Standard Colors"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:Rh.map((F,_)=>e.jsx("button",{type:"button",className:`w-8 h-8 rounded border-2 hover:scale-110 transition-transform ${l.color_from===F?"border-gray-900 dark:border-white shadow-lg":"border-gray-300 dark:border-gray-600"}`,style:{backgroundColor:F},onClick:()=>o(j=>({...j,color_from:F,color_to:F})),title:F},_))})]})})]})]}),e.jsxs("div",{children:[e.jsx(T,{htmlFor:"description",children:"Description"}),e.jsx(vt,{id:"description",value:l.description,onChange:F=>o(_=>({..._,description:F.target.value})),placeholder:"Brief description of this navigation tab",rows:3})]}),e.jsxs("div",{className:"p-4 bg-gray-100 dark:bg-gray-800 rounded-lg",children:[e.jsx(T,{className:"text-sm font-medium mb-2 block text-gray-700 dark:text-gray-300",children:"Preview:"}),e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full text-white text-sm font-medium",style:{background:l.colorStyle==="gradient"?`linear-gradient(to right, ${l.color_from}, ${l.color_to})`:l.color_from},children:[e.jsx("i",{className:l.icon}),e.jsx("span",{children:l.name||"Tab Name"})]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-600 dark:text-gray-400",children:["Style: ",l.colorStyle==="gradient"?"Gradient":"Solid Color"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(D,{type:"submit",disabled:x.isPending||b.isPending,className:"bg-green-600 hover:bg-green-700",children:[e.jsx(Ys,{className:"w-4 h-4 mr-2"}),i?"Update Tab":"Create Tab"]}),e.jsxs(D,{type:"button",variant:"outline",onClick:q,children:[e.jsx(ds,{className:"w-4 h-4 mr-2"}),"Cancel"]})]})]})})]}),e.jsxs(re,{children:[e.jsxs(we,{children:[e.jsx(Ne,{children:"Current Navigation Tabs"}),e.jsx(Ae,{children:"Drag and drop to reorder tabs. System tabs cannot be deleted."})]}),e.jsx(ne,{children:g?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Loading navigation tabs..."})]}):Array.isArray(d)&&d.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No navigation tabs found."})}):e.jsx(Co,{onDragEnd:p,children:e.jsx(Oo,{droppableId:"nav-tabs",children:F=>e.jsxs("div",{...F.droppableProps,ref:F.innerRef,className:"space-y-2",children:[(Array.isArray(d)?d:[]).map((_,j)=>e.jsx(Eo,{draggableId:_.id.toString(),index:j,children:(A,G)=>e.jsxs("div",{ref:A.innerRef,...A.draggableProps,className:`p-4 border rounded-lg bg-white dark:bg-gray-800 ${G.isDragging?"shadow-lg":"shadow-sm"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{...A.dragHandleProps,className:"cursor-grab",children:e.jsx(zo,{className:"w-5 h-5 text-gray-400"})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 rounded-full text-white text-sm font-medium",style:{background:_.colorStyle==="palette"||!_.colorStyle?_.color_from:`linear-gradient(to right, ${_.color_from}, ${_.color_to})`},children:[e.jsx("i",{className:_.icon}),e.jsx("span",{children:_.name})]}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["/",_.slug]}),e.jsxs("div",{className:"flex gap-2",children:[_.is_system&&e.jsx(Ce,{variant:"secondary",className:"text-xs",children:"System"}),e.jsx(Ce,{variant:_.is_active?"default":"secondary",className:"text-xs",children:_.is_active?"Active":"Inactive"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:_.is_active,onChange:()=>I(_),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-900 dark:text-gray-300",children:_.is_active?"Active":"Inactive"})]})}),e.jsx(D,{size:"sm",variant:"outline",onClick:()=>C(_),disabled:a,children:e.jsx(Lt,{className:"w-4 h-4"})}),!_.is_system&&e.jsx(D,{size:"sm",variant:"outline",onClick:()=>B(_.id),disabled:u.isPending,className:"text-red-600 hover:text-red-700",children:e.jsx(Yt,{className:"w-4 h-4"})})]})]}),_.description&&e.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400 ml-9",children:_.description})]})},_.id)),F.placeholder]})})})})]})]})}const Mh=[{id:5,title:"Latest Insights",subtitle:"Stay updated with our latest articles and tips",imageUrl:"https://images.unsplash.com/photo-1486312338219-ce68d2c6f44d?w=1200&h=400&fit=crop",linkUrl:"",buttonText:"Read More",page:"blog",isActive:!0,display_order:1,gradient:"from-gray-600 to-gray-800",icon:"fas fa-star"}],Lh=[{id:13,title:"Get in Touch",subtitle:"Have questions? We're here to help! Reach out to our friendly support team.",imageUrl:"https://images.unsplash.com/photo-1423666639041-f56000c27a9a?w=1200&h=400&fit=crop&q=80",linkUrl:"/contact",buttonText:" Contact Us",page:"contact",isActive:!0,display_order:1,gradient:"from-gray-600 to-gray-800",icon:"fas fa-star"}],$h=[{id:18,title:"Deals Hub",subtitle:"Amazing deals and discounts on your favorite products - limited time offers!",imageUrl:"https://images.unsplash.com/photo-1607083206869-4c7672e72a8a?w=1200&h=400&fit=crop&q=80",linkUrl:"/deals-hub",buttonText:" Get Deals",page:"deals",isActive:!0,display_order:1,gradient:"from-gray-600 to-gray-800",icon:"fas fa-star"}],Vh=[{id:46,title:"Apps & AI Tools",subtitle:"Discover the latest apps and AI-powered tools to boost your productivity!",imageUrl:"https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=1200&h=400&fit=crop&q=80",linkUrl:"/apps",buttonText:" Explore Apps",page:"apps",isActive:!0,display_order:1,gradient:"from-green-500 to-emerald-600",icon:"fas fa-robot"}],qh=[{id:47,title:"Professional Services",subtitle:"Premium services and solutions for your business and personal needs!",imageUrl:"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=1200&h=400&fit=crop&q=80",linkUrl:"/services",buttonText:" View Services",page:"services",isActive:!0,display_order:1,gradient:"from-indigo-500 to-purple-600",icon:"fas fa-cogs"}],Gh=[{id:3,title:"Featured Products",subtitle:"Hand-picked items from top brands",imageUrl:"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=1200&h=400&fit=crop",linkUrl:"",buttonText:"",page:"products",isActive:!0,display_order:1,gradient:"from-gray-600 to-gray-800",icon:"fas fa-star"}],Wh=[{id:11,title:"Video Content",subtitle:"Watch our curated collection of informative and entertaining videos!",imageUrl:"https://images.unsplash.com/photo-1536240478700-b869070f9279?w=1200&h=400&fit=crop&q=80",linkUrl:"/videos",buttonText:" Watch Videos",page:"videos",isActive:!0,display_order:1,gradient:"from-red-600 via-pink-600 to-purple-600",icon:"fas fa-play-circle"}],zh=[{id:38,title:"Browse Categories",subtitle:"Explore our wide range of product categories and find exactly what you're looking for",imageUrl:"https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=1200&h=400&fit=crop&q=80",linkUrl:"/browse-categories",buttonText:" Explore Categories",page:"categories",isActive:!0,display_order:1,gradient:"from-green-600 via-emerald-600 to-teal-600",icon:"fas fa-th-large"}],Hh=[{id:41,title:"Your Wishlist",subtitle:"Save your favorite products and never lose track of what you love",imageUrl:"https://images.unsplash.com/photo-1513475382585-d06e58bcb0e0?w=1200&h=400&fit=crop&q=80",linkUrl:"/wishlist",buttonText:" Manage Wishlist",page:"wishlist",isActive:!0,display_order:1,gradient:"from-pink-600 via-rose-600 to-red-600",icon:"fas fa-heart"}],Kh=[{id:101,title:"Premium Smartphones",subtitle:"Best deals on top brands",imageUrl:"https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?w=1200&h=400&fit=crop&auto=format&q=80",linkUrl:"/category/Electronics & Gadgets",buttonText:"Shop Smartphones",page:"home",isActive:!0,display_order:1,gradient:"from-blue-600 to-purple-700"},{id:102,title:"Home & Kitchen Essentials",subtitle:"Daily-use appliances and must-haves",imageUrl:"https://images.unsplash.com/photo-1519710164239-da123dc03ef4?w=1200&h=400&fit=crop&auto=format&q=80",linkUrl:"/category/Home & Kitchen",buttonText:"Shop Home & Kitchen",page:"home",isActive:!0,display_order:2,gradient:"from-green-600 to-teal-700"},{id:103,title:"Fashion & Style",subtitle:"Men  Women  Accessories",imageUrl:"https://images.unsplash.com/photo-1512436991641-6745cdb1723f?w=1200&h=400&fit=crop&auto=format&q=80",linkUrl:"/category/Fashion & Clothing",buttonText:"Shop Fashion",page:"home",isActive:!0,display_order:3,gradient:"from-pink-600 to-rose-700"}],Qh={blog:Mh,"click-picks":[{id:27,title:"Click Picks",subtitle:"",imageUrl:"https://images.unsplash.com/photo-1557804506-669a67965ba0?w=1200&h=400&fit=crop&auto=format&q=75",linkUrl:"",buttonText:"",page:"click-picks",isActive:!0,display_order:1,gradient:"from-blue-600 via-indigo-600 to-purple-500",icon:"fas fa-mouse-pointer"}],contact:Lh,"cue-picks":[{id:26,title:"Cue Picks",subtitle:"",imageUrl:"https://images.unsplash.com/photo-1557804506-669a67965ba0?w=1200&h=400&fit=crop&auto=format&q=75",linkUrl:"",buttonText:"",page:"cue-picks",isActive:!0,display_order:1,gradient:"from-red-600 via-pink-600 to-rose-600",icon:"fas fa-bullseye"}],deals:$h,"prime-picks":[{id:42,title:"Prime Picks",subtitle:"Discover our premium selection of top-quality products handpicked just for you!",imageUrl:"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=800&h=300&fit=crop",linkUrl:"/prime-picks",buttonText:"Explore Prime Deals",page:"prime-picks",isActive:!0,display_order:1,gradient:"from-purple-600 via-pink-600 to-orange-500",icon:"fas fa-crown"}],"value-picks":[{id:43,title:"Value Picks",subtitle:"Best value for money products - quality meets affordability!",imageUrl:"https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?w=800&h=300&fit=crop",linkUrl:"/value-picks",buttonText:"Shop Value Deals",page:"value-picks",isActive:!0,display_order:1,gradient:"from-green-600 via-emerald-600 to-teal-600",icon:"fas fa-gem"}],"deals-hub":[{id:44,title:"Deals Hub",subtitle:"Your one-stop destination for the hottest deals and biggest discounts!",imageUrl:"https://images.unsplash.com/photo-1607083206869-4c7672e72a8a?w=1200&h=400&fit=crop&q=80",linkUrl:"/deals-hub",buttonText:" Grab Deals",page:"deals-hub",isActive:!0,display_order:1,gradient:"from-red-600 via-orange-600 to-yellow-500",icon:"fas fa-tags"}],"loot-box":[{id:45,title:"Loot Box",subtitle:"Surprise deals and mystery offers - discover amazing products at unbeatable prices!",imageUrl:"https://images.unsplash.com/photo-1513475382585-d06e58bcb0e0?w=1200&h=400&fit=crop&q=80",linkUrl:"/loot-box",buttonText:" Open Loot Box",page:"loot-box",isActive:!0,display_order:1,gradient:"from-purple-600 via-indigo-600 to-blue-600",icon:"fas fa-box-open"}],apps:Vh,services:qh,"global-picks":[{id:19,title:"Global Picks",subtitle:"International products and brands from around the world!",imageUrl:"https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=1200&h=400&fit=crop&q=80",linkUrl:"/global-picks",buttonText:"Explore Global",page:"global-picks",isActive:!0,display_order:1,gradient:"from-cyan-600 via-blue-600 to-indigo-600",icon:"fas fa-globe"}],products:Gh,"travel-picks":[{id:28,title:"Flight Deals - Up to 50% Off",subtitle:"Book domestic and international flights at unbeatable prices",imageUrl:"https://images.unsplash.com/photo-1436491865332-7a61a109cc05?w=800&h=300&fit=crop",linkUrl:"/travel/flights",buttonText:"",page:"travel-picks",isActive:!0,display_order:1,gradient:"from-blue-600 via-sky-600 to-cyan-600",icon:"fas fa-plane"},{id:29,title:"Hotel Bookings - Best Price Guarantee",subtitle:"Luxury stays, budget hotels, and everything in between",imageUrl:"https://images.unsplash.com/photo-1566073771259-6a8506099945?w=800&h=300&fit=crop",linkUrl:"/travel/hotels",buttonText:"",page:"travel-picks",isActive:!0,display_order:2,gradient:"from-purple-600 via-pink-600 to-rose-600",icon:"fas fa-bed"},{id:30,title:"Holiday Packages - All-Inclusive Deals",subtitle:"Complete vacation packages with flights, hotels & activities",imageUrl:"https://images.unsplash.com/photo-1507525428034-b723cf961d3e?w=800&h=300&fit=crop",linkUrl:"/travel/packages",buttonText:"",page:"travel-picks",isActive:!0,display_order:3,gradient:"from-green-600 via-emerald-600 to-teal-600",icon:"fas fa-suitcase"},{id:31,title:"Car Rentals - Drive Your Adventure",subtitle:"Rent cars worldwide with free cancellation and best rates",imageUrl:"https://images.unsplash.com/photo-1449824913935-59a10b8d2000?w=800&h=300&fit=crop",linkUrl:"/travel/cars",buttonText:"",page:"travel-picks",isActive:!0,display_order:4,gradient:"from-red-600 via-orange-600 to-yellow-500",icon:"fas fa-car"},{id:32,title:"Activities & Tours - Explore More",subtitle:"Discover local experiences, tours, and attractions",imageUrl:"https://images.unsplash.com/photo-1488646953014-85cb44e25828?w=800&h=300&fit=crop",linkUrl:"/travel/activities",buttonText:"",page:"travel-picks",isActive:!0,display_order:5,gradient:"from-indigo-600 via-purple-600 to-pink-600",icon:"fas fa-map-marked-alt"},{id:33,title:"Cruise Deals - Sail Away",subtitle:"Luxury cruise packages to exotic destinations",imageUrl:"https://images.unsplash.com/photo-1544551763-46a013bb70d5?w=800&h=300&fit=crop",linkUrl:"/travel/cruises",buttonText:"",page:"travel-picks",isActive:!0,display_order:6,gradient:"from-cyan-600 via-blue-600 to-indigo-600",icon:"fas fa-ship"},{id:34,title:"Travel Insurance - Peace of Mind",subtitle:"Comprehensive travel protection for worry-free trips",imageUrl:"https://images.unsplash.com/photo-1488646953014-85cb44e25828?w=800&h=300&fit=crop",linkUrl:"/travel/insurance",buttonText:"",page:"travel-picks",isActive:!0,display_order:7,gradient:"from-emerald-600 via-green-600 to-teal-600",icon:"fas fa-shield-alt"},{id:35,title:"Currency Exchange - Best Rates",subtitle:"Get foreign currency at competitive exchange rates",imageUrl:"https://images.unsplash.com/photo-1526304640581-d334cdbbf45e?w=800&h=300&fit=crop",linkUrl:"/travel/forex",buttonText:"",page:"travel-picks",isActive:!0,display_order:8,gradient:"from-yellow-600 via-orange-600 to-red-600",icon:"fas fa-exchange-alt"},{id:36,title:"Bus Tickets - Comfortable Journeys",subtitle:"Book bus tickets for intercity and interstate travel",imageUrl:"https://images.unsplash.com/photo-1544620347-c4fd4a3d5957?w=800&h=300&fit=crop",linkUrl:"/travel/bus",buttonText:"",page:"travel-picks",isActive:!0,display_order:9,gradient:"from-orange-600 via-red-600 to-pink-600",icon:"fas fa-bus"},{id:37,title:"Train Bookings - Scenic Routes",subtitle:"Reserve train seats for comfortable rail journeys",imageUrl:"https://images.unsplash.com/photo-1474487548417-781cb71495f3?w=800&h=300&fit=crop",linkUrl:"/travel/trains",buttonText:"",page:"travel-picks",isActive:!0,display_order:10,gradient:"from-slate-600 via-gray-600 to-zinc-600",icon:"fas fa-train"}],videos:Wh,categories:zh,"browse-categories":[{id:39,title:"All Categories",subtitle:"Discover thousands of products across all categories - from electronics to fashion and beyond",imageUrl:"https://images.unsplash.com/photo-1472851294608-062f824d29cc?w=1200&h=400&fit=crop&q=80",linkUrl:"/browse-categories",buttonText:" Start Shopping",page:"browse-categories",isActive:!0,display_order:1,gradient:"from-indigo-600 via-purple-600 to-pink-600",icon:"fas fa-layer-group"}],"top-picks":[{id:40,title:"Top Picks Collection",subtitle:"Handpicked premium products from all our categories - the best of the best!",imageUrl:"https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=1200&h=400&fit=crop&q=80",linkUrl:"/top-picks",buttonText:" View Top Picks",page:"top-picks",isActive:!0,display_order:1,gradient:"from-yellow-600 via-orange-600 to-red-600",icon:"fas fa-trophy"}],wishlist:Hh,home:Kh};function Xh(t){return Qh[t]||[]}const Jh=[{id:1,title:"Premium Smartphones",subtitle:"Best deals on top brands",description:"Flagship phones and smart picks at trusted stores.",image:"https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?w=1200&h=400&fit=crop&auto=format&q=80",ctaText:"Shop Smartphones",ctaLink:"/category/Electronics & Gadgets",bgGradient:"from-blue-600 to-purple-700"},{id:2,title:"Home & Kitchen Essentials",subtitle:"Daily-use appliances and must-haves",description:"Quality cookware, storage, and appliances for every home.",image:"https://images.unsplash.com/photo-1519710164239-da123dc03ef4?w=1200&h=400&fit=crop&auto=format&q=80",ctaText:"Shop Home & Kitchen",ctaLink:"/category/Home & Kitchen",bgGradient:"from-green-600 to-teal-700"},{id:3,title:"Fashion & Style",subtitle:"Men  Women  Accessories",description:"Trending outfits, footwear, and accessories.",image:"https://images.unsplash.com/photo-1512436991641-6745cdb1723f?w=1200&h=400&fit=crop&auto=format&q=80",ctaText:"Shop Fashion",ctaLink:"/category/Fashion & Clothing",bgGradient:"from-pink-600 to-rose-700"}],ls=[{value:"home",label:"Home Page"},{value:"top-picks",label:"Top Picks"},{value:"services",label:"Services Page"},{value:"apps",label:"Apps & AI Apps"},{value:"categories",label:"Categories Page"},{value:"blog",label:"Blog Page"},{value:"videos",label:"Videos Page"},{value:"wishlist",label:"Wishlist Page"},{value:"contact",label:"Contact Page"},{value:"prime-picks",label:"Prime Picks"},{value:"cue-picks",label:"Cue Picks"},{value:"value-picks",label:"Value Picks"},{value:"click-picks",label:"Click Picks"},{value:"deals-hub",label:"Deals Hub"},{value:"global-picks",label:"Global Picks"},{value:"travel-picks",label:"Travel Picks"},{value:"loot-box",label:"Loot Box"}],Gn=[{value:"image",label:"Custom Image"},{value:"unsplash",label:"Unsplash Image"},{value:"text-only",label:"Text Only"},{value:"image-gradient",label:"Image + Gradient Overlay"}],Wn=[{value:"font-sans",label:"Sans Serif"},{value:"font-serif",label:"Serif"},{value:"font-mono",label:"Monospace"},{value:"font-display",label:"Display"}],zn=[{value:"font-light",label:"Light"},{value:"font-normal",label:"Normal"},{value:"font-medium",label:"Medium"},{value:"font-semibold",label:"Semi Bold"},{value:"font-bold",label:"Bold"},{value:"font-extrabold",label:"Extra Bold"}],Hn=[{value:"bg-gradient-to-r from-blue-600 to-purple-600",label:"Blue  Purple"},{value:"bg-gradient-to-r from-green-400 to-blue-500",label:"Green  Blue"},{value:"bg-gradient-to-r from-purple-400 to-pink-400",label:"Purple  Pink"},{value:"bg-gradient-to-r from-yellow-400 to-orange-500",label:"Yellow  Orange"},{value:"bg-gradient-to-r from-red-400 to-pink-500",label:"Red  Pink"},{value:"bg-gradient-to-r from-indigo-500 to-purple-600",label:"Indigo  Purple"},{value:"bg-gradient-to-l from-blue-600 to-purple-600",label:"Blue  Purple"},{value:"bg-gradient-to-b from-purple-600 to-pink-500",label:"Purple  Pink"},{value:"bg-gradient-to-t from-emerald-500 to-teal-600",label:"Emerald  Teal"},{value:"bg-gradient-to-br from-sky-500 to-indigo-700",label:"Sky  Indigo"},{value:"bg-gradient-to-tr from-fuchsia-500 to-rose-500",label:"Fuchsia  Rose"},{value:"bg-gradient-to-bl from-cyan-500 to-blue-700",label:"Cyan  Blue"},{value:"bg-gradient-to-tl from-orange-500 to-amber-400",label:"Orange  Amber"},{value:"bg-gradient-to-br from-rose-500 via-red-500 to-orange-500",label:"Sunset"},{value:"bg-gradient-to-br from-cyan-500 via-sky-500 to-blue-600",label:"Ocean"},{value:"bg-gradient-to-br from-emerald-500 via-teal-500 to-cyan-500",label:"Teal Emerald"},{value:"bg-gradient-to-br from-indigo-600 via-violet-600 to-purple-700",label:"Indigo Violet"},{value:"bg-gradient-to-br from-yellow-300 via-amber-400 to-orange-500",label:"Warm Amber"},{value:"bg-gradient-to-br from-gray-900 via-gray-800 to-slate-700",label:"Charcoal"}],Kn=["#000000","#6B7280","#DC2626","#EF4444","#F97316","#EAB308","#22C55E","#3B82F6","#8B5CF6","#EC4899","#FFFFFF","#9CA3AF","#92400E","#F8BBD0","#FCD34D","#FEF3C7","#BBF7D0","#BFDBFE","#DDD6FE","#FBCFE8","#F9FAFB","#D1D5DB","#A78BFA","#FBBF24","#F59E0B","#FBBF24","#D9F99D","#DBEAFE","#C7D2FE","#F3E8FF","#F3F4F6","#6B7280","#8B4513","#FF6347","#FF8C00","#FFD700","#ADFF2F","#00CED1","#1E90FF","#9932CC","#E5E7EB","#4B5563","#A0522D","#CD5C5C","#DC143C","#B22222","#32CD32","#228B22","#4169E1","#8A2BE2","#D1D5DB","#374151","#8B4513","#B22222","#FF0000","#FF4500","#7CFC00","#20B2AA","#0000FF","#4B0082"],Qn=["#EF4444","#F97316","#EAB308","#22C55E","#06B6D4","#3B82F6","#8B5CF6","#F97316","#6B7280","#374151"],Xn=[{value:"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",label:"Blue  Purple"},{value:"bg-gradient-to-r from-green-400 to-blue-500 bg-clip-text text-transparent",label:"Green  Blue"},{value:"bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent",label:"Purple  Pink"},{value:"bg-gradient-to-r from-yellow-400 to-orange-500 bg-clip-text text-transparent",label:"Yellow  Orange"},{value:"bg-gradient-to-r from-red-400 to-pink-500 bg-clip-text text-transparent",label:"Red  Pink"},{value:"bg-gradient-to-r from-indigo-500 to-purple-600 bg-clip-text text-transparent",label:"Indigo  Purple"},{value:"bg-gradient-to-l from-blue-600 to-purple-600 bg-clip-text text-transparent",label:"Blue  Purple"},{value:"bg-gradient-to-b from-purple-600 to-pink-500 bg-clip-text text-transparent",label:"Purple  Pink"},{value:"bg-gradient-to-t from-emerald-500 to-teal-600 bg-clip-text text-transparent",label:"Emerald  Teal"},{value:"bg-gradient-to-br from-sky-500 to-indigo-700 bg-clip-text text-transparent",label:"Sky  Indigo"},{value:"bg-gradient-to-tr from-fuchsia-500 to-rose-500 bg-clip-text text-transparent",label:"Fuchsia  Rose"},{value:"bg-gradient-to-bl from-cyan-500 to-blue-700 bg-clip-text text-transparent",label:"Cyan  Blue"},{value:"bg-gradient-to-tl from-orange-500 to-amber-400 bg-clip-text text-transparent",label:"Orange  Amber"},{value:"bg-gradient-to-br from-rose-500 via-red-500 to-orange-500 bg-clip-text text-transparent",label:"Sunset"},{value:"bg-gradient-to-br from-cyan-500 via-sky-500 to-blue-600 bg-clip-text text-transparent",label:"Ocean"},{value:"bg-gradient-to-br from-emerald-500 via-teal-500 to-cyan-500 bg-clip-text text-transparent",label:"Teal Emerald"},{value:"bg-gradient-to-br from-indigo-600 via-violet-600 to-purple-700 bg-clip-text text-transparent",label:"Indigo Violet"},{value:"bg-gradient-to-br from-yellow-300 via-amber-400 to-orange-500 bg-clip-text text-transparent",label:"Warm Amber"},{value:"bg-gradient-to-br from-gray-900 via-gray-800 to-slate-700 bg-clip-text text-transparent",label:"Charcoal"}],Zh=[{value:"none",label:"No Icon"},{value:"emoji",label:"Emoji"},{value:"fontawesome",label:"Font Awesome"}],Yh=[{value:"left",label:"Left of Title"},{value:"right",label:"Right of Title"},{value:"top",label:"Above Title"}],ef=[{value:"",label:" Party"},{value:"",label:" Fire"},{value:"",label:" Star"},{value:"",label:" Diamond"},{value:"",label:" Rocket"},{value:"",label:" Crown"},{value:"",label:" Target"},{value:"",label:" Money"},{value:"",label:" Shopping"},{value:"",label:" Gift"},{value:"",label:" Lightning"},{value:"",label:" Glowing Star"},{value:"",label:" Bell"},{value:"",label:" Megaphone"},{value:"",label:" Confetti"},{value:"",label:" Dizzy"},{value:"",label:" Trophy"},{value:"",label:" Circus"},{value:"",label:" Art"},{value:"",label:" Rainbow"}],tf=[{value:"fas fa-star",label:"Star"},{value:"fas fa-crown",label:"Crown"},{value:"fas fa-fire",label:"Fire"},{value:"fas fa-gem",label:"Gem"},{value:"fas fa-rocket",label:"Rocket"},{value:"fas fa-bolt",label:"Lightning Bolt"},{value:"fas fa-trophy",label:"Trophy"},{value:"fas fa-gift",label:"Gift"},{value:"fas fa-shopping-cart",label:"Shopping Cart"},{value:"fas fa-shopping-bag",label:"Shopping Bag"},{value:"fas fa-heart",label:"Heart"},{value:"fas fa-thumbs-up",label:"Thumbs Up"},{value:"fas fa-bullseye",label:"Bullseye"},{value:"fas fa-magic",label:"Magic Wand"},{value:"fas fa-sparkles",label:"Sparkles"},{value:"fas fa-medal",label:"Medal"},{value:"fas fa-award",label:"Award"},{value:"fas fa-certificate",label:"Certificate"},{value:"fas fa-tags",label:"Tags"},{value:"fas fa-percent",label:"Percent"},{value:"fas fa-dollar-sign",label:"Dollar Sign"},{value:"fas fa-coins",label:"Coins"},{value:"fas fa-hand-holding-usd",label:"Money Hand"},{value:"fas fa-piggy-bank",label:"Piggy Bank"},{value:"fas fa-briefcase",label:"Briefcase"},{value:"fas fa-chart-line",label:"Chart Line"},{value:"fas fa-handshake",label:"Handshake"},{value:"fas fa-store",label:"Store"},{value:"fas fa-credit-card",label:"Credit Card"},{value:"fas fa-wallet",label:"Wallet"},{value:"fas fa-receipt",label:"Receipt"},{value:"fas fa-cash-register",label:"Cash Register"},{value:"fas fa-laptop",label:"Laptop"},{value:"fas fa-mobile-alt",label:"Mobile Phone"},{value:"fas fa-desktop",label:"Desktop"},{value:"fas fa-wifi",label:"WiFi"},{value:"fas fa-cloud",label:"Cloud"},{value:"fas fa-database",label:"Database"},{value:"fas fa-server",label:"Server"},{value:"fas fa-code",label:"Code"},{value:"fas fa-envelope",label:"Envelope"},{value:"fas fa-phone",label:"Phone"},{value:"fas fa-comments",label:"Comments"},{value:"fas fa-bell",label:"Bell"},{value:"fas fa-bullhorn",label:"Bullhorn"},{value:"fas fa-microphone",label:"Microphone"},{value:"fas fa-home",label:"Home"},{value:"fas fa-search",label:"Search"},{value:"fas fa-cog",label:"Settings"},{value:"fas fa-user",label:"User"},{value:"fas fa-users",label:"Users"},{value:"fas fa-bars",label:"Menu Bars"},{value:"fas fa-times",label:"Close X"},{value:"fas fa-check",label:"Check"},{value:"fas fa-plus",label:"Plus"},{value:"fas fa-minus",label:"Minus"},{value:"fas fa-arrow-right",label:"Arrow Right"},{value:"fas fa-arrow-left",label:"Arrow Left"},{value:"fas fa-arrow-up",label:"Arrow Up"},{value:"fas fa-arrow-down",label:"Arrow Down"},{value:"fas fa-play",label:"Play"},{value:"fas fa-pause",label:"Pause"},{value:"fas fa-stop",label:"Stop"},{value:"fas fa-music",label:"Music"},{value:"fas fa-video",label:"Video"},{value:"fas fa-camera",label:"Camera"},{value:"fas fa-image",label:"Image"},{value:"fas fa-film",label:"Film"}];function sf(){var c,y,O,Q,V,se;const[t,s]=E.useState(!1),[a,r]=E.useState(!0),{toast:i}=ht(),n=bt(),[l,o]=E.useState("home"),[d,g]=E.useState(!1),[x,b]=E.useState(null),[u,f]=E.useState(null),[w,B]=E.useState(()=>{try{const h=localStorage.getItem("hiddenStaticBanners");return h?new Set(JSON.parse(h)):new Set}catch{return new Set}}),[C,q]=E.useState(!1),[R,Z]=E.useState("url"),[p,I]=E.useState({title:"",subtitle:"",imageUrl:"",linkUrl:"",buttonText:"",showHomeLink:!0,homeLinkText:"Back to Home",buttons:[{text:"",url:"",style:"primary"}],page:"home",isActive:!0,icon:"",iconType:"none",iconPosition:"left",imageDisplayType:"image",unsplashQuery:"",fontFamily:"font-sans",fontWeight:"font-bold",textColor:"#ffffff",textGradient:"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",textStyle:"solid",backgroundColor:"#1f2937",backgroundGradient:"bg-gradient-to-r from-blue-600 to-purple-600",useGradient:!1,backgroundStyle:"solid",backgroundOpacity:100}),{data:F=[],isLoading:_}=Re({queryKey:["/api/admin/banners"],queryFn:async()=>{const h=await fetch("/api/admin/banners");if(!h.ok)throw new Error("Failed to fetch banners");let X=await h.json();return X&&typeof X=="object"&&"banners"in X&&(X=X.banners),Array.isArray(X)?X:X&&typeof X=="object"?Object.entries(X).flatMap(([Se,De])=>Array.isArray(De)?De.map($e=>({...$e,page:($e==null?void 0:$e.page)??Se})):[]):[]}}),{data:j=[]}=Re({queryKey:["available-pages"],queryFn:async()=>await wl(),staleTime:60*1e3,refetchOnWindowFocus:!0}),A=Array.isArray(j)&&j.length>0?j.sort((h,z)=>h.name.localeCompare(z.name)).map(h=>({value:h.id,label:h.name})):[{value:"home",label:"Home Page"},{value:"top-picks",label:"Top Picks"},{value:"services",label:"Services Page"},{value:"apps",label:"Apps & AI Apps"},{value:"categories",label:"Categories Page"},{value:"blog",label:"Blog Page"},{value:"videos",label:"Videos Page"},{value:"trending",label:"Trending Page"},{value:"wishlist",label:"Wishlist Page"},{value:"contact",label:"Contact Page"},{value:"prime-picks",label:"Prime Picks"},{value:"cue-picks",label:"Cue Picks"},{value:"value-picks",label:"Value Picks"},{value:"click-picks",label:"Click Picks"},{value:"deals-hub",label:"Deals Hub"},{value:"global-picks",label:"Global Picks"},{value:"travel-picks",label:"Travel Picks"},{value:"loot-box",label:"Loot Box"}],G=(Array.isArray(F)?F:[]).filter(h=>h.page===l);E.useEffect(()=>{try{const h=Array.isArray(F)?F:[];if(h.length===0)return;if(!h.some(X=>X.page===l)){const X=Array.from(new Set(h.map(De=>De.page))),Se=ls.map(De=>De.value).find(De=>X.includes(De))||X[0];Se&&Se!==l&&o(Se)}}catch{}},[F]);const J=be({mutationFn:async h=>{const z=await fetch("/api/admin/banners",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)});if(!z.ok){let X="Failed to create banner";try{const de=await z.json();X=de&&(de.error||de.message)||X}catch{try{const de=await z.text();de&&de.length>0&&(X=de)}catch{}}throw new Error(X)}return z.json()},onSuccess:()=>{n.invalidateQueries({queryKey:["/api/admin/banners"]}),n.invalidateQueries({queryKey:["/api/banners"]}),ls.forEach(h=>{n.invalidateQueries({queryKey:[`banners-${h.value}`]}),n.invalidateQueries({queryKey:[`/api/banners/${h.value}`]})}),n.invalidateQueries({predicate:h=>typeof h.queryKey[0]=="string"&&(h.queryKey[0].startsWith("banners-")||h.queryKey[0].startsWith("/api/banners/"))}),g(!1),b(null),I({title:"",subtitle:"",imageUrl:"",linkUrl:"",buttonText:"",showHomeLink:!0,homeLinkText:"Back to Home",buttons:[{text:"",url:"",style:"primary"}],page:"home",isActive:!0,icon:"",iconType:"none",iconPosition:"left",imageDisplayType:"image",unsplashQuery:"",fontFamily:"font-sans",fontWeight:"font-bold",textColor:"#ffffff",textGradient:"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",textStyle:"solid",backgroundColor:"#1f2937",backgroundGradient:"bg-gradient-to-r from-blue-600 to-purple-600",useGradient:!1,backgroundStyle:"solid",backgroundOpacity:100}),i({title:"Success",description:"Banner created successfully"})},onError:h=>{i({title:"Error",description:h.message,variant:"destructive"})}}),K=be({mutationFn:async({id:h,...z})=>{const X=await fetch(`/api/admin/banners/${h}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(z)});if(!X.ok){const de=await X.json();throw new Error(de.message||"Failed to update banner")}return X.json()},onSuccess:()=>{n.invalidateQueries({queryKey:["/api/admin/banners"]}),n.invalidateQueries({queryKey:["/api/banners"]}),ls.forEach(h=>{n.invalidateQueries({queryKey:[`banners-${h.value}`]}),n.invalidateQueries({queryKey:[`/api/banners/${h.value}`]})}),n.invalidateQueries({predicate:h=>typeof h.queryKey[0]=="string"&&(h.queryKey[0].startsWith("banners-")||h.queryKey[0].startsWith("/api/banners/"))}),b(null),g(!1),I({title:"",subtitle:"",imageUrl:"",linkUrl:"",buttonText:"",showHomeLink:!0,homeLinkText:"Back to Home",buttons:[{text:"",url:"",style:"primary"}],page:"home",isActive:!0,icon:"",iconType:"none",iconPosition:"left",imageDisplayType:"image",unsplashQuery:"",fontFamily:"font-sans",fontWeight:"font-bold",textColor:"#ffffff",textGradient:"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",textStyle:"solid",backgroundColor:"#1f2937",backgroundGradient:"bg-gradient-to-r from-blue-600 to-purple-600",useGradient:!1,backgroundStyle:"solid",backgroundOpacity:100}),i({title:"Success",description:"Banner updated successfully"})},onError:h=>{i({title:"Error",description:h.message,variant:"destructive"})}}),ee=be({mutationFn:async h=>{const z=await fetch(`/api/admin/banners/${h}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:"pickntrust2025"})});if(!z.ok){const X=await z.json().catch(()=>({message:"Failed to delete banner"}));throw new Error(X.message||"Failed to delete banner")}return z.json()},onSuccess:()=>{n.invalidateQueries({queryKey:["/api/admin/banners"]}),n.invalidateQueries({queryKey:["/api/banners"]}),ls.forEach(h=>{n.invalidateQueries({queryKey:[`banners-${h.value}`]}),n.invalidateQueries({queryKey:[`/api/banners/${h.value}`]})}),n.invalidateQueries({predicate:h=>typeof h.queryKey[0]=="string"&&(h.queryKey[0].startsWith("banners-")||h.queryKey[0].startsWith("/api/banners/"))}),i({title:"Success",description:"Banner deleted successfully"})},onError:h=>{i({title:"Error",description:h.message,variant:"destructive"})}}),ue=be({mutationFn:async h=>{const z=await fetch("/api/admin/banners/import-static",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({allowDuplicates:(h==null?void 0:h.allowDuplicates)??!1,replaceExisting:a})});if(!z.ok){let X="Failed to import static banners";try{const de=await z.json();X=de&&(de.error||de.message)||X}catch{try{const de=await z.text();de&&de.length>0&&(X=de)}catch{}}throw new Error(X)}return z.json()},onSuccess:async()=>{n.invalidateQueries({queryKey:["/api/admin/banners"]}),n.invalidateQueries({queryKey:["/api/banners"]}),ls.forEach(h=>{n.invalidateQueries({queryKey:[`banners-${h.value}`]}),n.invalidateQueries({queryKey:[`/api/banners/${h.value}`]})}),n.invalidateQueries({predicate:h=>typeof h.queryKey[0]=="string"&&(h.queryKey[0].startsWith("banners-")||h.queryKey[0].startsWith("/api/banners/"))}),i({title:"Success",description:"Imported static banners into dynamic management"});try{const h=await fetch("/api/admin/banners");if(h.ok){let X=await h.json();X&&typeof X=="object"&&"banners"in X&&(X=X.banners);const de=Array.isArray(X)?X:X&&typeof X=="object"?Object.entries(X).flatMap(([Se,De])=>Array.isArray(De)?De.map($e=>({...$e,page:($e==null?void 0:$e.page)??Se})):[]):[];if(de.length>0&&!de.some(Se=>Se.page===l)){const Se=Array.from(new Set(de.map(Me=>Me.page))),$e=ls.map(Me=>Me.value).find(Me=>Se.includes(Me))||Se[0];$e&&$e!==l&&(o($e),i({title:"Switched Page",description:`Showing imported banners on "${$e}"`}))}}}catch{}},onError:h=>{i({title:"Error",description:h.message,variant:"destructive"})}}),N=be({mutationFn:async h=>{const X=h.filter(Se=>Number.isFinite(Number(Se.id))).map(Se=>({id:Number(Se.id),display_order:Number(Se.displayOrder)})),de=await fetch("/api/admin/banners/reorder",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({banners:X})});if(!de.ok){let Se="Failed to reorder banners";try{const De=await de.json();De&&Array.isArray(De.missingIds)&&De.missingIds.length>0?Se=`Banner not found: ${De.missingIds.join(", ")}`:Se=De&&(De.error||De.message)||Se}catch{try{const De=await de.text();De&&De.length>0&&(Se=De)}catch{}}throw new Error(Se)}return de.json()},onSuccess:()=>{n.invalidateQueries({queryKey:["/api/admin/banners"]}),n.invalidateQueries({queryKey:["/api/banners"]}),ls.forEach(h=>{n.invalidateQueries({queryKey:[`banners-${h.value}`]}),n.invalidateQueries({queryKey:[`/api/banners/${h.value}`]})}),n.invalidateQueries({predicate:h=>typeof h.queryKey[0]=="string"&&(h.queryKey[0].startsWith("banners-")||h.queryKey[0].startsWith("/api/banners/"))}),i({title:"Success",description:"Banner order updated successfully"})},onError:h=>{i({title:"Error",description:h.message,variant:"destructive"})}}),$=async h=>{if(h){if(!h.type.startsWith("image/")){i({title:"Error",description:"Please select a valid image file",variant:"destructive"});return}if(h.size>5*1024*1024){i({title:"Error",description:"File size must be less than 5MB",variant:"destructive"});return}q(!0);try{const z=URL.createObjectURL(h),X=new FormData;X.append("image",h);try{const de=await fetch("/api/admin/upload-image",{method:"POST",body:X});if(de.ok){const Se=await de.json();I({...p,imageUrl:Se.imageUrl})}else I({...p,imageUrl:z})}catch{I({...p,imageUrl:z})}i({title:"Success",description:"Image uploaded successfully"})}catch(z){i({title:"Error",description:z.message||"Failed to upload image",variant:"destructive"})}finally{q(!1)}}},ge=async h=>{h.preventDefault(),x?K.mutate({id:x,...p}):J.mutate(p)},Pe=h=>{I({title:h.title,subtitle:h.subtitle||"",imageUrl:h.imageUrl,linkUrl:h.linkUrl||"",buttonText:h.buttonText||"",showHomeLink:!!(h.showHomeLink??1),homeLinkText:h.homeLinkText||"Back to Home",buttons:h.buttons||[{text:h.buttonText||"",url:h.linkUrl||"",style:"primary"}],page:h.page,isActive:h.isActive,icon:h.icon||"",iconType:h.iconType||"none",iconPosition:h.iconPosition||"left",imageDisplayType:h.imageDisplayType||"image",unsplashQuery:h.unsplashQuery||"",fontFamily:h.fontFamily||"font-sans",fontWeight:h.fontWeight||"font-bold",textColor:h.textColor||"#ffffff",textGradient:h.textGradient||"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",textStyle:h.textStyle||"solid",backgroundColor:h.backgroundColor||"#1f2937",backgroundGradient:h.backgroundGradient||"bg-gradient-to-r from-blue-600 to-purple-600",useGradient:h.useGradient||!1,backgroundStyle:h.backgroundStyle||"solid"}),b(h.id),g(!0)},Y=async h=>{confirm("Are you sure you want to delete this banner?")&&ee.mutate(h)},ke=async h=>{const z=h.imageUrl&&h.imageUrl.trim().length>0?h.imageUrl:"https://via.placeholder.com/1x1/transparent/transparent.png";K.mutate({id:h.id,title:h.title??"",subtitle:h.subtitle??"",imageUrl:z,linkUrl:h.linkUrl??"",buttonText:h.buttonText??"",page:h.page,isActive:!h.isActive,icon:h.icon??"",iconType:h.iconType??"none",iconPosition:h.iconPosition??"top",useGradient:typeof h.useGradient=="boolean"?h.useGradient:h.backgroundStyle==="gradient",backgroundGradient:h.backgroundGradient??"",backgroundOpacity:typeof h.backgroundOpacity=="number"?h.backgroundOpacity:100,imageDisplayType:h.imageDisplayType??"image",unsplashQuery:h.unsplashQuery??""})},_e=h=>{if(!h.destination)return;const z=Array.from(G),[X]=z.splice(h.source.index,1);z.splice(h.destination.index,0,X);const de=z.map((Se,De)=>({id:Se.id,displayOrder:De+1}));N.mutate(de)},je=h=>{B(z=>{const X=new Set(z);return X.has(h)?(X.delete(h),i({title:"Banner Shown",description:"Static banner is now visible on live site"})):(X.add(h),i({title:"Banner Hidden",description:"Static banner is now hidden from live site"})),localStorage.setItem("hiddenStaticBanners",JSON.stringify([...X])),window.dispatchEvent(new Event("hiddenBannersChanged")),X})},Be=async h=>{try{const z={title:h.title,subtitle:h.subtitle||h.description||"",linkUrl:h.ctaLink||h.linkUrl||"/",buttonText:h.ctaText||h.buttonText||"Learn More",showHomeLink:!0,homeLinkText:"Back to Home",buttons:[{text:h.ctaText||h.buttonText||"Learn More",url:h.ctaLink||h.linkUrl||"/",style:"primary"}],page:h.page||l,isActive:!0,imageDisplayType:"text-only",imageUrl:"https://via.placeholder.com/1x1/transparent/transparent.png",unsplashQuery:"",fontFamily:"font-sans",fontWeight:"font-bold",textColor:"#ffffff",textGradient:"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",textStyle:"solid",backgroundColor:"#1f2937",backgroundGradient:h.bgGradient?`bg-gradient-to-r ${h.bgGradient}`:"bg-gradient-to-r from-purple-600 to-orange-600",useGradient:!0,backgroundStyle:"gradient",icon:h.icon||"",iconType:h.icon?"fontawesome":"none",iconPosition:"top"};await J.mutateAsync(z),i({title:"Success",description:`"${h.title}" banner is now editable!`})}catch(z){i({title:"Error",description:z.message||"Failed to make banner editable",variant:"destructive"})}},m=(()=>{if(l==="home")return Jh.map(z=>({...z,id:z.id.toString(),isHardcoded:!0,page:"home"}));if(l==="travel-picks")try{return(Xh("travel-picks")||[]).filter(X=>X&&X.isActive).sort((X,de)=>(X.display_order||0)-(de.display_order||0)).map(X=>({id:`static-${X.id}`,title:X.title,subtitle:X.subtitle||"",image:X.imageUrl||"",ctaText:X.buttonText||"Learn More",ctaLink:X.linkUrl||"/",bgGradient:X.gradient||"",icon:X.icon||"",isHardcoded:!0,page:"travel-picks"}))}catch{return[]}const h={"prime-picks":{id:"fallback-prime-picks",title:"Prime Picks",subtitle:"Discover our premium selection of top-quality home dcor products handpicked just for you!",image:"",ctaText:"Explore Prime Deals",ctaLink:"/",bgGradient:"from-purple-600 via-pink-600 to-orange-500",icon:"fas fa-crown"},"value-picks":{id:"fallback-value-picks",title:"Value Picks",subtitle:"Maximum value for your money - Best bang for buck",image:"",ctaText:"Find Value Deals",ctaLink:"/",bgGradient:"from-green-600 via-emerald-600 to-teal-600",icon:"fas fa-gem"},"click-picks":{id:"fallback-click-picks",title:"Click Picks",subtitle:"One-click shopping for the most popular products",image:"",ctaText:"Quick Shop Now",ctaLink:"/",bgGradient:"from-blue-600 via-indigo-600 to-purple-500",icon:"fas fa-mouse-pointer"},"cue-picks":{id:"fallback-cue-picks",title:"Cue Picks",subtitle:"Trending products curated just for you",image:"",ctaText:"Browse Trends",ctaLink:"/",bgGradient:"from-red-600 via-pink-600 to-rose-600",icon:"fas fa-bullseye"},"global-picks":{id:"fallback-global-picks",title:"Global Picks",subtitle:"International favorites from around the world",image:"",ctaText:"Explore Global",ctaLink:"/",bgGradient:"from-cyan-600 via-blue-600 to-indigo-600",icon:"fas fa-globe"},"deals-hub":{id:"fallback-deals-hub",title:"Deals Hub",subtitle:"Your central destination for the best deals and discounts",image:"",ctaText:"Browse Deals",ctaLink:"/",bgGradient:"from-red-600 via-orange-600 to-yellow-500",icon:"fas fa-fire"},"loot-box":{id:"fallback-loot-box",title:"Loot Box",subtitle:"Surprise deals and mystery products waiting to be discovered",image:"",ctaText:"Open Loot Box",ctaLink:"/",bgGradient:"from-purple-600 via-indigo-600 to-blue-600",icon:"fas fa-box-open"}};return h[l]?[{...h[l],isHardcoded:!0,page:l}]:[]})();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Banner Management"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage sliding banners for all pages"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(D,{onClick:()=>g(!0),className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(tt,{className:"w-4 h-4 mr-2"}),"Add Banner"]}),e.jsxs("div",{className:"flex items-center gap-3 pr-2 border-r mr-2",children:[e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Allow duplicates"}),e.jsx(et,{checked:t,onCheckedChange:h=>s(h)})]}),e.jsxs("div",{className:"flex items-center gap-3 pr-2 border-r mr-2",children:[e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Replace existing"}),e.jsx(et,{checked:a,onCheckedChange:h=>r(h)})]}),e.jsx(D,{onClick:()=>ue.mutate({allowDuplicates:t}),disabled:ue.isPending,className:"bg-emerald-600 hover:bg-emerald-700",children:ue.isPending?"Importing":"Import Static"})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:A.map(h=>e.jsx(D,{variant:l===h.value?"default":"outline",size:"sm",onClick:()=>o(h.value),children:h.label},h.value))}),d&&e.jsxs(re,{children:[e.jsxs(we,{children:[e.jsx(Ne,{children:x?"Edit Banner":"Add New Banner"}),e.jsx(Ae,{children:x?"Update banner details":"Create a new banner for the selected page"})]}),e.jsx(ne,{children:e.jsxs("form",{onSubmit:ge,className:"space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(T,{htmlFor:"title",className:"text-gray-700 dark:text-gray-300",children:"Title (Optional)"}),e.jsx(W,{id:"title",value:p.title,onChange:h=>I({...p,title:h.target.value}),placeholder:"Banner title (optional for image-only banners)",className:"bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"})]}),e.jsxs("div",{children:[e.jsx(T,{htmlFor:"subtitle",className:"text-gray-700 dark:text-gray-300",children:"Subtitle"}),e.jsx(W,{id:"subtitle",value:p.subtitle,onChange:h=>I({...p,subtitle:h.target.value}),placeholder:"Banner subtitle (optional)",className:"bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"})]})]}),e.jsxs("div",{className:"border-t pt-4 mt-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:"Icon & Emoji Settings"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx(T,{htmlFor:"iconType",className:"text-gray-700 dark:text-gray-300",children:"Icon Type"}),e.jsx("select",{id:"iconType",value:p.iconType,onChange:h=>I({...p,iconType:h.target.value,icon:""}),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:Zh.map(h=>e.jsx("option",{value:h.value,children:h.label},h.value))})]}),p.iconType!=="none"&&e.jsxs("div",{children:[e.jsx(T,{htmlFor:"iconPosition",className:"text-gray-700 dark:text-gray-300",children:"Icon Position"}),e.jsx("select",{id:"iconPosition",value:p.iconPosition,onChange:h=>I({...p,iconPosition:h.target.value}),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:Yh.map(h=>e.jsx("option",{value:h.value,children:h.label},h.value))})]}),p.iconType!=="none"&&e.jsxs("div",{children:[e.jsx(T,{htmlFor:"icon",className:"text-gray-700 dark:text-gray-300",children:p.iconType==="emoji"?"Custom Emoji":"Custom Font Awesome Class"}),e.jsx(W,{id:"icon",value:p.icon,onChange:h=>I({...p,icon:h.target.value}),placeholder:p.iconType==="emoji"?" Enter emoji":"fas fa-star",className:"bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"})]})]}),p.iconType==="emoji"&&e.jsxs("div",{className:"mb-4",children:[e.jsx(T,{className:"text-gray-700 dark:text-gray-300 mb-3 block",children:"Emoji Presets"}),e.jsx("div",{className:"grid grid-cols-10 gap-2",children:ef.map((h,z)=>e.jsx("button",{type:"button",className:`p-2 text-2xl rounded border-2 hover:scale-110 transition-transform ${p.icon===h.value?"border-blue-500 bg-blue-50 dark:bg-blue-900":"border-gray-300 dark:border-gray-600 hover:border-blue-300"}`,onClick:()=>I({...p,icon:h.value}),title:h.label,children:h.value},z))})]}),p.iconType==="fontawesome"&&e.jsxs("div",{className:"mb-4",children:[e.jsx(T,{className:"text-gray-700 dark:text-gray-300 mb-3 block",children:"Font Awesome Presets"}),e.jsx("div",{className:"grid grid-cols-6 gap-2",children:tf.map((h,z)=>e.jsxs("button",{type:"button",className:`p-3 rounded border-2 hover:scale-105 transition-transform flex items-center justify-center ${p.icon===h.value?"border-blue-500 bg-blue-50 dark:bg-blue-900":"border-gray-300 dark:border-gray-600 hover:border-blue-300"}`,onClick:()=>I({...p,icon:h.value}),title:h.label,children:[e.jsx("i",{className:`${h.value} text-lg`}),e.jsx("span",{className:"ml-2 text-sm",children:h.label})]},z))}),e.jsxs("div",{className:"mt-4",children:[e.jsx(T,{htmlFor:"customFontAwesome",className:"text-gray-700 dark:text-gray-300",children:"Custom FontAwesome Class"}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx(W,{id:"customFontAwesome",value:p.icon||"",onChange:h=>I({...p,icon:h.target.value}),placeholder:"e.g., fas fa-star, fab fa-facebook, far fa-heart",className:"flex-1 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"}),p.icon&&e.jsx("div",{className:"flex items-center justify-center w-12 h-10 border border-gray-300 dark:border-gray-600 rounded bg-gray-50 dark:bg-gray-700",children:e.jsx("i",{className:`${p.icon} text-lg text-gray-700 dark:text-gray-300`})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter any FontAwesome class (fas, far, fab, fal, fad). Examples: fas fa-star, fab fa-twitter, far fa-heart"})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(T,{className:"text-gray-700 dark:text-gray-300",children:"Banner Image (optional)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(D,{type:"button",size:"sm",variant:R==="url"?"default":"outline",onClick:()=>Z("url"),children:"URL"}),e.jsx(D,{type:"button",size:"sm",variant:R==="upload"?"default":"outline",onClick:()=>Z("upload"),children:"Upload"})]})]}),R==="url"?e.jsx(W,{id:"imageUrl",value:p.imageUrl,onChange:h=>I({...p,imageUrl:h.target.value}),placeholder:"https://example.com/banner-image.jpg",className:"bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"}):e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{type:"file",accept:"image/*",onChange:h=>{var X;const z=(X=h.target.files)==null?void 0:X[0];z&&$(z)},disabled:C,className:"cursor-pointer bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white"}),C&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-600 dark:text-blue-400",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 dark:border-blue-400"}),"Uploading image..."]}),p.imageUrl&&e.jsxs("div",{className:"text-sm text-green-600 dark:text-green-400",children:[e.jsx("i",{className:"fas fa-check"})," Image uploaded successfully"]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(T,{htmlFor:"linkUrl",className:"text-gray-700 dark:text-gray-300",children:"Link URL"}),e.jsx(W,{id:"linkUrl",value:p.linkUrl,onChange:h=>I({...p,linkUrl:h.target.value}),placeholder:"https://example.com (optional)",className:"bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"})]}),e.jsxs("div",{children:[e.jsx(T,{htmlFor:"buttonText",className:"text-gray-700 dark:text-gray-300",children:"Button Text"}),e.jsx(W,{id:"buttonText",value:p.buttonText,onChange:h=>I({...p,buttonText:h.target.value}),placeholder:"Shop Now (optional)",className:"bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{id:"showHomeLink",type:"checkbox",checked:p.showHomeLink,onChange:h=>I({...p,showHomeLink:h.target.checked})}),e.jsx(T,{htmlFor:"showHomeLink",className:"text-gray-700 dark:text-gray-300",children:'Show "Back to Home" link'})]}),p.showHomeLink&&e.jsxs("div",{children:[e.jsx(T,{htmlFor:"homeLinkText",className:"text-gray-700 dark:text-gray-300",children:"Home Link Text"}),e.jsx(W,{id:"homeLinkText",value:p.homeLinkText,onChange:h=>I({...p,homeLinkText:h.target.value}),placeholder:"Back to Home",className:"bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"})]})]}),e.jsxs("div",{children:[e.jsx(T,{htmlFor:"page",className:"text-gray-700 dark:text-gray-300",children:"Page"}),e.jsx("select",{id:"page",value:p.page,onChange:h=>I({...p,page:h.target.value}),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",required:!0,children:A.map(h=>e.jsx("option",{value:h.value,children:h.label},h.value))})]}),e.jsxs("div",{className:"border-t pt-4 mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Banner Buttons"}),e.jsxs(D,{type:"button",size:"sm",onClick:()=>{const h=[...p.buttons,{text:"",url:"",style:"primary"}];I({...p,buttons:h})},children:[e.jsx(tt,{className:"w-4 h-4 mr-2"}),"Add Button"]})]}),p.buttons.map((h,z)=>e.jsxs("div",{className:"border rounded-lg p-4 mb-4 bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-600",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white",children:["Button ",z+1]}),p.buttons.length>1&&e.jsx(D,{type:"button",size:"sm",variant:"outline",onClick:()=>{const X=p.buttons.filter((de,Se)=>Se!==z);I({...p,buttons:X})},className:"text-red-600 hover:text-red-700 border-red-300 hover:border-red-400",children:e.jsx(ds,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(T,{htmlFor:`buttonText-${z}`,className:"text-gray-700 dark:text-gray-300",children:"Button Text"}),e.jsx(W,{id:`buttonText-${z}`,value:h.text,onChange:X=>{const de=[...p.buttons];de[z].text=X.target.value,I({...p,buttons:de})},placeholder:"Shop Now",className:"bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"})]}),e.jsxs("div",{children:[e.jsx(T,{htmlFor:`buttonUrl-${z}`,className:"text-gray-700 dark:text-gray-300",children:"Button URL"}),e.jsx(W,{id:`buttonUrl-${z}`,value:h.url,onChange:X=>{const de=[...p.buttons];de[z].url=X.target.value,I({...p,buttons:de})},placeholder:"https://example.com",className:"bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"})]}),e.jsxs("div",{children:[e.jsx(T,{htmlFor:`buttonStyle-${z}`,className:"text-gray-700 dark:text-gray-300",children:"Button Style"}),e.jsxs("select",{id:`buttonStyle-${z}`,value:h.style,onChange:X=>{const de=[...p.buttons];de[z].style=X.target.value,I({...p,buttons:de})},className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"none",children:"None"}),e.jsx("option",{value:"primary",children:"Primary"}),e.jsx("option",{value:"secondary",children:"Secondary"}),e.jsx("option",{value:"outline",children:"Outline"})]})]})]})]},z))]}),e.jsxs("div",{className:"border-t pt-4 mt-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:"Styling Options"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx(T,{htmlFor:"imageDisplayType",className:"text-gray-700 dark:text-gray-300",children:"Image Display"}),e.jsx("select",{id:"imageDisplayType",value:p.imageDisplayType,onChange:h=>I({...p,imageDisplayType:h.target.value}),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:Gn.map(h=>e.jsx("option",{value:h.value,children:h.label},h.value))})]}),p.imageDisplayType==="unsplash"&&e.jsxs("div",{children:[e.jsx(T,{htmlFor:"unsplashQuery",className:"text-gray-700 dark:text-gray-300",children:"Unsplash Search Query"}),e.jsx(W,{id:"unsplashQuery",value:p.unsplashQuery,onChange:h=>I({...p,unsplashQuery:h.target.value}),placeholder:"e.g., nature, technology, business",className:"bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx(T,{htmlFor:"fontFamily",className:"text-gray-700 dark:text-gray-300",children:"Font Family"}),e.jsx("select",{id:"fontFamily",value:p.fontFamily,onChange:h=>I({...p,fontFamily:h.target.value}),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:Wn.map(h=>e.jsx("option",{value:h.value,children:h.label},h.value))})]}),e.jsxs("div",{children:[e.jsx(T,{htmlFor:"fontWeight",className:"text-gray-700 dark:text-gray-300",children:"Font Weight"}),e.jsx("select",{id:"fontWeight",value:p.fontWeight,onChange:h=>I({...p,fontWeight:h.target.value}),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:zn.map(h=>e.jsx("option",{value:h.value,children:h.label},h.value))})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[e.jsx(T,{className:"text-gray-700 dark:text-gray-300",children:"Background Style"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(D,{type:"button",size:"sm",variant:p.backgroundStyle==="solid"?"default":"outline",onClick:()=>I({...p,backgroundStyle:"solid",useGradient:!1}),children:"Solid Color"}),e.jsx(D,{type:"button",size:"sm",variant:p.backgroundStyle==="gradient"?"default":"outline",onClick:()=>I({...p,backgroundStyle:"gradient",useGradient:!0}),children:"Gradient"}),e.jsx(D,{type:"button",size:"sm",variant:p.backgroundStyle==="palette"?"default":"outline",onClick:()=>I({...p,backgroundStyle:"palette",useGradient:!1}),children:"Color Palette"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs(T,{className:"text-gray-700 dark:text-gray-300",children:["Background Opacity: ",p.backgroundOpacity??100,"%"]}),e.jsx("input",{type:"range",min:"10",max:"100",step:"10",value:p.backgroundOpacity??100,onChange:h=>I({...p,backgroundOpacity:parseInt(h.target.value,10)}),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsx("span",{children:"10% (Very transparent)"}),e.jsx("span",{children:"100% (Fully opaque)"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[e.jsx(T,{className:"text-gray-700 dark:text-gray-300",children:"Text Style"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(D,{type:"button",size:"sm",variant:p.textStyle==="solid"?"default":"outline",onClick:()=>I({...p,textStyle:"solid"}),children:"Solid Color"}),e.jsx(D,{type:"button",size:"sm",variant:p.textStyle==="gradient"?"default":"outline",onClick:()=>I({...p,textStyle:"gradient"}),children:"Gradient"}),e.jsx(D,{type:"button",size:"sm",variant:p.textStyle==="palette"?"default":"outline",onClick:()=>I({...p,textStyle:"palette"}),children:"Color Palette"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[p.textStyle==="solid"&&e.jsxs("div",{children:[e.jsx(T,{htmlFor:"textColor",className:"text-gray-700 dark:text-gray-300",children:"Text Color"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(W,{type:"color",id:"textColor",value:p.textColor,onChange:h=>I({...p,textColor:h.target.value}),className:"w-16 h-10 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600"}),e.jsx(W,{value:p.textColor,onChange:h=>I({...p,textColor:h.target.value}),placeholder:"#ffffff",className:"flex-1 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"})]})]}),p.textStyle==="gradient"&&e.jsxs("div",{children:[e.jsx(T,{htmlFor:"textGradient",className:"text-gray-700 dark:text-gray-300",children:"Text Gradient"}),e.jsx("select",{id:"textGradient",value:p.textGradient,onChange:h=>I({...p,textGradient:h.target.value}),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:Xn.map(h=>e.jsx("option",{value:h.value,children:h.label},h.value))}),e.jsx("div",{className:"grid grid-cols-6 gap-2 mt-2",children:Xn.map(h=>e.jsx("button",{type:"button",className:`h-10 rounded border-2 ${p.textGradient===h.value?"border-gray-900 dark:border-white":"border-gray-300 dark:border-gray-600"} flex items-center justify-center bg-white dark:bg-gray-700`,onClick:()=>I({...p,textGradient:h.value}),title:h.label,children:e.jsx("span",{className:`${h.value} font-semibold`,children:"Aa"})},h.value))})]})]}),p.textStyle==="palette"&&e.jsxs("div",{className:"mt-4",children:[e.jsx(T,{className:"text-gray-700 dark:text-gray-300 mb-3 block",children:"Theme Colors"}),e.jsx("div",{className:"grid grid-cols-10 gap-2 mb-4",children:Kn.map((h,z)=>e.jsx("button",{type:"button",className:`w-8 h-8 rounded border-2 hover:scale-110 transition-transform ${p.textColor===h?"border-gray-900 dark:border-white shadow-lg":"border-gray-300 dark:border-gray-600"}`,style:{backgroundColor:h},onClick:()=>I({...p,textColor:h}),title:h},z))}),e.jsx(T,{className:"text-gray-700 dark:text-gray-300 mb-3 block",children:"Standard Colors"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:Qn.map((h,z)=>e.jsx("button",{type:"button",className:`w-8 h-8 rounded border-2 hover:scale-110 transition-transform ${p.textColor===h?"border-gray-900 dark:border-white shadow-lg":"border-gray-300 dark:border-gray-600"}`,style:{backgroundColor:h},onClick:()=>I({...p,textColor:h}),title:h},z))})]})]}),e.jsxs("div",{className:"grid md:grid-cols-1 gap-4",children:[p.backgroundStyle==="solid"&&e.jsxs("div",{children:[e.jsx(T,{htmlFor:"backgroundColor",className:"text-gray-700 dark:text-gray-300",children:"Background Color"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(W,{type:"color",id:"backgroundColor",value:p.backgroundColor,onChange:h=>I({...p,backgroundColor:h.target.value}),className:"w-16 h-10 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600"}),e.jsx(W,{value:p.backgroundColor,onChange:h=>I({...p,backgroundColor:h.target.value}),placeholder:"#000000",className:"flex-1 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"})]})]}),p.backgroundStyle==="gradient"&&e.jsxs("div",{children:[e.jsx(T,{htmlFor:"backgroundGradient",className:"text-gray-700 dark:text-gray-300",children:"Gradient Preset"}),e.jsx("select",{id:"backgroundGradient",value:p.backgroundGradient,onChange:h=>I({...p,backgroundGradient:h.target.value}),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:Hn.map(h=>e.jsx("option",{value:h.value,children:h.label},h.value))}),e.jsx("div",{className:"grid grid-cols-6 gap-2 mt-2",children:Hn.map(h=>e.jsx("button",{type:"button",className:`w-10 h-10 rounded border-2 ${p.backgroundGradient===h.value?"border-gray-900 dark:border-white":"border-gray-300 dark:border-gray-600"} overflow-hidden`,onClick:()=>I({...p,backgroundGradient:h.value}),title:h.label,children:e.jsx("div",{className:`w-full h-full ${h.value}`})},h.value))})]})]}),p.backgroundStyle==="palette"&&e.jsxs("div",{className:"mt-4",children:[e.jsx(T,{className:"text-gray-700 dark:text-gray-300 mb-3 block",children:"Theme Colors"}),e.jsx("div",{className:"grid grid-cols-10 gap-2 mb-4",children:Kn.map((h,z)=>e.jsx("button",{type:"button",className:`w-8 h-8 rounded border-2 hover:scale-110 transition-transform ${p.backgroundColor===h?"border-gray-900 dark:border-white shadow-lg":"border-gray-300 dark:border-gray-600"}`,style:{backgroundColor:h},onClick:()=>I({...p,backgroundColor:h}),title:h},z))}),e.jsx(T,{className:"text-gray-700 dark:text-gray-300 mb-3 block",children:"Standard Colors"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:Qn.map((h,z)=>e.jsx("button",{type:"button",className:`w-8 h-8 rounded border-2 hover:scale-110 transition-transform ${p.backgroundColor===h?"border-gray-900 dark:border-white shadow-lg":"border-gray-300 dark:border-gray-600"}`,style:{backgroundColor:h},onClick:()=>I({...p,backgroundColor:h}),title:h},z))})]})]})]}),e.jsxs("div",{children:[e.jsx(T,{className:"text-gray-700 dark:text-gray-300",children:"Banner Preview"}),e.jsxs("div",{className:"mt-2 border rounded-lg overflow-hidden",children:[e.jsxs("div",{className:`relative w-full h-48 flex items-center justify-center ${p.backgroundStyle==="gradient"?p.backgroundGradient:""} ${p.fontFamily} ${p.fontWeight}`,style:{backgroundColor:p.backgroundStyle==="solid"||p.backgroundStyle==="palette"?p.backgroundColor:void 0,color:p.textStyle==="solid"||p.textStyle==="palette"?p.textColor:void 0,opacity:p.imageDisplayType==="text-only"?(p.backgroundOpacity??100)/100:void 0},children:[e.jsxs("div",{className:"absolute inset-0",children:[(p.imageDisplayType==="image"||p.imageDisplayType==="unsplash"||p.imageDisplayType==="image-gradient")&&e.jsxs(e.Fragment,{children:[p.imageDisplayType==="unsplash"&&p.unsplashQuery?e.jsx("img",{src:`https://picsum.photos/800/400?random=${encodeURIComponent(p.unsplashQuery)}`,alt:"Unsplash background",className:"w-full h-full object-cover",style:{opacity:(p.backgroundOpacity??100)/100},onError:h=>{h.currentTarget.src="https://picsum.photos/800/400?random=1"}}):(p.imageDisplayType==="image"||p.imageDisplayType==="image-gradient")&&p.imageUrl?e.jsx("img",{src:p.imageUrl,alt:"Custom background",className:"w-full h-full object-cover",style:{opacity:(p.backgroundOpacity??100)/100},onError:h=>{h.currentTarget.src="https://via.placeholder.com/800x400/6B7280/FFFFFF?text=Image+Not+Found"}}):null,(p.imageDisplayType==="image-gradient"||p.useGradient&&(p.imageDisplayType==="image"||p.imageDisplayType==="unsplash"))&&e.jsx("div",{className:`absolute inset-0 ${p.backgroundStyle==="gradient"?p.backgroundGradient:"bg-gradient-to-r from-black/40 to-transparent"}`,style:{opacity:(p.backgroundOpacity??60)/100}})]}),p.imageDisplayType==="text-only"&&e.jsx("div",{className:`w-full h-full ${p.backgroundStyle==="gradient"?p.backgroundGradient:"bg-gradient-to-r from-gray-600 to-gray-800"}`,style:{opacity:(p.backgroundOpacity??100)/100}})]}),e.jsxs("div",{className:"relative z-10 text-center px-6",children:[p.iconType!=="none"&&p.icon&&p.iconPosition==="top"&&e.jsx("div",{className:"mb-3",children:p.iconType==="emoji"?e.jsx("span",{className:"text-4xl",children:p.icon}):e.jsx("i",{className:`${p.icon} text-3xl`})}),e.jsxs("h2",{className:`text-2xl mb-2 flex items-center justify-center gap-3 ${p.textStyle==="gradient"?p.textGradient:""}`,children:[p.iconType!=="none"&&p.icon&&p.iconPosition==="left"&&e.jsx("span",{className:"flex-shrink-0",children:p.iconType==="emoji"?e.jsx("span",{className:"text-2xl",children:p.icon}):e.jsx("i",{className:`${p.icon} text-xl`})}),e.jsx("span",{children:p.title||"Banner Title"}),p.iconType!=="none"&&p.icon&&p.iconPosition==="right"&&e.jsx("span",{className:"flex-shrink-0",children:p.iconType==="emoji"?e.jsx("span",{className:"text-2xl",children:p.icon}):e.jsx("i",{className:`${p.icon} text-xl`})})]}),p.subtitle&&e.jsx("p",{className:`text-lg opacity-90 mb-4 ${p.textStyle==="gradient"?p.textGradient:""}`,children:p.subtitle}),p.buttons.filter(h=>h.text.trim()&&(h.style??"primary")!=="none").length>0&&e.jsx("div",{className:"flex flex-wrap gap-3 justify-center",children:p.buttons.filter(h=>h.text.trim()&&(h.style??"primary")!=="none").map((h,z)=>{const X=de=>{switch(de){case"primary":return"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all";case"secondary":return"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all";case"outline":return"px-4 py-2 bg-transparent border-2 border-current rounded-lg hover:bg-white hover:bg-opacity-20 transition-all";case"none":return"hidden";default:return"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all"}};return e.jsx("button",{className:X(h.style||"primary"),style:h.style==="outline"?{color:p.textColor,borderColor:p.textColor}:void 0,children:h.text},z)})}),p.buttonText&&p.buttons.filter(h=>h.text.trim()&&(h.style??"primary")!=="none").length===0&&e.jsx("button",{className:"px-4 py-2 bg-white bg-opacity-20 rounded-lg border border-current hover:bg-opacity-30 transition-all",style:{color:p.textColor},children:p.buttonText})]})]}),e.jsx("div",{className:"p-3 bg-gray-50 text-sm text-gray-600",children:e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("span",{children:["Display: ",(c=Gn.find(h=>h.value===p.imageDisplayType))==null?void 0:c.label]}),e.jsxs("span",{children:["Font: ",(y=Wn.find(h=>h.value===p.fontFamily))==null?void 0:y.label]}),e.jsxs("span",{children:["Weight: ",(O=zn.find(h=>h.value===p.fontWeight))==null?void 0:O.label]}),e.jsxs("span",{children:["Background: ",p.backgroundStyle==="gradient"?"Gradient":p.backgroundStyle==="palette"?"Color Palette":"Solid Color"]}),e.jsxs("span",{children:["Text: ",p.textStyle==="gradient"?"Gradient":p.textStyle==="palette"?"Color Palette":"Solid Color"]}),e.jsxs("span",{children:["Buttons: ",p.buttons.filter(h=>h.text.trim()).length]}),p.imageDisplayType==="unsplash"&&p.unsplashQuery&&e.jsxs("span",{children:['Query: "',p.unsplashQuery,'"']})]})})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(D,{type:"submit",disabled:J.isPending||K.isPending,children:[e.jsx(Ys,{className:"w-4 h-4 mr-2"}),x?"Update Banner":"Create Banner"]}),e.jsxs(D,{type:"button",variant:"outline",onClick:()=>{g(!1),b(null),I({title:"",subtitle:"",imageUrl:"",linkUrl:"",buttonText:"",showHomeLink:!0,homeLinkText:"Back to Home",buttons:[{text:"",url:"",style:"primary"}],page:"home",isActive:!0,imageDisplayType:"image",unsplashQuery:"",fontFamily:"font-sans",fontWeight:"font-bold",textColor:"#ffffff",textGradient:"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",textStyle:"solid",backgroundColor:"#1f2937",backgroundGradient:"bg-gradient-to-r from-blue-600 to-purple-600",useGradient:!1,backgroundStyle:"solid"})},children:[e.jsx(ds,{className:"w-4 h-4 mr-2"}),"Cancel"]})]})]})})]}),m.length>0&&e.jsxs(re,{children:[e.jsxs(we,{children:[e.jsxs(Ne,{className:"flex items-center gap-2",children:[e.jsx(ua,{className:"w-5 h-5"}),"Static ",(Q=A.find(h=>h.value===l))==null?void 0:Q.label," Banners",e.jsx(Ce,{variant:"outline",children:m.length})]}),e.jsx(Ae,{children:'These are hardcoded banners currently displayed on the page. Click "Make Editable" to convert them to manageable banners.'})]}),e.jsx(ne,{children:e.jsx("div",{className:"space-y-4",children:m.map((h,z)=>e.jsx("div",{className:"border rounded-lg p-4 bg-gray-50 dark:bg-gray-800/50",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-20 h-12 rounded overflow-hidden bg-gray-100",children:e.jsx("img",{src:h.image,alt:h.title,className:"w-full h-full object-cover",onError:X=>{X.currentTarget.src="/placeholder-banner.jpg"}})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:h.title}),e.jsx(Ce,{variant:"secondary",children:"Hardcoded"})]}),h.subtitle&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:h.subtitle}),h.description&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:h.description}),h.ctaLink&&e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(vi,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-500 truncate",children:h.ctaLink})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{size:"sm",variant:"outline",onClick:()=>je(h.id),className:w.has(h.id)?"text-gray-500":"text-green-600",children:w.has(h.id)?e.jsx(kt,{className:"w-4 h-4"}):e.jsx($t,{className:"w-4 h-4"})}),e.jsxs(D,{size:"sm",onClick:()=>Be(h),className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Lt,{className:"w-4 h-4 mr-1"}),"Make Editable"]})]})]})},`hardcoded-${h.id}`))})})]}),e.jsxs(re,{children:[e.jsxs(we,{children:[e.jsxs(Ne,{className:"flex items-center gap-2",children:[e.jsx(Zt,{className:"w-5 h-5"}),"Dynamic ",(V=A.find(h=>h.value===l))==null?void 0:V.label," Banners",e.jsx(Ce,{variant:"secondary",children:G.length})]}),e.jsx(Ae,{children:G.length>1?"Multiple banners will slide automatically":G.length===1?"Single banner will stay static":"No banners configured for this page"})]}),e.jsx(ne,{children:_?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Loading banners..."})]}):G.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Zt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsxs("p",{className:"text-gray-600",children:["No banners found for ",(se=A.find(h=>h.value===l))==null?void 0:se.label]}),e.jsxs(D,{onClick:()=>g(!0),className:"mt-4",variant:"outline",children:[e.jsx(tt,{className:"w-4 h-4 mr-2"}),"Add First Banner"]})]}):e.jsx(Co,{onDragEnd:_e,children:e.jsx(Oo,{droppableId:"banners",children:h=>e.jsxs("div",{...h.droppableProps,ref:h.innerRef,className:"space-y-4",children:[G.map((z,X)=>e.jsx(Eo,{draggableId:z.id.toString(),index:X,children:(de,Se)=>e.jsx("div",{ref:de.innerRef,...de.draggableProps,className:`border rounded-lg p-4 bg-white dark:bg-gray-800 ${Se.isDragging?"shadow-lg":"shadow-sm"}`,children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{...de.dragHandleProps,className:"cursor-move",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full"}),e.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full"}),e.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full"})]})}),e.jsx("div",{className:"w-20 h-12 rounded overflow-hidden bg-gray-100",children:e.jsx("img",{src:z.imageUrl,alt:z.title,className:"w-full h-full object-cover",onError:De=>{De.currentTarget.src="/placeholder-banner.jpg"}})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:z.title}),e.jsx(Ce,{variant:z.isActive?"default":"secondary",children:z.isActive?"Active":"Inactive"})]}),z.subtitle&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:z.subtitle}),z.linkUrl&&e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(vi,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-500 truncate",children:z.linkUrl})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{size:"sm",variant:"outline",onClick:()=>ke(z),disabled:K.isPending,children:z.isActive?e.jsx($t,{className:"w-4 h-4"}):e.jsx(kt,{className:"w-4 h-4"})}),e.jsx(D,{size:"sm",variant:"outline",onClick:()=>Pe(z),children:e.jsx(Lt,{className:"w-4 h-4"})}),e.jsx(D,{size:"sm",variant:"outline",onClick:()=>Y(z.id),disabled:ee.isPending,className:"text-red-600 hover:text-red-700",children:e.jsx(Yt,{className:"w-4 h-4"})})]})]})})},z.id)),h.placeholder]})})})})]}),u&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Banner Preview"}),e.jsx(D,{variant:"outline",size:"sm",onClick:()=>f(null),children:e.jsx(ds,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"relative rounded-lg overflow-hidden",children:[(()=>{const z=(X=>{if(!X)return"";const de=X.trim();return/^https?:\/\//i.test(de)?`/api/image-proxy?url=${encodeURIComponent(de)}`:de})(u.imageUrl);return e.jsx("img",{src:z,alt:u.title||"Banner image",className:"w-full h-64 object-cover",onError:X=>{X.currentTarget.src="/api/placeholder/1200/400?text=Banner"}})})(),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center",children:e.jsxs("div",{className:"text-center text-white",children:[u.title&&u.title.trim().length>0&&e.jsx("h4",{className:"text-2xl font-bold mb-2",children:u.title}),u.subtitle&&u.subtitle.trim().length>0&&e.jsx("p",{className:"text-lg mb-4",children:u.subtitle}),u.buttonText&&u.buttonText.trim().length>0&&e.jsx(D,{className:"bg-white text-black hover:bg-gray-100",children:u.buttonText})]})})]})]})})})]})}function af(){const{toast:t}=ht(),s=bt(),[a,r]=E.useState(null),[i,n]=E.useState({name:"",baseUrl:"",commissionRate:0,priorityScore:50}),[l,o]=E.useState(!1),[d,g]=E.useState(null),[x,b]=E.useState(""),[u,f]=E.useState({adminPanelEnabled:!0,csvUploadEnabled:!0,googleSheetsEnabled:!1,autoOptimizeEnabled:!0,syncIntervalMinutes:5}),[w,B]=E.useState("list"),[C,q]=E.useState(""),[R,Z]=E.useState(!1),[p,I]=E.useState({name:"",baseUrl:"",commissionRate:0,affiliateTag:"",trackingParams:""}),{data:F}=Re({queryKey:["/api/admin/commission-settings"],queryFn:async()=>{const m=await fetch("/api/admin/commission-settings");if(!m.ok)throw new Error("Failed to fetch settings");return m.json()}}),{data:_=[],isLoading:j}=Re({queryKey:["/api/admin/affiliate-networks"],queryFn:async()=>{const m=await fetch("/api/admin/affiliate-networks");if(!m.ok)throw new Error("Failed to fetch networks");return m.json()}}),A=_.filter(m=>m.name.toLowerCase().includes(C.toLowerCase())||m.baseUrl.toLowerCase().includes(C.toLowerCase()));E.useEffect(()=>{F&&f(F)},[F]);const G=be({mutationFn:async m=>{const c=await fetch(`/api/admin/affiliate-networks/${m.networkId}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)});if(!c.ok)throw new Error("Failed to update commission");return c.json()},onSuccess:()=>{s.invalidateQueries({queryKey:["/api/admin/affiliate-networks"]}),r(null),t({title:"Success",description:"Commission rate updated successfully!"})},onError:m=>{t({title:"Error",description:m.message,variant:"destructive"})}}),J=be({mutationFn:async m=>{const c=await fetch("/api/admin/affiliate-networks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)});if(!c.ok)throw new Error("Failed to add network");return c.json()},onSuccess:()=>{s.invalidateQueries({queryKey:["/api/admin/affiliate-networks"]}),n({name:"",baseUrl:"",commissionRate:0,priorityScore:50}),o(!1),t({title:"Success",description:"Affiliate network added successfully!"})},onError:m=>{t({title:"Error",description:m.message,variant:"destructive"})}}),K=be({mutationFn:async m=>{const y=await fetch(`/api/admin/affiliate-networks/${m}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:"pickntrust2025"})});if(!y.ok)throw new Error("Failed to delete network");return y.json()},onSuccess:()=>{s.invalidateQueries({queryKey:["/api/admin/affiliate-networks"]}),t({title:"Success",description:"Affiliate network deleted successfully!"})},onError:m=>{t({title:"Error",description:m.message,variant:"destructive"})}}),ee=be({mutationFn:async()=>{const m=await fetch("/api/admin/optimize-commissions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(!m.ok)throw new Error("Failed to optimize products");return m.json()},onSuccess:m=>{t({title:"Optimization Complete",description:`Optimized ${m.optimizedCount} products for best commission rates!`})},onError:m=>{t({title:"Error",description:m.message,variant:"destructive"})}}),ue=be({mutationFn:async m=>{const c=new FormData;c.append("csvFile",m);const y=await fetch("/api/admin/upload-commission-csv",{method:"POST",body:c});if(!y.ok)throw new Error("Failed to upload CSV");return y.json()},onSuccess:m=>{s.invalidateQueries({queryKey:["/api/admin/affiliate-networks"]}),g(null),t({title:"CSV Upload Complete",description:`Processed ${m.processedRows} rows, ${m.successCount} successful updates!`})},onError:m=>{t({title:"Error",description:m.message,variant:"destructive"})}}),N=be({mutationFn:async m=>{const c=await fetch("/api/admin/sync-google-sheets",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sheetUrl:m,syncInterval:u.syncIntervalMinutes})});if(!c.ok)throw new Error("Failed to sync Google Sheets");return c.json()},onSuccess:m=>{s.invalidateQueries({queryKey:["/api/admin/affiliate-networks"]}),t({title:"Google Sheets Sync Complete",description:`Synced ${m.updatedCount} commission rates from Google Sheets!`})},onError:m=>{t({title:"Error",description:m.message,variant:"destructive"})}}),$=be({mutationFn:async m=>{const c=await fetch("/api/admin/commission-settings",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)});if(!c.ok)throw new Error("Failed to update settings");return c.json()},onSuccess:()=>{t({title:"Success",description:"Commission settings updated successfully!"})},onError:m=>{t({title:"Error",description:m.message,variant:"destructive"})}}),ge=(m,c)=>{if(!u.adminPanelEnabled){t({title:"Disabled",description:"Admin panel updates are currently disabled",variant:"destructive"});return}const y=_.find(O=>O.id===m);y&&G.mutate({networkId:m,commissionRate:c.commissionRate??y.commissionRate,priorityScore:c.priorityScore??y.priorityScore,isActive:c.isActive??y.isActive})},Pe=()=>{ee.mutate()},Y=m=>{const c={...u,...m};f(c),$.mutate(c)},ke=()=>{if(!i.name||!i.baseUrl){t({title:"Error",description:"Please fill in all required fields",variant:"destructive"});return}J.mutate({...i,priorityScore:i.priorityScore||50})},_e=()=>{if(!d){t({title:"Error",description:"Please select a CSV file",variant:"destructive"});return}ue.mutate(d)},je=()=>{if(!x){t({title:"Error",description:"Please enter a Google Sheets URL",variant:"destructive"});return}N.mutate(x)},Be=()=>_.filter(m=>m.isActive).sort((m,c)=>c.commissionRate-m.commissionRate)[0];if(j)return e.jsx(re,{children:e.jsx(ne,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-2",children:"Loading commission data..."})]})})});const S=Be();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(re,{className:"bg-gradient-to-r from-green-900/20 to-blue-900/20 border-green-700",children:[e.jsxs(we,{children:[e.jsxs(Ne,{className:"flex items-center gap-3 text-2xl",children:[e.jsx("i",{className:"fas fa-percentage text-green-400"}),"Commission Management System"]}),e.jsx(Ae,{className:"text-green-200",children:"Manage affiliate network commission rates and optimize product earnings automatically"})]}),e.jsx(ne,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-green-500/10 p-4 rounded-lg border border-green-500/20",children:[e.jsx("div",{className:"text-2xl font-bold text-green-400",children:_.length}),e.jsx("div",{className:"text-sm text-green-300",children:"Total Networks"})]}),e.jsxs("div",{className:"bg-blue-500/10 p-4 rounded-lg border border-blue-500/20",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-400",children:_.filter(m=>m.isActive).length}),e.jsx("div",{className:"text-sm text-blue-300",children:"Active Networks"})]}),e.jsxs("div",{className:"bg-yellow-500/10 p-4 rounded-lg border border-yellow-500/20",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:S?`${S.commissionRate}%`:"N/A"}),e.jsx("div",{className:"text-sm text-yellow-300",children:"Best Commission Rate"})]})]})})]}),e.jsxs(Fr,{defaultValue:"networks",className:"space-y-4",children:[e.jsxs(Bs,{className:"grid w-full grid-cols-5",children:[e.jsx(Ye,{value:"networks",children:"Networks"}),e.jsx(Ye,{value:"affiliate-tags",children:"Affiliate Tags"}),e.jsx(Ye,{value:"csv-upload",children:"CSV Upload"}),e.jsx(Ye,{value:"google-sheets",children:"Google Sheets"}),e.jsx(Ye,{value:"settings",children:"Settings"})]}),e.jsx(Ze,{value:"networks",className:"space-y-4",children:e.jsxs(re,{children:[e.jsx(we,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(Ne,{children:"Affiliate Networks"}),e.jsx(Ae,{children:"Manage commission rates for different affiliate networks"})]}),e.jsxs(D,{onClick:()=>o(!l),className:"bg-green-600 hover:bg-green-700",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Add Network"]})]})}),e.jsxs(ne,{children:[l&&e.jsxs("div",{className:"mb-6 p-4 border border-gray-600 rounded-lg bg-gray-800/50",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Add New Affiliate Network"}),e.jsx("div",{className:"mb-4 p-3 bg-blue-900/20 rounded border border-blue-600",children:e.jsxs("p",{className:"text-sm text-blue-300",children:[e.jsx("i",{className:"fas fa-info-circle mr-2"}),'After adding a network, configure its affiliate tags in the "Affiliate Tags" tab.']})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(T,{htmlFor:"name",children:"Network Name"}),e.jsx(W,{id:"name",value:i.name,onChange:m=>n({...i,name:m.target.value}),placeholder:"e.g., Amazon Associates"})]}),e.jsxs("div",{children:[e.jsx(T,{htmlFor:"baseUrl",children:"Base URL"}),e.jsx(W,{id:"baseUrl",value:i.baseUrl,onChange:m=>n({...i,baseUrl:m.target.value}),placeholder:"e.g., https://amazon.in"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Base domain for this affiliate network"})]}),e.jsxs("div",{children:[e.jsx(T,{htmlFor:"commissionRate",children:"Commission Rate (%)"}),e.jsx(W,{id:"commissionRate",type:"number",step:"0.1",value:i.commissionRate,onChange:m=>n({...i,commissionRate:parseFloat(m.target.value)||0}),placeholder:"e.g., 4.5"})]}),e.jsxs("div",{children:[e.jsx(T,{htmlFor:"priorityScore",children:"Priority Score (1-100)"}),e.jsx(W,{id:"priorityScore",type:"number",value:i.priorityScore,onChange:m=>n({...i,priorityScore:parseInt(m.target.value)||50}),placeholder:"e.g., 85"})]})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsx(D,{onClick:ke,disabled:J.isPending,children:J.isPending?"Adding...":"Add Network"}),e.jsx(D,{variant:"outline",onClick:()=>o(!1),children:"Cancel"})]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{children:"View:"}),e.jsxs("div",{className:"flex border border-gray-600 rounded-lg overflow-hidden",children:[e.jsxs("button",{onClick:()=>B("list"),className:`px-3 py-1 text-sm ${w==="list"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:[e.jsx("i",{className:"fas fa-list mr-1"}),"List"]}),e.jsxs("button",{onClick:()=>B("grid"),className:`px-3 py-1 text-sm ${w==="grid"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:[e.jsx("i",{className:"fas fa-th-large mr-1"}),"Grid"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{children:"Search:"}),e.jsx(W,{placeholder:"Search networks...",value:C,onChange:m=>q(m.target.value),className:"w-48"})]})]}),e.jsxs(D,{onClick:()=>Z(!0),className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Add Network"]})]}),e.jsx("div",{className:w==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4":"space-y-4",children:A.map(m=>e.jsxs("div",{className:`border border-gray-600 rounded-lg p-4 bg-gray-800/30 ${w==="grid"?"relative":""}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h3",{className:"text-lg font-semibold",children:m.name}),m.id===(S==null?void 0:S.id)&&e.jsxs(Ce,{className:"bg-yellow-500 text-black",children:[e.jsx("i",{className:"fas fa-crown mr-1"}),"Best Rate"]}),e.jsx(Ce,{variant:m.isActive?"default":"secondary",children:m.isActive?"Active":"Inactive"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(et,{checked:m.isActive,onCheckedChange:c=>ge(m.id,{isActive:c})}),e.jsxs(D,{variant:"outline",size:"sm",onClick:()=>r(a===m.id?null:m.id),children:[e.jsx("i",{className:"fas fa-edit mr-1"}),"Edit"]}),e.jsxs(D,{variant:"destructive",size:"sm",onClick:()=>{confirm(`Are you sure you want to delete ${m.name}?`)&&K.mutate(m.id)},children:[e.jsx("i",{className:"fas fa-trash mr-1"}),"Delete"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Base URL:"}),e.jsx("div",{className:"font-mono text-blue-400",children:m.baseUrl})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Affiliate Tag:"}),e.jsx("div",{className:"font-mono text-purple-400",children:m.affiliateTag||"Not set"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Commission Rate:"}),e.jsxs("div",{className:"text-green-400 font-bold text-lg",children:[m.commissionRate,"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Priority Score:"}),e.jsxs("div",{className:"text-yellow-400 font-semibold",children:[m.priorityScore,"/100"]})]})]}),m.trackingParams&&e.jsxs("div",{className:"mt-3 p-3 bg-gray-800/50 rounded border border-gray-600",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"Tracking Parameters:"}),e.jsx("div",{className:"font-mono text-xs text-gray-300 mt-1",children:m.trackingParams})]}),a===m.id&&e.jsxs("div",{className:"mt-4 p-3 border border-blue-600 rounded bg-blue-900/20",children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Edit Commission Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(T,{children:"Commission Rate (%)"}),e.jsx(W,{type:"number",step:"0.1",defaultValue:m.commissionRate,onBlur:c=>{const y=parseFloat(c.target.value);y!==m.commissionRate&&ge(m.id,{commissionRate:y})}})]}),e.jsxs("div",{children:[e.jsx(T,{children:"Priority Score (1-100)"}),e.jsx(W,{type:"number",defaultValue:m.priorityScore,onBlur:c=>{const y=parseInt(c.target.value);y!==m.priorityScore&&ge(m.id,{priorityScore:y})}})]})]})]})]},m.id))})]})]})}),e.jsx(Ze,{value:"affiliate-tags",className:"space-y-4",children:e.jsxs(re,{children:[e.jsxs(we,{children:[e.jsxs(Ne,{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-tags text-purple-400"}),"Affiliate Tags Management"]}),e.jsx(Ae,{children:"Configure affiliate tags and tracking parameters for each network independently"})]}),e.jsxs(ne,{className:"space-y-4",children:[e.jsxs("div",{className:"bg-purple-900/20 p-4 rounded-lg border border-purple-600",children:[e.jsx("h3",{className:"font-semibold mb-2 text-purple-400",children:"How Affiliate Tags Work:"}),e.jsxs("ul",{className:"text-sm space-y-1 text-gray-300",children:[e.jsx("li",{children:" Each affiliate network has unique tracking identifiers"}),e.jsx("li",{children:" Tags are used to track commissions back to your account"}),e.jsx("li",{children:" Tracking parameters define how tags are added to product URLs"}),e.jsxs("li",{children:[" Use ","{","affiliateTag"," placeholder in parameters for dynamic replacement"]}),e.jsx("li",{children:" These settings work independently of method toggles"})]})]}),e.jsx("div",{className:"space-y-4",children:_.map(m=>e.jsxs("div",{className:"border border-gray-600 rounded-lg p-4 bg-gray-800/30",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h3",{className:"text-lg font-semibold",children:m.name}),e.jsx(Ce,{variant:m.isActive?"default":"secondary",children:m.isActive?"Active":"Inactive"}),m.affiliateTags&&m.affiliateTags.length>0&&e.jsxs(Ce,{className:"bg-purple-500 text-white",children:[e.jsx("i",{className:"fas fa-tags mr-1"}),m.affiliateTags.length," Tag",m.affiliateTags.length>1?"s":""]})]}),e.jsxs("div",{className:"text-sm text-gray-400",children:[m.commissionRate,"% commission"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs(T,{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-tags text-purple-400"}),"Affiliate Tags/IDs",e.jsxs(Ce,{variant:"secondary",className:"text-xs",children:[(m.affiliateTags||[]).length," tags"]})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2 mb-3",children:(m.affiliateTags||[]).map((c,y)=>e.jsxs("div",{className:"flex items-center gap-1 bg-purple-900/30 border border-purple-600 rounded-lg px-3 py-1",children:[e.jsx("span",{className:"text-purple-300 font-mono text-sm",children:c}),e.jsx("button",{onClick:()=>{const O=(m.affiliateTags||[]).filter((V,se)=>se!==y),Q=_.map(V=>V.id===m.id?{...V,affiliateTags:O}:V);s.setQueryData(["/api/admin/affiliate-networks"],Q),fetch(`/api/admin/affiliate-networks/${m.id}/tags`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({affiliateTags:O,trackingParams:m.trackingParams})}).then(()=>{t({title:"Success",description:`Removed affiliate tag from ${m.name}`})}).catch(()=>{t({title:"Error",description:"Failed to remove affiliate tag",variant:"destructive"})})},className:"text-red-400 hover:text-red-300 ml-1",children:e.jsx("i",{className:"fas fa-times text-xs"})})]},y))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(W,{id:`new-tag-${m.id}`,placeholder:`e.g., ${m.name.includes("Amazon")?"pickntrust03-21":"YOUR_"+m.name.toUpperCase().replace(/\s+/g,"_")+"_ID"}`,onKeyPress:c=>{if(c.key==="Enter"){const y=c.target,O=y.value.trim();if(O&&!(m.affiliateTags||[]).includes(O)){const Q=[...m.affiliateTags||[],O],V=_.map(se=>se.id===m.id?{...se,affiliateTags:Q}:se);s.setQueryData(["/api/admin/affiliate-networks"],V),fetch(`/api/admin/affiliate-networks/${m.id}/tags`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({affiliateTags:Q,trackingParams:m.trackingParams})}).then(()=>{t({title:"Success",description:`Added affiliate tag to ${m.name}`}),y.value=""}).catch(()=>{t({title:"Error",description:"Failed to add affiliate tag",variant:"destructive"})})}}},className:"flex-1"}),e.jsxs(D,{onClick:()=>{const c=document.getElementById(`new-tag-${m.id}`),y=c.value.trim();if(y&&!(m.affiliateTags||[]).includes(y)){const O=[...m.affiliateTags||[],y],Q=_.map(V=>V.id===m.id?{...V,affiliateTags:O}:V);s.setQueryData(["/api/admin/affiliate-networks"],Q),fetch(`/api/admin/affiliate-networks/${m.id}/tags`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({affiliateTags:O,trackingParams:m.trackingParams})}).then(()=>{t({title:"Success",description:`Added affiliate tag to ${m.name}`}),c.value=""}).catch(()=>{t({title:"Error",description:"Failed to add affiliate tag",variant:"destructive"})})}},size:"sm",className:"bg-purple-600 hover:bg-purple-700",children:[e.jsx("i",{className:"fas fa-plus mr-1"}),"Add Tag"]})]}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Press Enter or click Add Tag to add multiple affiliate identifiers for ",m.name]})]}),e.jsxs("div",{children:[e.jsx(T,{children:"Tracking Parameters Template"}),e.jsx(W,{value:m.trackingParams||"",onChange:c=>{const y=_.map(O=>O.id===m.id?{...O,trackingParams:c.target.value}:O);s.setQueryData(["/api/admin/affiliate-networks"],y)},onBlur:c=>{fetch(`/api/admin/affiliate-networks/${m.id}/tags`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({affiliateTag:m.affiliateTag,trackingParams:c.target.value})}).then(()=>{t({title:"Success",description:`Updated ${m.name} tracking parameters`})}).catch(()=>{t({title:"Error",description:"Failed to update tracking parameters",variant:"destructive"})})},placeholder:`e.g., ${m.name.includes("Amazon")?"tag={affiliateTag}&linkCode=as2":m.name.includes("EarnKaro")?"ref={affiliateTag}":"affid={affiliateTag}"}`}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["URL parameters with ","{","affiliateTag"," placeholder"]})]})]}),m.affiliateTags&&m.affiliateTags.length>0&&m.trackingParams&&e.jsxs("div",{className:"mt-4 p-3 bg-green-900/20 rounded border border-green-600",children:[e.jsx("h4",{className:"text-sm font-semibold text-green-400 mb-2",children:"Preview Generated URLs:"}),e.jsx("div",{className:"space-y-2",children:m.affiliateTags.map((c,y)=>{var O;return e.jsxs("div",{className:"font-mono text-xs text-gray-300",children:[e.jsxs("span",{className:"text-purple-400",children:[c,":"]})," https://example.com/product?",(O=m.trackingParams)==null?void 0:O.replace(/{affiliateTag}/g,c)]},y)})})]}),(!m.affiliateTags||m.affiliateTags.length===0||!m.trackingParams)&&e.jsx("div",{className:"mt-4 p-3 bg-yellow-900/20 rounded border border-yellow-600",children:e.jsxs("p",{className:"text-sm text-yellow-400",children:[e.jsx("i",{className:"fas fa-exclamation-triangle mr-2"}),(!m.affiliateTags||m.affiliateTags.length===0)&&!m.trackingParams?"Affiliate tags and tracking parameters are required for commission tracking":!m.affiliateTags||m.affiliateTags.length===0?"At least one affiliate tag is required for commission tracking":"Tracking parameters are required for URL generation"]})})]},m.id))}),_.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx("i",{className:"fas fa-network-wired text-4xl mb-4"}),e.jsx("p",{children:"No affiliate networks found. Add networks in the Networks tab first."})]})]})]})}),e.jsx(Ze,{value:"csv-upload",className:"space-y-4",children:e.jsxs(re,{children:[e.jsxs(we,{children:[e.jsxs(Ne,{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-file-csv text-blue-400"}),"CSV Bulk Upload",!u.csvUploadEnabled&&e.jsx(Ce,{variant:"secondary",children:"Disabled"})]}),e.jsx(Ae,{children:"Upload commission rates in bulk using CSV files"})]}),e.jsxs(ne,{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-900/20 p-4 rounded-lg border border-blue-600",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"CSV Format:"}),e.jsxs("div",{className:"bg-gray-800 p-3 rounded font-mono text-sm",children:["category_name,network_name,commission_rate,priority_score,notes",e.jsx("br",{}),"Electronics,Amazon,4.0,40,Electronics commission",e.jsx("br",{}),"Fashion,Myntra,12.0,120,Best fashion rate",e.jsx("br",{}),"Beauty,Nykaa,15.0,150,Premium beauty commission"]})]}),e.jsx("div",{className:"mt-2",children:e.jsxs("a",{href:"/commission-upload-template.csv",download:!0,className:"inline-flex items-center gap-2 text-blue-300 hover:text-blue-200 underline",children:[e.jsx("i",{className:"fas fa-download"}),"Download CSV Template"]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(T,{htmlFor:"csvFile",children:"Select CSV File"}),e.jsx(W,{id:"csvFile",type:"file",accept:".csv",onChange:m=>{var c;return g(((c=m.target.files)==null?void 0:c[0])||null)},disabled:!u.csvUploadEnabled})]}),d&&e.jsxs("div",{className:"bg-green-900/20 p-3 rounded border border-green-600",children:[e.jsxs("p",{className:"text-green-400",children:["Selected: ",d.name]}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Size: ",(d.size/1024).toFixed(1)," KB"]})]}),e.jsx(D,{onClick:_e,disabled:!d||!u.csvUploadEnabled||ue.isPending,className:"w-full bg-blue-600 hover:bg-blue-700",children:ue.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Uploading CSV..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-upload mr-2"}),"Upload & Process CSV"]})})]})]})]})}),e.jsx(Ze,{value:"google-sheets",className:"space-y-4",children:e.jsxs(re,{children:[e.jsxs(we,{children:[e.jsxs(Ne,{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-table text-green-400"}),"Google Sheets Integration",!u.googleSheetsEnabled&&e.jsx(Ce,{variant:"secondary",children:"Disabled"})]}),e.jsx(Ae,{children:"Real-time sync with your Google Sheets commission rates"})]}),e.jsxs(ne,{className:"space-y-4",children:[e.jsxs("div",{className:"bg-green-900/20 p-4 rounded-lg border border-green-600",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Setup Instructions:"}),e.jsxs("ol",{className:"text-sm space-y-1 text-gray-300 list-decimal list-inside",children:[e.jsx("li",{children:"Create a Google Sheet with columns: category_name, network_name, commission_rate"}),e.jsx("li",{children:"Make the sheet publicly viewable (Share  Anyone with link can view)"}),e.jsx("li",{children:"Copy the sheet URL and paste it below"}),e.jsx("li",{children:'Click "Connect & Sync" to start automatic synchronization'})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(T,{htmlFor:"sheetsUrl",children:"Google Sheets URL"}),e.jsx(W,{id:"sheetsUrl",value:x,onChange:m=>b(m.target.value),placeholder:"https://docs.google.com/spreadsheets/d/your-sheet-id/edit",disabled:!u.googleSheetsEnabled})]}),e.jsxs("div",{children:[e.jsxs(T,{children:["Sync Interval: ",u.syncIntervalMinutes," minutes"]}),e.jsx(W,{type:"range",min:"1",max:"60",value:u.syncIntervalMinutes,onChange:m=>Y({syncIntervalMinutes:parseInt(m.target.value)}),disabled:!u.googleSheetsEnabled,className:"mt-2"})]}),e.jsx(D,{onClick:je,disabled:!x||!u.googleSheetsEnabled||N.isPending,className:"w-full bg-green-600 hover:bg-green-700",children:N.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Syncing with Google Sheets..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-sync mr-2"}),"Connect & Sync Google Sheets"]})})]})]})]})}),e.jsx(Ze,{value:"settings",className:"space-y-4",children:e.jsxs(re,{children:[e.jsxs(we,{children:[e.jsxs(Ne,{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-cog text-gray-400"}),"Commission Management Settings"]}),e.jsx(Ae,{children:"Configure which commission update methods are enabled"})]}),e.jsxs(ne,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-600 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Admin Panel Updates"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Allow manual updates through the web interface"})]}),e.jsx(et,{checked:u.adminPanelEnabled,onCheckedChange:m=>Y({adminPanelEnabled:m})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-600 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"CSV File Upload"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Enable bulk updates via CSV file upload"})]}),e.jsx(et,{checked:u.csvUploadEnabled,onCheckedChange:m=>Y({csvUploadEnabled:m})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-600 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Google Sheets Integration"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Real-time sync with Google Sheets"})]}),e.jsx(et,{checked:u.googleSheetsEnabled,onCheckedChange:m=>Y({googleSheetsEnabled:m})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-600 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Auto-Optimize Products"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Automatically optimize products when rates change"})]}),e.jsx(et,{checked:u.autoOptimizeEnabled,onCheckedChange:m=>Y({autoOptimizeEnabled:m})})]})]}),e.jsxs("div",{className:"border-t border-gray-600 pt-6",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Product Optimization"}),e.jsx("div",{className:"bg-blue-900/20 p-4 rounded-lg border border-blue-600 mb-4",children:e.jsx("p",{className:"text-sm text-gray-300",children:"Manually trigger optimization to update all products with the best commission rates."})}),e.jsx(D,{onClick:Pe,disabled:ee.isPending,className:"w-full bg-green-600 hover:bg-green-700",size:"lg",children:ee.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Optimizing Products..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-rocket mr-2"}),"Optimize All Products Now"]})})]})]})]})})]}),R&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg border border-gray-600 w-full max-w-2xl mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Add New Affiliate Network"}),e.jsx("button",{onClick:()=>Z(!1),className:"text-gray-400 hover:text-white",children:e.jsx("i",{className:"fas fa-times"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(T,{children:"Network Name"}),e.jsx(W,{value:p.name,onChange:m=>I({...p,name:m.target.value}),placeholder:"e.g., Amazon Associates"})]}),e.jsxs("div",{children:[e.jsx(T,{children:"Base URL"}),e.jsx(W,{value:p.baseUrl,onChange:m=>I({...p,baseUrl:m.target.value}),placeholder:"e.g., https://amazon.in"})]}),e.jsxs("div",{children:[e.jsx(T,{children:"Commission Rate (%)"}),e.jsx(W,{type:"number",step:"0.1",value:p.commissionRate,onChange:m=>I({...p,commissionRate:parseFloat(m.target.value)||0}),placeholder:"e.g., 4.5"})]}),e.jsxs("div",{children:[e.jsx(T,{children:"Affiliate Tag (Optional)"}),e.jsx(W,{value:p.affiliateTag,onChange:m=>I({...p,affiliateTag:m.target.value}),placeholder:"e.g., your-affiliate-id"})]})]}),e.jsxs("div",{children:[e.jsx(T,{children:"Tracking Parameters (Optional)"}),e.jsx(W,{value:p.trackingParams,onChange:m=>I({...p,trackingParams:m.target.value}),placeholder:"e.g., tag={affiliateTag}&linkCode=as2"}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Use ","{","affiliateTag","}"," placeholder for dynamic replacement"]})]})]}),e.jsxs("div",{className:"flex gap-2 mt-6",children:[e.jsx(D,{onClick:()=>J.mutate({...p,priorityScore:50}),disabled:!p.name||!p.baseUrl||J.isPending,className:"bg-green-600 hover:bg-green-700",children:J.isPending?"Adding...":"Add Network"}),e.jsx(D,{variant:"outline",onClick:()=>Z(!1),children:"Cancel"})]})]})})]})}const rf=()=>{const{toast:t}=ht(),s=bt(),[a,r]=E.useState(!1),[i,n]=E.useState(!1),[l,o]=E.useState(null),[d,g]=E.useState({}),[x,b]=E.useState({network:"",email:"",password:"",apiKey:"",isActive:!0}),[u,f]=E.useState({network:"",email:"",password:"",apiKey:"",isActive:!0}),{data:w=[],isLoading:B}=Re({queryKey:["/api/admin/credentials/networks"],queryFn:async()=>{const N=await fetch("/api/admin/credentials/networks",{headers:{"X-Admin-Session":localStorage.getItem("pickntrust-admin-session")||""}});if(!N.ok)throw new Error("Failed to fetch networks");return(await N.json()).networks}}),{data:C}=Re({queryKey:["/api/admin/credentials/stats"],queryFn:async()=>{const N=await fetch("/api/admin/credentials/stats",{headers:{"X-Admin-Session":localStorage.getItem("pickntrust-admin-session")||""}});if(!N.ok)throw new Error("Failed to fetch stats");return(await N.json()).stats}}),{data:q,refetch:R}=Re({queryKey:["/api/admin/credentials/health"],queryFn:async()=>{const N=await fetch("/api/admin/credentials/health",{headers:{"X-Admin-Session":localStorage.getItem("pickntrust-admin-session")||""}});if(!N.ok)throw new Error("Failed to fetch health");return(await N.json()).health}}),Z=be({mutationFn:async N=>{const $=await fetch("/api/admin/credentials",{method:"POST",headers:{"Content-Type":"application/json","X-Admin-Session":localStorage.getItem("pickntrust-admin-session")||""},body:JSON.stringify(N)});if(!$.ok){const ge=await $.json();throw new Error(ge.error||"Failed to add credentials")}return $.json()},onSuccess:()=>{t({title:"Success",description:"Credentials added successfully"}),s.invalidateQueries({queryKey:["/api/admin/credentials/networks"]}),s.invalidateQueries({queryKey:["/api/admin/credentials/stats"]}),s.invalidateQueries({queryKey:["/api/admin/credentials/health"]}),r(!1),b({network:"",email:"",password:"",apiKey:"",isActive:!0})},onError:N=>{t({title:"Error",description:N.message,variant:"destructive"})}}),p=be({mutationFn:async N=>{const $=await fetch("/api/admin/credentials",{method:"POST",headers:{"Content-Type":"application/json","X-Admin-Session":localStorage.getItem("pickntrust-admin-session")||""},body:JSON.stringify(N)});if(!$.ok){const ge=await $.json();throw new Error(ge.error||"Failed to update credentials")}return $.json()},onSuccess:()=>{t({title:"Success",description:"Credentials updated successfully"}),s.invalidateQueries({queryKey:["/api/admin/credentials/networks"]}),s.invalidateQueries({queryKey:["/api/admin/credentials/stats"]}),s.invalidateQueries({queryKey:["/api/admin/credentials/health"]}),n(!1),o(null),f({network:"",email:"",password:"",apiKey:"",isActive:!0})},onError:N=>{t({title:"Error",description:N.message,variant:"destructive"})}}),I=be({mutationFn:async N=>{const $=await fetch(`/api/admin/credentials/${N}`,{method:"DELETE",headers:{"X-Admin-Session":localStorage.getItem("pickntrust-admin-session")||""}});if(!$.ok){const ge=await $.json();throw new Error(ge.error||"Failed to delete credentials")}return $.json()},onSuccess:()=>{t({title:"Success",description:"Credentials deleted successfully"}),s.invalidateQueries({queryKey:["/api/admin/credentials/networks"]}),s.invalidateQueries({queryKey:["/api/admin/credentials/stats"]}),s.invalidateQueries({queryKey:["/api/admin/credentials/health"]})},onError:N=>{t({title:"Error",description:N.message,variant:"destructive"})}}),F=be({mutationFn:async N=>{const $=await fetch(`/api/admin/credentials/${N}/test`,{method:"POST",headers:{"X-Admin-Session":localStorage.getItem("pickntrust-admin-session")||""}});if(!$.ok)throw new Error("Failed to test credentials");return $.json()},onSuccess:(N,$)=>{const ge=N.test;t({title:ge.valid?"Test Passed":"Test Failed",description:ge.valid?`${$} credentials are valid`:ge.error,variant:ge.valid?"default":"destructive"})}}),_=be({mutationFn:async()=>{const N=await fetch("/api/admin/credentials/initialize",{method:"POST",headers:{"X-Admin-Session":localStorage.getItem("pickntrust-admin-session")||""}});if(!N.ok){const $=await N.json();throw new Error($.error||"Failed to initialize credentials")}return N.json()},onSuccess:()=>{t({title:"Success",description:"Credentials initialized successfully"}),s.invalidateQueries({queryKey:["/api/admin/credentials/networks"]}),s.invalidateQueries({queryKey:["/api/admin/credentials/stats"]}),s.invalidateQueries({queryKey:["/api/admin/credentials/health"]})},onError:N=>{t({title:"Error",description:N.message,variant:"destructive"})}}),j=()=>{if(!x.network||!x.email||!x.password){t({title:"Validation Error",description:"Network, email, and password are required",variant:"destructive"});return}Z.mutate(x)},A=()=>{if(!u.network||!u.email||!u.password){t({title:"Validation Error",description:"Network, email, and password are required",variant:"destructive"});return}p.mutate(u)},G=N=>{o(N),f({network:N,email:"",password:"",apiKey:"",isActive:!0}),n(!0)},J=()=>{n(!1),o(null),f({network:"",email:"",password:"",apiKey:"",isActive:!0})},K=N=>{g($=>({...$,[N]:!$[N]}))},ee=N=>N.isActive?N.valid?e.jsx(Vs,{className:"w-4 h-4 text-green-500"}):e.jsx(ji,{className:"w-4 h-4 text-red-500"}):e.jsx(ji,{className:"w-4 h-4 text-gray-400"}),ue=N=>N.isActive?N.valid?"bg-green-500":"bg-red-500":"bg-gray-500";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(xs,{className:"w-6 h-6 text-blue-600"}),"Credential Management"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Secure storage and management of affiliate network credentials"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(D,{onClick:()=>R(),variant:"outline",size:"sm",className:"flex items-center gap-2",children:[e.jsx(Ut,{className:"w-4 h-4"}),"Refresh"]}),e.jsxs(D,{onClick:()=>r(!0),className:"flex items-center gap-2",children:[e.jsx(tt,{className:"w-4 h-4"}),"Add Credentials"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(re,{children:e.jsx(ne,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(al,{className:"w-8 h-8 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:(C==null?void 0:C.total)||0}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total Networks"})]})]})})}),e.jsx(re,{children:e.jsx(ne,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(da,{className:"w-8 h-8 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:(C==null?void 0:C.active)||0}),e.jsx("p",{className:"text-sm text-gray-600",children:"Active Networks"})]})]})})}),e.jsx(re,{children:e.jsx(ne,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Vs,{className:"w-8 h-8 text-emerald-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:(q==null?void 0:q.validCredentials)||0}),e.jsx("p",{className:"text-sm text-gray-600",children:"Valid Credentials"})]})]})})}),e.jsx(re,{children:e.jsx(ne,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(xs,{className:"w-8 h-8 text-purple-500"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-2xl font-bold",children:[q?Math.round(q.validCredentials/q.totalNetworks*100):0,"%"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Health Score"})]})]})})})]}),(!C||C.total===0)&&e.jsx(re,{className:"border-dashed border-2 border-blue-300",children:e.jsxs(ne,{className:"p-6 text-center",children:[e.jsx(Ho,{className:"w-12 h-12 text-blue-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Credentials Found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Initialize the system with your provided network credentials"}),e.jsxs(D,{onClick:()=>_.mutate(),disabled:_.isPending,className:"flex items-center gap-2",children:[_.isPending?e.jsx(Ut,{className:"w-4 h-4 animate-spin"}):e.jsx(ua,{className:"w-4 h-4"}),"Initialize Credentials"]})]})}),q&&q.tests.length>0&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:q.tests.map(N=>e.jsxs(re,{className:"relative",children:[e.jsx(we,{className:"pb-3",children:e.jsxs(Ne,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[ee(N),e.jsx("span",{className:"capitalize",children:N.network})]}),e.jsx(Ce,{className:ue(N),children:N.isActive?N.valid?"Valid":"Invalid":"Inactive"})]})}),e.jsxs(ne,{className:"space-y-3",children:[N.error&&e.jsxs("div",{className:"flex items-center gap-2 text-red-600 text-sm",children:[e.jsx(Ko,{className:"w-4 h-4"}),N.error]}),N.lastUsed&&e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("strong",{children:"Last Used:"})," ",new Date(N.lastUsed).toLocaleString()]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(D,{size:"sm",variant:"outline",onClick:()=>F.mutate(N.network),disabled:F.isPending,className:"flex-1",children:[e.jsx(rl,{className:"w-3 h-3 mr-1"}),"Test"]}),e.jsxs(D,{size:"sm",variant:"secondary",onClick:()=>G(N.network),className:"flex-1",children:[e.jsx(Lt,{className:"w-3 h-3 mr-1"}),"Edit"]}),e.jsx(D,{size:"sm",variant:"destructive",onClick:()=>I.mutate(N.network),disabled:I.isPending,children:e.jsx(Yt,{className:"w-3 h-3"})})]})]})]},N.network))}),a&&e.jsxs(re,{children:[e.jsxs(we,{children:[e.jsxs(Ne,{className:"flex items-center gap-2",children:[e.jsx(tt,{className:"w-5 h-5"}),"Add New Network Credentials"]}),e.jsx(Ae,{children:"Securely store credentials for affiliate network auto-scraping"})]}),e.jsxs(ne,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(T,{htmlFor:"network",children:"Network Name"}),e.jsx(W,{id:"network",value:x.network,onChange:N=>b($=>({...$,network:N.target.value})),placeholder:"e.g., cuelinks, earnkaro"})]}),e.jsxs("div",{children:[e.jsx(T,{htmlFor:"email",children:"Email"}),e.jsx(W,{id:"email",type:"email",value:x.email,onChange:N=>b($=>({...$,email:N.target.value})),placeholder:"your@email.com"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(T,{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(W,{id:"password",type:d.new?"text":"password",value:x.password,onChange:N=>b($=>({...$,password:N.target.value})),placeholder:""}),e.jsx(D,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:()=>K("new"),children:d.new?e.jsx($t,{className:"w-4 h-4"}):e.jsx(kt,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{children:[e.jsx(T,{htmlFor:"apiKey",children:"API Key (Optional)"}),e.jsx(W,{id:"apiKey",value:x.apiKey,onChange:N=>b($=>({...$,apiKey:N.target.value})),placeholder:"API key if available"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(et,{id:"isActive",checked:x.isActive,onCheckedChange:N=>b($=>({...$,isActive:N}))}),e.jsx(T,{htmlFor:"isActive",children:"Active"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(D,{onClick:j,disabled:Z.isPending,className:"flex items-center gap-2",children:[Z.isPending?e.jsx(Ut,{className:"w-4 h-4 animate-spin"}):e.jsx(ua,{className:"w-4 h-4"}),"Store Securely"]}),e.jsx(D,{variant:"outline",onClick:()=>{r(!1),b({network:"",email:"",password:"",apiKey:"",isActive:!0})},children:"Cancel"})]})]})]}),i&&e.jsxs(re,{children:[e.jsxs(we,{children:[e.jsxs(Ne,{className:"flex items-center gap-2",children:[e.jsx(Lt,{className:"w-5 h-5"}),"Edit ",l==null?void 0:l.toUpperCase()," Credentials"]}),e.jsxs(Ae,{children:["Update credentials for ",l," network"]})]}),e.jsxs(ne,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(T,{htmlFor:"edit-network",children:"Network Name"}),e.jsx(W,{id:"edit-network",value:u.network,disabled:!0,className:"bg-slate-50 border-slate-300 text-slate-700 cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx(T,{htmlFor:"edit-email",children:"Email"}),e.jsx(W,{id:"edit-email",type:"email",value:u.email,onChange:N=>f($=>({...$,email:N.target.value})),placeholder:"your@email.com"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(T,{htmlFor:"edit-password",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(W,{id:"edit-password",type:d.edit?"text":"password",value:u.password,onChange:N=>f($=>({...$,password:N.target.value})),placeholder:"Enter new password"}),e.jsx(D,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:()=>K("edit"),children:d.edit?e.jsx($t,{className:"w-4 h-4"}):e.jsx(kt,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{children:[e.jsx(T,{htmlFor:"edit-apiKey",children:"API Key (Optional)"}),e.jsx(W,{id:"edit-apiKey",value:u.apiKey,onChange:N=>f($=>({...$,apiKey:N.target.value})),placeholder:"API key if available"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(et,{id:"edit-isActive",checked:u.isActive,onCheckedChange:N=>f($=>({...$,isActive:N}))}),e.jsx(T,{htmlFor:"edit-isActive",children:"Active"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(D,{onClick:A,disabled:p.isPending,className:"flex items-center gap-2",children:[p.isPending?e.jsx(Ut,{className:"w-4 h-4 animate-spin"}):e.jsx(ua,{className:"w-4 h-4"}),"Update Credentials"]}),e.jsx(D,{variant:"outline",onClick:J,children:"Cancel"})]})]})]}),e.jsx(re,{className:"border-blue-200 bg-blue-50",children:e.jsx(ne,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(xs,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-blue-900",children:"Security Information"}),e.jsx("p",{className:"text-sm text-blue-800 mt-1",children:"All credentials are encrypted using AES-256-GCM encryption before storage. Passwords are never stored in plain text and can only be decrypted by authorized processes."})]})]})})})]})},nf=[{value:"home",label:"Home Page"},{value:"categories",label:"Categories Page"},{value:"blog",label:"Blog Page"},{value:"videos",label:"Videos Page"},{value:"trending",label:"Trending Page"},{value:"wishlist",label:"Wishlist Page"},{value:"contact",label:"Contact Page"},{value:"admin",label:"Admin Panel"}],lf=[{value:"prime-picks",label:"Prime Picks"},{value:"value-picks",label:"Value Picks"},{value:"click-picks",label:"Click Picks"},{value:"cue-picks",label:"Cue Picks"},{value:"global-picks",label:"Global Picks"},{value:"loot-box",label:"Loot Box"},{value:"deals-hub",label:"Deals Hub"},{value:"travel-picks",label:"Travel Picks"}],Jn=[{value:"header",label:"Header (Legacy)"},{value:"header-top",label:"Header Top (Above Navigation)"},{value:"header-bottom",label:"Header Bottom (Below Navigation)"},{value:"body",label:"Body (Main content flow)"},{value:"content-top",label:"Content Top (Before Main Content)"},{value:"content-middle",label:"Content Middle (Between Sections)"},{value:"content-bottom",label:"Content Bottom (After Main Content)"},{value:"sidebar-left",label:"Left Sidebar"},{value:"sidebar-right",label:"Right Sidebar"},{value:"footer-top",label:"Footer Top (Before Footer Content)"},{value:"footer-bottom",label:"Footer Bottom (After Footer Content)"},{value:"floating-top-left",label:"Floating Top Left"},{value:"floating-top-right",label:"Floating Top Right"},{value:"floating-bottom-left",label:"Floating Bottom Left"},{value:"floating-bottom-right",label:"Floating Bottom Right"},{value:"banner-top",label:"Full Width Banner Top"},{value:"banner-bottom",label:"Full Width Banner Bottom"},{value:"product-grid-top",label:"Product Grid Top (Above cards)"},{value:"product-grid-bottom",label:"Product Grid Bottom (Below cards)"},{value:"product-card-top",label:"Product Card Top (Inside each card)"},{value:"product-card-bottom",label:"Product Card Bottom (Inside each card)"}],nr=[{name:"Google AdSense - Display Ad",category:"Advertisements",code:`<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXXXXXXXXXXXXXX" crossorigin="anonymous"><\/script>
<!-- Display Ad -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-XXXXXXXXXXXXXXXX"
     data-ad-slot="XXXXXXXXXX"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
<\/script>`},{name:"Google AdSense - Banner Ad",category:"Advertisements",code:`<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXXXXXXXXXXXXXX" crossorigin="anonymous"><\/script>
<!-- Banner Ad -->
<ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-XXXXXXXXXXXXXXXX"
     data-ad-slot="XXXXXXXXXX"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
<\/script>`},{name:"Trip.com Affiliate Banner",category:"Advertisements",code:'<iframe border="0" src="https://www.trip.com/partners/ad/SB5334205?Allianceid=7067369&SID=258816601&trip_sub1=" style="width:300px;height:250px" frameborder="0" scrolling="no" style="border:none" id="SB5334205"></iframe>'},{name:"Banner Ad",category:"Advertisements",code:`<div class="relative overflow-hidden rounded-lg shadow-lg">
  <a href="#" target="_blank" class="block">
    <img src="https://via.placeholder.com/728x90/4F46E5/FFFFFF?text=Your+Banner+Ad" alt="Advertisement" class="w-full h-auto">
    <div class="absolute top-2 right-2 bg-black bg-opacity-50 text-white text-xs px-2 py-1 rounded">Ad</div>
  </a>
</div>`},{name:"Affiliate Product Card",category:"Advertisements",code:`<div class="bg-white border border-gray-200 rounded-lg shadow-sm p-4 max-w-sm">
  <img src="https://via.placeholder.com/200x200" alt="Product" class="w-full h-48 object-cover rounded-md mb-3">
  <h3 class="font-semibold text-gray-900 mb-2">Product Name</h3>
  <p class="text-sm text-gray-600 mb-3">Product description goes here...</p>
  <div class="flex items-center justify-between">
    <span class="text-lg font-bold text-green-600">$99.99</span>
    <a href="#" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors">Buy Now</a>
  </div>
</div>`},{name:"Newsletter Signup",category:"Call-to-Action",code:`<div class="bg-gradient-to-r from-blue-500 to-purple-600 p-6 rounded-lg text-white">
  <h3 class="text-xl font-bold mb-2">Subscribe to Our Newsletter</h3>
  <p class="mb-4 opacity-90">Get the latest deals and updates delivered to your inbox!</p>
  <form class="flex gap-2">
    <input type="email" placeholder="Enter your email" class="flex-1 px-4 py-2 rounded-md text-gray-900 focus:outline-none focus:ring-2 focus:ring-white" required>
    <button type="submit" class="px-6 py-2 bg-white text-blue-600 rounded-md hover:bg-gray-100 transition-colors font-semibold">Subscribe</button>
  </form>
</div>`},{name:"Download CTA",category:"Call-to-Action",code:`<div class="bg-green-50 border border-green-200 rounded-lg p-6 text-center">
  <div class="mb-4">
    <svg class="w-12 h-12 mx-auto text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
    </svg>
  </div>
  <h3 class="text-lg font-semibold text-green-900 mb-2">Download Our App</h3>
  <p class="text-green-700 mb-4">Get exclusive deals and faster checkout!</p>
  <a href="#" class="inline-block bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors font-semibold">Download Now</a>
</div>`},{name:"Contact CTA",category:"Call-to-Action",code:`<div class="bg-orange-50 border-l-4 border-orange-400 p-6">
  <div class="flex items-center">
    <div class="flex-shrink-0">
      <svg class="w-8 h-8 text-orange-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
      </svg>
    </div>
    <div class="ml-4 flex-1">
      <h3 class="text-lg font-semibold text-orange-900">Need Help?</h3>
      <p class="text-orange-700 mb-3">Our support team is here to assist you!</p>
      <a href="#" class="bg-orange-600 text-white px-4 py-2 rounded-md hover:bg-orange-700 transition-colors">Contact Us</a>
    </div>
  </div>
</div>`},{name:"Social Media Links",category:"Social Media",code:`<div class="flex justify-center space-x-4 p-4">
  <a href="#" class="text-blue-600 hover:text-blue-800 transition-colors" title="Facebook">
    <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
  </a>
  <a href="#" class="text-blue-400 hover:text-blue-600 transition-colors" title="Twitter">
    <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24"><path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/></svg>
  </a>
  <a href="#" class="text-pink-600 hover:text-pink-800 transition-colors" title="Instagram">
    <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24"><path d="M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.174-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.741.097.118.112.221.085.345-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.402.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.357-.629-2.75-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146C9.57 23.812 10.763 24.009 12.017 24.009c6.624 0 11.99-5.367 11.99-11.988C24.007 5.367 18.641.001.012.001z"/></svg>
  </a>
  <a href="#" class="text-red-600 hover:text-red-800 transition-colors" title="YouTube">
    <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24"><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg>
  </a>
</div>`},{name:"Twitter Feed",category:"Social Media",code:`<div class="bg-white border border-gray-200 rounded-lg p-4 max-w-md">
  <div class="flex items-center mb-3">
    <img src="https://via.placeholder.com/40x40" alt="Profile" class="w-10 h-10 rounded-full mr-3">
    <div>
      <h4 class="font-semibold text-gray-900">@YourHandle</h4>
      <p class="text-sm text-gray-500">Follow us on Twitter</p>
    </div>
  </div>
  <p class="text-gray-700 mb-3">Latest updates and deals from our Twitter feed!</p>
  <a href="#" class="inline-flex items-center text-blue-600 hover:text-blue-800 transition-colors">
    <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 24 24"><path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/></svg>
    Follow on Twitter
  </a>
</div>`},{name:"Contact Form",category:"Forms",code:`<div class="bg-white p-6 rounded-lg shadow-md border border-gray-200">
  <h3 class="text-xl font-semibold text-gray-900 mb-4">Contact Us</h3>
  <form class="space-y-4">
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Name</label>
      <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required>
    </div>
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
      <input type="email" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required>
    </div>
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Message</label>
      <textarea rows="4" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required></textarea>
    </div>
    <button type="submit" class="w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors">Send Message</button>
  </form>
</div>`},{name:"Feedback Form",category:"Forms",code:`<div class="bg-yellow-50 border border-yellow-200 rounded-lg p-6">
  <h3 class="text-lg font-semibold text-yellow-900 mb-3">We Value Your Feedback</h3>
  <form class="space-y-3">
    <div>
      <label class="block text-sm font-medium text-yellow-800 mb-1">How was your experience?</label>
      <div class="flex space-x-2">
        <button type="button" class="text-2xl hover:scale-110 transition-transform"></button>
        <button type="button" class="text-2xl hover:scale-110 transition-transform"></button>
        <button type="button" class="text-2xl hover:scale-110 transition-transform"></button>
        <button type="button" class="text-2xl hover:scale-110 transition-transform"></button>
      </div>
    </div>
    <div>
      <textarea placeholder="Tell us more..." rows="3" class="w-full px-3 py-2 border border-yellow-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"></textarea>
    </div>
    <button type="submit" class="bg-yellow-600 text-white px-4 py-2 rounded-md hover:bg-yellow-700 transition-colors">Submit Feedback</button>
  </form>
</div>`},{name:"Announcement Banner",category:"Notifications",code:`<div class="bg-blue-600 text-white p-4 text-center relative">
  <p class="font-medium"> Special Offer: Get 50% off on all products! Limited time only.</p>
  <button class="absolute right-4 top-1/2 transform -translate-y-1/2 text-white hover:text-gray-200" onclick="this.parentElement.style.display='none'">
    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
    </svg>
  </button>
</div>`},{name:"Cookie Notice",category:"Notifications",code:`<div class="fixed bottom-0 left-0 right-0 bg-gray-900 text-white p-4 z-50" id="cookieNotice">
  <div class="max-w-6xl mx-auto flex items-center justify-between flex-wrap gap-4">
    <p class="text-sm">We use cookies to enhance your experience. By continuing to visit this site you agree to our use of cookies.</p>
    <div class="flex gap-2">
      <button onclick="document.getElementById('cookieNotice').style.display='none'" class="bg-blue-600 text-white px-4 py-2 rounded text-sm hover:bg-blue-700 transition-colors">Accept</button>
      <button onclick="document.getElementById('cookieNotice').style.display='none'" class="border border-gray-600 text-white px-4 py-2 rounded text-sm hover:bg-gray-800 transition-colors">Decline</button>
    </div>
  </div>
</div>`},{name:"Google Analytics",category:"Analytics",code:`<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=GA_TRACKING_ID"><\/script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'GA_TRACKING_ID');
<\/script>`},{name:"Facebook Pixel",category:"Analytics",code:`<!-- Facebook Pixel Code -->
<script>
!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', 'YOUR_PIXEL_ID');
fbq('track', 'PageView');
<\/script>
<noscript><img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=YOUR_PIXEL_ID&ev=PageView&noscript=1"/></noscript>`},{name:"Live Chat Widget",category:"Support",code:`<div class="fixed bottom-4 right-4 z-50">
  <button id="chatToggle" class="bg-blue-600 text-white p-4 rounded-full shadow-lg hover:bg-blue-700 transition-colors">
    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
    </svg>
  </button>
  <div id="chatWindow" class="hidden absolute bottom-16 right-0 w-80 h-96 bg-white border border-gray-300 rounded-lg shadow-xl">
    <div class="bg-blue-600 text-white p-4 rounded-t-lg">
      <h3 class="font-semibold">Live Chat</h3>
    </div>
    <div class="p-4 h-64 overflow-y-auto">
      <p class="text-gray-600">Hello! How can we help you today?</p>
    </div>
    <div class="p-4 border-t">
      <input type="text" placeholder="Type your message..." class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
    </div>
  </div>
</div>
<script>
document.getElementById('chatToggle').onclick = function() {
  const chatWindow = document.getElementById('chatWindow');
  chatWindow.classList.toggle('hidden');
};
<\/script>`},{name:"WhatsApp Chat",category:"Support",code:`<div class="fixed bottom-4 left-4 z-50">
  <a href="https://wa.me/1234567890?text=Hello!%20I%20need%20help" target="_blank" class="flex items-center bg-green-500 text-white px-4 py-3 rounded-full shadow-lg hover:bg-green-600 transition-colors">
    <svg class="w-6 h-6 mr-2" fill="currentColor" viewBox="0 0 24 24">
      <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"/>
    </svg>
    Chat with us
  </a>
</div>`},{name:"Custom HTML",category:"Custom",code:`<!-- Add your custom HTML code here -->
<div class="p-6 bg-gradient-to-r from-gray-50 to-gray-100 rounded-lg border border-gray-200">
  <h3 class="text-xl font-semibold text-gray-900 mb-3">Custom Widget</h3>
  <p class="text-gray-600 mb-4">Replace this with your custom content. You can add any HTML, CSS, and JavaScript here.</p>
  <div class="bg-white p-4 rounded border">
    <p class="text-sm text-gray-500">Your custom content goes here...</p>
  </div>
</div>

<style>
/* Add your custom CSS here */
.custom-widget {
  /* Your styles */
}
</style>

<script>
// Add your custom JavaScript here
console.log('Custom widget loaded');
<\/script>`}],of=()=>localStorage.getItem("pickntrust-admin-password")||localStorage.getItem("adminPassword")||"pickntrust2025",gs=(t={})=>({...t,"x-admin-password":of()});function cf(){const[t,s]=E.useState(!0),[a,r]=E.useState(null),[i,n]=E.useState(""),[l,o]=E.useState("All"),[d,g]=E.useState("form"),[x,b]=E.useState(!1),[u,f]=E.useState({templateType:"image-link",title:"",descriptionText:"",imageUrl:"",imageAlt:"",linkUrl:"",buttonText:"Learn More",colorAccent:"#2563EB",adClient:"",adSlot:""}),[w,B]=E.useState(!1),[C,q]=E.useState({name:"",description:"",body:"",code:"",targetPage:"",position:"",isActive:!0,maxWidth:"",customCss:"",showOnMobile:!0,showOnDesktop:!0,externalLink:""}),{toast:R}=ht(),Z=bt(),{data:p=[]}=Re({queryKey:["/api/admin/nav-tabs"],queryFn:async()=>{const m=await fetch("/api/admin/nav-tabs",{headers:{"x-admin-password":localStorage.getItem("adminPassword")||""}});if(!m.ok)throw new Error("Failed to fetch navigation tabs");return m.json()},staleTime:5*60*1e3}),{data:I=[]}=Re({queryKey:["/api/travel-categories"],queryFn:async()=>{const m=await fetch("/api/travel-categories");return m.ok?m.json():(console.log("Failed to fetch travel categories, using empty array"),[])},staleTime:5*60*1e3,refetchOnWindowFocus:!1}),F=I.filter(m=>m.isActive).sort((m,c)=>m.displayOrder-c.displayOrder).map(m=>({value:`travel-${m.slug}`,label:`Travel - ${m.name}`})),j=[...nf,...lf,...F,...(Array.isArray(p)?p:[]).map(m=>({value:m.slug,label:m.name}))].filter((m,c,y)=>c===y.findIndex(O=>O.value===m.value)),{data:A,isLoading:G,refetch:J}=Re({queryKey:["/api/admin/widgets"],queryFn:async()=>{const m=await fetch("/api/admin/widgets",{headers:gs()});if(!m.ok){const y=await m.text().catch(()=>"Failed to fetch widgets");throw new Error(y||"Failed to fetch widgets")}return(await m.json()).map(y=>({id:y.id,name:y.name,description:y.description||"",body:y.body||"",code:y.code,targetPage:y.target_page,position:y.position,isActive:!!y.is_active,displayOrder:y.display_order,maxWidth:y.max_width,customCss:y.custom_css,showOnMobile:!!y.show_on_mobile,showOnDesktop:!!y.show_on_desktop,externalLink:y.external_link||"",createdAt:y.created_at,updatedAt:y.updated_at}))},staleTime:1e3*60*5,refetchOnWindowFocus:!1}),{data:K}=Re({queryKey:["/api/admin/widgets/stats"],queryFn:async()=>{const m=await fetch("/api/admin/widgets/stats",{headers:gs()});if(!m.ok){const c=await m.text().catch(()=>"Failed to fetch widget stats");throw new Error(c||"Failed to fetch widget stats")}return m.json()}}),ee=be({mutationFn:async m=>{const c=await fetch("/api/admin/widgets",{method:"POST",headers:gs({"Content-Type":"application/json"}),body:JSON.stringify(m)});if(!c.ok){const y=await c.text().catch(()=>"Failed to create widget");throw new Error(y||"Failed to create widget")}return c.json()},onSuccess:()=>{Z.invalidateQueries({queryKey:["/api/admin/widgets"]}),Z.invalidateQueries({queryKey:["/api/admin/widgets/stats"]}),Z.refetchQueries({queryKey:["/api/admin/widgets"]}),J(),s(!1),Pe(),R({title:"Success",description:"Widget created successfully!"})},onError:m=>{R({title:"Error",description:"Failed to create widget",variant:"destructive"})}}),ue=be({mutationFn:async({id:m,data:c})=>{const y=await fetch(`/api/admin/widgets/${m}`,{method:"PUT",headers:gs({"Content-Type":"application/json"}),body:JSON.stringify(c)});if(!y.ok){const O=await y.text().catch(()=>"Failed to update widget");throw new Error(O||"Failed to update widget")}return y.json()},onSuccess:()=>{Z.invalidateQueries({queryKey:["/api/admin/widgets"]}),Z.invalidateQueries({queryKey:["/api/admin/widgets/stats"]}),Z.refetchQueries({queryKey:["/api/admin/widgets"]}),J(),s(!1),r(null),Pe(),R({title:"Success",description:"Widget updated successfully!"})},onError:m=>{R({title:"Error",description:"Failed to update widget",variant:"destructive"})}}),N=be({mutationFn:async m=>{const c=await fetch(`/api/admin/widgets/${m}`,{method:"DELETE",headers:gs()});if(!c.ok){const y=await c.text().catch(()=>"Failed to delete widget");throw new Error(y||"Failed to delete widget")}return c.json()},onSuccess:()=>{Z.invalidateQueries({queryKey:["/api/admin/widgets"]}),Z.invalidateQueries({queryKey:["/api/admin/widgets/stats"]}),Z.refetchQueries({queryKey:["/api/admin/widgets"]}),J(),R({title:"Success",description:"Widget deleted successfully!"})},onError:m=>{R({title:"Error",description:"Failed to delete widget",variant:"destructive"})}}),$=be({mutationFn:async m=>{const c=await fetch(`/api/admin/widgets/${m}/toggle`,{method:"PATCH",headers:gs()});if(!c.ok){const y=await c.text().catch(()=>"Failed to toggle widget");throw new Error(y||"Failed to toggle widget")}return c.json()},onSuccess:()=>{Z.invalidateQueries({queryKey:["/api/admin/widgets"]}),Z.invalidateQueries({queryKey:["/api/admin/widgets/stats"]}),Z.refetchQueries({queryKey:["/api/admin/widgets"]}),J(),R({title:"Success",description:"Widget status updated!"})},onError:m=>{R({title:"Error",description:"Failed to toggle widget",variant:"destructive"})}}),ge=m=>({"Google AdSense":"Display responsive Google ads on your website","Banner Ad":"Custom banner advertisement with image and link","Affiliate Product Card":"Product showcase card with buy now button","Newsletter Signup":"Email subscription form with gradient design","Download CTA":"App download call-to-action with icon","Contact CTA":"Contact us prompt with phone icon","Social Media Links":"Social media icons with hover effects","Twitter Feed":"Twitter profile card with follow button","Contact Form":"Full contact form with name, email, and message","Feedback Form":"Customer feedback form with emoji ratings","Announcement Banner":"Dismissible announcement banner","Cookie Notice":"GDPR compliant cookie consent notice","Google Analytics":"Google Analytics tracking code","Facebook Pixel":"Facebook Pixel tracking for ads","Live Chat Widget":"Interactive live chat support widget","WhatsApp Chat":"WhatsApp contact button with custom message","Custom HTML":"Blank template for custom HTML, CSS, and JavaScript"})[m]||"Custom widget template",Pe=()=>{q({name:"",description:"",body:"",code:"",targetPage:"",position:"",isActive:!0,maxWidth:"",customCss:"",showOnMobile:!0,showOnDesktop:!0,externalLink:""}),n(""),o("All"),g("form"),f({templateType:"image-link",title:"",descriptionText:"",imageUrl:"",imageAlt:"",linkUrl:"",buttonText:"Learn More",colorAccent:"#2563EB",adClient:"",adSlot:""})},Y=()=>{const{templateType:m,title:c,descriptionText:y,imageUrl:O,imageAlt:Q,linkUrl:V,buttonText:se,colorAccent:h,adClient:z,adSlot:X}=u,de=(c==null?void 0:c.trim())||"Widget",Se=(se==null?void 0:se.trim())||"Learn More",De=(V==null?void 0:V.trim())||"#",$e=y!=null&&y.trim()?`<p class="text-sm text-gray-700 mt-2">${y.trim()}</p>`:"";if(m==="image-link")return O!=null&&O.trim()?`<!-- Auto-generated: Image + Link Widget -->
<div class="bg-white border border-gray-200 rounded-lg shadow-sm overflow-hidden max-w-md">
  <img src="${O.trim()}" alt="${de}" class="w-full h-48 object-cover">
  <div class="p-4">
    <h3 class="text-lg font-semibold text-gray-900">${de}</h3>
    ${$e}
    <a href="${De}" class="inline-block mt-3 px-4 py-2 rounded-md text-white" style="background-color:${h}">${Se}</a>
  </div>
</div>`:(R({title:"Error",description:"Please provide an Image URL for the Image + Link template",variant:"destructive"}),null);if(m==="cta-button")return`<!-- Auto-generated: CTA Button Widget -->
<div class="bg-blue-50 border border-blue-200 rounded-lg p-6 text-center">
  <h3 class="text-lg font-semibold text-gray-900">${de}</h3>
  ${$e}
  <a href="${De}" class="inline-block mt-3 px-6 py-2 rounded-md text-white" style="background-color:${h}">${Se}</a>
</div>`;if(m==="announcement-banner"){const Me=(y==null?void 0:y.trim())||"Announcement";return`<!-- Auto-generated: Announcement Banner Widget -->
<div class="text-white p-4 text-center relative" style="background-color:${h}">
  <p class="font-medium"><strong>${de}:</strong> ${Me}</p>
  <button class="absolute right-4 top-1/2 -translate-y-1/2" onclick="this.parentElement.style.display='none'">
    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
    </svg>
  </button>
</div>`}if(m==="banner-ad"){if(!(O!=null&&O.trim()))return R({title:"Error",description:"Please provide an Image URL for the Banner Ad template",variant:"destructive"}),null;const Me=(Q==null?void 0:Q.trim())||de;return`<!-- Auto-generated: Banner Ad Widget -->
<div class="bg-white border border-gray-200 rounded-lg shadow-sm overflow-hidden max-w-md">
  <a href="${De}" target="_blank" rel="nofollow sponsored">
    <img src="${O.trim()}" alt="${Me}" class="w-full h-48 object-cover">
  </a>
  <div class="p-4">
    <h3 class="text-lg font-semibold text-gray-900">${de}</h3>
    ${$e}
  </div>
</div>`}if(m==="adsense"){const Me=z==null?void 0:z.trim(),P=X==null?void 0:X.trim();return!Me||!P?(R({title:"Error",description:"AdSense requires both Client ID (ca-pub-...) and Slot ID",variant:"destructive"}),null):`<!-- Auto-generated: Google AdSense Widget -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=${Me}" crossorigin="anonymous"><\/script>
<ins class="adsbygoogle" style="display:block" data-ad-client="${Me}" data-ad-slot="${P}" data-ad-format="auto" data-full-width-responsive="true"></ins>
<script>(adsbygoogle = window.adsbygoogle || []).push({});<\/script>`}return null},ke=async m=>{var c;try{B(!0);const y=new FormData;y.append("file",m);const O=await fetch("/api/upload",{method:"POST",body:y});if(!O.ok)throw new Error("Upload failed");const Q=await O.json(),V=typeof Q.url=="string"?Q.url:((c=Q==null?void 0:Q.files)==null?void 0:c.image)||"";if(V)f(se=>({...se,imageUrl:V})),R({title:"Image Uploaded",description:"Image URL set from uploaded file."});else throw new Error("No URL returned from upload")}catch(y){R({title:"Upload Error",description:(y==null?void 0:y.message)||"Failed to upload image",variant:"destructive"})}finally{B(!1)}},_e=m=>{if(m.preventDefault(),!C.targetPage){R({title:"Error",description:"Please select a target page",variant:"destructive"});return}if(!C.position){R({title:"Error",description:"Please select a position",variant:"destructive"});return}let c={...C};if(d==="form"){const y=Y();if(!y)return;c={...c,code:y}}a?ue.mutate({id:a.id,data:c}):ee.mutate(c)},je=m=>{r(m),q({name:m.name,description:m.description||"",body:m.body||"",code:m.code,targetPage:m.targetPage,position:m.position,isActive:m.isActive,maxWidth:m.maxWidth||"",customCss:m.customCss||"",showOnMobile:m.showOnMobile,showOnDesktop:m.showOnDesktop,externalLink:m.externalLink||""}),s(!0),g("code")},Be=m=>{q(c=>({...c,name:m.name,code:m.code})),n(m.name),g("code")},S=()=>{s(!1),r(null),Pe()};return G?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"text-lg",children:"Loading widgets..."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Widget Management"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Add and manage custom widgets for your pages"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(D,{onClick:()=>{J(),R({title:"Success",description:"Widget list refreshed!"})},variant:"outline",size:"sm",children:" Refresh"}),e.jsxs(D,{onClick:()=>s(!0),className:"bg-blue-600 hover:bg-blue-700",disabled:t,children:[e.jsx(tt,{className:"w-4 h-4 mr-2"}),"Add Widget"]})]})]}),K&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(re,{children:e.jsx(ne,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Widgets"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:K.total})]}),e.jsx(qs,{className:"w-8 h-8 text-blue-600"})]})})}),e.jsx(re,{children:e.jsx(ne,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Active Widgets"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:K.active})]}),e.jsx(kt,{className:"w-8 h-8 text-green-600"})]})})}),e.jsx(re,{children:e.jsx(ne,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Inactive Widgets"}),e.jsx("p",{className:"text-2xl font-bold text-gray-600",children:K.inactive})]}),e.jsx($t,{className:"w-8 h-8 text-gray-600"})]})})}),e.jsx(re,{children:e.jsx(ne,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pages with Widgets"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:Object.keys(K.byPage||{}).length})]}),e.jsx(Va,{className:"w-8 h-8 text-purple-600"})]})})})]}),t&&e.jsxs(re,{className:"border-blue-200 bg-blue-50 dark:bg-blue-900/20",children:[e.jsxs(we,{children:[e.jsx(Ne,{className:"text-blue-800 dark:text-blue-200",children:a?"Edit Widget":"Add New Widget"}),e.jsx(Ae,{children:a?"Update the widget details":"Create a new widget for your pages"})]}),e.jsx(ne,{children:e.jsxs("form",{onSubmit:_e,className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{className:"text-sm font-medium",children:"Creation Mode"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(D,{type:"button",variant:d==="form"?"default":"outline",size:"sm",onClick:()=>g("form"),children:"Use Form"}),e.jsx(D,{type:"button",variant:d==="code"?"default":"outline",size:"sm",onClick:()=>g("code"),children:"Paste Code"})]})]}),!a&&d==="code"&&e.jsxs("div",{children:[e.jsx(T,{className:"text-sm font-medium",children:"Widget Templates"}),e.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Choose from our comprehensive collection of pre-built widgets"}),e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:["All",...Array.from(new Set(nr.map(m=>m.category)))].map(m=>e.jsx(D,{type:"button",variant:l===m?"default":"outline",size:"sm",onClick:()=>o(m),className:"text-xs",children:m},m))})}),e.jsx("div",{className:"max-h-64 overflow-y-auto border rounded-lg p-3",children:(l==="All"?nr:nr.filter(m=>m.category===l)).map(m=>e.jsx("div",{className:"mb-3 last:mb-0",children:e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-medium text-sm text-gray-900 dark:text-white",children:m.name}),e.jsx("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded-full",children:m.category})]}),e.jsx("p",{className:"text-xs text-gray-700 dark:text-gray-300 line-clamp-2",children:ge(m.name)})]}),e.jsx(D,{type:"button",variant:i===m.name?"default":"outline",size:"sm",onClick:()=>Be(m),className:"ml-3",children:i===m.name?"Selected":"Use Template"})]})},m.name))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(T,{htmlFor:"name",children:"Widget Name"}),e.jsx(W,{id:"name",value:C.name,onChange:m=>q(c=>({...c,name:m.target.value})),placeholder:"Enter widget name",required:!0})]}),e.jsxs("div",{children:[e.jsx(T,{htmlFor:"description",children:"Description (optional)"}),e.jsx(W,{id:"description",value:C.description,onChange:m=>q(c=>({...c,description:m.target.value})),placeholder:"Short description for admins or template content"})]}),e.jsxs("div",{children:[e.jsx(T,{htmlFor:"targetPage",children:"Target Page"}),e.jsxs(Ge,{value:C.targetPage,onValueChange:m=>q(c=>({...c,targetPage:m})),children:[e.jsx(We,{children:e.jsx(ze,{placeholder:"Select page"})}),e.jsx(He,{children:j.map(m=>e.jsx(ce,{value:m.value,children:m.label},m.value))})]})]}),e.jsxs("div",{children:[e.jsx(T,{htmlFor:"position",children:"Position"}),e.jsxs(Ge,{value:C.position,onValueChange:m=>q(c=>({...c,position:m})),children:[e.jsx(We,{children:e.jsx(ze,{placeholder:"Select position"})}),e.jsx(He,{children:Jn.map(m=>e.jsx(ce,{value:m.value,children:m.label},m.value))})]})]}),e.jsxs("div",{children:[e.jsx(T,{htmlFor:"maxWidth",children:"Max Width (optional)"}),e.jsx(W,{id:"maxWidth",value:C.maxWidth,onChange:m=>q(c=>({...c,maxWidth:m.target.value})),placeholder:"e.g., 300px, 100%, auto"})]}),e.jsxs("div",{children:[e.jsx(T,{htmlFor:"externalLink",children:"External Link (optional)"}),e.jsx(W,{id:"externalLink",value:C.externalLink,onChange:m=>q(c=>({...c,externalLink:m.target.value})),placeholder:"https://example.com/landing"})]})]}),d==="form"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx(T,{className:"text-sm font-medium",children:"Form Template"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(T,{children:"Template Type"}),e.jsxs(Ge,{value:u.templateType,onValueChange:m=>f(c=>({...c,templateType:m})),children:[e.jsx(We,{children:e.jsx(ze,{placeholder:"Select template"})}),e.jsxs(He,{children:[e.jsx(ce,{value:"image-link",children:"Image + Link"}),e.jsx(ce,{value:"cta-button",children:"CTA Button"}),e.jsx(ce,{value:"announcement-banner",children:"Announcement Banner"}),e.jsx(ce,{value:"banner-ad",children:"Banner Ad"}),e.jsx(ce,{value:"adsense",children:"Google AdSense"})]})]})]}),e.jsxs("div",{children:[e.jsx(T,{children:"Title"}),e.jsx(W,{value:u.title,onChange:m=>f(c=>({...c,title:m.target.value})),placeholder:"Widget title"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(T,{children:"Description Text"}),e.jsx(vt,{value:u.descriptionText,onChange:m=>f(c=>({...c,descriptionText:m.target.value})),rows:3,placeholder:"Optional description shown inside the widget"})]}),(u.templateType==="image-link"||u.templateType==="announcement-banner"||u.templateType==="banner-ad")&&e.jsxs("div",{children:[e.jsx(T,{children:"Image URL or Upload"}),e.jsx(W,{value:u.imageUrl,onChange:m=>f(c=>({...c,imageUrl:m.target.value})),placeholder:"https://..."}),e.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:m=>{var y;const c=(y=m.target.files)==null?void 0:y[0];c&&ke(c)}}),w&&e.jsx("span",{className:"text-xs text-gray-600",children:"Uploading..."})]}),u.imageUrl&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:u.imageUrl,alt:"Preview",className:"h-20 w-auto rounded border"})})]}),(u.templateType==="image-link"||u.templateType==="banner-ad")&&e.jsxs("div",{children:[e.jsx(T,{children:"Image Alt Text (optional)"}),e.jsx(W,{value:u.imageAlt,onChange:m=>f(c=>({...c,imageAlt:m.target.value})),placeholder:"Describe the image"})]}),u.templateType==="adsense"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(T,{children:"AdSense Client ID"}),e.jsx(W,{value:u.adClient,onChange:m=>f(c=>({...c,adClient:m.target.value})),placeholder:"ca-pub-XXXXXXXXXXXXXXXX"})]}),e.jsxs("div",{children:[e.jsx(T,{children:"AdSense Slot ID"}),e.jsx(W,{value:u.adSlot,onChange:m=>f(c=>({...c,adSlot:m.target.value})),placeholder:"e.g., 1234567890"})]})]}),e.jsxs("div",{children:[e.jsx(T,{children:"Link URL"}),e.jsx(W,{value:u.linkUrl,onChange:m=>f(c=>({...c,linkUrl:m.target.value})),placeholder:"https://..."})]}),e.jsxs("div",{children:[e.jsx(T,{children:"Button Text"}),e.jsx(W,{value:u.buttonText,onChange:m=>f(c=>({...c,buttonText:m.target.value})),placeholder:"Learn More"})]}),e.jsxs("div",{children:[e.jsx(T,{children:"Accent Color"}),e.jsx(W,{type:"color",value:u.colorAccent,onChange:m=>f(c=>({...c,colorAccent:m.target.value}))})]})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Code is auto-generated from these fields."})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{className:"text-sm font-medium",children:"Creation Mode"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(D,{type:"button",variant:d==="form"?"default":"outline",size:"sm",onClick:()=>g("form"),children:"Use Form"}),e.jsx(D,{type:"button",variant:d==="code"?"default":"outline",size:"sm",onClick:()=>g("code"),children:"Paste Code"})]})]}),d==="code"&&e.jsxs("div",{children:[e.jsx(T,{htmlFor:"code",children:"Widget Code (HTML/CSS/JS)"}),e.jsx(vt,{id:"code",value:C.code,onChange:m=>q(c=>({...c,code:m.target.value})),placeholder:"Paste your widget code here...",rows:8,className:"font-mono text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx(T,{htmlFor:"body",children:"Body (optional)"}),e.jsx(vt,{id:"body",value:C.body,onChange:m=>q(c=>({...c,body:m.target.value})),placeholder:"Optional body HTML/text content rendered before code",rows:6,className:"font-mono text-sm"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"If provided, Body renders before/above Code. Use for simple HTML content or helper text; Code supports full HTML/CSS/JS."})]}),e.jsxs("div",{children:[e.jsx(T,{htmlFor:"customCss",children:"Custom CSS (optional)"}),e.jsx(vt,{id:"customCss",value:C.customCss,onChange:m=>q(c=>({...c,customCss:m.target.value})),placeholder:"Add custom CSS styles...",rows:4,className:"font-mono text-sm"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(T,{className:"text-sm font-medium",children:"Placement Preview"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(re,{children:e.jsxs(ne,{className:"p-4",children:[e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mb-2",children:"Page layout preview"}),e.jsxs("div",{className:"rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:[e.jsxs("div",{className:`p-2 text-xs ${C.position==="banner-top"?"bg-green-50 dark:bg-green-900/20 border-b border-green-300 dark:border-green-700":"bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700"}`,children:["Banner Top",C.position==="banner-top"&&e.jsx("div",{className:"mt-2 rounded border border-green-300 dark:border-green-700 bg-white dark:bg-gray-900 p-2 text-[11px]",dangerouslySetInnerHTML:{__html:C.body||"Preview content"}})]}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:`p-2 text-xs mb-2 ${C.position==="content-top"?"bg-green-50 dark:bg-green-900/20 rounded border border-green-300 dark:border-green-700":"bg-gray-50 dark:bg-gray-800 rounded border border-gray-200 dark:border-gray-700"}`,children:["Content Top",C.position==="content-top"&&e.jsx("div",{className:"mt-2 rounded border border-green-300 dark:border-green-700 bg-white dark:bg-gray-900 p-2 text-[11px]",dangerouslySetInnerHTML:{__html:C.body||"Preview content"}})]}),e.jsx("div",{className:"h-20 rounded bg-gray-100 dark:bg-gray-700 flex items-center justify-center text-xs text-gray-600 dark:text-gray-300 mb-2",children:"Main Content"}),e.jsxs("div",{className:`p-2 text-xs ${C.position==="content-bottom"?"bg-green-50 dark:bg-green-900/20 rounded border border-green-300 dark:border-green-700":"bg-gray-50 dark:bg-gray-800 rounded border border-gray-200 dark:border-gray-700"}`,children:["Content Bottom",C.position==="content-bottom"&&e.jsx("div",{className:"mt-2 rounded border border-green-300 dark:border-green-700 bg-white dark:bg-gray-900 p-2 text-[11px]",dangerouslySetInnerHTML:{__html:C.body||"Preview content"}})]})]}),e.jsxs("div",{className:`p-2 text-xs border-t ${C.position==="footer"?"bg-green-50 dark:bg-green-900/20 border-green-300 dark:border-green-700":"bg-gray-50 dark:bg-gray-800 border-gray-200 dark:border-gray-700"}`,children:["Footer",C.position==="footer"&&e.jsx("div",{className:"mt-2 rounded border border-green-300 dark:border-green-700 bg-white dark:bg-gray-900 p-2 text-[11px]",dangerouslySetInnerHTML:{__html:C.body||"Preview content"}})]})]})]})}),e.jsx(re,{children:e.jsx(ne,{className:"p-4",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Selected Page:"}),e.jsx(Ce,{variant:"outline",children:C.targetPage||"Not selected"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Selected Position:"}),e.jsx(Ce,{variant:"outline",children:C.position||"Not selected"})]}),e.jsxs("div",{className:"pt-2 flex items-center gap-2",children:[e.jsx(D,{type:"button",size:"sm",variant:"default",onClick:()=>{try{const m={name:C.name||"Preview Widget",body:C.body||"",code:C.code||"",targetPage:C.targetPage||"home",position:C.position||"content-top",customCss:C.customCss||"",maxWidth:C.maxWidth||"none",showOnMobile:C.showOnMobile,showOnDesktop:C.showOnDesktop,externalLink:C.externalLink||""};localStorage.setItem("widgetPreview",JSON.stringify(m)),localStorage.setItem("widgetPreviewEnabled","true"),localStorage.setItem("widgetPreviewOnly","true");const c=C.targetPage||"home";window.open(`/${c}?preview=1&previewOnly=1`,"_blank"),R==null||R({title:"Live Preview",description:"Opened page with temporary widget preview."})}catch{}},children:"Open Live Preview"}),e.jsx(D,{type:"button",size:"sm",variant:"outline",onClick:()=>{try{localStorage.removeItem("widgetPreview"),localStorage.removeItem("widgetPreviewEnabled"),localStorage.removeItem("widgetPreviewOnly"),R==null||R({title:"Preview Cleared",description:"Temporary preview removed."})}catch{}},children:"Clear Preview"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Highlighted areas show where this widget will render for the selected page and position."})]})})}),e.jsx("div",{className:"mt-4 w-full col-span-1 md:col-span-2",children:e.jsxs(re,{children:[e.jsxs(we,{children:[e.jsx(Ne,{children:"Live Page Preview"}),e.jsx(Ae,{children:"Shows only this widget in the selected page and position."})]}),e.jsxs(ne,{className:"p-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(D,{type:"button",size:"sm",onClick:()=>{try{const m={name:C.name||"Preview Widget",body:C.body||"",code:C.code||"",targetPage:C.targetPage||"home",position:C.position||"content-top",customCss:C.customCss||"",maxWidth:C.maxWidth||"none",showOnMobile:C.showOnMobile,showOnDesktop:C.showOnDesktop,externalLink:C.externalLink||""};localStorage.setItem("widgetPreview",JSON.stringify(m)),localStorage.setItem("widgetPreviewEnabled","true"),localStorage.setItem("widgetPreviewOnly","true"),R==null||R({title:"Live Preview Updated",description:"Preview payload saved. Iframe refreshed."});const c=document.getElementById("live-preview-iframe");if(c){const O=`/${m.targetPage}?preview=1&previewOnly=1`,Q=Date.now();c.src=`${O}&t=${Q}`}const y=document.getElementById("live-preview-full-iframe");if(y){const O=`/${m.targetPage}?preview=1&previewOnly=1`,Q=Date.now();y.src=`${O}&t=${Q}`}}catch{}},children:"Update Live Preview"}),e.jsx(D,{type:"button",size:"sm",variant:"outline",onClick:()=>{try{const c=`/${{targetPage:C.targetPage||"home"}.targetPage}?preview=1&previewOnly=1`,y=Date.now(),O=`${c}&t=${y}`;b(!0);const Q=document.getElementById("live-preview-full-iframe");Q&&(Q.src=O)}catch{}},children:"Open Fullscreen"})]}),e.jsx("div",{className:"border rounded overflow-auto overflow-x-hidden h-[100vh] bg-white dark:bg-gray-950",children:e.jsx("iframe",{id:"live-preview-iframe",title:"Selected Page Live Preview",className:"w-full h-full",src:`/${C.targetPage||"home"}?preview=1&previewOnly=1&t=${Date.now()}`})})]})]})}),e.jsx("div",{id:"live-preview-overlay",className:`${x?"":"hidden"} fixed inset-0 z-[100] bg-black/70`,children:e.jsxs("div",{className:"h-full w-full flex flex-col",children:[e.jsxs("div",{className:"p-3 flex items-center gap-2",children:[e.jsx(D,{type:"button",size:"sm",variant:"secondary",onClick:()=>{b(!1)},children:"Close"}),e.jsx("a",{className:"text-xs underline text-white",href:`/${C.targetPage||"home"}?preview=1&previewOnly=1`,target:"_blank",rel:"noopener noreferrer",children:"Open in new tab"})]}),e.jsx("iframe",{id:"live-preview-full-iframe",title:"Fullscreen Live Preview",className:"h-full w-full bg-white",src:`/${C.targetPage||"home"}?preview=1&previewOnly=1&t=${Date.now()}`})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(et,{id:"isActive",checked:C.isActive,onCheckedChange:m=>q(c=>({...c,isActive:m}))}),e.jsx(T,{htmlFor:"isActive",children:"Active"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(et,{id:"showOnDesktop",checked:C.showOnDesktop,onCheckedChange:m=>q(c=>({...c,showOnDesktop:m}))}),e.jsxs(T,{htmlFor:"showOnDesktop",className:"flex items-center gap-1",children:[e.jsx(Va,{className:"w-4 h-4"}),"Desktop"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(et,{id:"showOnMobile",checked:C.showOnMobile,onCheckedChange:m=>q(c=>({...c,showOnMobile:m}))}),e.jsxs(T,{htmlFor:"showOnMobile",className:"flex items-center gap-1",children:[e.jsx(wi,{className:"w-4 h-4"}),"Mobile"]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(D,{type:"submit",disabled:ee.isPending||ue.isPending,className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Ys,{className:"w-4 h-4 mr-2"}),a?"Update Widget":"Create Widget"]}),e.jsxs(D,{type:"button",variant:"outline",onClick:S,children:[e.jsx(ds,{className:"w-4 h-4 mr-2"}),"Cancel"]})]})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Existing Widgets (",(A==null?void 0:A.length)||0,")"]}),!A||A.length===0?e.jsx(re,{children:e.jsxs(ne,{className:"p-8 text-center",children:[e.jsx(qs,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No widgets yet"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Create your first widget to add custom functionality to your pages."}),e.jsxs(D,{onClick:()=>s(!0),className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(tt,{className:"w-4 h-4 mr-2"}),"Add Your First Widget"]})]})}):e.jsx("div",{className:"grid gap-4",children:A.map(m=>{var c,y;return e.jsx(re,{className:`${m.isActive?"border-green-200 bg-green-50/50":"border-gray-200 bg-gray-50/50"} dark:bg-gray-800`,children:e.jsx(ne,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:m.name}),e.jsx(Ce,{variant:m.isActive?"default":"secondary",children:m.isActive?"Active":"Inactive"}),e.jsx(Ce,{variant:"outline",children:((c=j.find(O=>O.value===m.targetPage))==null?void 0:c.label)||m.targetPage}),e.jsx(Ce,{variant:"outline",children:((y=Jn.find(O=>O.value===m.position))==null?void 0:y.label)||m.position})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400 mb-2",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Va,{className:"w-4 h-4"}),m.showOnDesktop?"Desktop":"No Desktop"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(wi,{className:"w-4 h-4"}),m.showOnMobile?"Mobile":"No Mobile"]}),m.description&&e.jsxs("span",{className:"truncate max-w-[240px]",title:m.description,children:["Desc: ",m.description]}),m.maxWidth&&e.jsxs("span",{children:["Max Width: ",m.maxWidth]})]}),e.jsxs("div",{className:"bg-gray-100 dark:bg-gray-700 p-2 rounded text-xs font-mono text-gray-700 dark:text-gray-300 max-h-20 overflow-hidden",children:[m.code.substring(0,200),m.code.length>200?"...":""]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsx(D,{size:"sm",variant:"outline",onClick:()=>$.mutate(m.id),disabled:$.isPending,children:m.isActive?e.jsx($t,{className:"w-4 h-4"}):e.jsx(kt,{className:"w-4 h-4"})}),e.jsx(D,{size:"sm",variant:"outline",onClick:()=>je(m),children:e.jsx(Lt,{className:"w-4 h-4"})}),e.jsx(D,{size:"sm",variant:"outline",onClick:()=>{confirm("Are you sure you want to delete this widget?")&&N.mutate(m.id)},disabled:N.isPending,className:"text-red-600 hover:text-red-700",children:e.jsx(Yt,{className:"w-4 h-4"})})]})]})})},m.id)})})]})]})}const df=Lr({rawHtml:rt().optional(),name:rt().optional(),content:rt().optional(),provider:rt().optional(),purpose:rt().optional(),isActive:bs().optional().default(!0)}).refine(t=>{const a=(t.rawHtml||"").trim().length>0,r=!!(t.name||"").trim()&&!!(t.content||"").trim();return a||r},{message:"Provide raw HTML tag or name and content."}),uf=[{value:"Google",label:"Google Search Console"},{value:"Facebook",label:"Facebook Domain Verification"},{value:"Bing",label:"Bing Webmaster Tools"},{value:"Pinterest",label:"Pinterest Domain Verification"},{value:"Yandex",label:"Yandex Webmaster"},{value:"Baidu",label:"Baidu Webmaster Tools"},{value:"Other",label:"Other Provider"}],Zn=[{value:"google-site-verification",label:"google-site-verification"},{value:"facebook-domain-verification",label:"facebook-domain-verification"},{value:"msvalidate.01",label:"msvalidate.01 (Bing)"},{value:"p:domain_verify",label:"p:domain_verify (Pinterest)"},{value:"yandex-verification",label:"yandex-verification"},{value:"baidu-site-verification",label:"baidu-site-verification"}];function mf(){const[t,s]=E.useState(!1),[a,r]=E.useState(null),[i,n]=E.useState(!1),{toast:l}=ht(),o=Rr({resolver:Ur(df),defaultValues:{rawHtml:"",name:"",content:"",provider:"",purpose:"",isActive:!0}}),{data:d,isLoading:g}=Re({queryKey:["/api/admin/meta-tags"],queryFn:async()=>{const p=await fetch(`/api/admin/meta-tags?password=${encodeURIComponent(Ve())}`);if(!p.ok)throw new Error("Failed to fetch meta tags");return(await p.json()).metaTags||[]}}),x=bt(),b=be({mutationFn:async p=>{const I=await fetch("/api/admin/meta-tags",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...p,password:Ve()})});if(!I.ok){const F=await I.json();throw new Error(F.error||"Failed to create meta tag")}return I.json()},onSuccess:()=>{l({title:"Success",description:"Meta tag created successfully"}),x.invalidateQueries({queryKey:["/api/admin/meta-tags"]}),o.reset(),s(!1)},onError:p=>{l({title:"Error",description:p.message,variant:"destructive"})}}),u=be({mutationFn:async({id:p,data:I})=>{const F=await fetch(`/api/admin/meta-tags/${p}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...I,password:Ve()})});if(!F.ok){const _=await F.json();throw new Error(_.error||"Failed to update meta tag")}return F.json()},onSuccess:()=>{l({title:"Success",description:"Meta tag updated successfully"}),x.invalidateQueries({queryKey:["/api/admin/meta-tags"]}),r(null),o.reset()},onError:p=>{l({title:"Error",description:p.message,variant:"destructive"})}}),f=be({mutationFn:async p=>{const I=await fetch(`/api/admin/meta-tags/${p}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:Ve()})});if(!I.ok){const F=await I.json();throw new Error(F.error||"Failed to delete meta tag")}return I.json()},onSuccess:()=>{l({title:"Success",description:"Meta tag deleted successfully"}),x.invalidateQueries({queryKey:["/api/admin/meta-tags"]})},onError:p=>{l({title:"Error",description:p.message,variant:"destructive"})}}),w=be({mutationFn:async p=>{const I=await fetch(`/api/admin/meta-tags/${p}/toggle`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:Ve()})});if(!I.ok){const F=await I.json();throw new Error(F.error||"Failed to toggle meta tag status")}return I.json()},onSuccess:()=>{l({title:"Success",description:"Meta tag status updated successfully"}),x.invalidateQueries({queryKey:["/api/admin/meta-tags"]})},onError:p=>{l({title:"Error",description:p.message,variant:"destructive"})}}),B=p=>{a?u.mutate({id:a.id,data:p}):b.mutate(p)},C=p=>{r(p),o.reset({rawHtml:p.rawHtml||"",name:p.name,content:p.content,provider:p.provider,purpose:p.purpose,isActive:p.isActive}),s(!0)},q=()=>{r(null),s(!1),o.reset()},R=p=>{navigator.clipboard.writeText(p),l({title:"Copied",description:"Meta tag copied to clipboard"})},Z=p=>p.rawHtml&&p.rawHtml.trim().length>0?p.rawHtml.trim():`<meta name="${p.name}" content="${p.content}" />`;return g?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx(xt,{className:"w-8 h-8 animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Meta Tags Management"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Manage website ownership verification meta tags for search engines and social platforms"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(D,{onClick:()=>n(!i),variant:"outline",size:"sm",children:[e.jsx(qs,{className:"w-4 h-4 mr-2"}),i?"Hide Preview":"Show Preview"]}),e.jsxs(D,{onClick:()=>s(!0),className:"bg-blue-600 hover:bg-blue-700",size:"sm",children:[e.jsx(tt,{className:"w-4 h-4 mr-2"}),"Add Meta Tag"]})]})]}),e.jsx(re,{className:"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800",children:e.jsx(ne,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(xs,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-blue-900 dark:text-blue-100",children:"About Meta Tags"}),e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:"Meta tags for website ownership verification do not affect affiliate links. They are used by search engines and social platforms to verify that you own the domain. These tags are added to the HTML head section."})]})]})})}),i&&d&&d.length>0&&e.jsxs(re,{children:[e.jsxs(we,{children:[e.jsxs(Ne,{className:"flex items-center gap-2",children:[e.jsx(qs,{className:"w-5 h-5"}),"HTML Preview"]}),e.jsx(Ae,{children:"Copy these meta tags to your website's HTML head section"})]}),e.jsxs(ne,{children:[e.jsx("div",{className:"bg-gray-100 dark:bg-gray-800 p-4 rounded-lg",children:e.jsx("pre",{className:"text-sm overflow-x-auto",children:e.jsx("code",{children:d.filter(p=>p.isActive).map(p=>Z(p)).join(`
`)})})}),e.jsxs(D,{onClick:()=>R(d.filter(p=>p.isActive).map(p=>Z(p)).join(`
`)),variant:"outline",size:"sm",className:"mt-3",children:[e.jsx(Ni,{className:"w-4 h-4 mr-2"}),"Copy All Active Tags"]})]})]}),t&&e.jsxs(re,{children:[e.jsxs(we,{children:[e.jsx(Ne,{children:a?"Edit Meta Tag":"Add New Meta Tag"}),e.jsx(Ae,{children:"Add meta tags for website ownership verification. Paste the exact tag HTML or fill the fields."})]}),e.jsx(ne,{children:e.jsxs("form",{onSubmit:o.handleSubmit(B),className:"space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(T,{htmlFor:"rawHtml",children:"Raw HTML Tag (optional)"}),e.jsx(vt,{...o.register("rawHtml"),placeholder:'Paste the exact meta tag HTML, e.g., <meta name="google-site-verification" content="TOKEN">',className:"font-mono",rows:3}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"If provided, other fields become optional. Only meta tags are allowed."})]}),e.jsxs("div",{children:[e.jsx(T,{htmlFor:"provider",children:"Provider"}),e.jsxs(Ge,{value:o.watch("provider"),onValueChange:p=>o.setValue("provider",p),children:[e.jsx(We,{children:e.jsx(ze,{placeholder:"Select provider"})}),e.jsx(He,{children:uf.map(p=>e.jsx(ce,{value:p.value,children:p.label},p.value))})]})]}),e.jsxs("div",{children:[e.jsx(T,{htmlFor:"name",children:"Meta Tag Name"}),e.jsxs(Ge,{value:(()=>{const p=o.watch("name");return p&&Zn.some(I=>I.value===p)?p:void 0})(),onValueChange:p=>{p&&o.setValue("name",p)},children:[e.jsx(We,{children:e.jsx(ze,{placeholder:"Select common meta name"})}),e.jsx(He,{children:Zn.map(p=>e.jsx(ce,{value:p.value,children:p.label},p.value))})]}),e.jsx(W,{...o.register("name"),placeholder:"Or enter custom meta name (e.g., verify-admitad)",className:"mt-2"})]})]}),e.jsxs("div",{children:[e.jsx(T,{htmlFor:"content",children:"Content/Value"}),e.jsx(W,{...o.register("content"),placeholder:"Enter the verification code or content"})]}),e.jsxs("div",{children:[e.jsx(T,{htmlFor:"purpose",children:"Purpose"}),e.jsx(W,{...o.register("purpose"),placeholder:"e.g., Site Verification, Domain Verification"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"isActive",...o.register("isActive"),className:"rounded"}),e.jsx(T,{htmlFor:"isActive",children:"Active (include in website)"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(D,{type:"submit",disabled:b.isPending||u.isPending,children:b.isPending||u.isPending?e.jsxs(e.Fragment,{children:[e.jsx(xt,{className:"w-4 h-4 mr-2 animate-spin"}),a?"Updating...":"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ys,{className:"w-4 h-4 mr-2"}),a?"Update Meta Tag":"Create Meta Tag"]})}),e.jsxs(D,{type:"button",variant:"outline",onClick:q,children:[e.jsx(ds,{className:"w-4 h-4 mr-2"}),"Cancel"]})]})]})})]}),e.jsx("div",{className:"grid gap-4",children:d&&d.length>0?d.map(p=>e.jsx(re,{className:`${p.isActive?"":"opacity-60"}`,children:e.jsx(ne,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ce,{variant:p.isActive?"default":"secondary",children:p.provider}),e.jsx(Ce,{variant:"outline",children:p.purpose}),p.isActive?e.jsx(kt,{className:"w-4 h-4 text-green-600"}):e.jsx($t,{className:"w-4 h-4 text-gray-400"})]}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:p.name}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1 font-mono",children:p.content}),e.jsx("div",{className:"mt-2 p-2 bg-gray-100 dark:bg-gray-800 rounded text-xs font-mono",children:Z(p)})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsx(D,{onClick:()=>R(Z(p)),variant:"outline",size:"sm",children:e.jsx(Ni,{className:"w-4 h-4"})}),e.jsx(D,{onClick:()=>w.mutate(p.id),variant:"outline",size:"sm",disabled:w.isPending,children:p.isActive?e.jsx($t,{className:"w-4 h-4"}):e.jsx(kt,{className:"w-4 h-4"})}),e.jsx(D,{onClick:()=>C(p),variant:"outline",size:"sm",children:e.jsx(Lt,{className:"w-4 h-4"})}),e.jsx(D,{onClick:()=>f.mutate(p.id),variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",disabled:f.isPending,children:e.jsx(Yt,{className:"w-4 h-4"})})]})]})})},p.id)):e.jsx(re,{children:e.jsxs(ne,{className:"p-8 text-center",children:[e.jsx($s,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No Meta Tags Yet"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Add meta tags to verify your website ownership with search engines and social platforms."}),e.jsxs(D,{onClick:()=>s(!0),children:[e.jsx(tt,{className:"w-4 h-4 mr-2"}),"Add Your First Meta Tag"]})]})})})]})}const pf=Lr({name:rt().min(1,"RSS feed name is required"),url:rt().url("Valid URL is required"),description:rt().optional().default(""),category:rt().min(1,"Category is required"),updateFrequency:rd().min(5,"Update frequency must be at least 5 minutes").default(60),isActive:bs().optional().default(!0),autoImport:bs().optional().default(!0),contentFilter:rt().optional().default(""),affiliateReplace:bs().optional().default(!1)}),gf=()=>{const{data:t,isLoading:s,error:a}=Re({queryKey:["/api/categories/browse"],queryFn:async()=>{const r=await fetch("/api/categories/browse");if(!r.ok)throw new Error("Failed to fetch categories");const i=await r.json();return(Array.isArray(i)?i:i.categories||[]).map(l=>({id:l.id||l.slug||l.name,name:l.name||l.title||l.slug}))}});return{categories:t||[],isLoading:s,error:a}},hf=[{value:5,label:"5 minutes"},{value:15,label:"15 minutes"},{value:30,label:"30 minutes"},{value:60,label:"1 hour"},{value:120,label:"2 hours"},{value:360,label:"6 hours"},{value:720,label:"12 hours"},{value:1440,label:"24 hours"}];function ff(){var _;const[t,s]=E.useState(!1),[a,r]=E.useState(null),[i,n]=E.useState(""),{toast:l}=ht(),o=Rr({resolver:Ur(pf),defaultValues:{name:"",url:"",description:"",category:"",updateFrequency:60,isActive:!0,autoImport:!0,contentFilter:"",affiliateReplace:!1}}),{categories:d,isLoading:g}=gf(),{data:x,isLoading:b}=Re({queryKey:["/api/admin/rss-feeds"],queryFn:async()=>{const j=await fetch(`/api/admin/rss-feeds?password=${encodeURIComponent(Ve())}`);if(!j.ok)throw new Error("Failed to fetch RSS feeds");return(await j.json()).rssFeeds||[]}}),u=bt(),f=be({mutationFn:async j=>{const A=await fetch("/api/admin/rss-feeds",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...j,password:Ve()})});if(!A.ok){const G=await A.json();throw new Error(G.error||"Failed to create RSS feed")}return A.json()},onSuccess:()=>{l({title:"Success",description:"RSS feed created successfully"}),u.invalidateQueries({queryKey:["/api/admin/rss-feeds"]}),o.reset(),s(!1)},onError:j=>{l({title:"Error",description:j.message,variant:"destructive"})}}),w=be({mutationFn:async({id:j,data:A})=>{const G=await fetch(`/api/admin/rss-feeds/${j}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...A,password:Ve()})});if(!G.ok){const J=await G.json();throw new Error(J.error||"Failed to update RSS feed")}return G.json()},onSuccess:()=>{l({title:"Success",description:"RSS feed updated successfully"}),u.invalidateQueries({queryKey:["/api/admin/rss-feeds"]}),r(null),o.reset()},onError:j=>{l({title:"Error",description:j.message,variant:"destructive"})}}),B=be({mutationFn:async j=>{const A=await fetch(`/api/admin/rss-feeds/${j}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:Ve()})});if(!A.ok){const G=await A.json();throw new Error(G.error||"Failed to delete RSS feed")}return A.json()},onSuccess:()=>{l({title:"Success",description:"RSS feed deleted successfully"}),u.invalidateQueries({queryKey:["/api/admin/rss-feeds"]})},onError:j=>{l({title:"Error",description:j.message,variant:"destructive"})}}),C=be({mutationFn:async j=>{const A=await fetch(`/api/admin/rss-feeds/${j}/toggle`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:Ve()})});if(!A.ok){const G=await A.json();throw new Error(G.error||"Failed to toggle RSS feed status")}return A.json()},onSuccess:()=>{l({title:"Success",description:"RSS feed status updated successfully"}),u.invalidateQueries({queryKey:["/api/admin/rss-feeds"]})},onError:j=>{l({title:"Error",description:j.message,variant:"destructive"})}}),q=be({mutationFn:async j=>{const A=await fetch("/api/admin/rss-feeds/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:j,password:Ve()})});if(!A.ok){const G=await A.json();throw new Error(G.error||"Failed to test RSS feed")}return A.json()},onSuccess:j=>{l({title:"RSS Feed Test Successful",description:j.message||"RSS feed URL is valid"})},onError:j=>{l({title:"RSS Feed Test Failed",description:j.message,variant:"destructive"})}}),R=j=>{a?w.mutate({id:a.id,data:j}):f.mutate(j)},Z=j=>{r(j),o.reset({name:j.name,url:j.url,description:j.description,category:j.category,updateFrequency:j.updateFrequency,isActive:j.isActive,autoImport:j.autoImport,contentFilter:j.contentFilter,affiliateReplace:j.affiliateReplace}),s(!0)},p=()=>{r(null),s(!1),o.reset()},I=j=>j?new Date(j).toLocaleString():"Never",F=j=>j.isActive?e.jsxs(Ce,{variant:"default",className:"gap-1",children:[e.jsx(kt,{className:"w-3 h-3"}),"Active"]}):e.jsxs(Ce,{variant:"secondary",className:"gap-1",children:[e.jsx($t,{className:"w-3 h-3"}),"Inactive"]});return b?e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx(xt,{className:"w-8 h-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading RSS feeds..."})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold tracking-tight flex items-center gap-2",children:[e.jsx(ki,{className:"w-6 h-6"}),"RSS Feeds Management"]}),e.jsx("p",{className:"text-muted-foreground",children:"Manage external RSS feeds for content aggregation and import"})]}),e.jsxs(D,{onClick:()=>s(!0),className:"gap-2",children:[e.jsx(tt,{className:"w-4 h-4"}),"Add RSS Feed"]})]}),t&&e.jsxs(re,{children:[e.jsxs(we,{children:[e.jsxs(Ne,{className:"flex items-center gap-2",children:[a?e.jsx(Lt,{className:"w-5 h-5"}):e.jsx(tt,{className:"w-5 h-5"}),a?"Edit RSS Feed":"Add New RSS Feed"]}),e.jsx(Ae,{children:a?"Update RSS feed settings":"Add a new RSS feed source for content aggregation"})]}),e.jsx(ne,{children:e.jsxs("form",{onSubmit:o.handleSubmit(R),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"name",children:"Feed Name *"}),e.jsx(W,{id:"name",...o.register("name"),placeholder:"e.g., TechCrunch Deals"}),o.formState.errors.name&&e.jsx("p",{className:"text-sm text-red-500",children:o.formState.errors.name.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"category",children:"Category *"}),e.jsxs(Ge,{value:o.watch("category"),onValueChange:j=>o.setValue("category",j),disabled:g,children:[e.jsx(We,{children:e.jsx(ze,{placeholder:g?"Loading categories...":"Select category"})}),e.jsx(He,{children:d.map(j=>e.jsx(ce,{value:j.name,children:j.name},j.id))})]}),o.formState.errors.category&&e.jsx("p",{className:"text-sm text-red-500",children:o.formState.errors.category.message})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"url",children:"RSS Feed URL *"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(W,{id:"url",...o.register("url"),placeholder:"https://example.com/feed.xml",className:"flex-1"}),e.jsxs(D,{type:"button",variant:"outline",onClick:()=>{const j=o.getValues("url");j&&q.mutate(j)},disabled:q.isPending,className:"gap-2",children:[q.isPending?e.jsx(xt,{className:"w-4 h-4 animate-spin"}):e.jsx(rl,{className:"w-4 h-4"}),"Test"]})]}),o.formState.errors.url&&e.jsx("p",{className:"text-sm text-red-500",children:o.formState.errors.url.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"description",children:"Description"}),e.jsx(vt,{id:"description",...o.register("description"),placeholder:"Brief description of this RSS feed source",rows:2})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"updateFrequency",children:"Update Frequency"}),e.jsxs(Ge,{value:(_=o.watch("updateFrequency"))==null?void 0:_.toString(),onValueChange:j=>o.setValue("updateFrequency",parseInt(j)),children:[e.jsx(We,{children:e.jsx(ze,{placeholder:"Select frequency"})}),e.jsx(He,{children:hf.map(j=>e.jsx(ce,{value:j.value.toString(),children:j.label},j.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"contentFilter",children:"Content Filter (JSON)"}),e.jsx(W,{id:"contentFilter",...o.register("contentFilter"),placeholder:'{"keywords": ["deal", "discount"]}'})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(et,{id:"isActive",checked:o.watch("isActive"),onCheckedChange:j=>o.setValue("isActive",j)}),e.jsx(T,{htmlFor:"isActive",children:"Active"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(et,{id:"autoImport",checked:o.watch("autoImport"),onCheckedChange:j=>o.setValue("autoImport",j)}),e.jsx(T,{htmlFor:"autoImport",children:"Auto Import"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(et,{id:"affiliateReplace",checked:o.watch("affiliateReplace"),onCheckedChange:j=>o.setValue("affiliateReplace",j)}),e.jsx(T,{htmlFor:"affiliateReplace",children:"Replace Affiliate Links"})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsxs(D,{type:"submit",disabled:f.isPending||w.isPending,className:"gap-2",children:[f.isPending||w.isPending?e.jsx(xt,{className:"w-4 h-4 animate-spin"}):e.jsx(Ys,{className:"w-4 h-4"}),a?"Update Feed":"Create Feed"]}),e.jsxs(D,{type:"button",variant:"outline",onClick:p,className:"gap-2",children:[e.jsx(ds,{className:"w-4 h-4"}),"Cancel"]})]})]})})]}),e.jsx("div",{className:"grid gap-4",children:(x==null?void 0:x.length)===0?e.jsx(re,{children:e.jsxs(ne,{className:"flex flex-col items-center justify-center py-8",children:[e.jsx(ki,{className:"w-12 h-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No RSS feeds configured"}),e.jsx("p",{className:"text-muted-foreground text-center mb-4",children:"Add your first RSS feed to start aggregating content from external sources."}),e.jsxs(D,{onClick:()=>s(!0),className:"gap-2",children:[e.jsx(tt,{className:"w-4 h-4"}),"Add RSS Feed"]})]})}):x==null?void 0:x.map(j=>e.jsx(re,{children:e.jsx(ne,{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:j.name}),F(j),e.jsx(Ce,{variant:"outline",children:j.category}),j.autoImport&&e.jsxs(Ce,{variant:"secondary",className:"gap-1",children:[e.jsx(Vs,{className:"w-3 h-3"}),"Auto Import"]})]}),e.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($s,{className:"w-4 h-4"}),e.jsx("a",{href:j.url,target:"_blank",rel:"noopener noreferrer",className:"hover:text-primary underline",children:j.url}),e.jsx(il,{className:"w-3 h-3"})]}),j.description&&e.jsx("p",{children:j.description}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(pa,{className:"w-4 h-4"}),"Updates every ",j.updateFrequency," minutes"]}),e.jsxs("div",{children:["Last fetched: ",I(j.lastFetched)]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsx(D,{variant:"outline",size:"sm",onClick:()=>C.mutate(j.id),disabled:C.isPending,className:"gap-2",children:j.isActive?e.jsxs(e.Fragment,{children:[e.jsx($t,{className:"w-4 h-4"}),"Disable"]}):e.jsxs(e.Fragment,{children:[e.jsx(kt,{className:"w-4 h-4"}),"Enable"]})}),e.jsxs(D,{variant:"outline",size:"sm",onClick:()=>Z(j),className:"gap-2",children:[e.jsx(Lt,{className:"w-4 h-4"}),"Edit"]}),e.jsxs(D,{variant:"outline",size:"sm",onClick:()=>{confirm("Are you sure you want to delete this RSS feed?")&&B.mutate(j.id)},disabled:B.isPending,className:"gap-2 text-red-600 hover:text-red-700",children:[e.jsx(Yt,{className:"w-4 h-4"}),"Delete"]})]})]})})},j.id))})]})}function xf(){const t=Ve(),{toast:s}=ht(),[a,r]=E.useState([]),[i,n]=E.useState([]),[l,o]=E.useState(!1),[d,g]=E.useState([]),[x,b]=E.useState([]),[u,f]=E.useState([]),[w,B]=E.useState({}),[C,q]=E.useState(null),[R,Z]=E.useState(!1),[p,I]=E.useState(!1),F=E.useRef(null),_=E.useRef(null),[j,A]=E.useState("pending"),[G,J]=E.useState("pending"),K=["#6366F1","#3B82F6","#0EA5E9","#10B981","#22C55E","#EAB308","#F59E0B","#EF4444","#F43F5E","#8B5CF6","#14B8A6","#6B7280"],ee=["#000000","#6B7280","#7F1D1D","#B91C1C","#D97706","#F59E0B","#FDE047","#65A30D","#60A5FA","#4F46E5","#1D4ED8","#6D28D9","#FFFFFF","#D1D5DB","#B45309","#F9A8D4","#F59E0B","#FDE68A","#A3E635","#93C5FD","#94A3B8","#C7D2FE","#F3F4F6","#9CA3AF","#D1D5DB","#F8B4B4","#F4A460","#FDE68A","#FCD34D","#A3E635","#86EFAC","#A5B4FC","#D8B4FE","#E5E7EB","#6B7280","#9A3412","#DC2626","#F87171","#FB923C","#F59E0B","#84CC16","#34D399","#60A5FA","#8B5CF6","#A78BFA"],ue=["#EF4444","#F59E0B","#FDE047","#22C55E","#4ADE80","#60A5FA","#A78BFA","#F59E0B","#9CA3AF","#374151"],[N,$]=E.useState({title:"",imageUrl:"",clickUrl:"",type:"",description:"",viewMode:"",advertiserId:"",campaignId:"",logoUrl:"",imageAlt:"",colorAccent:"#6366F1",buttonText:"Shop",utmSource:"",utmMedium:"",utmCampaign:"",priority:"normal",rotationWeight:50,publishDate:"",publishTime:"",status:"draft",pinFirst:!1,titleStyle:{fontWeight:700,fontStyle:"normal",textDecoration:"none",fontSize:"24px",color:"",gradientEnabled:!1,gradientFrom:"#6366F1",gradientTo:"#9333EA",fontFamily:"system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif"},descriptionStyle:{fontWeight:400,fontStyle:"normal",textDecoration:"none",fontSize:"14px",color:"",gradientEnabled:!1,gradientFrom:"#6366F1",gradientTo:"#9333EA",fontFamily:"system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif"},badges:{sponsored:!1,official:!1,isNew:!1,sale:!1,limited:!1,featured:!1}});async function ge(){try{o(!0);const[c,y,O,Q,V]=await Promise.all([fetch("/api/admin/ad-requests",{headers:{"X-Admin-Password":t}}),fetch("/api/config/explore-ads"),fetch("/api/admin/campaigns",{headers:{"X-Admin-Password":t}}),fetch("/api/admin/advertisers/pending",{headers:{"X-Admin-Password":t}}),fetch("/api/admin/advertisers/approved",{headers:{"X-Admin-Password":t}})]),[se,h,z,X,de]=await Promise.all([c.json(),y.json(),O.json(),Q.json(),V.json()]);r(Array.isArray(se)?se:[]),n(Array.isArray(h)?h:[]),g(Array.isArray(z)?z:[]),b(Array.isArray(X)?X:[]),f(Array.isArray(de)?de:[]);try{const Se=Array.isArray(de)?de:[],De=await Promise.allSettled(Se.map(Me=>fetch(`/api/payments/admin/advertisers/${Me.id}/payments/latest`,{headers:{"X-Admin-Password":t}}).then(P=>P.json()).then(P=>({id:Me.id,data:P})))),$e={};for(const Me of De)Me.status==="fulfilled"&&Me.value&&($e[Me.value.id]=Me.value.data);B($e)}catch{}}catch{s({title:"Failed to load",description:"Could not fetch requests/ads",variant:"destructive"})}finally{o(!1)}}E.useEffect(()=>{try{const c=localStorage.getItem("exploreAdColorAccent");c&&$(y=>({...y,colorAccent:c}))}catch{}ge()},[]);async function Pe(c){try{if(!(await fetch(`/api/admin/ad-requests/${c}/approve`,{method:"POST",headers:{"Content-Type":"application/json","X-Admin-Password":t}})).ok)throw new Error("Approve failed");s({title:"Approved",description:"Request approved and added to Explore ads"}),await ge()}catch(y){s({title:"Approve failed",description:String(y),variant:"destructive"})}}async function Y(c){const y="";try{if(!(await fetch(`/api/admin/ad-requests/${c}/reject`,{method:"POST",headers:{"Content-Type":"application/json","X-Admin-Password":t},body:JSON.stringify({reason:y})})).ok)throw new Error("Reject failed");s({title:"Rejected",description:"Request rejected"}),await ge()}catch(O){s({title:"Reject failed",description:String(O),variant:"destructive"})}}async function ke(){try{if(!N.title||!N.clickUrl){s({title:"Missing fields",description:"Title and Link URL are required",variant:"destructive"});return}const c=N.publishDate&&N.publishTime?new Date(`${N.publishDate}T${N.publishTime}`).toISOString():void 0,y=Object.entries(N.badges).filter(([,se])=>!!se).map(([se])=>se),O=(N.imageUrl||"").trim(),Q=/^\/uploads\//i.test(O)||/^https?:\/\//i.test(O)?O:"";if(!(await fetch("/api/admin/explore-ads",{method:"POST",headers:{"Content-Type":"application/json","X-Admin-Password":t},body:JSON.stringify({...N,imageUrl:Q,publishAt:c,badges:y,titleStyle:N.titleStyle,descriptionStyle:N.descriptionStyle})})).ok)throw new Error("Add ad failed");$({title:"",imageUrl:"",clickUrl:"",type:"",description:"",viewMode:"",advertiserId:"",campaignId:"",logoUrl:"",imageAlt:"",colorAccent:N.colorAccent,buttonText:"Shop",utmSource:"",utmMedium:"",utmCampaign:"",priority:"normal",rotationWeight:50,publishDate:"",publishTime:"",status:"draft",pinFirst:!1,titleStyle:{fontWeight:700,fontStyle:"normal",textDecoration:"none",fontSize:"24px",color:"",gradientEnabled:!1,gradientFrom:"#6366F1",gradientTo:"#9333EA",fontFamily:"system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif"},descriptionStyle:{fontWeight:400,fontStyle:"normal",textDecoration:"none",fontSize:"14px",color:"",gradientEnabled:!1,gradientFrom:"#6366F1",gradientTo:"#9333EA",fontFamily:"system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif"},badges:{sponsored:!1,official:!1,isNew:!1,sale:!1,limited:!1,featured:!1}});try{localStorage.setItem("exploreAdColorAccent",N.colorAccent)}catch{}s({title:"Ad added",description:"Explore ad created successfully"}),await ge()}catch(c){s({title:"Add ad failed",description:String(c),variant:"destructive"})}}async function _e(){try{if(!C)return;if(!N.title||!N.clickUrl){s({title:"Missing fields",description:"Title and Link URL are required",variant:"destructive"});return}const c=N.publishDate&&N.publishTime?new Date(`${N.publishDate}T${N.publishTime}`).toISOString():void 0,y=Object.entries(N.badges).filter(([,se])=>!!se).map(([se])=>se),O=(N.imageUrl||"").trim(),Q=/^\/uploads\//i.test(O)||/^https?:\/\//i.test(O)?O:"";if(!(await fetch(`/api/admin/explore-ads/${C}`,{method:"PUT",headers:{"Content-Type":"application/json","X-Admin-Password":t},body:JSON.stringify({...N,imageUrl:Q,publishAt:c,badges:y,titleStyle:N.titleStyle,descriptionStyle:N.descriptionStyle})})).ok)throw new Error("Update ad failed");s({title:"Ad updated",description:"Explore ad updated successfully"}),q(null),await ge()}catch(c){s({title:"Update ad failed",description:String(c),variant:"destructive"})}}async function je(c,y){try{if(!y)return;c==="imageUrl"?Z(!0):I(!0);const O=new FormData;O.append("file",y);const Q=await fetch("/api/upload",{method:"POST",body:O}),V=Q.headers.get("content-type")||"";let se=null;if(V.includes("application/json"))try{se=await Q.json()}catch(h){const z=await Q.text().catch(()=>"");throw new Error(`Invalid JSON from server: ${String(h)}${z?` | ${z.slice(0,120)}`:""}`)}else{const h=await Q.text().catch(()=>"");throw new Error(`Unexpected response (not JSON): ${h.slice(0,200)}`)}if(!Q.ok||!(se!=null&&se.url))throw new Error((se==null?void 0:se.message)||"Upload failed");$(h=>({...h,[c]:se.url})),s({title:"Uploaded",description:`${c==="imageUrl"?"Image":"Logo"} uploaded successfully`})}catch(O){s({title:"Upload failed",description:String(O),variant:"destructive"})}finally{c==="imageUrl"?Z(!1):I(!1)}}function Be(c){try{q(c.id);let y="",O="";if(c.publishAt)try{const V=new Date(c.publishAt);y=V.toISOString().slice(0,10),O=V.toISOString().slice(11,16)}catch{}const Q={sponsored:!1,official:!1,isNew:!1,sale:!1,limited:!1,featured:!1};(Array.isArray(c.badges)?c.badges:[]).forEach(V=>{Q[V]=!0}),$({title:c.title||"",imageUrl:c.imageUrl||"",clickUrl:c.clickUrl||"",type:c.type||"",description:c.description||"",viewMode:c.viewMode||"",advertiserId:c.advertiserId?String(c.advertiserId):"",campaignId:c.campaignId?String(c.campaignId):"",logoUrl:c.logoUrl||"",imageAlt:c.imageAlt||"",colorAccent:c.colorAccent||"#6366F1",buttonText:c.buttonText||"Shop",utmSource:c.utmSource||"",utmMedium:c.utmMedium||"",utmCampaign:c.utmCampaign||"",priority:c.priority||"normal",rotationWeight:typeof c.rotationWeight=="number"?c.rotationWeight:50,publishDate:y,publishTime:O,status:c.status||"draft",pinFirst:!!c.pinFirst,titleStyle:c.titleStyle||{fontWeight:700,fontStyle:"normal",textDecoration:"none",fontSize:"24px",color:"",gradientEnabled:!1,gradientFrom:"#6366F1",gradientTo:"#9333EA",fontFamily:"system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif"},descriptionStyle:c.descriptionStyle||{fontWeight:400,fontStyle:"normal",textDecoration:"none",fontSize:"14px",color:"",gradientEnabled:!1,gradientFrom:"#6366F1",gradientTo:"#9333EA",fontFamily:"system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif"},badges:Q}),s({title:"Editing ad",description:`Loaded "${c.title}" into the form`})}catch(y){s({title:"Edit failed",description:String(y),variant:"destructive"})}}async function S(c){try{if(!(await fetch(`/api/admin/explore-ads/${c}`,{method:"DELETE",headers:{"X-Admin-Password":t}})).ok)throw new Error("Delete failed");s({title:"Removed",description:"Explore ad deleted"}),await ge()}catch(y){s({title:"Delete failed",description:String(y),variant:"destructive"})}}async function m(c){try{if(!(await fetch(`/api/admin/advertisers/${c}/approve`,{method:"POST",headers:{"X-Admin-Password":t}})).ok)throw new Error("Approve advertiser failed");s({title:"Advertiser approved",description:"User can now log in"}),await ge()}catch(y){s({title:"Approve failed",description:String(y),variant:"destructive"})}}return e.jsxs(Fr,{defaultValue:"manage",className:"space-y-6",children:[e.jsxs(Bs,{className:"w-full justify-start",children:[e.jsx(Ye,{value:"manage",children:"Manage"}),e.jsx(Ye,{value:"add",children:"Add Ad"})]}),e.jsxs(Ze,{value:"manage",className:"space-y-6",children:[e.jsxs(re,{children:[e.jsxs(we,{children:[e.jsxs(Ne,{className:"flex items-center gap-2",children:[e.jsx(dr,{className:"w-5 h-5"}),"Ad Requests Review"]}),e.jsx(Ae,{children:"Approve or reject incoming ad submissions"})]}),e.jsx(ne,{children:l?e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(xt,{className:"w-4 h-4 animate-spin"})," Loading"]}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs(Ge,{value:j,onValueChange:c=>A(c),children:[e.jsx(We,{className:"w-[160px]",children:e.jsx(ze,{placeholder:"Filter status"})}),e.jsxs(He,{children:[e.jsx(ce,{value:"pending",children:"Pending"}),e.jsx(ce,{value:"approved",children:"Approved"}),e.jsx(ce,{value:"rejected",children:"Rejected"})]})]})}),a.length===0?e.jsx("p",{className:"text-sm text-gray-600",children:"No requests yet."}):a.filter(c=>(c==null?void 0:c.status)===j).map(c=>e.jsxs("div",{className:"p-4 border rounded-lg flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ce,{variant:"secondary",className:"capitalize",children:c.status}),e.jsx("span",{className:"font-medium",children:c.title})]}),e.jsx("div",{className:"text-sm text-gray-600 break-all",children:c.clickUrl}),c.type&&e.jsxs("div",{className:"text-xs text-gray-500",children:["Type: ",c.type]}),c.description&&e.jsx("div",{className:"text-xs text-gray-500",children:c.description})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(D,{onClick:()=>Pe(c.id),disabled:c.status!=="pending",className:"bg-green-600 hover:bg-green-700",children:"Approve"}),e.jsx(D,{onClick:()=>Y(c.id),disabled:c.status!=="pending",variant:"outline",className:"border-red-600 text-red-600",children:"Reject"})]})]},c.id))]})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(Ge,{value:G,onValueChange:c=>J(c),children:[e.jsx(We,{className:"w-[180px]",children:e.jsx(ze,{placeholder:"Users filter"})}),e.jsxs(He,{children:[e.jsx(ce,{value:"pending",children:"Pending"}),e.jsx(ce,{value:"approved",children:"Approved"})]})]})}),G==="pending"&&e.jsxs(re,{children:[e.jsxs(we,{children:[e.jsxs(Ne,{className:"flex items-center gap-2",children:[e.jsx(Si,{className:"w-5 h-5"}),"Users/Requests (Pending)"]}),e.jsx(Ae,{children:"Review advertiser signups and approve access"})]}),e.jsx(ne,{children:l?e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(xt,{className:"w-4 h-4 animate-spin"})," Loading"]}):e.jsx("div",{className:"space-y-3",children:x.length===0?e.jsx("p",{className:"text-sm text-gray-600",children:"No pending advertisers."}):x.map(c=>e.jsxs("div",{className:"p-4 border rounded-lg flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ce,{variant:"secondary",className:"capitalize",children:c.status}),e.jsx("span",{className:"font-medium",children:c.company_name})]}),e.jsx("div",{className:"text-sm text-gray-600 break-all",children:c.email}),c.contact_person&&e.jsxs("div",{className:"text-xs text-gray-500",children:["Contact: ",c.contact_person]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(D,{onClick:()=>m(c.id),className:"bg-green-600 hover:bg-green-700",children:"Approve"}),e.jsx("a",{href:`/advertise/dashboard?adminAdvertiserId=${c.id}`,target:"_blank",rel:"noreferrer",children:e.jsx(D,{variant:"outline",children:"Dashboard"})})]})]},c.id))})})]}),G==="approved"&&e.jsxs(re,{children:[e.jsxs(we,{children:[e.jsxs(Ne,{className:"flex items-center gap-2",children:[e.jsx(Si,{className:"w-5 h-5"}),"Users (Approved)"]}),e.jsx(Ae,{children:"Quick links to approved advertisers dashboards"})]}),e.jsx(ne,{children:l?e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(xt,{className:"w-4 h-4 animate-spin"})," Loading"]}):e.jsx("div",{className:"space-y-3",children:u.length===0?e.jsx("p",{className:"text-sm text-gray-600",children:"No approved advertisers."}):u.map(c=>e.jsxs("div",{className:"p-4 border rounded-lg flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ce,{variant:"secondary",className:"capitalize",children:c.status}),e.jsx("span",{className:"font-medium",children:c.company_name})]}),e.jsx("div",{className:"text-sm text-gray-600 break-all",children:c.email}),c.contact_person&&e.jsxs("div",{className:"text-xs text-gray-500",children:["Contact: ",c.contact_person]}),(()=>{const y=w[c.id];if(!y||!y.payment&&!y.plan)return null;const O=y.payment||{},Q=y.plan||{},V=(O.currency||"").toString().toUpperCase(),se=typeof O.amount=="number"?O.amount:void 0,h=(O.payment_method||"").toString(),z=(O.payment_status||"").toString(),X=O.transaction_id||"",de=O.payment_date?new Date(O.payment_date):null,Se=de?de.toLocaleDateString():void 0,De=Q.name||void 0,$e=Q.duration||void 0;return e.jsx("div",{className:"mt-2 text-xs text-gray-700",children:e.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1",children:[De&&e.jsxs("span",{children:["Plan: ",e.jsx("span",{className:"font-medium",children:De}),$e?` (${$e})`:""]}),se!=null&&V&&e.jsxs("span",{children:["Amount: ",e.jsxs("span",{className:"font-medium",children:[V," ",se]})]}),h&&e.jsxs("span",{children:["Method: ",e.jsx("span",{className:"font-medium capitalize",children:h})]}),z&&e.jsxs("span",{children:["Status: ",e.jsx("span",{className:"font-medium capitalize",children:z})]}),Se&&e.jsxs("span",{children:["Paid: ",e.jsx("span",{className:"font-medium",children:Se})]}),X&&e.jsxs("span",{children:["Ref: ",e.jsxs("span",{className:"font-mono",children:[String(X).slice(0,8),""]})]})]})})})()]}),e.jsx("div",{className:"flex gap-2",children:e.jsx("a",{href:`/advertise/dashboard?adminAdvertiserId=${c.id}`,target:"_blank",rel:"noreferrer",children:e.jsx(D,{children:"Open Dashboard"})})})]},c.id))})})]})]}),e.jsxs(Ze,{value:"add",className:"space-y-6",children:[e.jsxs(re,{children:[e.jsxs(we,{children:[e.jsxs(Ne,{className:"flex items-center gap-2",children:[e.jsx(tt,{className:"w-5 h-5"}),"Add Explore Ad (Direct)"]}),e.jsx(Ae,{children:"Add an ad directly to the Explore page"})]}),e.jsxs(ne,{className:"space-y-3",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(T,{children:"Title"}),e.jsx(W,{value:N.title,onChange:c=>$({...N,title:c.target.value}),placeholder:"e.g. Summer Sale"}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2 items-center bg-black text-white p-2 rounded-md",children:[e.jsx("button",{type:"button",className:`px-2 py-1 rounded border ${N.titleStyle.fontWeight===700?"bg-gray-800 text-white":"bg-gray-100 text-black"}`,onClick:()=>$(c=>({...c,titleStyle:{...c.titleStyle,fontWeight:c.titleStyle.fontWeight===700?400:700}})),children:"B"}),e.jsx("button",{type:"button",className:`px-2 py-1 rounded border ${N.titleStyle.fontStyle==="italic"?"bg-gray-800 text-white":"bg-gray-100 text-black"}`,onClick:()=>$(c=>({...c,titleStyle:{...c.titleStyle,fontStyle:c.titleStyle.fontStyle==="italic"?"normal":"italic"}})),children:e.jsx("span",{style:{fontStyle:"italic"},children:"I"})}),e.jsx("button",{type:"button",className:`px-2 py-1 rounded border ${(N.titleStyle.textDecoration||"").includes("line-through")?"bg-gray-800 text-white":"bg-gray-100 text-black"}`,onClick:()=>$(c=>{const y=c.titleStyle.textDecoration||"none",Q=[y.includes("line-through")?"":"line-through",y.replace("line-through","").trim()].join(" ").trim().replace(/ +/g," ").trim();return{...c,titleStyle:{...c.titleStyle,textDecoration:Q||"none"}}}),children:e.jsx("span",{style:{textDecoration:"line-through"},children:"S"})}),e.jsx("button",{type:"button",className:`px-2 py-1 rounded border ${(N.titleStyle.textDecoration||"").includes("underline")?"bg-gray-800 text-white":"bg-gray-100 text-black"}`,onClick:()=>$(c=>{const y=c.titleStyle.textDecoration||"none",Q=[y.includes("underline")?"":"underline",y.replace("underline","").trim()].join(" ").trim().replace(/ +/g," ").trim();return{...c,titleStyle:{...c.titleStyle,textDecoration:Q||"none"}}}),children:e.jsx("span",{style:{textDecoration:"underline"},children:"U"})}),e.jsx(W,{type:"number",min:12,max:48,value:parseInt(N.titleStyle.fontSize),onChange:c=>$(y=>({...y,titleStyle:{...y.titleStyle,fontSize:`${c.target.value}px`}})),className:"w-20 bg-black text-white border-gray-700"}),e.jsxs("select",{className:"px-2 py-1 border rounded bg-black text-white border-gray-700",value:N.titleStyle.fontFamily,onChange:c=>$(y=>({...y,titleStyle:{...y.titleStyle,fontFamily:c.target.value}})),children:[e.jsx("option",{value:"system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif",children:"System Default"}),e.jsx("option",{value:"Arial, Helvetica, sans-serif",children:"Arial"}),e.jsx("option",{value:"Georgia, serif",children:"Georgia"}),e.jsx("option",{value:"'Times New Roman', Times, serif",children:"Times New Roman"}),e.jsx("option",{value:"'Courier New', Courier, monospace",children:"Courier New"}),e.jsx("option",{value:"'Montserrat', Arial, sans-serif",children:"Montserrat"}),e.jsx("option",{value:"'Roboto', Arial, sans-serif",children:"Roboto"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{type:"color",value:N.titleStyle.color||"#ffffff",onChange:c=>$(y=>({...y,titleStyle:{...y.titleStyle,color:c.target.value,gradientEnabled:!1}})),className:"bg-black"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:ee.slice(0,24).map((c,y)=>e.jsx("button",{type:"button",className:"w-5 h-5 rounded border border-gray-700",style:{backgroundColor:c},onClick:()=>$(O=>({...O,titleStyle:{...O.titleStyle,color:c,gradientEnabled:!1}})),title:c},`t-${y}`))}),e.jsx("div",{className:"flex gap-1 mt-1",children:ue.map((c,y)=>e.jsx("button",{type:"button",className:"w-5 h-5 rounded border border-gray-700",style:{backgroundColor:c},onClick:()=>$(O=>({...O,titleStyle:{...O.titleStyle,color:c,gradientEnabled:!1}})),title:c},`s-${y}`))})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:N.titleStyle.gradientEnabled,onChange:c=>$(y=>({...y,titleStyle:{...y.titleStyle,gradientEnabled:c.target.checked}}))}),"Gradient"]}),N.titleStyle.gradientEnabled&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{type:"color",value:N.titleStyle.gradientFrom,onChange:c=>$(y=>({...y,titleStyle:{...y.titleStyle,gradientFrom:c.target.value}})),className:"bg-black"}),e.jsx(W,{type:"color",value:N.titleStyle.gradientTo,onChange:c=>$(y=>({...y,titleStyle:{...y.titleStyle,gradientTo:c.target.value}})),className:"bg-black"})]})]})]}),e.jsxs("div",{children:[e.jsx(T,{children:"Link URL"}),e.jsx(W,{value:N.clickUrl,onChange:c=>$({...N,clickUrl:c.target.value}),placeholder:"https://"})]}),e.jsxs("div",{children:[e.jsx(T,{children:"Image URL"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{value:N.imageUrl,onChange:c=>$({...N,imageUrl:c.target.value}),placeholder:"https://"}),e.jsx(D,{type:"button",variant:"secondary",onClick:()=>{var c;return(c=F.current)==null?void 0:c.click()},disabled:R,className:"shrink-0",children:"Upload"})]}),e.jsx("input",{ref:F,type:"file",accept:"image/*",className:"hidden",onChange:c=>{var y;return je("imageUrl",((y=c.target.files)==null?void 0:y[0])||void 0)}}),R&&e.jsxs("div",{className:"mt-1 text-xs text-blue-600 flex items-center gap-2",children:[e.jsx(xt,{className:"w-3 h-3 animate-spin"})," Uploading image"]})]}),e.jsxs("div",{children:[e.jsx(T,{children:"Logo URL"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{value:N.logoUrl,onChange:c=>$({...N,logoUrl:c.target.value}),placeholder:"https://"}),e.jsx(D,{type:"button",variant:"secondary",onClick:()=>{var c;return(c=_.current)==null?void 0:c.click()},disabled:p,className:"shrink-0",children:"Upload"})]}),e.jsx("input",{ref:_,type:"file",accept:"image/*",className:"hidden",onChange:c=>{var y;return je("logoUrl",((y=c.target.files)==null?void 0:y[0])||void 0)}}),p&&e.jsxs("div",{className:"mt-1 text-xs text-blue-600 flex items-center gap-2",children:[e.jsx(xt,{className:"w-3 h-3 animate-spin"})," Uploading logo"]})]}),e.jsxs("div",{children:[e.jsx(T,{children:"Type (Category)"}),e.jsx(W,{value:N.type,onChange:c=>$({...N,type:c.target.value}),placeholder:"e.g. electronics"})]}),e.jsxs("div",{children:[e.jsx(T,{children:"View As"}),e.jsxs(Ge,{value:N.viewMode,onValueChange:c=>$({...N,viewMode:c}),children:[e.jsx(We,{children:e.jsx(ze,{placeholder:"Choose view mode"})}),e.jsxs(He,{children:[e.jsx(ce,{value:"banner",children:"Banner"}),e.jsx(ce,{value:"grid",children:"Grid"}),e.jsx(ce,{value:"list",children:"List"}),e.jsx(ce,{value:"carousel",children:"Carousel/Slider"}),e.jsx(ce,{value:"cards",children:"Cards"}),e.jsx(ce,{value:"masonry",children:"Masonry"}),e.jsx(ce,{value:"compact",children:"Compact"}),e.jsx(ce,{value:"detailed",children:"Detailed"})]})]})]}),e.jsxs("div",{children:[e.jsx(T,{children:"Advertiser ID"}),e.jsx(W,{value:N.advertiserId,onChange:c=>$({...N,advertiserId:c.target.value}),placeholder:"Optional for house ads"})]}),e.jsxs("div",{children:[e.jsx(T,{children:"Campaign"}),e.jsxs(Ge,{value:N.campaignId||"",onValueChange:c=>{if(c==="none"){$({...N,campaignId:"",advertiserId:""});return}const y=d.find(O=>String(O.id)===c);$({...N,campaignId:c,advertiserId:y!=null&&y.advertiserId?String(y.advertiserId):N.advertiserId})},children:[e.jsx(We,{children:e.jsx(ze,{placeholder:"Select campaign (optional)"})}),e.jsxs(He,{children:[e.jsx(ce,{value:"none",children:"No campaign"}),d.map(c=>e.jsxs(ce,{value:String(c.id),children:[c.name," (ID ",c.id,")"]},c.id))]})]})]}),e.jsxs("div",{children:[e.jsx(T,{children:"Short Tagline"}),e.jsx(vt,{value:N.description,onChange:c=>$({...N,description:c.target.value}),placeholder:"Short and catchy description"}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2 items-center bg-black text-white p-2 rounded-md",children:[e.jsx("button",{type:"button",className:`px-2 py-1 rounded border ${N.descriptionStyle.fontWeight===700?"bg-gray-800 text-white":"bg-gray-100 text-black"}`,onClick:()=>$(c=>({...c,descriptionStyle:{...c.descriptionStyle,fontWeight:c.descriptionStyle.fontWeight===700?400:700}})),children:"B"}),e.jsx("button",{type:"button",className:`px-2 py-1 rounded border ${N.descriptionStyle.fontStyle==="italic"?"bg-gray-800 text-white":"bg-gray-100 text-black"}`,onClick:()=>$(c=>({...c,descriptionStyle:{...c.descriptionStyle,fontStyle:c.descriptionStyle.fontStyle==="italic"?"normal":"italic"}})),children:e.jsx("span",{style:{fontStyle:"italic"},children:"I"})}),e.jsx("button",{type:"button",className:`px-2 py-1 rounded border ${(N.descriptionStyle.textDecoration||"").includes("line-through")?"bg-gray-800 text-white":"bg-gray-100 text-black"}`,onClick:()=>$(c=>{const y=c.descriptionStyle.textDecoration||"none",Q=[y.includes("line-through")?"":"line-through",y.replace("line-through","").trim()].join(" ").trim().replace(/ +/g," ").trim();return{...c,descriptionStyle:{...c.descriptionStyle,textDecoration:Q||"none"}}}),children:e.jsx("span",{style:{textDecoration:"line-through"},children:"S"})}),e.jsx("button",{type:"button",className:`px-2 py-1 rounded border ${(N.descriptionStyle.textDecoration||"").includes("underline")?"bg-gray-800 text-white":"bg-gray-100 text-black"}`,onClick:()=>$(c=>{const y=c.descriptionStyle.textDecoration||"none",Q=[y.includes("underline")?"":"underline",y.replace("underline","").trim()].join(" ").trim().replace(/ +/g," ").trim();return{...c,descriptionStyle:{...c.descriptionStyle,textDecoration:Q||"none"}}}),children:e.jsx("span",{style:{textDecoration:"underline"},children:"U"})}),e.jsx(W,{type:"number",min:10,max:32,value:parseInt(N.descriptionStyle.fontSize),onChange:c=>$(y=>({...y,descriptionStyle:{...y.descriptionStyle,fontSize:`${c.target.value}px`}})),className:"w-20 bg-black text-white border-gray-700"}),e.jsxs("select",{className:"px-2 py-1 border rounded bg-black text-white border-gray-700",value:N.descriptionStyle.fontFamily,onChange:c=>$(y=>({...y,descriptionStyle:{...y.descriptionStyle,fontFamily:c.target.value}})),children:[e.jsx("option",{value:"system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif",children:"System Default"}),e.jsx("option",{value:"Arial, Helvetica, sans-serif",children:"Arial"}),e.jsx("option",{value:"Georgia, serif",children:"Georgia"}),e.jsx("option",{value:"'Times New Roman', Times, serif",children:"Times New Roman"}),e.jsx("option",{value:"'Courier New', Courier, monospace",children:"Courier New"}),e.jsx("option",{value:"'Montserrat', Arial, sans-serif",children:"Montserrat"}),e.jsx("option",{value:"'Roboto', Arial, sans-serif",children:"Roboto"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{type:"color",value:N.descriptionStyle.color||"#ffffff",onChange:c=>$(y=>({...y,descriptionStyle:{...y.descriptionStyle,color:c.target.value,gradientEnabled:!1}})),className:"bg-black"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:ee.slice(0,24).map((c,y)=>e.jsx("button",{type:"button",className:"w-5 h-5 rounded border border-gray-700",style:{backgroundColor:c},onClick:()=>$(O=>({...O,descriptionStyle:{...O.descriptionStyle,color:c,gradientEnabled:!1}})),title:c},`td-${y}`))}),e.jsx("div",{className:"flex gap-1 mt-1",children:ue.map((c,y)=>e.jsx("button",{type:"button",className:"w-5 h-5 rounded border border-gray-700",style:{backgroundColor:c},onClick:()=>$(O=>({...O,descriptionStyle:{...O.descriptionStyle,color:c,gradientEnabled:!1}})),title:c},`sd-${y}`))})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:N.descriptionStyle.gradientEnabled,onChange:c=>$(y=>({...y,descriptionStyle:{...y.descriptionStyle,gradientEnabled:c.target.checked}}))}),"Gradient"]}),N.descriptionStyle.gradientEnabled&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{type:"color",value:N.descriptionStyle.gradientFrom,onChange:c=>$(y=>({...y,descriptionStyle:{...y.descriptionStyle,gradientFrom:c.target.value}})),className:"bg-black"}),e.jsx(W,{type:"color",value:N.descriptionStyle.gradientTo,onChange:c=>$(y=>({...y,descriptionStyle:{...y.descriptionStyle,gradientTo:c.target.value}})),className:"bg-black"})]})]})]}),e.jsxs("div",{children:[e.jsx(T,{children:"Button Text"}),e.jsx(W,{value:N.buttonText,onChange:c=>$({...N,buttonText:c.target.value}),placeholder:"e.g. Shop"})]}),e.jsxs("div",{children:[e.jsx(T,{children:"Image Alt Text"}),e.jsx(W,{value:N.imageAlt,onChange:c=>$({...N,imageAlt:c.target.value}),placeholder:"e.g. Image description"})]}),e.jsxs("div",{children:[e.jsx(T,{children:"Color Accent"}),e.jsx(W,{type:"color",value:N.colorAccent,onChange:c=>{const y=c.target.value;$({...N,colorAccent:y});try{localStorage.setItem("exploreAdColorAccent",y)}catch{}}}),e.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:K.map((c,y)=>e.jsx("button",{type:"button",onClick:()=>{$(O=>({...O,colorAccent:c}));try{localStorage.setItem("exploreAdColorAccent",c)}catch{}},className:`w-6 h-6 rounded-full border ${N.colorAccent===c?"ring-2 ring-white border-black":"border-gray-300"}`,style:{backgroundColor:c},title:c},`cp-${y}`))})]}),e.jsxs("div",{children:[e.jsx(T,{children:"UTM Source"}),e.jsx(W,{value:N.utmSource,onChange:c=>$({...N,utmSource:c.target.value}),placeholder:"utm_source"})]}),e.jsxs("div",{children:[e.jsx(T,{children:"UTM Medium"}),e.jsx(W,{value:N.utmMedium,onChange:c=>$({...N,utmMedium:c.target.value}),placeholder:"utm_medium"})]}),e.jsxs("div",{children:[e.jsx(T,{children:"UTM Campaign"}),e.jsx(W,{value:N.utmCampaign,onChange:c=>$({...N,utmCampaign:c.target.value}),placeholder:"utm_campaign"})]}),e.jsxs("div",{children:[e.jsx(T,{children:"Priority"}),e.jsxs(Ge,{value:N.priority,onValueChange:c=>$({...N,priority:c}),children:[e.jsx(We,{children:e.jsx(ze,{placeholder:"Normal"})}),e.jsxs(He,{children:[e.jsx(ce,{value:"low",children:"Low"}),e.jsx(ce,{value:"normal",children:"Normal"}),e.jsx(ce,{value:"high",children:"High"}),e.jsx(ce,{value:"top",children:"Top"})]})]})]}),e.jsxs("div",{children:[e.jsx(T,{children:"Rotation Weight"}),e.jsx("input",{type:"range",min:0,max:100,value:N.rotationWeight,onChange:c=>$({...N,rotationWeight:Number(c.target.value)}),className:"w-full"})]}),e.jsxs("div",{children:[e.jsx(T,{children:"Publish Date"}),e.jsx(W,{type:"date",value:N.publishDate,onChange:c=>$({...N,publishDate:c.target.value})})]}),e.jsxs("div",{children:[e.jsx(T,{children:"Publish Time"}),e.jsx(W,{type:"time",value:N.publishTime,onChange:c=>$({...N,publishTime:c.target.value})})]}),e.jsxs("div",{children:[e.jsx(T,{children:"Status"}),e.jsx("div",{className:"flex gap-2",children:["draft","scheduled","active"].map(c=>e.jsx(D,{type:"button",variant:N.status===c?void 0:"outline",onClick:()=>$({...N,status:c}),children:c[0].toUpperCase()+c.slice(1)},c))})]}),e.jsx("div",{children:e.jsxs(T,{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:N.pinFirst,onChange:c=>$({...N,pinFirst:c.target.checked})}),"Pin as First in Carousel"]})}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(T,{children:"Badges"}),e.jsx("div",{className:"grid grid-cols-3 gap-2 mt-2 text-sm",children:[{key:"sponsored",label:"Sponsored"},{key:"official",label:"Official"},{key:"isNew",label:"New"},{key:"sale",label:"Sale"},{key:"limited",label:"Limited"},{key:"featured",label:"Featured"}].map(c=>e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:N.badges[c.key],onChange:y=>$({...N,badges:{...N.badges,[c.key]:y.target.checked}})}),c.label]},c.key))})]}),e.jsxs("div",{className:"md:col-span-2 grid md:grid-cols-2 gap-6 mt-4",children:[e.jsxs("div",{children:[e.jsx(T,{children:"Preview"}),e.jsx("div",{className:"mt-2 p-4 rounded-xl border bg-gray-900 text-white",children:e.jsxs("div",{className:"p-6 rounded-xl",style:{background:`linear-gradient(135deg, ${N.colorAccent}, rgba(0,0,0,0.4))`},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[N.logoUrl?e.jsx("img",{src:N.logoUrl,alt:"Logo",className:"w-10 h-10 rounded-full object-cover"}):null,e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl",style:{fontWeight:N.titleStyle.fontWeight,fontStyle:N.titleStyle.fontStyle,textDecoration:N.titleStyle.textDecoration,fontSize:N.titleStyle.fontSize,fontFamily:N.titleStyle.fontFamily,...N.titleStyle.gradientEnabled?{backgroundImage:`linear-gradient(135deg, ${N.titleStyle.gradientFrom}, ${N.titleStyle.gradientTo})`,WebkitBackgroundClip:"text",backgroundClip:"text",color:"transparent"}:{color:N.titleStyle.color||void 0}},children:N.title||"Summer Sale"}),e.jsx("div",{className:"text-gray-200",style:{fontWeight:N.descriptionStyle.fontWeight,fontStyle:N.descriptionStyle.fontStyle,textDecoration:N.descriptionStyle.textDecoration,fontSize:N.descriptionStyle.fontSize,fontFamily:N.descriptionStyle.fontFamily,...N.descriptionStyle.gradientEnabled?{backgroundImage:`linear-gradient(135deg, ${N.descriptionStyle.gradientFrom}, ${N.descriptionStyle.gradientTo})`,WebkitBackgroundClip:"text",backgroundClip:"text",color:"transparent"}:{color:N.descriptionStyle.color||void 0}},children:N.description||"Short and catchy description"})]})]}),e.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:Object.entries(N.badges).map(([c,y])=>y?e.jsx(Ce,{variant:"secondary",className:"bg-indigo-500 text-white",children:c==="isNew"?"New":c[0].toUpperCase()+c.slice(1)},c):null)}),e.jsx("div",{className:"mt-4",children:e.jsx(D,{className:"bg-white text-black hover:bg-gray-100",children:N.buttonText||"Shop"})})]})})]}),e.jsxs("div",{children:[e.jsx(T,{children:"Schedule & Status"}),e.jsxs("div",{className:"mt-2 p-4 rounded-xl border bg-gray-900 text-white space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(W,{type:"date",value:N.publishDate,onChange:c=>$({...N,publishDate:c.target.value})}),e.jsx(W,{type:"time",value:N.publishTime,onChange:c=>$({...N,publishTime:c.target.value})})]}),e.jsx("div",{className:"flex gap-2",children:["draft","scheduled","active"].map(c=>e.jsx(D,{type:"button",variant:N.status===c?void 0:"outline",onClick:()=>$({...N,status:c}),children:c[0].toUpperCase()+c.slice(1)},c))}),e.jsxs(T,{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:N.pinFirst,onChange:c=>$({...N,pinFirst:c.target.checked})}),"Pin as First in Carousel"]})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[C&&e.jsx(D,{type:"button",variant:"outline",onClick:()=>{q(null)},className:"border-gray-600 text-gray-800 dark:text-gray-200",children:"Cancel Edit"}),e.jsx(D,{onClick:C?_e:ke,className:"bg-blue-600 hover:bg-blue-700",children:C?"Update Ad":"Publish Now"})]})]})]}),e.jsxs(re,{children:[e.jsxs(we,{children:[e.jsxs(Ne,{className:"flex items-center gap-2",children:[e.jsx(Zt,{className:"w-5 h-5"}),"Approved Explore Ads"]}),e.jsx(Ae,{children:"Currently live (config-driven) Explore ads"})]}),e.jsx(ne,{className:"space-y-3",children:i.length===0?e.jsx("p",{className:"text-sm text-gray-600",children:"No approved ads yet."}):i.map(c=>e.jsxs("div",{className:"p-4 border rounded-lg flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("span",{className:"font-medium",children:c.title}),e.jsx("div",{className:"text-sm text-gray-600 break-all",children:c.clickUrl}),c.type&&e.jsxs("div",{className:"text-xs text-gray-500",children:["Type: ",c.type]}),c.viewMode&&e.jsxs("div",{className:"text-xs text-gray-500",children:["View: ",c.viewMode]}),c.source&&e.jsx(Ce,{variant:"outline",children:c.source})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(D,{onClick:()=>Be(c),variant:"secondary",className:"bg-indigo-600 hover:bg-indigo-700 text-white",children:"Edit"}),e.jsx(D,{onClick:()=>S(c.id),variant:"outline",className:"border-red-600 text-red-600",children:"Remove"}),e.jsxs("a",{href:c.clickUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-blue-600",children:[e.jsx(il,{className:"w-4 h-4"}),"Visit"]})]})]},c.id))})]})]})]})}const bf=Lr({name:rt().min(1,"Product name is required"),description:rt().min(1,"Description is required"),price:rt().optional(),originalPrice:rt().optional(),imageUrl:rt().url("Must be a valid URL"),affiliateUrl:rt().url("Must be a valid URL"),category:rt().min(1,"Category is required"),rating:rt().min(1,"Rating is required"),reviewCount:rt().min(1,"Review count is required"),discount:rt().optional(),isNew:bs().optional(),isFeatured:bs().optional()});function Ff(){const{toast:t}=ht(),s=bt(),[,a]=Uo(),[r,i]=E.useState(!1),[n,l]=E.useState(!1),[o,d]=E.useState(""),[g,x]=E.useState(!1),[b,u]=E.useState(""),[f,w]=E.useState(""),[B,C]=E.useState(!1),[q,R]=E.useState({newPassword:"",confirmPassword:""}),[Z,p]=E.useState("dashboard"),[I,F]=E.useState(!1),[_,j]=E.useState("");E.useEffect(()=>{console.log(" AdminPage mounted. isAuthenticated =",n)},[n]);const A=(()=>{try{return new URLSearchParams(window.location.search).get("forceAdminBaseline")==="1"}catch{return!1}})();E.useEffect(()=>{localStorage.getItem("pickntrust-admin-session")==="active"&&l(!0);const _e=new URLSearchParams(window.location.search).get("token");_e&&(w(_e),C(!0),window.history.replaceState({},document.title,window.location.pathname))},[]),E.useEffect(()=>{try{const Y=window.location.pathname;if(Y.startsWith("/admin")){const _e=Y.split("/")[2]||"";_e&&new Set(["dashboard","products","categories","navigation","banners","blog","videos","announcements","automation","commission","widgets","credentials","metatags","rssfeeds","adrequests","bots"]).has(_e)?p(_e):p("dashboard")}}catch{}},[]);const{data:G=[]}=Re({queryKey:["/api/products/featured"],queryFn:async()=>{const Y=await fetch("/api/products/featured");if(!Y.ok)throw new Error("Failed to fetch products");return Y.json()}}),{data:J=[]}=Re({queryKey:["/api/categories"],queryFn:async()=>{const Y=await fetch("/api/categories");if(!Y.ok)throw new Error("Failed to fetch categories");return Y.json()}}),{data:K=[]}=Re({queryKey:["/api/blog"],queryFn:async()=>{const Y=await fetch("/api/blog");if(!Y.ok)throw new Error("Failed to fetch blog posts");return Y.json()}}),{data:ee=[]}=Re({queryKey:["/api/video-content"],queryFn:async()=>{const Y=await fetch("/api/video-content");if(!Y.ok)throw new Error("Failed to fetch video content");return Y.json()}});be({mutationFn:async Y=>{const ke=await fetch("/api/products/extract",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:Y})});if(!ke.ok)throw new Error("Failed to extract product details");return ke.json()},onSuccess:Y=>{Y.success&&t({title:"Product Extracted!",description:"Product details have been extracted. You can now edit and save."})},onError:()=>{t({title:"Extraction Failed",description:"Could not extract product details from the URL.",variant:"destructive"})}}),be({mutationFn:async Y=>{const ke={...Y,price:Y.price,originalPrice:Y.originalPrice||void 0,rating:parseFloat(Y.rating),reviewCount:parseInt(Y.reviewCount),discount:Y.discount?parseInt(Y.discount):void 0,isNew:Y.isNew||!1,isFeatured:Y.isFeatured||!1,password:Ve()},_e=await fetch("/api/admin/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ke)});if(!_e.ok)throw new Error("Failed to add product");return _e.json()},onSuccess:()=>{t({title:"Product Added!",description:"New product has been added successfully."}),s.invalidateQueries({queryKey:["/api/products/featured"]}),$.reset(),i(!1)},onError:()=>{t({title:"Error",description:"Failed to add product. Please try again.",variant:"destructive"})}});const ue=be({mutationFn:async Y=>{const ke=await fetch("/api/admin/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:Y})});if(!ke.ok){const _e=await ke.json();throw new Error(_e.message||"Failed to send reset email")}return ke.json()},onSuccess:Y=>{t({title:"Reset Email Sent!",description:"Check your email for password reset instructions."}),u(""),x(!1),Y.resetToken&&(w(Y.resetToken),setTimeout(()=>{C(!0),t({title:"Development Mode",description:"Reset token auto-filled for testing."})},1e3))},onError:Y=>{t({title:"Error",description:Y.message,variant:"destructive"})}}),N=be({mutationFn:async Y=>{const ke=await fetch("/api/admin/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:f,newPassword:Y.newPassword,confirmPassword:Y.confirmPassword})});if(!ke.ok){const _e=await ke.json();throw new Error(_e.message||"Failed to reset password")}return ke.json()},onSuccess:()=>{t({title:"Password Reset Successfully!",description:"You can now login with your new password."}),R({newPassword:"",confirmPassword:""}),w(""),C(!1)},onError:Y=>{t({title:"Error",description:Y.message,variant:"destructive"})}}),$=Rr({resolver:Ur(bf),defaultValues:{name:"",description:"",price:"",originalPrice:"",imageUrl:"",affiliateUrl:"",category:"",rating:"4.5",reviewCount:"100",discount:"",isNew:!1,isFeatured:!0}}),ge=async Y=>{Y.preventDefault();try{const ke=await fetch("/api/admin/auth",{method:"POST",headers:{"Content-Type":"application/json","x-admin-password":o},body:JSON.stringify({password:o})}),_e=await ke.json();if(ke.ok&&_e.success){l(!0),d("");const je=`admin_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;localStorage.setItem("pickntrust-admin-session","active"),localStorage.setItem("pickntrust-admin-token",je),localStorage.setItem("pickntrust-admin-password","pickntrust2025"),t({title:"Access Granted",description:"Welcome to PickNTrust Enhanced Admin Panel."})}else t({title:"Access Denied",description:"Incorrect password. Please try again.",variant:"destructive"}),d("")}catch(ke){console.error("Login error:",ke),t({title:"Login Failed",description:"Unable to connect to server. Please try again.",variant:"destructive"}),d("")}},Pe=()=>{console.log(" Logout initiated"),localStorage.removeItem("pickntrust-admin-session"),localStorage.removeItem("pickntrust-admin-token"),localStorage.removeItem("pickntrust-admin-password"),t({title:"Logged Out",description:"Redirecting to homepage..."}),console.log(" Navigating to homepage immediately"),window.location.href="/"};return A?e.jsxs("div",{style:{minHeight:"100vh",background:"#0b1220",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:12},children:[e.jsx("div",{style:{fontSize:18,fontWeight:700},children:"Admin Baseline"}),e.jsx("div",{style:{fontSize:14,opacity:.9},children:"Admin route renders without layout/providers."}),e.jsx("a",{href:"/admin",style:{color:"#93c5fd",textDecoration:"underline",fontSize:14},children:"Return to full admin"})]}):n?e.jsxs(di,{pageId:"admin",enableContentOverlays:!1,enableFloatingOverlays:!1,showSidebar:!1,showRightSidebar:!1,children:[!1,e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx("div",{className:"pt-20",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8 flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-2",children:"PickNTrust Admin Panel"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-lg",children:"Complete management dashboard with enhanced video content support"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx(D,{onClick:Pe,variant:"outline",className:"text-red-600 border-red-600 hover:bg-red-50 dark:hover:bg-red-900/20",size:"sm",children:"Logout"})})]}),e.jsxs(Fr,{value:Z,onValueChange:Y=>{p(Y);try{const ke=`/admin/${Y}`;a(ke)}catch{}},className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-2 rounded-xl shadow-lg",children:[e.jsxs(Bs,{className:"grid w-full grid-cols-5 mb-2 bg-transparent p-0",children:[e.jsxs(Ye,{value:"dashboard",className:"flex items-center gap-2 data-[state=active]:bg-blue-500 data-[state=active]:text-white",children:[e.jsx(qa,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Dashboard"})]}),e.jsxs(Ye,{value:"products",className:"flex items-center gap-2 data-[state=active]:bg-green-500 data-[state=active]:text-white",children:[e.jsx(Ci,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Products"})]}),e.jsxs(Ye,{value:"categories",className:"flex items-center gap-2 data-[state=active]:bg-purple-500 data-[state=active]:text-white",children:[e.jsx(Ga,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Categories"})]}),e.jsxs(Ye,{value:"navigation",className:"flex items-center gap-2 data-[state=active]:bg-teal-500 data-[state=active]:text-white",children:[e.jsx(Qo,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Navigation"})]}),e.jsxs(Ye,{value:"banners",className:"flex items-center gap-2 data-[state=active]:bg-emerald-500 data-[state=active]:text-white",children:[e.jsx(Zt,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Banners"})]})]}),e.jsxs(Bs,{className:"grid w-full grid-cols-6 mb-2 bg-transparent p-0",children:[e.jsxs(Ye,{value:"blog",className:"flex items-center gap-2 data-[state=active]:bg-orange-500 data-[state=active]:text-white",children:[e.jsx(Wa,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Blog"})]}),e.jsxs(Ye,{value:"videos",className:"flex items-center gap-2 data-[state=active]:bg-pink-500 data-[state=active]:text-white",children:[e.jsx(Dt,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Videos"})]}),e.jsxs(Ye,{value:"announcements",className:"flex items-center gap-2 data-[state=active]:bg-red-500 data-[state=active]:text-white",children:[e.jsx(dr,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Announcements"})]}),e.jsxs(Ye,{value:"automation",className:"flex items-center gap-2 data-[state=active]:bg-cyan-500 data-[state=active]:text-white",children:[e.jsx(Ot,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Automation"})]}),e.jsxs(Ye,{value:"metatags",className:"flex items-center gap-2 data-[state=active]:bg-emerald-500 data-[state=active]:text-white",children:[e.jsx(Xo,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Meta Tags"})]}),e.jsxs(Ye,{value:"rssfeeds",className:"flex items-center gap-2 data-[state=active]:bg-amber-500 data-[state=active]:text-white",children:[e.jsx($s,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"RSS Feeds"})]})]}),e.jsxs(Bs,{className:"grid w-full grid-cols-5 bg-transparent p-0",children:[e.jsxs(Ye,{value:"widgets",className:"flex items-center gap-2 data-[state=active]:bg-violet-500 data-[state=active]:text-white",children:[e.jsx(qs,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Widgets"})]}),e.jsxs(Ye,{value:"commission",className:"flex items-center gap-2 data-[state=active]:bg-yellow-500 data-[state=active]:text-white",children:[e.jsx(Ai,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Commission"})]}),e.jsxs(Ye,{value:"credentials",className:"flex items-center gap-2 data-[state=active]:bg-purple-500 data-[state=active]:text-white",children:[e.jsx(xs,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Credentials"})]}),e.jsxs(Ye,{value:"bots",className:"flex items-center gap-2 data-[state=active]:bg-indigo-500 data-[state=active]:text-white",children:[e.jsx(Ot,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Bot Management"})]}),e.jsxs(Ye,{value:"adrequests",className:"flex items-center gap-2 data-[state=active]:bg-blue-500 data-[state=active]:text-white",children:[e.jsx(dr,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Ad Requests"})]})]})]}),e.jsxs(Ze,{value:"dashboard",className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-5 gap-6",children:[e.jsx(re,{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:e.jsx(ne,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-100 text-sm font-medium",children:"Total Products"}),e.jsx("p",{className:"text-3xl font-bold",children:Array.isArray(G)?G.length:0})]}),e.jsx(Ci,{className:"w-10 h-10 text-blue-200"})]})})}),e.jsx(re,{className:"bg-gradient-to-r from-green-500 to-green-600 text-white",children:e.jsx(ne,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-100 text-sm font-medium",children:"Featured Products"}),e.jsx("p",{className:"text-3xl font-bold",children:Array.isArray(G)?G.filter(Y=>Y.isFeatured).length:0})]}),e.jsx(Jo,{className:"w-10 h-10 text-green-200"})]})})}),e.jsx(re,{className:"bg-gradient-to-r from-purple-500 to-purple-600 text-white",children:e.jsx(ne,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-purple-100 text-sm font-medium",children:"Categories"}),e.jsx("p",{className:"text-3xl font-bold",children:Array.isArray(J)?J.length:0})]}),e.jsx(Ga,{className:"w-10 h-10 text-purple-200"})]})})}),e.jsx(re,{className:"bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:e.jsx(ne,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-orange-100 text-sm font-medium",children:"Blog Posts"}),e.jsx("p",{className:"text-3xl font-bold",children:Array.isArray(K)?K.length:0})]}),e.jsx(Wa,{className:"w-10 h-10 text-orange-200"})]})})}),e.jsx(re,{className:"bg-gradient-to-r from-pink-500 to-pink-600 text-white",children:e.jsx(ne,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-pink-100 text-sm font-medium",children:"Video Content"}),e.jsx("p",{className:"text-3xl font-bold",children:Array.isArray(ee)?ee.length:0})]}),e.jsx(Dt,{className:"w-10 h-10 text-pink-200"})]})})})]}),e.jsxs(re,{children:[e.jsxs(we,{children:[e.jsxs(Ne,{className:"flex items-center gap-2",children:[e.jsx(lr,{className:"w-5 h-5"}),"Quick Actions"]}),e.jsx(Ae,{className:"text-blue-200",children:"Frequently used admin actions"})]}),e.jsx(ne,{children:e.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[e.jsxs(D,{onClick:()=>p("products"),className:"h-16 bg-green-600 hover:bg-green-700 flex flex-col gap-1",children:[e.jsx(tt,{className:"w-5 h-5"}),"Add Product"]}),e.jsxs(D,{onClick:()=>p("categories"),className:"h-16 bg-purple-600 hover:bg-purple-700 flex flex-col gap-1",children:[e.jsx(Ga,{className:"w-5 h-5"}),"Add Category"]}),e.jsxs(D,{onClick:()=>p("blog"),className:"h-16 bg-orange-600 hover:bg-orange-700 flex flex-col gap-1",children:[e.jsx(Wa,{className:"w-5 h-5"}),"Write Blog Post"]}),e.jsxs(D,{onClick:()=>p("videos"),className:"h-16 bg-pink-600 hover:bg-pink-700 flex flex-col gap-1",children:[e.jsx(Dt,{className:"w-5 h-5"}),"Add Video Content"]}),e.jsxs(D,{onClick:()=>a("/bot-admin"),className:"h-16 bg-indigo-600 hover:bg-indigo-700 flex flex-col gap-1",children:[e.jsx(Ot,{className:"w-5 h-5"}),"Bot Management"]}),e.jsxs(D,{onClick:()=>a("/admin/payments"),className:"h-16 bg-teal-600 hover:bg-teal-700 flex flex-col gap-1",children:[e.jsx(Ai,{className:"w-5 h-5"}),"Payment Gateways"]})]})})]})]}),e.jsx(Ze,{value:"products",children:e.jsx(nd,{})}),e.jsx(Ze,{value:"categories",children:e.jsx(cd,{})}),e.jsx(Ze,{value:"navigation",children:e.jsx(Uh,{})}),e.jsx(Ze,{value:"banners",children:e.jsx(sf,{})}),e.jsx(Ze,{value:"blog",children:e.jsx(dd,{})}),e.jsx(Ze,{value:"videos",children:e.jsx(ud,{})}),e.jsx(Ze,{value:"announcements",children:e.jsx(gd,{})}),e.jsx(Ze,{value:"automation",children:e.jsx(fd,{})}),e.jsx(Ze,{value:"commission",children:e.jsx(af,{})}),e.jsx(Ze,{value:"widgets",children:e.jsx(cf,{})}),e.jsx(Ze,{value:"credentials",children:e.jsx(rf,{})}),e.jsx(Ze,{value:"metatags",children:e.jsx(mf,{})}),e.jsx(Ze,{value:"rssfeeds",children:e.jsx(ff,{})}),e.jsx(Ze,{value:"adrequests",children:e.jsx(xf,{})}),e.jsx(Ze,{value:"bots",className:"space-y-6",children:e.jsxs(re,{children:[e.jsxs(we,{children:[e.jsxs(Ne,{className:"flex items-center gap-2",children:[e.jsx(Ot,{className:"w-5 h-5"}),"Telegram Bot Management"]}),e.jsx(Ae,{children:"Manage your 8-bot affiliate automation system with real-time monitoring and control."})]}),e.jsxs(ne,{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 p-6 rounded-lg border",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"8-Bot System Overview"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Your Enhanced Telegram Manager is running with 8 specialized bots for different affiliate networks:"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-gray-800",children:"Simple Bots:"}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:" Prime Picks (Amazon Associates)"}),e.jsx("li",{children:" Cue Picks (CueLinks)"}),e.jsx("li",{children:" Value Picks (EarnKaro)"}),e.jsx("li",{children:" DealsHub (INRDeals)"}),e.jsx("li",{children:" Loot Box (Deodap)"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-gray-800",children:"Smart Bots:"}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:" Click Picks (CPC Optimization)"}),e.jsx("li",{children:" Global Picks (Multi-Currency)"}),e.jsx("li",{children:" Travel Picks (Travel Partners)"})]})]})]}),e.jsxs(D,{onClick:()=>a("/bot-admin"),className:"w-full bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white font-medium py-3",children:[e.jsx(Ot,{className:"w-5 h-5 mr-2"}),"Open Bot Management Dashboard"]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsx(re,{className:"bg-green-50 border-green-200",children:e.jsx(ne,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(Ot,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Real-time Control"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Start, stop, and restart bots"})]})]})})}),e.jsx(re,{className:"bg-blue-50 border-blue-200",children:e.jsx(ne,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(qa,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Performance Metrics"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Monitor success rates and CPC"})]})]})})}),e.jsx(re,{className:"bg-purple-50 border-purple-200",children:e.jsx(ne,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx($s,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Method Selection"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Switch between Telegram/Scraping/API"})]})]})})})]})]})]})}),e.jsx(Ze,{value:"tools",className:"space-y-6",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs(re,{children:[e.jsx(we,{children:e.jsxs(Ne,{className:"flex items-center gap-2",children:[e.jsx(qa,{className:"w-5 h-5"}),"Analytics"]})}),e.jsxs(ne,{children:[e.jsx("p",{className:"text-blue-200 mb-4",children:"View detailed analytics and performance metrics."}),e.jsx(D,{variant:"outline",className:"w-full",children:"View Analytics"})]})]}),e.jsxs(re,{children:[e.jsx(we,{children:e.jsxs(Ne,{className:"flex items-center gap-2",children:[e.jsx(Ot,{className:"w-5 h-5"}),"System Settings"]})}),e.jsxs(ne,{children:[e.jsx("p",{className:"text-blue-200 mb-4",children:"Configure system settings and preferences."}),e.jsx(D,{variant:"outline",className:"w-full",children:"Open Settings"})]})]})]})})]})]})}),e.jsx(Mo,{})]})]}):e.jsxs(di,{pageId:"admin",enableContentOverlays:!1,enableFloatingOverlays:!1,showSidebar:!1,showRightSidebar:!1,children:[!1,e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 flex items-center justify-center",children:e.jsx("div",{className:"max-w-md w-full",children:e.jsxs(re,{className:"shadow-2xl border-0 bg-white/95 backdrop-blur-sm",children:[e.jsxs(we,{className:"text-center pb-8",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full flex items-center justify-center mb-4",children:e.jsx(Ot,{className:"w-8 h-8 text-white"})}),e.jsx(Ne,{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"PickNTrust Admin"}),e.jsx(Ae,{className:"text-lg",children:"Enhanced Admin Panel"})]}),e.jsxs(ne,{children:[!g&&!B&&e.jsxs(e.Fragment,{children:[e.jsxs("form",{onSubmit:ge,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(T,{htmlFor:"password",className:"text-base font-medium",children:"Admin Password"}),e.jsx(W,{id:"password",type:"password",value:o,onChange:Y=>d(Y.target.value),placeholder:"Enter admin password",className:"mt-2 h-12 text-lg",required:!0})]}),e.jsx(D,{type:"submit",className:"w-full h-12 text-lg bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",children:"Access Admin Panel"})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("button",{type:"button",onClick:()=>x(!0),className:"text-sm text-blue-600 hover:text-blue-800 underline",children:"Forgot Password?"})}),e.jsx("p",{className:"text-xs text-gray-500 mt-4 text-center",children:"Only authorized users can access this panel"})]}),g&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Reset Password"}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Enter your email address to receive a password reset link."})]}),e.jsxs("form",{onSubmit:Y=>{Y.preventDefault(),b&&ue.mutate(b)},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(T,{htmlFor:"email",className:"text-base font-medium",children:"Email Address"}),e.jsx(W,{id:"email",type:"email",value:b,onChange:Y=>u(Y.target.value),placeholder:"Enter your email address",className:"mt-2 h-12 text-lg",required:!0})]}),e.jsx(D,{type:"submit",className:"w-full h-12 text-lg bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",disabled:ue.isPending,children:ue.isPending?e.jsxs(e.Fragment,{children:[e.jsx(xt,{className:"w-4 h-4 mr-2 animate-spin"}),"Sending..."]}):"Send Reset Link"})]}),e.jsx("div",{className:"text-center",children:e.jsx("button",{type:"button",onClick:()=>{x(!1),u("")},className:"text-sm text-gray-600 hover:text-gray-800 underline",children:"Back to Login"})})]}),B&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Set New Password"}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Enter your new password below."})]}),e.jsxs("form",{onSubmit:Y=>{Y.preventDefault(),q.newPassword&&q.confirmPassword&&N.mutate(q)},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(T,{htmlFor:"newPassword",className:"text-base font-medium",children:"New Password"}),e.jsx(W,{id:"newPassword",type:"password",value:q.newPassword,onChange:Y=>R(ke=>({...ke,newPassword:Y.target.value})),placeholder:"Enter new password",className:"mt-2 h-12 text-lg",required:!0,minLength:8})]}),e.jsxs("div",{children:[e.jsx(T,{htmlFor:"confirmPassword",className:"text-base font-medium",children:"Confirm Password"}),e.jsx(W,{id:"confirmPassword",type:"password",value:q.confirmPassword,onChange:Y=>R(ke=>({...ke,confirmPassword:Y.target.value})),placeholder:"Confirm new password",className:"mt-2 h-12 text-lg",required:!0,minLength:8})]}),e.jsx(D,{type:"submit",className:"w-full h-12 text-lg bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",disabled:N.isPending,children:N.isPending?e.jsxs(e.Fragment,{children:[e.jsx(xt,{className:"w-4 h-4 mr-2 animate-spin"}),"Resetting..."]}):"Reset Password"})]})]})]})]})})})]})}export{Ff as default};
