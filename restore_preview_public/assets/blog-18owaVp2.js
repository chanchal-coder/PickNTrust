import{r as l,j as e}from"./vendor-DNlhI76F.js";import{u as S,a as E,b as P}from"./query-D71mr71Q.js";import{u as U,H as A,W as o,A as C,P as T,L as D,g as x,S as F,F as $,j as q}from"./pages-main-DOjN59On.js";import{P as L}from"./pages-picks-B8mK09nr.js";import"./icons-B2XESxUM.js";import"./utils-Bj7X0qp-.js";import"./radix-z-2eheXi.js";function z(){const{data:n,isLoading:M}=S({queryKey:["/api/blog"],queryFn:async()=>{const a=await fetch("/api/blog");if(!a.ok)throw new Error("Failed to fetch blog posts");return a.json()},retry:1,refetchOnWindowFocus:!1}),g=n&&n.length>0?n:[],[h,m]=l.useState(!1),[b,d]=l.useState(!1),[s,c]=l.useState(null),{toast:u}=U(),p=E(),f=["Instagram","Facebook","WhatsApp","Telegram"];l.useEffect(()=>{const a=localStorage.getItem("pickntrust-admin-session");m(a==="active");const r=t=>{t.key==="pickntrust-admin-session"&&m(t.newValue==="active")};return window.addEventListener("storage",r),()=>window.removeEventListener("storage",r)},[]);const y=a=>{c(a),d(!0)},j=()=>{s&&(alert(`✅ Sharing "${s.title}" to all configured platforms!`),console.log("Share confirmed for:",s.id,s.title)),d(!1),c(null)},w=()=>{d(!1),c(null)},v=P({mutationFn:async a=>{const t=await fetch(`/api/admin/blog/${a}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:"pickntrust2025"})});if(!t.ok)throw new Error("Failed to delete blog post");return t.json()},onSuccess:()=>{u({title:"Success",description:"Blog post deleted successfully"}),p.invalidateQueries({queryKey:["/api/blog"]})},onError:a=>{u({title:"Error",description:"Failed to delete blog post",variant:"destructive"})}}),N=a=>{confirm("Are you sure you want to delete this blog post?")&&v.mutate(a)},k=a=>new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return l.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]),e.jsxs("div",{className:"relative min-h-screen overflow-hidden bg-gradient-to-b from-gray-950 via-slate-900 to-black",children:[e.jsx(A,{}),e.jsx(o,{page:"blog",position:"header-top",className:"w-full"}),e.jsx(C,{page:"blog"}),e.jsx(o,{page:"blog",position:"header-bottom",className:"w-full"}),e.jsx(o,{page:"blog",position:"banner-top",className:"w-full"}),e.jsxs("div",{className:"header-spacing",children:[e.jsx(T,{page:"blog"}),e.jsx("div",{className:"bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 dark:bg-gradient-to-br dark:from-indigo-900/30 dark:via-purple-900/30 dark:to-pink-900/30",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[g.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h3",{className:"text-2xl font-semibold text-gray-800 dark:text-gray-200",children:"No blog posts yet"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Please check back soon for new articles."})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:g.map((a,r)=>e.jsxs("article",{className:"bg-white dark:bg-gray-800 rounded-3xl shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden border border-gray-100 dark:border-gray-700 hover:-translate-y-2 hover:scale-105 group",children:[e.jsxs("div",{className:`w-full h-48 relative p-2 dark:bg-gradient-to-br dark:from-green-900 dark:via-teal-900 dark:to-blue-900 ${r%3===0?"bg-blue-400":r%3===1?"bg-green-400":"bg-orange-400"}`,children:[e.jsx("img",{src:a.imageUrl&&a.imageUrl.trim()!==""&&a.imageUrl!=="undefined"&&a.imageUrl!=="null"?a.imageUrl:"https://images.unsplash.com/photo-1468495244123-6c6c332eeece?w=400&h=200&fit=crop&auto=format&q=75",alt:a.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300 rounded-2xl border-2 border-white/50 dark:border-gray-700/50 shadow-lg",loading:"lazy",onError:t=>{const i=t.target;i.src!=="https://images.unsplash.com/photo-1468495244123-6c6c332eeece?w=400&h=200&fit=crop&auto=format&q=75"&&(i.src="https://images.unsplash.com/photo-1468495244123-6c6c332eeece?w=400&h=200&fit=crop&auto=format&q=75")}}),a.videoUrl&&a.videoUrl.trim()!==""&&e.jsxs("div",{className:"absolute inset-2 bg-black/30 rounded-2xl flex items-center justify-center",children:[e.jsx("div",{className:"bg-white/90 rounded-full p-3 shadow-lg",children:e.jsx("i",{className:"fas fa-play text-2xl text-gray-800"})}),e.jsx("div",{className:"absolute top-4 right-4 bg-red-600 text-white px-2 py-1 rounded text-xs font-bold",children:"VIDEO"})]})]}),e.jsxs("div",{className:`p-6 ${r%3===0?"bg-blue-50 dark:bg-gray-800":r%3===1?"bg-green-50 dark:bg-gray-800":"bg-orange-50 dark:bg-gray-800"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-300",children:[e.jsx("i",{className:"far fa-calendar mr-2 text-blue-500 dark:text-blue-400"}),e.jsx("span",{children:k(a.publishedAt)}),e.jsx("span",{className:"mx-2 text-purple-500",children:"•"}),e.jsx("i",{className:"far fa-clock mr-1 text-green-500 dark:text-green-400"}),e.jsx("span",{children:a.readTime})]}),a.category&&e.jsx("span",{className:"bg-blue-600 text-white px-2 py-1 rounded-full text-xs font-medium",children:a.category})]}),e.jsx("div",{className:"flex justify-between items-start mb-3",children:e.jsx("h4",{className:"text-xl font-bold text-navy dark:text-blue-400 flex-1",children:a.title})}),e.jsxs("div",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[e.jsx("span",{children:a.excerpt.length>120?`${a.excerpt.substring(0,120)}...`:a.excerpt}),e.jsx("br",{}),e.jsxs(D,{href:`/blog/${a.slug}`,className:"text-blue-600 hover:text-blue-800 dark:hover:text-blue-300 font-semibold inline-flex items-center gap-1 mt-2 transition-colors hover:underline cursor-pointer",onClick:()=>{setTimeout(()=>window.scrollTo({top:0,behavior:"smooth"}),100)},children:["Read More ",e.jsx("span",{children:"→"})]})]}),a.tags&&Array.isArray(a.tags)&&a.tags.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-2 pt-2 border-t border-gray-100 dark:border-gray-700",children:[a.tags.slice(0,3).map((t,i)=>e.jsxs("span",{className:"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 px-2 py-1 rounded text-xs",children:["#",t]},i)),a.tags.length>3&&e.jsxs("span",{className:"text-gray-400 text-xs px-2 py-1",children:["+",a.tags.length-3," more"]})]}),e.jsx("div",{className:"flex justify-end gap-2 pt-3 border-t border-gray-100 dark:border-gray-700 mt-3",children:h?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),y(a)},className:"bg-blue-500 hover:bg-blue-600 text-white rounded-full p-2 shadow-md transition-colors cursor-pointer z-10 relative",title:"Share to All Platforms",children:e.jsx("i",{className:"fas fa-edit text-xs pointer-events-none"})}),e.jsx(x,{product:{id:a.id,name:a.title,description:a.excerpt,imageUrl:a.imageUrl,category:a.category,affiliateUrl:`/blog/${a.slug}`},className:"bg-green-500 hover:bg-green-600 text-white rounded-full p-2 shadow-md transition-colors",buttonText:"",showIcon:!0}),e.jsx("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),N(a.id)},className:"bg-red-500 hover:bg-red-600 text-white rounded-full p-2 shadow-md transition-colors",title:"Delete blog post",children:e.jsx("i",{className:"fas fa-trash text-xs"})})]}):e.jsx(x,{product:{id:a.id,name:a.title,description:a.excerpt,imageUrl:a.imageUrl,category:a.category,affiliateUrl:`/blog/${a.slug}`},className:"bg-blue-500 hover:bg-blue-600 text-white rounded-full p-2 shadow-md transition-colors",buttonText:"",showIcon:!0})})]})]},a.id))})]})}),e.jsx(L,{page:"blog",title:"Blog Videos"}),e.jsx(F,{isOpen:b,onClose:w,onConfirm:j,productName:(s==null?void 0:s.title)||"",platforms:f})]}),e.jsx(o,{page:"blog",position:"banner-bottom",className:"w-full"}),e.jsx(o,{page:"blog",position:"footer-top",className:"w-full"}),e.jsx(o,{page:"blog",position:"footer-bottom",className:"w-full"}),e.jsx($,{}),e.jsx(q,{})]})}export{z as default};
