import{r as d,j as e}from"./vendor-DNlhI76F.js";import{J as y,u as w,U as v,W as r,A as c,P as x,H as N,g as k,F as $,j as U}from"./pages-main-DOjN59On.js";import{u as P}from"./query-D71mr71Q.js";import{r as B,t as S,i as I,k as A}from"./icons-B2XESxUM.js";import"./utils-Bj7X0qp-.js";import"./radix-z-2eheXi.js";function C(){const{slug:o}=y(),[g,p]=d.useState(""),[T,h]=d.useState(!1);w(),d.useEffect(()=>{const t=localStorage.getItem("pickntrust-admin-session");h(t==="active")},[]),d.useEffect(()=>{typeof window<"u"&&p(`${window.location.origin}/blog/${o}`)},[o]);const{data:m,isLoading:b,error:f}=P({queryKey:["/api/blog",o],queryFn:async()=>{try{const t=await fetch(`/api/blog/${o}`);return t.ok?await t.json():(console.warn(`Blog post API failed for slug "${o}":`,t.status),null)}catch(t){return console.warn(`Blog post fetch error for slug "${o}":`,t),null}},enabled:!!o,retry:1}),u=t=>{if(!t)return"";const s=t.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([^&\n?#]+)/);if(s)return`https://www.youtube.com/embed/${s[1]}`;const n=t.match(/vimeo\.com\/(\d+)/);if(n)return`https://player.vimeo.com/video/${n[1]}`;const l=t.match(/tiktok\.com\/@[^/]+\/video\/(\d+)/);if(l)return`https://www.tiktok.com/embed/v2/${l[1]}`;const i=t.match(/dailymotion\.com\/video\/([^_]+)/);return i?`https://www.dailymotion.com/embed/video/${i[1]}`:t},j=t=>{let s=t;return s=s.replace(/^### (.*$)/gim,'<h3 class="text-xl font-semibold text-gray-900 dark:text-blue-400 mt-8 mb-4">$1</h3>'),s=s.replace(/^## (.*$)/gim,'<h2 class="text-2xl font-bold text-gray-900 dark:text-blue-400 mt-10 mb-6">$1</h2>'),s=s.replace(/^# (.*$)/gim,'<h1 class="text-3xl font-bold text-gray-900 dark:text-blue-400 mt-12 mb-8">$1</h1>'),s=s.replace(/\*\*(.*?)\*\*/g,'<strong class="font-semibold text-gray-900 dark:text-blue-400">$1</strong>'),s=s.replace(/\[([^\]]+)\]\((https?:\/\/[^\)]+)\)/g,'<a href="$2" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:text-blue-800 dark:hover:text-blue-300 font-semibold underline">$1 <i className="fas fa-link"></i></a>'),s=s.split(`

`).map(l=>l.trim()===""?"":l.startsWith("<h")||l.startsWith("<ul")||l.startsWith("<ol")?l:`<p class="mb-4 leading-relaxed text-gray-700 dark:text-gray-300">${l.replace(/\n/g,"<br>")}</p>`).join(`
`),s};if(b)return e.jsx(v,{pageId:"blog-post",children:e.jsxs("div",{className:"min-h-screen bg-white text-gray-900 dark:bg-gray-900 dark:text-white flex flex-col",children:[e.jsx(r,{page:"blog-post",position:"header-top"}),e.jsx(c,{page:"blog-post"}),e.jsx(x,{page:"blog"}),e.jsx(r,{page:"blog-post",position:"header-bottom"}),e.jsx("div",{className:"header-spacing",children:e.jsx("div",{className:"flex-1 pb-8",children:e.jsx("div",{className:"max-w-4xl mx-auto p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold mb-4 text-blue-600",children:"Loading Blog Post..."}),e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded mb-8"}),e.jsx("div",{className:"h-64 bg-gray-200 dark:bg-gray-700 rounded"})]})]})})})})]})});if(f)return e.jsxs("div",{className:"min-h-screen bg-white text-gray-900 dark:bg-gray-900 dark:text-white flex flex-col",children:[e.jsx(r,{page:"blog-post",position:"header-top"}),e.jsx(c,{page:"blog-post"}),e.jsx(x,{page:"blog"}),e.jsx(r,{page:"blog-post",position:"header-bottom"}),e.jsx("div",{className:"header-spacing",children:e.jsx("div",{className:"flex-1 flex items-center justify-center pt-20 pb-8",children:e.jsxs("div",{className:"max-w-md mx-auto text-center p-8 bg-gray-50 dark:bg-gray-800 rounded-lg shadow-lg",children:[e.jsx("div",{className:"text-6xl mb-4",children:e.jsx("i",{className:"fas fa-frown"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Blog Post Not Found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"The blog post you're looking for doesn't exist or has been removed."}),e.jsx("a",{href:"/",className:"inline-flex items-center px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg transition-colors",children:"← Back to Home"})]})})})]});if(!m)return e.jsxs("div",{className:"min-h-screen bg-white text-gray-900 dark:bg-gray-900 dark:text-white flex flex-col",children:[e.jsx(r,{page:"blog-post",position:"header-top"}),e.jsx(c,{page:"blog-post"}),e.jsx(x,{page:"blog"}),e.jsx(r,{page:"blog-post",position:"header-bottom"}),e.jsx("div",{className:"header-spacing",children:e.jsx("div",{className:"flex-1 flex items-center justify-center pt-20 pb-8",children:e.jsxs("div",{className:"max-w-md mx-auto text-center p-8 bg-gray-50 dark:bg-gray-800 rounded-lg shadow-lg",children:[e.jsx("div",{className:"text-6xl mb-4",children:e.jsx("i",{className:"fas fa-search-minus"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Blog Post Not Found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"We couldn’t find this article. It may have been removed or the link is incorrect."}),e.jsx("a",{href:"/blog",className:"inline-flex items-center px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg transition-colors",children:"← Back to Blog"})]})})})]});const a=m;return e.jsxs("div",{className:"relative min-h-screen overflow-hidden bg-gradient-to-b from-gray-950 via-slate-900 to-black",children:[e.jsx(N,{}),e.jsx(r,{page:"blog-post",position:"header-top"}),e.jsx(c,{page:"blog-post"}),e.jsx(r,{page:"blog-post",position:"header-bottom"}),e.jsx(r,{page:"blog-post",position:"banner-top"}),e.jsxs("div",{className:"header-spacing",children:[e.jsx(x,{page:"blog"}),e.jsx("main",{className:"flex-1 pt-20 pb-8",children:e.jsxs("article",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("header",{className:"mb-8",children:[a.videoUrl?e.jsx("div",{className:"w-full h-[400px] overflow-hidden rounded-xl mb-8",children:e.jsx("iframe",{src:u(a.videoUrl),title:a.title,className:"w-full h-full",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}):a.imageUrl&&e.jsx("div",{className:"w-full h-[400px] overflow-hidden rounded-xl mb-8",children:e.jsx("img",{src:a.imageUrl,alt:a.title,className:"w-full h-full object-cover",onError:t=>{const s=t.target;s.src="https://images.unsplash.com/photo-1468495244123-6c6c332eeece?w=800&h=600&fit=crop"}})}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:Array.isArray(a.tags)?a.tags.map((t,s)=>e.jsxs("span",{className:"inline-flex items-center gap-1 bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 px-3 py-1 rounded-full text-sm font-medium",children:[e.jsx(B,{className:"w-3 h-3"}),t]},s)):null}),e.jsx("h1",{className:"text-4xl lg:text-5xl font-bold text-gray-900 dark:text-white mb-6 leading-tight",children:a.title}),e.jsxs("div",{className:"flex flex-wrap items-center gap-6 text-gray-600 dark:text-gray-400 mb-8",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"w-4 h-4"}),e.jsx("span",{children:new Date(a.publishedAt).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"w-4 h-4"}),e.jsx("span",{children:a.readTime})]}),e.jsxs("div",{className:"text-sm",children:["By ",e.jsx("span",{className:"font-medium text-gray-900 dark:text-blue-400",children:a.author||"PickNTrust Team"})]})]})]}),a.pdfUrl&&e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"w-full h-[800px] overflow-hidden rounded-xl border border-gray-200 dark:border-gray-700",children:(()=>{const t=String(a.pdfUrl),s=t.toLowerCase(),n=s.endsWith(".pdf")||s.includes("application/pdf"),l=/(\.docx?$|\.xlsx?$|\.pptx?$)/i.test(t);if(n){const i=(()=>{if(typeof window<"u"){if(t.startsWith("/uploads/"))return t;if(t.startsWith("/"))return window.location.origin+t}return t})();return e.jsx("iframe",{src:`/pdf-viewer.html?file=${encodeURIComponent(i)}`,title:a.title+" PDF",className:"w-full h-full"})}else if(l){const i=`https://view.officeapps.live.com/op/view.aspx?src=${encodeURIComponent(t)}`;return e.jsx("iframe",{src:i,title:a.title+" Document",className:"w-full h-full"})}return e.jsx("iframe",{src:t,title:a.title+" Document",className:"w-full h-full"})})()})}),e.jsx("div",{className:"prose prose-lg max-w-none",children:e.jsx("div",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",dangerouslySetInnerHTML:{__html:j(a.content)}})}),e.jsx("footer",{className:"border-t border-gray-200 dark:border-gray-700 mt-12 pt-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-400",children:[e.jsx(A,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Share this article:"})]}),e.jsx("div",{className:"flex gap-3",children:e.jsx(k,{product:{id:a.id,name:a.title,description:a.excerpt,imageUrl:a.imageUrl,category:a.category,affiliateUrl:g||""},contentType:"blog",className:"bg-green-600 hover:bg-green-700 text-white rounded-full p-2 shadow-md transition-colors",buttonText:"",showIcon:!0})})]})})]})})]}),e.jsx(r,{page:"blog-post",position:"banner-bottom"}),e.jsx(r,{page:"blog-post",position:"footer-top"}),e.jsx(r,{page:"blog-post",position:"footer-bottom"}),e.jsx($,{}),e.jsx(U,{})]})}export{C as default};
