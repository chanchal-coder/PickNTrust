import{r as p,j as e}from"./vendor-DNlhI76F.js";import{u as F}from"./query-D71mr71Q.js";import{u as $,b as R,U as _,H as S,W as m,P as A,L,j as W}from"./pages-main-DOjN59On.js";import{P as q}from"./pages-picks-B8mK09nr.js";import"./icons-B2XESxUM.js";import"./utils-Bj7X0qp-.js";import"./radix-z-2eheXi.js";function Y(){const[a,T]=p.useState(()=>{try{const t=(new URLSearchParams(window.location.search).get("type")||"").toLowerCase();return t==="products"?"product":t==="services"?"service":t==="apps"?"app":t==="aiapps"?"ai-app":t==="featured"?"featured":t==="auto"?"auto":t==="all"?"all":"product"}catch{return"product"}}),[o,j]=p.useState("");$();const[,B]=R(),[s,y]=p.useState(""),{data:h=[],isFetching:I}=F({queryKey:["/api/categories/subcategories",s],queryFn:async()=>{const r=s==null?void 0:s.trim();if(!r)return[];try{const t=await fetch(`/api/categories/subcategories?parent=${encodeURIComponent(r)}`);return t.ok?t.json():[]}catch(t){return console.error("Error fetching subcategories:",t),[]}},enabled:!!(s!=null&&s.trim()),staleTime:5*60*1e3}),v=["#FF6B6B","#4ECDC4","#45B7D1","#FF69B4","#32CD32","#9370DB","#FFB347","#1E90FF","#FF4500","#228B22","#DC143C","#00CED1","#FF8C00","#FFD700","#20B2AA","#8A2BE2","#FF1493","#00FF7F","#FF6347","#4169E1"],P=r=>{const t=String(r||"").trim().toLowerCase();if(!t.startsWith("#")||t.length!==7&&t.length!==4)return!1;const d=t.slice(1),l=f=>{if(t.length===4){const C=d[f];return parseInt(C+C,16)}return parseInt(d.slice(f*2,f*2+2),16)},w=l(0),N=l(1),k=l(2),g=Math.max(w,N,k),U=Math.min(w,N,k);return(g===0?0:(g-U)/g)<.15&&g<235},D=r=>{const t=String(r||"").trim();return!t||t.startsWith("mdi-")||!t.includes("fa-")?"fas fa-tag":t},u=(r,t)=>t&&t.startsWith("#")&&!P(t)?t:v[r%v.length],{data:c=[],isLoading:E,error:V}=F({queryKey:["/api/categories/browse",a],queryFn:async()=>{try{let r="/api/categories/browse";const t=new URLSearchParams,d=a==="product"?"products":a==="service"?"services":a==="app"||a==="ai-app"?"aiapps":"all";d!=="all"&&t.append("type",d),t.toString()&&(r+="?"+t.toString());const l=await fetch(r);if(!l.ok)throw new Error("Failed to fetch categories");return l.json()}catch(r){return console.error("Error fetching categories:",r),[]}},staleTime:5*60*1e3,gcTime:10*60*1e3}),n=c.filter(r=>!o||r.name.toLowerCase().includes(o.toLowerCase())||r.description&&r.description.toLowerCase().includes(o.toLowerCase())),i={featured:[],product:n.filter(r=>r.isForProducts||!r.isForServices&&!r.isForAIApps),service:n.filter(r=>r.isForServices),app:n.filter(r=>r.isForAIApps),"ai-app":n.filter(r=>r.isForAIApps),auto:[]},b=a==="all"?n:i[a]||[],x={total:c.length,withProducts:c.filter(r=>(r.total_products_count||0)>0).length,autoCreated:0,featured:0};return p.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]),E?e.jsx(_,{pageId:"browse-categories",children:e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-emerald-50 to-teal-50 dark:from-gray-900 dark:via-green-900/20 dark:to-emerald-900/20 page-container",children:[e.jsx(S,{}),e.jsx(m,{page:"browse-categories",position:"header-top",className:"w-full"}),e.jsx(A,{page:"browse-categories"}),e.jsx(m,{page:"browse-categories",position:"header-bottom",className:"w-full"}),e.jsx("div",{className:"pt-20 pb-16",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading categories..."})]})})})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-emerald-50 to-teal-50 dark:from-gray-900 dark:via-green-900/20 dark:to-emerald-900/20 page-container",children:[e.jsx(S,{}),e.jsx(m,{page:"browse-categories",position:"header-top",className:"w-full"}),e.jsx(A,{page:"browse-categories"}),e.jsx(m,{page:"browse-categories",position:"header-bottom",className:"w-full"}),e.jsxs("div",{children:[e.jsx("section",{className:"pt-20 pb-16",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsxs("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-4",children:[e.jsx("i",{className:"fas fa-folder-open"})," Browse Categories"]}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400 mb-6",children:"Discover products, services, and apps organized by category"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 max-w-2xl mx-auto mb-8",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/20",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:x.total}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Categories"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/20",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:x.withProducts}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"With Products"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/20",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:x.autoCreated}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Auto-Created"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/20",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:x.featured}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Featured"})]})]})]}),e.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-6 border border-white/20 dark:bg-gray-800/20 dark:border-gray-700/30 mb-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Category Type"}),e.jsxs("select",{value:a,onChange:r=>T(r.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent bg-white dark:bg-gray-800 dark:border-gray-600 dark:text-white",children:[e.jsxs("option",{value:"all",children:["All Categories (",c.length,")"]}),e.jsxs("option",{value:"featured",children:["Featured (",i.featured.length,")"]}),e.jsxs("option",{value:"product",children:["Products (",i.product.length,")"]}),e.jsxs("option",{value:"service",children:["Services (",i.service.length,")"]}),e.jsxs("option",{value:"app",children:["Apps (",i.app.length,")"]}),e.jsxs("option",{value:"ai-app",children:["AI Apps (",i["ai-app"].length,")"]}),e.jsxs("option",{value:"auto",children:["Auto-Created (",i.auto.length,")"]})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Search Categories"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search by name or description...",value:o,onChange:r=>j(r.target.value),className:"w-full px-4 py-2 pl-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent bg-white dark:bg-gray-800 dark:border-gray-600 dark:text-white"}),e.jsx("i",{className:"fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",b.length," categories"]})})]})}),s&&e.jsxs("section",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:[s," Categories"]}),e.jsx("button",{onClick:()=>y(""),className:"px-3 py-2 rounded-lg bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 text-gray-700 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-700",children:"Close"})]}),I?e.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"Loading subcategories…"}):Array.isArray(h)&&h.length>0?e.jsx("div",{className:"flex flex-wrap gap-2",children:h.map(r=>e.jsx(L,{href:`/category/${encodeURIComponent(r.name||String(r))}`,onClick:()=>y(""),children:e.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-2 rounded-full bg-green-600/10 text-green-700 dark:text-green-300 border border-green-600/30 hover:bg-green-600/20",children:[e.jsx("i",{className:"fas fa-tag text-xs"}),r.name||String(r)]})},r.id||r.name||String(r)))}):e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"No subcategories found."}),e.jsxs("button",{onClick:()=>B(`/category/${encodeURIComponent(s)}`),className:"px-3 py-2 rounded-lg bg-green-600 text-white hover:bg-green-700",children:["View ",s," Products"]})]})]}),b.length>0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:b.map((r,t)=>e.jsx(L,{href:`/category/${encodeURIComponent(r.name)}`,className:"group",onClick:()=>{setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},100)},children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 overflow-hidden border-2 hover:border-green-500",children:[e.jsx("div",{className:"relative p-6 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",style:{background:`linear-gradient(135deg, ${u(t,r.color)}CC, ${u(t,r.color)}FF)`,boxShadow:`0 10px 25px ${u(t,r.color)}40`},children:e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"w-16 h-16 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center mx-auto mb-3 shadow-lg",children:e.jsx("i",{className:`${D(r.icon)} text-3xl text-white drop-shadow-lg`})}),r.category_type&&e.jsx("span",{className:"inline-block px-2 py-1 bg-white/20 text-white text-xs rounded-full",children:r.category_type==="ai-app"?"AI App":r.category_type.charAt(0).toUpperCase()+r.category_type.slice(1)}),r.auto_created&&e.jsx("span",{className:"inline-block px-2 py-1 bg-yellow-500/20 text-white text-xs rounded-full ml-2",children:"Auto"}),r.is_featured&&e.jsx("span",{className:"inline-block px-2 py-1 bg-red-500/20 text-white text-xs rounded-full ml-2",children:"⭐ Featured"})]})}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2 group-hover:text-green-600 dark:group-hover:text-green-400 transition-colors",children:r.name}),r.description&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4 line-clamp-2",children:r.description})]})]})},r.id))}):e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"text-6xl mb-4",children:e.jsx("i",{className:"fas fa-folder-open"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"No categories found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:o?`No categories match "${o}". Try a different search term.`:"No categories available for the selected type."}),o&&e.jsxs("button",{onClick:()=>j(""),className:"inline-flex items-center px-6 py-3 bg-green-600 text-white font-semibold rounded-full hover:bg-green-700 transition-colors",children:[e.jsx("i",{className:"fas fa-times mr-2"}),"Clear Search"]})]})]})}),e.jsx(q,{page:"browse-categories",title:"Category Videos"}),e.jsx(W,{})]})]})}export{Y as default};
