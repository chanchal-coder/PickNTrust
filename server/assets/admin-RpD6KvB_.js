import{j as e,a as ot,u as Ie,b as he}from"./query-COiO4MCT.js";import{R as Ae,r as P,b as Ko,a as Vn}from"./vendor-1XCZ5AD1.js";import{h as Es,u as ct,C as ee,t as ge,v as fe,w as Ne,B as R,o as ae,p as we,x as Ot,f as Ho,y as Qo,z as Xo,U as ri,H as Zo,e as Jo}from"./pages-main-DHSVTjK5.js";import{I as X,L as I,T as It,S as Le,a as Ue,b as Ve,c as $e,d as ue}from"./pages-travel-68kSWt82.js";import{X as Yo,G as $n,A as qn,Y as ec,m as ss,Z as Gn,_ as tc,$ as sc,J as ks,H as Wn,E as zn,a0 as ac,a1 as rc}from"./radix-mRa0f3kV.js";import{e as tr,o as Ut,P as Xe,U as ta,n as pt,I as Yt,i as ia,V as wt,R as Dt,T as Wt,m as Tt,u as Fs,Y as ii,v as sr,w as ic,h as nc,x as ar,A as lc,y as Kn,z as St,a as oc,k as ni,B as Qs,D as Ds,F as cc,J as li,K as oi,N as ci,O as di,Q as ui,Z as mi,_ as _a,$ as sa,a0 as Ra,a1 as hi,a2 as dc,p as uc,a3 as pi,d as ns,a4 as Hn,l as qs,X as Jt,a5 as mc,a6 as aa,L as gi,a7 as Et,a8 as hc,a9 as pc,aa as Qn,ab as fi,ac as Is,ad as Oa,ae as xi,af as bi,ag as yi,E as gc,ah as Ba,ai as vi,aj as Ma,ak as fc,al as La,am as xc,an as bc,ao as yc,f as vc}from"./icons-CGpN3lH8.js";import{S as et}from"./switch-BpB8f5xD.js";import"./utils-Bj7X0qp-.js";import"./pages-picks-myehRy1v.js";var Gs=t=>t.type==="checkbox",Zt=t=>t instanceof Date,nt=t=>t==null;const Xn=t=>typeof t=="object";var Ze=t=>!nt(t)&&!Array.isArray(t)&&Xn(t)&&!Zt(t),jc=t=>Ze(t)&&t.target?Gs(t.target)?t.target.checked:t.target.value:t,wc=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,Nc=(t,s)=>t.has(wc(s)),kc=t=>{const s=t.constructor&&t.constructor.prototype;return Ze(s)&&s.hasOwnProperty("isPrototypeOf")},jr=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Ye(t){let s;const a=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)s=new Date(t);else if(!(jr&&(t instanceof Blob||r))&&(a||Ze(t)))if(s=a?[]:Object.create(Object.getPrototypeOf(t)),!a&&!kc(t))s=t;else for(const i in t)t.hasOwnProperty(i)&&(s[i]=Ye(t[i]));else return t;return s}var wa=t=>/^\w*$/.test(t),Qe=t=>t===void 0,wr=t=>Array.isArray(t)?t.filter(Boolean):[],Nr=t=>wr(t.replace(/["|']|\]/g,"").split(/\.|\[/)),ne=(t,s,a)=>{if(!s||!Ze(t))return a;const r=(wa(s)?[s]:Nr(s)).reduce((i,n)=>nt(i)?i:i[n],t);return Qe(r)||r===t?Qe(t[s])?a:t[s]:r},At=t=>typeof t=="boolean",Oe=(t,s,a)=>{let r=-1;const i=wa(s)?[s]:Nr(s),n=i.length,l=n-1;for(;++r<n;){const o=i[r];let c=a;if(r!==l){const u=t[o];c=Ze(u)||Array.isArray(u)?u:isNaN(+i[r+1])?{}:[]}if(o==="__proto__"||o==="constructor"||o==="prototype")return;t[o]=c,t=t[o]}};const ji={BLUR:"blur",FOCUS_OUT:"focusout"},Nt={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ft={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Cc=Ae.createContext(null);Cc.displayName="HookFormContext";var Sc=(t,s,a,r=!0)=>{const i={defaultValues:s._defaultValues};for(const n in t)Object.defineProperty(i,n,{get:()=>{const l=n;return s._proxyFormState[l]!==Nt.all&&(s._proxyFormState[l]=!r||Nt.all),t[l]}});return i};const Ac=typeof window<"u"?Ae.useLayoutEffect:Ae.useEffect;var dt=t=>typeof t=="string",Pc=(t,s,a,r,i)=>dt(t)?(r&&s.watch.add(t),ne(a,t,i)):Array.isArray(t)?t.map(n=>(r&&s.watch.add(n),ne(a,n))):(r&&(s.watchAll=!0),a),rr=t=>nt(t)||!Xn(t);function Mt(t,s,a=new WeakSet){if(rr(t)||rr(s))return t===s;if(Zt(t)&&Zt(s))return t.getTime()===s.getTime();const r=Object.keys(t),i=Object.keys(s);if(r.length!==i.length)return!1;if(a.has(t)||a.has(s))return!0;a.add(t),a.add(s);for(const n of r){const l=t[n];if(!i.includes(n))return!1;if(n!=="ref"){const o=s[n];if(Zt(l)&&Zt(o)||Ze(l)&&Ze(o)||Array.isArray(l)&&Array.isArray(o)?!Mt(l,o,a):l!==o)return!1}}return!0}var Zn=(t,s,a,r,i)=>s?{...a[t],types:{...a[t]&&a[t].types?a[t].types:{},[r]:i||!0}}:{},Cs=t=>Array.isArray(t)?t:[t],wi=()=>{let t=[];return{get observers(){return t},next:i=>{for(const n of t)n.next&&n.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(n=>n!==i)}}),unsubscribe:()=>{t=[]}}};function Jn(t,s){const a={};for(const r in t)if(t.hasOwnProperty(r)){const i=t[r],n=s[r];if(i&&Ze(i)&&n){const l=Jn(i,n);Ze(l)&&(a[r]=l)}else t[r]&&(a[r]=n)}return a}var lt=t=>Ze(t)&&!Object.keys(t).length,kr=t=>t.type==="file",kt=t=>typeof t=="function",na=t=>{if(!jr)return!1;const s=t?t.ownerDocument:0;return t instanceof(s&&s.defaultView?s.defaultView.HTMLElement:HTMLElement)},Yn=t=>t.type==="select-multiple",Cr=t=>t.type==="radio",Tc=t=>Cr(t)||Gs(t),Ua=t=>na(t)&&t.isConnected;function Ec(t,s){const a=s.slice(0,-1).length;let r=0;for(;r<a;)t=Qe(t)?r++:t[s[r++]];return t}function Fc(t){for(const s in t)if(t.hasOwnProperty(s)&&!Qe(t[s]))return!1;return!0}function Ke(t,s){const a=Array.isArray(s)?s:wa(s)?[s]:Nr(s),r=a.length===1?t:Ec(t,a),i=a.length-1,n=a[i];return r&&delete r[n],i!==0&&(Ze(r)&&lt(r)||Array.isArray(r)&&Fc(r))&&Ke(t,a.slice(0,-1)),t}var Dc=t=>{for(const s in t)if(kt(t[s]))return!0;return!1};function el(t){return Array.isArray(t)||Ze(t)&&!Dc(t)}function ir(t,s={}){for(const a in t)el(t[a])?(s[a]=Array.isArray(t[a])?[]:{},ir(t[a],s[a])):nt(t[a])||(s[a]=!0);return s}function rs(t,s,a){a||(a=ir(s));for(const r in t)el(t[r])?Qe(s)||rr(a[r])?a[r]=ir(t[r],Array.isArray(t[r])?[]:{}):rs(t[r],nt(s)?{}:s[r],a[r]):a[r]=!Mt(t[r],s[r]);return a}const Ni={value:!1,isValid:!1},ki={value:!0,isValid:!0};var tl=t=>{if(Array.isArray(t)){if(t.length>1){const s=t.filter(a=>a&&a.checked&&!a.disabled).map(a=>a.value);return{value:s,isValid:!!s.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Qe(t[0].attributes.value)?Qe(t[0].value)||t[0].value===""?ki:{value:t[0].value,isValid:!0}:ki:Ni}return Ni},sl=(t,{valueAsNumber:s,valueAsDate:a,setValueAs:r})=>Qe(t)?t:s?t===""?NaN:t&&+t:a&&dt(t)?new Date(t):r?r(t):t;const Ci={isValid:!1,value:null};var al=t=>Array.isArray(t)?t.reduce((s,a)=>a&&a.checked&&!a.disabled?{isValid:!0,value:a.value}:s,Ci):Ci;function Si(t){const s=t.ref;return kr(s)?s.files:Cr(s)?al(t.refs).value:Yn(s)?[...s.selectedOptions].map(({value:a})=>a):Gs(s)?tl(t.refs).value:sl(Qe(s.value)?t.ref.value:s.value,t)}var Ic=(t,s,a,r)=>{const i={};for(const n of t){const l=ne(s,n);l&&Oe(i,n,l._f)}return{criteriaMode:a,names:[...t],fields:i,shouldUseNativeValidation:r}},la=t=>t instanceof RegExp,ys=t=>Qe(t)?t:la(t)?t.source:Ze(t)?la(t.value)?t.value.source:t.value:t,Ai=t=>({isOnSubmit:!t||t===Nt.onSubmit,isOnBlur:t===Nt.onBlur,isOnChange:t===Nt.onChange,isOnAll:t===Nt.all,isOnTouch:t===Nt.onTouched});const Pi="AsyncFunction";var _c=t=>!!t&&!!t.validate&&!!(kt(t.validate)&&t.validate.constructor.name===Pi||Ze(t.validate)&&Object.values(t.validate).find(s=>s.constructor.name===Pi)),Rc=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),Ti=(t,s,a)=>!a&&(s.watchAll||s.watch.has(t)||[...s.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const Ss=(t,s,a,r)=>{for(const i of a||Object.keys(t)){const n=ne(t,i);if(n){const{_f:l,...o}=n;if(l){if(l.refs&&l.refs[0]&&s(l.refs[0],i)&&!r)return!0;if(l.ref&&s(l.ref,l.name)&&!r)return!0;if(Ss(o,s))break}else if(Ze(o)&&Ss(o,s))break}}};function Ei(t,s,a){const r=ne(t,a);if(r||wa(a))return{error:r,name:a};const i=a.split(".");for(;i.length;){const n=i.join("."),l=ne(s,n),o=ne(t,n);if(l&&!Array.isArray(l)&&a!==n)return{name:a};if(o&&o.type)return{name:n,error:o};if(o&&o.root&&o.root.type)return{name:`${n}.root`,error:o.root};i.pop()}return{name:a}}var Oc=(t,s,a,r)=>{a(t);const{name:i,...n}=t;return lt(n)||Object.keys(n).length>=Object.keys(s).length||Object.keys(n).find(l=>s[l]===(!r||Nt.all))},Bc=(t,s,a)=>!t||!s||t===s||Cs(t).some(r=>r&&(a?r===s:r.startsWith(s)||s.startsWith(r))),Mc=(t,s,a,r,i)=>i.isOnAll?!1:!a&&i.isOnTouch?!(s||t):(a?r.isOnBlur:i.isOnBlur)?!t:(a?r.isOnChange:i.isOnChange)?t:!0,Lc=(t,s)=>!wr(ne(t,s)).length&&Ke(t,s),Uc=(t,s,a)=>{const r=Cs(ne(t,a));return Oe(r,"root",s[a]),Oe(t,a,r),t};function Fi(t,s,a="validate"){if(dt(t)||Array.isArray(t)&&t.every(dt)||At(t)&&!t)return{type:a,message:dt(t)?t:"",ref:s}}var as=t=>Ze(t)&&!la(t)?t:{value:t,message:""},Di=async(t,s,a,r,i,n)=>{const{ref:l,refs:o,required:c,maxLength:u,minLength:d,min:m,max:h,pattern:p,validate:k,name:_,valueAsNumber:f,mount:T}=t._f,M=ne(a,_);if(!T||s.has(_))return{};const S=o?o[0]:l,w=v=>{i&&S.reportValidity&&(S.setCustomValidity(At(v)?"":v||""),S.reportValidity())},B={},b=Cr(l),C=Gs(l),j=b||C,K=(f||kr(l))&&Qe(l.value)&&Qe(M)||na(l)&&l.value===""||M===""||Array.isArray(M)&&!M.length,H=Zn.bind(null,_,r,B),Z=(v,G,O,y=Ft.maxLength,A=Ft.minLength)=>{const $=v?G:O;B[_]={type:v?y:A,message:$,ref:l,...H(v?y:A,$)}};if(n?!Array.isArray(M)||!M.length:c&&(!j&&(K||nt(M))||At(M)&&!M||C&&!tl(o).isValid||b&&!al(o).isValid)){const{value:v,message:G}=dt(c)?{value:!!c,message:c}:as(c);if(v&&(B[_]={type:Ft.required,message:G,ref:S,...H(Ft.required,G)},!r))return w(G),B}if(!K&&(!nt(m)||!nt(h))){let v,G;const O=as(h),y=as(m);if(!nt(M)&&!isNaN(M)){const A=l.valueAsNumber||M&&+M;nt(O.value)||(v=A>O.value),nt(y.value)||(G=A<y.value)}else{const A=l.valueAsDate||new Date(M),$=De=>new Date(new Date().toDateString()+" "+De),W=l.type=="time",pe=l.type=="week";dt(O.value)&&M&&(v=W?$(M)>$(O.value):pe?M>O.value:A>new Date(O.value)),dt(y.value)&&M&&(G=W?$(M)<$(y.value):pe?M<y.value:A<new Date(y.value))}if((v||G)&&(Z(!!v,O.message,y.message,Ft.max,Ft.min),!r))return w(B[_].message),B}if((u||d)&&!K&&(dt(M)||n&&Array.isArray(M))){const v=as(u),G=as(d),O=!nt(v.value)&&M.length>+v.value,y=!nt(G.value)&&M.length<+G.value;if((O||y)&&(Z(O,v.message,G.message),!r))return w(B[_].message),B}if(p&&!K&&dt(M)){const{value:v,message:G}=as(p);if(la(v)&&!M.match(v)&&(B[_]={type:Ft.pattern,message:G,ref:l,...H(Ft.pattern,G)},!r))return w(G),B}if(k){if(kt(k)){const v=await k(M,a),G=Fi(v,S);if(G&&(B[_]={...G,...H(Ft.validate,G.message)},!r))return w(G.message),B}else if(Ze(k)){let v={};for(const G in k){if(!lt(v)&&!r)break;const O=Fi(await k[G](M,a),S,G);O&&(v={...O,...H(G,O.message)},w(O.message),r&&(B[_]=v))}if(!lt(v)&&(B[_]={ref:S,...v},!r))return B}}return w(!0),B};const Vc={mode:Nt.onSubmit,reValidateMode:Nt.onChange,shouldFocusError:!0};function $c(t={}){let s={...Vc,...t},a={submitCount:0,isDirty:!1,isReady:!1,isLoading:kt(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1},r={},i=Ze(s.defaultValues)||Ze(s.values)?Ye(s.defaultValues||s.values)||{}:{},n=s.shouldUnregister?{}:Ye(i),l={action:!1,mount:!1,watch:!1},o={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let m={...d};const h={array:wi(),state:wi()},p=s.criteriaMode===Nt.all,k=N=>D=>{clearTimeout(u),u=setTimeout(N,D)},_=async N=>{if(!s.disabled&&(d.isValid||m.isValid||N)){const D=s.resolver?lt((await C()).errors):await K(r,!0);D!==a.isValid&&h.state.next({isValid:D})}},f=(N,D)=>{!s.disabled&&(d.isValidating||d.validatingFields||m.isValidating||m.validatingFields)&&((N||Array.from(o.mount)).forEach(U=>{U&&(D?Oe(a.validatingFields,U,D):Ke(a.validatingFields,U))}),h.state.next({validatingFields:a.validatingFields,isValidating:!lt(a.validatingFields)}))},T=(N,D=[],U,se,J=!0,z=!0)=>{if(se&&U&&!s.disabled){if(l.action=!0,z&&Array.isArray(ne(r,N))){const ce=U(ne(r,N),se.argA,se.argB);J&&Oe(r,N,ce)}if(z&&Array.isArray(ne(a.errors,N))){const ce=U(ne(a.errors,N),se.argA,se.argB);J&&Oe(a.errors,N,ce),Lc(a.errors,N)}if((d.touchedFields||m.touchedFields)&&z&&Array.isArray(ne(a.touchedFields,N))){const ce=U(ne(a.touchedFields,N),se.argA,se.argB);J&&Oe(a.touchedFields,N,ce)}(d.dirtyFields||m.dirtyFields)&&(a.dirtyFields=rs(i,n)),h.state.next({name:N,isDirty:Z(N,D),dirtyFields:a.dirtyFields,errors:a.errors,isValid:a.isValid})}else Oe(n,N,D)},M=(N,D)=>{Oe(a.errors,N,D),h.state.next({errors:a.errors})},S=N=>{a.errors=N,h.state.next({errors:a.errors,isValid:!1})},w=(N,D,U,se)=>{const J=ne(r,N);if(J){const z=ne(n,N,Qe(U)?ne(i,N):U);Qe(z)||se&&se.defaultChecked||D?Oe(n,N,D?z:Si(J._f)):O(N,z),l.mount&&_()}},B=(N,D,U,se,J)=>{let z=!1,ce=!1;const Ce={name:N};if(!s.disabled){if(!U||se){(d.isDirty||m.isDirty)&&(ce=a.isDirty,a.isDirty=Ce.isDirty=Z(),z=ce!==Ce.isDirty);const Se=Mt(ne(i,N),D);ce=!!ne(a.dirtyFields,N),Se?Ke(a.dirtyFields,N):Oe(a.dirtyFields,N,!0),Ce.dirtyFields=a.dirtyFields,z=z||(d.dirtyFields||m.dirtyFields)&&ce!==!Se}if(U){const Se=ne(a.touchedFields,N);Se||(Oe(a.touchedFields,N,U),Ce.touchedFields=a.touchedFields,z=z||(d.touchedFields||m.touchedFields)&&Se!==U)}z&&J&&h.state.next(Ce)}return z?Ce:{}},b=(N,D,U,se)=>{const J=ne(a.errors,N),z=(d.isValid||m.isValid)&&At(D)&&a.isValid!==D;if(s.delayError&&U?(c=k(()=>M(N,U)),c(s.delayError)):(clearTimeout(u),c=null,U?Oe(a.errors,N,U):Ke(a.errors,N)),(U?!Mt(J,U):J)||!lt(se)||z){const ce={...se,...z&&At(D)?{isValid:D}:{},errors:a.errors,name:N};a={...a,...ce},h.state.next(ce)}},C=async N=>{f(N,!0);const D=await s.resolver(n,s.context,Ic(N||o.mount,r,s.criteriaMode,s.shouldUseNativeValidation));return f(N),D},j=async N=>{const{errors:D}=await C(N);if(N)for(const U of N){const se=ne(D,U);se?Oe(a.errors,U,se):Ke(a.errors,U)}else a.errors=D;return D},K=async(N,D,U={valid:!0})=>{for(const se in N){const J=N[se];if(J){const{_f:z,...ce}=J;if(z){const Ce=o.array.has(z.name),Se=J._f&&_c(J._f);Se&&d.validatingFields&&f([z.name],!0);const ft=await Di(J,o.disabled,n,p,s.shouldUseNativeValidation&&!D,Ce);if(Se&&d.validatingFields&&f([z.name]),ft[z.name]&&(U.valid=!1,D))break;!D&&(ne(ft,z.name)?Ce?Uc(a.errors,ft,z.name):Oe(a.errors,z.name,ft[z.name]):Ke(a.errors,z.name))}!lt(ce)&&await K(ce,D,U)}}return U.valid},H=()=>{for(const N of o.unMount){const D=ne(r,N);D&&(D._f.refs?D._f.refs.every(U=>!Ua(U)):!Ua(D._f.ref))&&g(N)}o.unMount=new Set},Z=(N,D)=>!s.disabled&&(N&&D&&Oe(n,N,D),!Mt(De(),i)),v=(N,D,U)=>Pc(N,o,{...l.mount?n:Qe(D)?i:dt(N)?{[N]:D}:D},U,D),G=N=>wr(ne(l.mount?n:i,N,s.shouldUnregister?ne(i,N,[]):[])),O=(N,D,U={})=>{const se=ne(r,N);let J=D;if(se){const z=se._f;z&&(!z.disabled&&Oe(n,N,sl(D,z)),J=na(z.ref)&&nt(D)?"":D,Yn(z.ref)?[...z.ref.options].forEach(ce=>ce.selected=J.includes(ce.value)):z.refs?Gs(z.ref)?z.refs.forEach(ce=>{(!ce.defaultChecked||!ce.disabled)&&(Array.isArray(J)?ce.checked=!!J.find(Ce=>Ce===ce.value):ce.checked=J===ce.value||!!J)}):z.refs.forEach(ce=>ce.checked=ce.value===J):kr(z.ref)?z.ref.value="":(z.ref.value=J,z.ref.type||h.state.next({name:N,values:Ye(n)})))}(U.shouldDirty||U.shouldTouch)&&B(N,J,U.shouldTouch,U.shouldDirty,!0),U.shouldValidate&&pe(N)},y=(N,D,U)=>{for(const se in D){if(!D.hasOwnProperty(se))return;const J=D[se],z=N+"."+se,ce=ne(r,z);(o.array.has(N)||Ze(J)||ce&&!ce._f)&&!Zt(J)?y(z,J,U):O(z,J,U)}},A=(N,D,U={})=>{const se=ne(r,N),J=o.array.has(N),z=Ye(D);Oe(n,N,z),J?(h.array.next({name:N,values:Ye(n)}),(d.isDirty||d.dirtyFields||m.isDirty||m.dirtyFields)&&U.shouldDirty&&h.state.next({name:N,dirtyFields:rs(i,n),isDirty:Z(N,z)})):se&&!se._f&&!nt(z)?y(N,z,U):O(N,z,U),Ti(N,o)&&h.state.next({...a,name:N}),h.state.next({name:l.mount?N:void 0,values:Ye(n)})},$=async N=>{l.mount=!0;const D=N.target;let U=D.name,se=!0;const J=ne(r,U),z=Se=>{se=Number.isNaN(Se)||Zt(Se)&&isNaN(Se.getTime())||Mt(Se,ne(n,U,Se))},ce=Ai(s.mode),Ce=Ai(s.reValidateMode);if(J){let Se,ft;const Hs=D.type?Si(J._f):jc(N),Rt=N.type===ji.BLUR||N.type===ji.FOCUS_OUT,Go=!Rc(J._f)&&!s.resolver&&!ne(a.errors,U)&&!J._f.deps||Mc(Rt,ne(a.touchedFields,U),a.isSubmitted,Ce,ce),Da=Ti(U,o,Rt);Oe(n,U,Hs),Rt?(!D||!D.readOnly)&&(J._f.onBlur&&J._f.onBlur(N),c&&c(0)):J._f.onChange&&J._f.onChange(N);const Ia=B(U,Hs,Rt),Wo=!lt(Ia)||Da;if(!Rt&&h.state.next({name:U,type:N.type,values:Ye(n)}),Go)return(d.isValid||m.isValid)&&(s.mode==="onBlur"?Rt&&_():Rt||_()),Wo&&h.state.next({name:U,...Da?{}:Ia});if(!Rt&&Da&&h.state.next({...a}),s.resolver){const{errors:si}=await C([U]);if(z(Hs),se){const zo=Ei(a.errors,r,U),ai=Ei(si,r,zo.name||U);Se=ai.error,U=ai.name,ft=lt(si)}}else f([U],!0),Se=(await Di(J,o.disabled,n,p,s.shouldUseNativeValidation))[U],f([U]),z(Hs),se&&(Se?ft=!1:(d.isValid||m.isValid)&&(ft=await K(r,!0)));se&&(J._f.deps&&(!Array.isArray(J._f.deps)||J._f.deps.length>0)&&pe(J._f.deps),b(U,ft,Se,Ia))}},W=(N,D)=>{if(ne(a.errors,D)&&N.focus)return N.focus(),1},pe=async(N,D={})=>{let U,se;const J=Cs(N);if(s.resolver){const z=await j(Qe(N)?N:J);U=lt(z),se=N?!J.some(ce=>ne(z,ce)):U}else N?(se=(await Promise.all(J.map(async z=>{const ce=ne(r,z);return await K(ce&&ce._f?{[z]:ce}:ce)}))).every(Boolean),!(!se&&!a.isValid)&&_()):se=U=await K(r);return h.state.next({...!dt(N)||(d.isValid||m.isValid)&&U!==a.isValid?{}:{name:N},...s.resolver||!N?{isValid:U}:{},errors:a.errors}),D.shouldFocus&&!se&&Ss(r,W,N?J:o.mount),se},De=(N,D)=>{let U={...l.mount?n:i};return D&&(U=Jn(D.dirtyFields?a.dirtyFields:a.touchedFields,U)),Qe(N)?U:dt(N)?ne(U,N):N.map(se=>ne(U,se))},We=(N,D)=>({invalid:!!ne((D||a).errors,N),isDirty:!!ne((D||a).dirtyFields,N),error:ne((D||a).errors,N),isValidating:!!ne(a.validatingFields,N),isTouched:!!ne((D||a).touchedFields,N)}),Te=N=>{N&&Cs(N).forEach(D=>Ke(a.errors,D)),h.state.next({errors:N?a.errors:{}})},Me=(N,D,U)=>{const se=(ne(r,N,{_f:{}})._f||{}).ref,J=ne(a.errors,N)||{},{ref:z,message:ce,type:Ce,...Se}=J;Oe(a.errors,N,{...Se,...D,ref:se}),h.state.next({name:N,errors:a.errors,isValid:!1}),U&&U.shouldFocus&&se&&se.focus&&se.focus()},Re=(N,D)=>kt(N)?h.state.subscribe({next:U=>"values"in U&&N(v(void 0,D),U)}):v(N,D,!0),E=N=>h.state.subscribe({next:D=>{Bc(N.name,D.name,N.exact)&&Oc(D,N.formState||d,L,N.reRenderRoot)&&N.callback({values:{...n},...a,...D,defaultValues:i})}}).unsubscribe,ie=N=>(l.mount=!0,m={...m,...N.formState},E({...N,formState:m})),g=(N,D={})=>{for(const U of N?Cs(N):o.mount)o.mount.delete(U),o.array.delete(U),D.keepValue||(Ke(r,U),Ke(n,U)),!D.keepError&&Ke(a.errors,U),!D.keepDirty&&Ke(a.dirtyFields,U),!D.keepTouched&&Ke(a.touchedFields,U),!D.keepIsValidating&&Ke(a.validatingFields,U),!s.shouldUnregister&&!D.keepDefaultValue&&Ke(i,U);h.state.next({values:Ye(n)}),h.state.next({...a,...D.keepDirty?{isDirty:Z()}:{}}),!D.keepIsValid&&_()},V=({disabled:N,name:D})=>{(At(N)&&l.mount||N||o.disabled.has(D))&&(N?o.disabled.add(D):o.disabled.delete(D))},oe=(N,D={})=>{let U=ne(r,N);const se=At(D.disabled)||At(s.disabled);return Oe(r,N,{...U||{},_f:{...U&&U._f?U._f:{ref:{name:N}},name:N,mount:!0,...D}}),o.mount.add(N),U?V({disabled:At(D.disabled)?D.disabled:s.disabled,name:N}):w(N,!0,D.value),{...se?{disabled:D.disabled||s.disabled}:{},...s.progressive?{required:!!D.required,min:ys(D.min),max:ys(D.max),minLength:ys(D.minLength),maxLength:ys(D.maxLength),pattern:ys(D.pattern)}:{},name:N,onChange:$,onBlur:$,ref:J=>{if(J){oe(N,D),U=ne(r,N);const z=Qe(J.value)&&J.querySelectorAll&&J.querySelectorAll("input,select,textarea")[0]||J,ce=Tc(z),Ce=U._f.refs||[];if(ce?Ce.find(Se=>Se===z):z===U._f.ref)return;Oe(r,N,{_f:{...U._f,...ce?{refs:[...Ce.filter(Ua),z,...Array.isArray(ne(i,N))?[{}]:[]],ref:{type:z.type,name:N}}:{ref:z}}}),w(N,!1,void 0,z)}else U=ne(r,N,{}),U._f&&(U._f.mount=!1),(s.shouldUnregister||D.shouldUnregister)&&!(Nc(o.array,N)&&l.action)&&o.unMount.add(N)}}},xe=()=>s.shouldFocusError&&Ss(r,W,o.mount),qe=N=>{At(N)&&(h.state.next({disabled:N}),Ss(r,(D,U)=>{const se=ne(r,U);se&&(D.disabled=se._f.disabled||N,Array.isArray(se._f.refs)&&se._f.refs.forEach(J=>{J.disabled=se._f.disabled||N}))},0,!1))},F=(N,D)=>async U=>{let se;U&&(U.preventDefault&&U.preventDefault(),U.persist&&U.persist());let J=Ye(n);if(h.state.next({isSubmitting:!0}),s.resolver){const{errors:z,values:ce}=await C();a.errors=z,J=Ye(ce)}else await K(r);if(o.disabled.size)for(const z of o.disabled)Ke(J,z);if(Ke(a.errors,"root"),lt(a.errors)){h.state.next({errors:{}});try{await N(J,U)}catch(z){se=z}}else D&&await D({...a.errors},U),xe(),setTimeout(xe);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:lt(a.errors)&&!se,submitCount:a.submitCount+1,errors:a.errors}),se)throw se},q=(N,D={})=>{ne(r,N)&&(Qe(D.defaultValue)?A(N,Ye(ne(i,N))):(A(N,D.defaultValue),Oe(i,N,Ye(D.defaultValue))),D.keepTouched||Ke(a.touchedFields,N),D.keepDirty||(Ke(a.dirtyFields,N),a.isDirty=D.defaultValue?Z(N,Ye(ne(i,N))):Z()),D.keepError||(Ke(a.errors,N),d.isValid&&_()),h.state.next({...a}))},be=(N,D={})=>{const U=N?Ye(N):i,se=Ye(U),J=lt(N),z=J?i:se;if(D.keepDefaultValues||(i=U),!D.keepValues){if(D.keepDirtyValues){const ce=new Set([...o.mount,...Object.keys(rs(i,n))]);for(const Ce of Array.from(ce))ne(a.dirtyFields,Ce)?Oe(z,Ce,ne(n,Ce)):A(Ce,ne(z,Ce))}else{if(jr&&Qe(N))for(const ce of o.mount){const Ce=ne(r,ce);if(Ce&&Ce._f){const Se=Array.isArray(Ce._f.refs)?Ce._f.refs[0]:Ce._f.ref;if(na(Se)){const ft=Se.closest("form");if(ft){ft.reset();break}}}}if(D.keepFieldsRef)for(const ce of o.mount)A(ce,ne(z,ce));else r={}}n=s.shouldUnregister?D.keepDefaultValues?Ye(i):{}:Ye(z),h.array.next({values:{...z}}),h.state.next({values:{...z}})}o={mount:D.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!d.isValid||!!D.keepIsValid||!!D.keepDirtyValues,l.watch=!!s.shouldUnregister,h.state.next({submitCount:D.keepSubmitCount?a.submitCount:0,isDirty:J?!1:D.keepDirty?a.isDirty:!!(D.keepDefaultValues&&!Mt(N,i)),isSubmitted:D.keepIsSubmitted?a.isSubmitted:!1,dirtyFields:J?{}:D.keepDirtyValues?D.keepDefaultValues&&n?rs(i,n):a.dirtyFields:D.keepDefaultValues&&N?rs(i,N):D.keepDirty?a.dirtyFields:{},touchedFields:D.keepTouched?a.touchedFields:{},errors:D.keepErrors?a.errors:{},isSubmitSuccessful:D.keepIsSubmitSuccessful?a.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:i})},Be=(N,D)=>be(kt(N)?N(n):N,D),x=(N,D={})=>{const U=ne(r,N),se=U&&U._f;if(se){const J=se.refs?se.refs[0]:se.ref;J.focus&&(J.focus(),D.shouldSelect&&kt(J.select)&&J.select())}},L=N=>{a={...a,...N}},je={control:{register:oe,unregister:g,getFieldState:We,handleSubmit:F,setError:Me,_subscribe:E,_runSchema:C,_focusError:xe,_getWatch:v,_getDirty:Z,_setValid:_,_setFieldArray:T,_setDisabledField:V,_setErrors:S,_getFieldArray:G,_reset:be,_resetDefaultValues:()=>kt(s.defaultValues)&&s.defaultValues().then(N=>{Be(N,s.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:H,_disableForm:qe,_subjects:h,_proxyFormState:d,get _fields(){return r},get _formValues(){return n},get _state(){return l},set _state(N){l=N},get _defaultValues(){return i},get _names(){return o},set _names(N){o=N},get _formState(){return a},get _options(){return s},set _options(N){s={...s,...N}}},subscribe:ie,trigger:pe,register:oe,handleSubmit:F,watch:Re,setValue:A,getValues:De,reset:Be,resetField:q,clearErrors:Te,unregister:g,setError:Me,setFocus:x,getFieldState:We};return{...je,formControl:je}}function Sr(t={}){const s=Ae.useRef(void 0),a=Ae.useRef(void 0),[r,i]=Ae.useState({isDirty:!1,isValidating:!1,isLoading:kt(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:kt(t.defaultValues)?void 0:t.defaultValues});if(!s.current)if(t.formControl)s.current={...t.formControl,formState:r},t.defaultValues&&!kt(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:l,...o}=$c(t);s.current={...o,formState:r}}const n=s.current.control;return n._options=t,Ac(()=>{const l=n._subscribe({formState:n._proxyFormState,callback:()=>i({...n._formState}),reRenderRoot:!0});return i(o=>({...o,isReady:!0})),n._formState.isReady=!0,l},[n]),Ae.useEffect(()=>n._disableForm(t.disabled),[n,t.disabled]),Ae.useEffect(()=>{t.mode&&(n._options.mode=t.mode),t.reValidateMode&&(n._options.reValidateMode=t.reValidateMode)},[n,t.mode,t.reValidateMode]),Ae.useEffect(()=>{t.errors&&(n._setErrors(t.errors),n._focusError())},[n,t.errors]),Ae.useEffect(()=>{t.shouldUnregister&&n._subjects.state.next({values:n._getWatch()})},[n,t.shouldUnregister]),Ae.useEffect(()=>{if(n._proxyFormState.isDirty){const l=n._getDirty();l!==r.isDirty&&n._subjects.state.next({isDirty:l})}},[n,r.isDirty]),Ae.useEffect(()=>{t.values&&!Mt(t.values,a.current)?(n._reset(t.values,{keepFieldsRef:!0,...n._options.resetOptions}),a.current=t.values,i(l=>({...l}))):n._resetDefaultValues()},[n,t.values]),Ae.useEffect(()=>{n._state.mount||(n._setValid(),n._state.mount=!0),n._state.watch&&(n._state.watch=!1,n._subjects.state.next({...n._formState})),n._removeUnmounted()}),s.current.formState=Sc(r,n),s.current}const Ii=(t,s,a)=>{if(t&&"reportValidity"in t){const r=ne(a,s);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},rl=(t,s)=>{for(const a in s.fields){const r=s.fields[a];r&&r.ref&&"reportValidity"in r.ref?Ii(r.ref,a,t):r.refs&&r.refs.forEach(i=>Ii(i,a,t))}},qc=(t,s)=>{s.shouldUseNativeValidation&&rl(t,s);const a={};for(const r in t){const i=ne(s.fields,r),n=Object.assign(t[r]||{},{ref:i&&i.ref});if(Gc(s.names||Object.keys(t),r)){const l=Object.assign({},ne(a,r));Oe(l,"root",n),Oe(a,r,l)}else Oe(a,r,n)}return a},Gc=(t,s)=>t.some(a=>a.startsWith(s+"."));var Wc=function(t,s){for(var a={};t.length;){var r=t[0],i=r.code,n=r.message,l=r.path.join(".");if(!a[l])if("unionErrors"in r){var o=r.unionErrors[0].errors[0];a[l]={message:o.message,type:o.code}}else a[l]={message:n,type:i};if("unionErrors"in r&&r.unionErrors.forEach(function(d){return d.errors.forEach(function(m){return t.push(m)})}),s){var c=a[l].types,u=c&&c[r.code];a[l]=Zn(l,s,a,i,u?[].concat(u,r.message):r.message)}t.shift()}return a},Ar=function(t,s,a){return a===void 0&&(a={}),function(r,i,n){try{return Promise.resolve(function(l,o){try{var c=Promise.resolve(t[a.mode==="sync"?"parse":"parseAsync"](r,s)).then(function(u){return n.shouldUseNativeValidation&&rl({},n),{errors:{},values:a.raw?r:u}})}catch(u){return o(u)}return c&&c.then?c.then(void 0,o):c}(0,function(l){if(function(o){return Array.isArray(o==null?void 0:o.errors)}(l))return{values:{},errors:qc(Wc(l.errors,!n.shouldUseNativeValidation&&n.criteriaMode==="all"),n)};throw l}))}catch(l){return Promise.reject(l)}}},Fe;(function(t){t.assertEqual=i=>{};function s(i){}t.assertIs=s;function a(i){throw new Error}t.assertNever=a,t.arrayToEnum=i=>{const n={};for(const l of i)n[l]=l;return n},t.getValidEnumValues=i=>{const n=t.objectKeys(i).filter(o=>typeof i[i[o]]!="number"),l={};for(const o of n)l[o]=i[o];return t.objectValues(l)},t.objectValues=i=>t.objectKeys(i).map(function(n){return i[n]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const n=[];for(const l in i)Object.prototype.hasOwnProperty.call(i,l)&&n.push(l);return n},t.find=(i,n)=>{for(const l of i)if(n(l))return l},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function r(i,n=" | "){return i.map(l=>typeof l=="string"?`'${l}'`:l).join(n)}t.joinValues=r,t.jsonStringifyReplacer=(i,n)=>typeof n=="bigint"?n.toString():n})(Fe||(Fe={}));var _i;(function(t){t.mergeShapes=(s,a)=>({...s,...a})})(_i||(_i={}));const le=Fe.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Bt=t=>{switch(typeof t){case"undefined":return le.undefined;case"string":return le.string;case"number":return Number.isNaN(t)?le.nan:le.number;case"boolean":return le.boolean;case"function":return le.function;case"bigint":return le.bigint;case"symbol":return le.symbol;case"object":return Array.isArray(t)?le.array:t===null?le.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?le.promise:typeof Map<"u"&&t instanceof Map?le.map:typeof Set<"u"&&t instanceof Set?le.set:typeof Date<"u"&&t instanceof Date?le.date:le.object;default:return le.unknown}},Q=Fe.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class _t extends Error{get errors(){return this.issues}constructor(s){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const a=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,a):this.__proto__=a,this.name="ZodError",this.issues=s}format(s){const a=s||function(n){return n.message},r={_errors:[]},i=n=>{for(const l of n.issues)if(l.code==="invalid_union")l.unionErrors.map(i);else if(l.code==="invalid_return_type")i(l.returnTypeError);else if(l.code==="invalid_arguments")i(l.argumentsError);else if(l.path.length===0)r._errors.push(a(l));else{let o=r,c=0;for(;c<l.path.length;){const u=l.path[c];c===l.path.length-1?(o[u]=o[u]||{_errors:[]},o[u]._errors.push(a(l))):o[u]=o[u]||{_errors:[]},o=o[u],c++}}};return i(this),r}static assert(s){if(!(s instanceof _t))throw new Error(`Not a ZodError: ${s}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Fe.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(s=a=>a.message){const a={},r=[];for(const i of this.issues)if(i.path.length>0){const n=i.path[0];a[n]=a[n]||[],a[n].push(s(i))}else r.push(s(i));return{formErrors:r,fieldErrors:a}}get formErrors(){return this.flatten()}}_t.create=t=>new _t(t);const nr=(t,s)=>{let a;switch(t.code){case Q.invalid_type:t.received===le.undefined?a="Required":a=`Expected ${t.expected}, received ${t.received}`;break;case Q.invalid_literal:a=`Invalid literal value, expected ${JSON.stringify(t.expected,Fe.jsonStringifyReplacer)}`;break;case Q.unrecognized_keys:a=`Unrecognized key(s) in object: ${Fe.joinValues(t.keys,", ")}`;break;case Q.invalid_union:a="Invalid input";break;case Q.invalid_union_discriminator:a=`Invalid discriminator value. Expected ${Fe.joinValues(t.options)}`;break;case Q.invalid_enum_value:a=`Invalid enum value. Expected ${Fe.joinValues(t.options)}, received '${t.received}'`;break;case Q.invalid_arguments:a="Invalid function arguments";break;case Q.invalid_return_type:a="Invalid function return type";break;case Q.invalid_date:a="Invalid date";break;case Q.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(a=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(a=`${a} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?a=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?a=`Invalid input: must end with "${t.validation.endsWith}"`:Fe.assertNever(t.validation):t.validation!=="regex"?a=`Invalid ${t.validation}`:a="Invalid";break;case Q.too_small:t.type==="array"?a=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?a=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?a=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?a=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?a=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:a="Invalid input";break;case Q.too_big:t.type==="array"?a=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?a=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?a=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?a=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?a=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:a="Invalid input";break;case Q.custom:a="Invalid input";break;case Q.invalid_intersection_types:a="Intersection results could not be merged";break;case Q.not_multiple_of:a=`Number must be a multiple of ${t.multipleOf}`;break;case Q.not_finite:a="Number must be finite";break;default:a=s.defaultError,Fe.assertNever(t)}return{message:a}};let zc=nr;function Kc(){return zc}const Hc=t=>{const{data:s,path:a,errorMaps:r,issueData:i}=t,n=[...a,...i.path||[]],l={...i,path:n};if(i.message!==void 0)return{...i,path:n,message:i.message};let o="";const c=r.filter(u=>!!u).slice().reverse();for(const u of c)o=u(l,{data:s,defaultError:o}).message;return{...i,path:n,message:o}};function re(t,s){const a=Kc(),r=Hc({issueData:s,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,a,a===nr?void 0:nr].filter(i=>!!i)});t.common.issues.push(r)}class gt{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(s,a){const r=[];for(const i of a){if(i.status==="aborted")return ye;i.status==="dirty"&&s.dirty(),r.push(i.value)}return{status:s.value,value:r}}static async mergeObjectAsync(s,a){const r=[];for(const i of a){const n=await i.key,l=await i.value;r.push({key:n,value:l})}return gt.mergeObjectSync(s,r)}static mergeObjectSync(s,a){const r={};for(const i of a){const{key:n,value:l}=i;if(n.status==="aborted"||l.status==="aborted")return ye;n.status==="dirty"&&s.dirty(),l.status==="dirty"&&s.dirty(),n.value!=="__proto__"&&(typeof l.value<"u"||i.alwaysSet)&&(r[n.value]=l.value)}return{status:s.value,value:r}}}const ye=Object.freeze({status:"aborted"}),Ns=t=>({status:"dirty",value:t}),jt=t=>({status:"valid",value:t}),Ri=t=>t.status==="aborted",Oi=t=>t.status==="dirty",os=t=>t.status==="valid",oa=t=>typeof Promise<"u"&&t instanceof Promise;var de;(function(t){t.errToObj=s=>typeof s=="string"?{message:s}:s||{},t.toString=s=>typeof s=="string"?s:s==null?void 0:s.message})(de||(de={}));class zt{constructor(s,a,r,i){this._cachedPath=[],this.parent=s,this.data=a,this._path=r,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Bi=(t,s)=>{if(os(s))return{success:!0,data:s.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const a=new _t(t.common.issues);return this._error=a,this._error}}};function ke(t){if(!t)return{};const{errorMap:s,invalid_type_error:a,required_error:r,description:i}=t;if(s&&(a||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return s?{errorMap:s,description:i}:{errorMap:(l,o)=>{const{message:c}=t;return l.code==="invalid_enum_value"?{message:c??o.defaultError}:typeof o.data>"u"?{message:c??r??o.defaultError}:l.code!=="invalid_type"?{message:o.defaultError}:{message:c??a??o.defaultError}},description:i}}class Ee{get description(){return this._def.description}_getType(s){return Bt(s.data)}_getOrReturnCtx(s,a){return a||{common:s.parent.common,data:s.data,parsedType:Bt(s.data),schemaErrorMap:this._def.errorMap,path:s.path,parent:s.parent}}_processInputParams(s){return{status:new gt,ctx:{common:s.parent.common,data:s.data,parsedType:Bt(s.data),schemaErrorMap:this._def.errorMap,path:s.path,parent:s.parent}}}_parseSync(s){const a=this._parse(s);if(oa(a))throw new Error("Synchronous parse encountered promise.");return a}_parseAsync(s){const a=this._parse(s);return Promise.resolve(a)}parse(s,a){const r=this.safeParse(s,a);if(r.success)return r.data;throw r.error}safeParse(s,a){const r={common:{issues:[],async:(a==null?void 0:a.async)??!1,contextualErrorMap:a==null?void 0:a.errorMap},path:(a==null?void 0:a.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:s,parsedType:Bt(s)},i=this._parseSync({data:s,path:r.path,parent:r});return Bi(r,i)}"~validate"(s){var r,i;const a={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:s,parsedType:Bt(s)};if(!this["~standard"].async)try{const n=this._parseSync({data:s,path:[],parent:a});return os(n)?{value:n.value}:{issues:a.common.issues}}catch(n){(i=(r=n==null?void 0:n.message)==null?void 0:r.toLowerCase())!=null&&i.includes("encountered")&&(this["~standard"].async=!0),a.common={issues:[],async:!0}}return this._parseAsync({data:s,path:[],parent:a}).then(n=>os(n)?{value:n.value}:{issues:a.common.issues})}async parseAsync(s,a){const r=await this.safeParseAsync(s,a);if(r.success)return r.data;throw r.error}async safeParseAsync(s,a){const r={common:{issues:[],contextualErrorMap:a==null?void 0:a.errorMap,async:!0},path:(a==null?void 0:a.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:s,parsedType:Bt(s)},i=this._parse({data:s,path:r.path,parent:r}),n=await(oa(i)?i:Promise.resolve(i));return Bi(r,n)}refine(s,a){const r=i=>typeof a=="string"||typeof a>"u"?{message:a}:typeof a=="function"?a(i):a;return this._refinement((i,n)=>{const l=s(i),o=()=>n.addIssue({code:Q.custom,...r(i)});return typeof Promise<"u"&&l instanceof Promise?l.then(c=>c?!0:(o(),!1)):l?!0:(o(),!1)})}refinement(s,a){return this._refinement((r,i)=>s(r)?!0:(i.addIssue(typeof a=="function"?a(r,i):a),!1))}_refinement(s){return new us({schema:this,typeName:ve.ZodEffects,effect:{type:"refinement",refinement:s}})}superRefine(s){return this._refinement(s)}constructor(s){this.spa=this.safeParseAsync,this._def=s,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:a=>this["~validate"](a)}}optional(){return Vt.create(this,this._def)}nullable(){return ms.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Pt.create(this)}promise(){return ma.create(this,this._def)}or(s){return da.create([this,s],this._def)}and(s){return ua.create(this,s,this._def)}transform(s){return new us({...ke(this._def),schema:this,typeName:ve.ZodEffects,effect:{type:"transform",transform:s}})}default(s){const a=typeof s=="function"?s:()=>s;return new cr({...ke(this._def),innerType:this,defaultValue:a,typeName:ve.ZodDefault})}brand(){return new xd({typeName:ve.ZodBranded,type:this,...ke(this._def)})}catch(s){const a=typeof s=="function"?s:()=>s;return new dr({...ke(this._def),innerType:this,catchValue:a,typeName:ve.ZodCatch})}describe(s){const a=this.constructor;return new a({...this._def,description:s})}pipe(s){return Pr.create(this,s)}readonly(){return ur.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Qc=/^c[^\s-]{8,}$/i,Xc=/^[0-9a-z]+$/,Zc=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Jc=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Yc=/^[a-z0-9_-]{21}$/i,ed=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,td=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,sd=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,ad="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Va;const rd=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,id=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,nd=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,ld=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,od=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,cd=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,il="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",dd=new RegExp(`^${il}$`);function nl(t){let s="[0-5]\\d";t.precision?s=`${s}\\.\\d{${t.precision}}`:t.precision==null&&(s=`${s}(\\.\\d+)?`);const a=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${s})${a}`}function ud(t){return new RegExp(`^${nl(t)}$`)}function md(t){let s=`${il}T${nl(t)}`;const a=[];return a.push(t.local?"Z?":"Z"),t.offset&&a.push("([+-]\\d{2}:?\\d{2})"),s=`${s}(${a.join("|")})`,new RegExp(`^${s}$`)}function hd(t,s){return!!((s==="v4"||!s)&&rd.test(t)||(s==="v6"||!s)&&nd.test(t))}function pd(t,s){if(!ed.test(t))return!1;try{const[a]=t.split(".");if(!a)return!1;const r=a.replace(/-/g,"+").replace(/_/g,"/").padEnd(a.length+(4-a.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||"typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||s&&i.alg!==s)}catch{return!1}}function gd(t,s){return!!((s==="v4"||!s)&&id.test(t)||(s==="v6"||!s)&&ld.test(t))}class Lt extends Ee{_parse(s){if(this._def.coerce&&(s.data=String(s.data)),this._getType(s)!==le.string){const n=this._getOrReturnCtx(s);return re(n,{code:Q.invalid_type,expected:le.string,received:n.parsedType}),ye}const r=new gt;let i;for(const n of this._def.checks)if(n.kind==="min")s.data.length<n.value&&(i=this._getOrReturnCtx(s,i),re(i,{code:Q.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),r.dirty());else if(n.kind==="max")s.data.length>n.value&&(i=this._getOrReturnCtx(s,i),re(i,{code:Q.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),r.dirty());else if(n.kind==="length"){const l=s.data.length>n.value,o=s.data.length<n.value;(l||o)&&(i=this._getOrReturnCtx(s,i),l?re(i,{code:Q.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}):o&&re(i,{code:Q.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}),r.dirty())}else if(n.kind==="email")sd.test(s.data)||(i=this._getOrReturnCtx(s,i),re(i,{validation:"email",code:Q.invalid_string,message:n.message}),r.dirty());else if(n.kind==="emoji")Va||(Va=new RegExp(ad,"u")),Va.test(s.data)||(i=this._getOrReturnCtx(s,i),re(i,{validation:"emoji",code:Q.invalid_string,message:n.message}),r.dirty());else if(n.kind==="uuid")Jc.test(s.data)||(i=this._getOrReturnCtx(s,i),re(i,{validation:"uuid",code:Q.invalid_string,message:n.message}),r.dirty());else if(n.kind==="nanoid")Yc.test(s.data)||(i=this._getOrReturnCtx(s,i),re(i,{validation:"nanoid",code:Q.invalid_string,message:n.message}),r.dirty());else if(n.kind==="cuid")Qc.test(s.data)||(i=this._getOrReturnCtx(s,i),re(i,{validation:"cuid",code:Q.invalid_string,message:n.message}),r.dirty());else if(n.kind==="cuid2")Xc.test(s.data)||(i=this._getOrReturnCtx(s,i),re(i,{validation:"cuid2",code:Q.invalid_string,message:n.message}),r.dirty());else if(n.kind==="ulid")Zc.test(s.data)||(i=this._getOrReturnCtx(s,i),re(i,{validation:"ulid",code:Q.invalid_string,message:n.message}),r.dirty());else if(n.kind==="url")try{new URL(s.data)}catch{i=this._getOrReturnCtx(s,i),re(i,{validation:"url",code:Q.invalid_string,message:n.message}),r.dirty()}else n.kind==="regex"?(n.regex.lastIndex=0,n.regex.test(s.data)||(i=this._getOrReturnCtx(s,i),re(i,{validation:"regex",code:Q.invalid_string,message:n.message}),r.dirty())):n.kind==="trim"?s.data=s.data.trim():n.kind==="includes"?s.data.includes(n.value,n.position)||(i=this._getOrReturnCtx(s,i),re(i,{code:Q.invalid_string,validation:{includes:n.value,position:n.position},message:n.message}),r.dirty()):n.kind==="toLowerCase"?s.data=s.data.toLowerCase():n.kind==="toUpperCase"?s.data=s.data.toUpperCase():n.kind==="startsWith"?s.data.startsWith(n.value)||(i=this._getOrReturnCtx(s,i),re(i,{code:Q.invalid_string,validation:{startsWith:n.value},message:n.message}),r.dirty()):n.kind==="endsWith"?s.data.endsWith(n.value)||(i=this._getOrReturnCtx(s,i),re(i,{code:Q.invalid_string,validation:{endsWith:n.value},message:n.message}),r.dirty()):n.kind==="datetime"?md(n).test(s.data)||(i=this._getOrReturnCtx(s,i),re(i,{code:Q.invalid_string,validation:"datetime",message:n.message}),r.dirty()):n.kind==="date"?dd.test(s.data)||(i=this._getOrReturnCtx(s,i),re(i,{code:Q.invalid_string,validation:"date",message:n.message}),r.dirty()):n.kind==="time"?ud(n).test(s.data)||(i=this._getOrReturnCtx(s,i),re(i,{code:Q.invalid_string,validation:"time",message:n.message}),r.dirty()):n.kind==="duration"?td.test(s.data)||(i=this._getOrReturnCtx(s,i),re(i,{validation:"duration",code:Q.invalid_string,message:n.message}),r.dirty()):n.kind==="ip"?hd(s.data,n.version)||(i=this._getOrReturnCtx(s,i),re(i,{validation:"ip",code:Q.invalid_string,message:n.message}),r.dirty()):n.kind==="jwt"?pd(s.data,n.alg)||(i=this._getOrReturnCtx(s,i),re(i,{validation:"jwt",code:Q.invalid_string,message:n.message}),r.dirty()):n.kind==="cidr"?gd(s.data,n.version)||(i=this._getOrReturnCtx(s,i),re(i,{validation:"cidr",code:Q.invalid_string,message:n.message}),r.dirty()):n.kind==="base64"?od.test(s.data)||(i=this._getOrReturnCtx(s,i),re(i,{validation:"base64",code:Q.invalid_string,message:n.message}),r.dirty()):n.kind==="base64url"?cd.test(s.data)||(i=this._getOrReturnCtx(s,i),re(i,{validation:"base64url",code:Q.invalid_string,message:n.message}),r.dirty()):Fe.assertNever(n);return{status:r.value,value:s.data}}_regex(s,a,r){return this.refinement(i=>s.test(i),{validation:a,code:Q.invalid_string,...de.errToObj(r)})}_addCheck(s){return new Lt({...this._def,checks:[...this._def.checks,s]})}email(s){return this._addCheck({kind:"email",...de.errToObj(s)})}url(s){return this._addCheck({kind:"url",...de.errToObj(s)})}emoji(s){return this._addCheck({kind:"emoji",...de.errToObj(s)})}uuid(s){return this._addCheck({kind:"uuid",...de.errToObj(s)})}nanoid(s){return this._addCheck({kind:"nanoid",...de.errToObj(s)})}cuid(s){return this._addCheck({kind:"cuid",...de.errToObj(s)})}cuid2(s){return this._addCheck({kind:"cuid2",...de.errToObj(s)})}ulid(s){return this._addCheck({kind:"ulid",...de.errToObj(s)})}base64(s){return this._addCheck({kind:"base64",...de.errToObj(s)})}base64url(s){return this._addCheck({kind:"base64url",...de.errToObj(s)})}jwt(s){return this._addCheck({kind:"jwt",...de.errToObj(s)})}ip(s){return this._addCheck({kind:"ip",...de.errToObj(s)})}cidr(s){return this._addCheck({kind:"cidr",...de.errToObj(s)})}datetime(s){return typeof s=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:s}):this._addCheck({kind:"datetime",precision:typeof(s==null?void 0:s.precision)>"u"?null:s==null?void 0:s.precision,offset:(s==null?void 0:s.offset)??!1,local:(s==null?void 0:s.local)??!1,...de.errToObj(s==null?void 0:s.message)})}date(s){return this._addCheck({kind:"date",message:s})}time(s){return typeof s=="string"?this._addCheck({kind:"time",precision:null,message:s}):this._addCheck({kind:"time",precision:typeof(s==null?void 0:s.precision)>"u"?null:s==null?void 0:s.precision,...de.errToObj(s==null?void 0:s.message)})}duration(s){return this._addCheck({kind:"duration",...de.errToObj(s)})}regex(s,a){return this._addCheck({kind:"regex",regex:s,...de.errToObj(a)})}includes(s,a){return this._addCheck({kind:"includes",value:s,position:a==null?void 0:a.position,...de.errToObj(a==null?void 0:a.message)})}startsWith(s,a){return this._addCheck({kind:"startsWith",value:s,...de.errToObj(a)})}endsWith(s,a){return this._addCheck({kind:"endsWith",value:s,...de.errToObj(a)})}min(s,a){return this._addCheck({kind:"min",value:s,...de.errToObj(a)})}max(s,a){return this._addCheck({kind:"max",value:s,...de.errToObj(a)})}length(s,a){return this._addCheck({kind:"length",value:s,...de.errToObj(a)})}nonempty(s){return this.min(1,de.errToObj(s))}trim(){return new Lt({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Lt({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Lt({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(s=>s.kind==="datetime")}get isDate(){return!!this._def.checks.find(s=>s.kind==="date")}get isTime(){return!!this._def.checks.find(s=>s.kind==="time")}get isDuration(){return!!this._def.checks.find(s=>s.kind==="duration")}get isEmail(){return!!this._def.checks.find(s=>s.kind==="email")}get isURL(){return!!this._def.checks.find(s=>s.kind==="url")}get isEmoji(){return!!this._def.checks.find(s=>s.kind==="emoji")}get isUUID(){return!!this._def.checks.find(s=>s.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(s=>s.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(s=>s.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(s=>s.kind==="cuid2")}get isULID(){return!!this._def.checks.find(s=>s.kind==="ulid")}get isIP(){return!!this._def.checks.find(s=>s.kind==="ip")}get isCIDR(){return!!this._def.checks.find(s=>s.kind==="cidr")}get isBase64(){return!!this._def.checks.find(s=>s.kind==="base64")}get isBase64url(){return!!this._def.checks.find(s=>s.kind==="base64url")}get minLength(){let s=null;for(const a of this._def.checks)a.kind==="min"&&(s===null||a.value>s)&&(s=a.value);return s}get maxLength(){let s=null;for(const a of this._def.checks)a.kind==="max"&&(s===null||a.value<s)&&(s=a.value);return s}}Lt.create=t=>new Lt({checks:[],typeName:ve.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...ke(t)});function fd(t,s){const a=(t.toString().split(".")[1]||"").length,r=(s.toString().split(".")[1]||"").length,i=a>r?a:r,n=Number.parseInt(t.toFixed(i).replace(".","")),l=Number.parseInt(s.toFixed(i).replace(".",""));return n%l/10**i}class cs extends Ee{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(s){if(this._def.coerce&&(s.data=Number(s.data)),this._getType(s)!==le.number){const n=this._getOrReturnCtx(s);return re(n,{code:Q.invalid_type,expected:le.number,received:n.parsedType}),ye}let r;const i=new gt;for(const n of this._def.checks)n.kind==="int"?Fe.isInteger(s.data)||(r=this._getOrReturnCtx(s,r),re(r,{code:Q.invalid_type,expected:"integer",received:"float",message:n.message}),i.dirty()):n.kind==="min"?(n.inclusive?s.data<n.value:s.data<=n.value)&&(r=this._getOrReturnCtx(s,r),re(r,{code:Q.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),i.dirty()):n.kind==="max"?(n.inclusive?s.data>n.value:s.data>=n.value)&&(r=this._getOrReturnCtx(s,r),re(r,{code:Q.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),i.dirty()):n.kind==="multipleOf"?fd(s.data,n.value)!==0&&(r=this._getOrReturnCtx(s,r),re(r,{code:Q.not_multiple_of,multipleOf:n.value,message:n.message}),i.dirty()):n.kind==="finite"?Number.isFinite(s.data)||(r=this._getOrReturnCtx(s,r),re(r,{code:Q.not_finite,message:n.message}),i.dirty()):Fe.assertNever(n);return{status:i.value,value:s.data}}gte(s,a){return this.setLimit("min",s,!0,de.toString(a))}gt(s,a){return this.setLimit("min",s,!1,de.toString(a))}lte(s,a){return this.setLimit("max",s,!0,de.toString(a))}lt(s,a){return this.setLimit("max",s,!1,de.toString(a))}setLimit(s,a,r,i){return new cs({...this._def,checks:[...this._def.checks,{kind:s,value:a,inclusive:r,message:de.toString(i)}]})}_addCheck(s){return new cs({...this._def,checks:[...this._def.checks,s]})}int(s){return this._addCheck({kind:"int",message:de.toString(s)})}positive(s){return this._addCheck({kind:"min",value:0,inclusive:!1,message:de.toString(s)})}negative(s){return this._addCheck({kind:"max",value:0,inclusive:!1,message:de.toString(s)})}nonpositive(s){return this._addCheck({kind:"max",value:0,inclusive:!0,message:de.toString(s)})}nonnegative(s){return this._addCheck({kind:"min",value:0,inclusive:!0,message:de.toString(s)})}multipleOf(s,a){return this._addCheck({kind:"multipleOf",value:s,message:de.toString(a)})}finite(s){return this._addCheck({kind:"finite",message:de.toString(s)})}safe(s){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:de.toString(s)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:de.toString(s)})}get minValue(){let s=null;for(const a of this._def.checks)a.kind==="min"&&(s===null||a.value>s)&&(s=a.value);return s}get maxValue(){let s=null;for(const a of this._def.checks)a.kind==="max"&&(s===null||a.value<s)&&(s=a.value);return s}get isInt(){return!!this._def.checks.find(s=>s.kind==="int"||s.kind==="multipleOf"&&Fe.isInteger(s.value))}get isFinite(){let s=null,a=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(a===null||r.value>a)&&(a=r.value):r.kind==="max"&&(s===null||r.value<s)&&(s=r.value)}return Number.isFinite(a)&&Number.isFinite(s)}}cs.create=t=>new cs({checks:[],typeName:ve.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...ke(t)});class _s extends Ee{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(s){if(this._def.coerce)try{s.data=BigInt(s.data)}catch{return this._getInvalidInput(s)}if(this._getType(s)!==le.bigint)return this._getInvalidInput(s);let r;const i=new gt;for(const n of this._def.checks)n.kind==="min"?(n.inclusive?s.data<n.value:s.data<=n.value)&&(r=this._getOrReturnCtx(s,r),re(r,{code:Q.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),i.dirty()):n.kind==="max"?(n.inclusive?s.data>n.value:s.data>=n.value)&&(r=this._getOrReturnCtx(s,r),re(r,{code:Q.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),i.dirty()):n.kind==="multipleOf"?s.data%n.value!==BigInt(0)&&(r=this._getOrReturnCtx(s,r),re(r,{code:Q.not_multiple_of,multipleOf:n.value,message:n.message}),i.dirty()):Fe.assertNever(n);return{status:i.value,value:s.data}}_getInvalidInput(s){const a=this._getOrReturnCtx(s);return re(a,{code:Q.invalid_type,expected:le.bigint,received:a.parsedType}),ye}gte(s,a){return this.setLimit("min",s,!0,de.toString(a))}gt(s,a){return this.setLimit("min",s,!1,de.toString(a))}lte(s,a){return this.setLimit("max",s,!0,de.toString(a))}lt(s,a){return this.setLimit("max",s,!1,de.toString(a))}setLimit(s,a,r,i){return new _s({...this._def,checks:[...this._def.checks,{kind:s,value:a,inclusive:r,message:de.toString(i)}]})}_addCheck(s){return new _s({...this._def,checks:[...this._def.checks,s]})}positive(s){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:de.toString(s)})}negative(s){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:de.toString(s)})}nonpositive(s){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:de.toString(s)})}nonnegative(s){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:de.toString(s)})}multipleOf(s,a){return this._addCheck({kind:"multipleOf",value:s,message:de.toString(a)})}get minValue(){let s=null;for(const a of this._def.checks)a.kind==="min"&&(s===null||a.value>s)&&(s=a.value);return s}get maxValue(){let s=null;for(const a of this._def.checks)a.kind==="max"&&(s===null||a.value<s)&&(s=a.value);return s}}_s.create=t=>new _s({checks:[],typeName:ve.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...ke(t)});class lr extends Ee{_parse(s){if(this._def.coerce&&(s.data=!!s.data),this._getType(s)!==le.boolean){const r=this._getOrReturnCtx(s);return re(r,{code:Q.invalid_type,expected:le.boolean,received:r.parsedType}),ye}return jt(s.data)}}lr.create=t=>new lr({typeName:ve.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...ke(t)});class ca extends Ee{_parse(s){if(this._def.coerce&&(s.data=new Date(s.data)),this._getType(s)!==le.date){const n=this._getOrReturnCtx(s);return re(n,{code:Q.invalid_type,expected:le.date,received:n.parsedType}),ye}if(Number.isNaN(s.data.getTime())){const n=this._getOrReturnCtx(s);return re(n,{code:Q.invalid_date}),ye}const r=new gt;let i;for(const n of this._def.checks)n.kind==="min"?s.data.getTime()<n.value&&(i=this._getOrReturnCtx(s,i),re(i,{code:Q.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),r.dirty()):n.kind==="max"?s.data.getTime()>n.value&&(i=this._getOrReturnCtx(s,i),re(i,{code:Q.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),r.dirty()):Fe.assertNever(n);return{status:r.value,value:new Date(s.data.getTime())}}_addCheck(s){return new ca({...this._def,checks:[...this._def.checks,s]})}min(s,a){return this._addCheck({kind:"min",value:s.getTime(),message:de.toString(a)})}max(s,a){return this._addCheck({kind:"max",value:s.getTime(),message:de.toString(a)})}get minDate(){let s=null;for(const a of this._def.checks)a.kind==="min"&&(s===null||a.value>s)&&(s=a.value);return s!=null?new Date(s):null}get maxDate(){let s=null;for(const a of this._def.checks)a.kind==="max"&&(s===null||a.value<s)&&(s=a.value);return s!=null?new Date(s):null}}ca.create=t=>new ca({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:ve.ZodDate,...ke(t)});class Mi extends Ee{_parse(s){if(this._getType(s)!==le.symbol){const r=this._getOrReturnCtx(s);return re(r,{code:Q.invalid_type,expected:le.symbol,received:r.parsedType}),ye}return jt(s.data)}}Mi.create=t=>new Mi({typeName:ve.ZodSymbol,...ke(t)});class Li extends Ee{_parse(s){if(this._getType(s)!==le.undefined){const r=this._getOrReturnCtx(s);return re(r,{code:Q.invalid_type,expected:le.undefined,received:r.parsedType}),ye}return jt(s.data)}}Li.create=t=>new Li({typeName:ve.ZodUndefined,...ke(t)});class Ui extends Ee{_parse(s){if(this._getType(s)!==le.null){const r=this._getOrReturnCtx(s);return re(r,{code:Q.invalid_type,expected:le.null,received:r.parsedType}),ye}return jt(s.data)}}Ui.create=t=>new Ui({typeName:ve.ZodNull,...ke(t)});class Vi extends Ee{constructor(){super(...arguments),this._any=!0}_parse(s){return jt(s.data)}}Vi.create=t=>new Vi({typeName:ve.ZodAny,...ke(t)});class $i extends Ee{constructor(){super(...arguments),this._unknown=!0}_parse(s){return jt(s.data)}}$i.create=t=>new $i({typeName:ve.ZodUnknown,...ke(t)});class Kt extends Ee{_parse(s){const a=this._getOrReturnCtx(s);return re(a,{code:Q.invalid_type,expected:le.never,received:a.parsedType}),ye}}Kt.create=t=>new Kt({typeName:ve.ZodNever,...ke(t)});class qi extends Ee{_parse(s){if(this._getType(s)!==le.undefined){const r=this._getOrReturnCtx(s);return re(r,{code:Q.invalid_type,expected:le.void,received:r.parsedType}),ye}return jt(s.data)}}qi.create=t=>new qi({typeName:ve.ZodVoid,...ke(t)});class Pt extends Ee{_parse(s){const{ctx:a,status:r}=this._processInputParams(s),i=this._def;if(a.parsedType!==le.array)return re(a,{code:Q.invalid_type,expected:le.array,received:a.parsedType}),ye;if(i.exactLength!==null){const l=a.data.length>i.exactLength.value,o=a.data.length<i.exactLength.value;(l||o)&&(re(a,{code:l?Q.too_big:Q.too_small,minimum:o?i.exactLength.value:void 0,maximum:l?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&a.data.length<i.minLength.value&&(re(a,{code:Q.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&a.data.length>i.maxLength.value&&(re(a,{code:Q.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),a.common.async)return Promise.all([...a.data].map((l,o)=>i.type._parseAsync(new zt(a,l,a.path,o)))).then(l=>gt.mergeArray(r,l));const n=[...a.data].map((l,o)=>i.type._parseSync(new zt(a,l,a.path,o)));return gt.mergeArray(r,n)}get element(){return this._def.type}min(s,a){return new Pt({...this._def,minLength:{value:s,message:de.toString(a)}})}max(s,a){return new Pt({...this._def,maxLength:{value:s,message:de.toString(a)}})}length(s,a){return new Pt({...this._def,exactLength:{value:s,message:de.toString(a)}})}nonempty(s){return this.min(1,s)}}Pt.create=(t,s)=>new Pt({type:t,minLength:null,maxLength:null,exactLength:null,typeName:ve.ZodArray,...ke(s)});function is(t){if(t instanceof He){const s={};for(const a in t.shape){const r=t.shape[a];s[a]=Vt.create(is(r))}return new He({...t._def,shape:()=>s})}else return t instanceof Pt?new Pt({...t._def,type:is(t.element)}):t instanceof Vt?Vt.create(is(t.unwrap())):t instanceof ms?ms.create(is(t.unwrap())):t instanceof es?es.create(t.items.map(s=>is(s))):t}class He extends Ee{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const s=this._def.shape(),a=Fe.objectKeys(s);return this._cached={shape:s,keys:a},this._cached}_parse(s){if(this._getType(s)!==le.object){const u=this._getOrReturnCtx(s);return re(u,{code:Q.invalid_type,expected:le.object,received:u.parsedType}),ye}const{status:r,ctx:i}=this._processInputParams(s),{shape:n,keys:l}=this._getCached(),o=[];if(!(this._def.catchall instanceof Kt&&this._def.unknownKeys==="strip"))for(const u in i.data)l.includes(u)||o.push(u);const c=[];for(const u of l){const d=n[u],m=i.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new zt(i,m,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof Kt){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of o)c.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(u==="strict")o.length>0&&(re(i,{code:Q.unrecognized_keys,keys:o}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of o){const m=i.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new zt(i,m,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of c){const m=await d.key,h=await d.value;u.push({key:m,value:h,alwaysSet:d.alwaysSet})}return u}).then(u=>gt.mergeObjectSync(r,u)):gt.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(s){return de.errToObj,new He({...this._def,unknownKeys:"strict",...s!==void 0?{errorMap:(a,r)=>{var n,l;const i=((l=(n=this._def).errorMap)==null?void 0:l.call(n,a,r).message)??r.defaultError;return a.code==="unrecognized_keys"?{message:de.errToObj(s).message??i}:{message:i}}}:{}})}strip(){return new He({...this._def,unknownKeys:"strip"})}passthrough(){return new He({...this._def,unknownKeys:"passthrough"})}extend(s){return new He({...this._def,shape:()=>({...this._def.shape(),...s})})}merge(s){return new He({unknownKeys:s._def.unknownKeys,catchall:s._def.catchall,shape:()=>({...this._def.shape(),...s._def.shape()}),typeName:ve.ZodObject})}setKey(s,a){return this.augment({[s]:a})}catchall(s){return new He({...this._def,catchall:s})}pick(s){const a={};for(const r of Fe.objectKeys(s))s[r]&&this.shape[r]&&(a[r]=this.shape[r]);return new He({...this._def,shape:()=>a})}omit(s){const a={};for(const r of Fe.objectKeys(this.shape))s[r]||(a[r]=this.shape[r]);return new He({...this._def,shape:()=>a})}deepPartial(){return is(this)}partial(s){const a={};for(const r of Fe.objectKeys(this.shape)){const i=this.shape[r];s&&!s[r]?a[r]=i:a[r]=i.optional()}return new He({...this._def,shape:()=>a})}required(s){const a={};for(const r of Fe.objectKeys(this.shape))if(s&&!s[r])a[r]=this.shape[r];else{let n=this.shape[r];for(;n instanceof Vt;)n=n._def.innerType;a[r]=n}return new He({...this._def,shape:()=>a})}keyof(){return ll(Fe.objectKeys(this.shape))}}He.create=(t,s)=>new He({shape:()=>t,unknownKeys:"strip",catchall:Kt.create(),typeName:ve.ZodObject,...ke(s)});He.strictCreate=(t,s)=>new He({shape:()=>t,unknownKeys:"strict",catchall:Kt.create(),typeName:ve.ZodObject,...ke(s)});He.lazycreate=(t,s)=>new He({shape:t,unknownKeys:"strip",catchall:Kt.create(),typeName:ve.ZodObject,...ke(s)});class da extends Ee{_parse(s){const{ctx:a}=this._processInputParams(s),r=this._def.options;function i(n){for(const o of n)if(o.result.status==="valid")return o.result;for(const o of n)if(o.result.status==="dirty")return a.common.issues.push(...o.ctx.common.issues),o.result;const l=n.map(o=>new _t(o.ctx.common.issues));return re(a,{code:Q.invalid_union,unionErrors:l}),ye}if(a.common.async)return Promise.all(r.map(async n=>{const l={...a,common:{...a.common,issues:[]},parent:null};return{result:await n._parseAsync({data:a.data,path:a.path,parent:l}),ctx:l}})).then(i);{let n;const l=[];for(const c of r){const u={...a,common:{...a.common,issues:[]},parent:null},d=c._parseSync({data:a.data,path:a.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!n&&(n={result:d,ctx:u}),u.common.issues.length&&l.push(u.common.issues)}if(n)return a.common.issues.push(...n.ctx.common.issues),n.result;const o=l.map(c=>new _t(c));return re(a,{code:Q.invalid_union,unionErrors:o}),ye}}get options(){return this._def.options}}da.create=(t,s)=>new da({options:t,typeName:ve.ZodUnion,...ke(s)});function or(t,s){const a=Bt(t),r=Bt(s);if(t===s)return{valid:!0,data:t};if(a===le.object&&r===le.object){const i=Fe.objectKeys(s),n=Fe.objectKeys(t).filter(o=>i.indexOf(o)!==-1),l={...t,...s};for(const o of n){const c=or(t[o],s[o]);if(!c.valid)return{valid:!1};l[o]=c.data}return{valid:!0,data:l}}else if(a===le.array&&r===le.array){if(t.length!==s.length)return{valid:!1};const i=[];for(let n=0;n<t.length;n++){const l=t[n],o=s[n],c=or(l,o);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return a===le.date&&r===le.date&&+t==+s?{valid:!0,data:t}:{valid:!1}}class ua extends Ee{_parse(s){const{status:a,ctx:r}=this._processInputParams(s),i=(n,l)=>{if(Ri(n)||Ri(l))return ye;const o=or(n.value,l.value);return o.valid?((Oi(n)||Oi(l))&&a.dirty(),{status:a.value,value:o.data}):(re(r,{code:Q.invalid_intersection_types}),ye)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([n,l])=>i(n,l)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}ua.create=(t,s,a)=>new ua({left:t,right:s,typeName:ve.ZodIntersection,...ke(a)});class es extends Ee{_parse(s){const{status:a,ctx:r}=this._processInputParams(s);if(r.parsedType!==le.array)return re(r,{code:Q.invalid_type,expected:le.array,received:r.parsedType}),ye;if(r.data.length<this._def.items.length)return re(r,{code:Q.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ye;!this._def.rest&&r.data.length>this._def.items.length&&(re(r,{code:Q.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),a.dirty());const n=[...r.data].map((l,o)=>{const c=this._def.items[o]||this._def.rest;return c?c._parse(new zt(r,l,r.path,o)):null}).filter(l=>!!l);return r.common.async?Promise.all(n).then(l=>gt.mergeArray(a,l)):gt.mergeArray(a,n)}get items(){return this._def.items}rest(s){return new es({...this._def,rest:s})}}es.create=(t,s)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new es({items:t,typeName:ve.ZodTuple,rest:null,...ke(s)})};class Gi extends Ee{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(s){const{status:a,ctx:r}=this._processInputParams(s);if(r.parsedType!==le.map)return re(r,{code:Q.invalid_type,expected:le.map,received:r.parsedType}),ye;const i=this._def.keyType,n=this._def.valueType,l=[...r.data.entries()].map(([o,c],u)=>({key:i._parse(new zt(r,o,r.path,[u,"key"])),value:n._parse(new zt(r,c,r.path,[u,"value"]))}));if(r.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const c of l){const u=await c.key,d=await c.value;if(u.status==="aborted"||d.status==="aborted")return ye;(u.status==="dirty"||d.status==="dirty")&&a.dirty(),o.set(u.value,d.value)}return{status:a.value,value:o}})}else{const o=new Map;for(const c of l){const u=c.key,d=c.value;if(u.status==="aborted"||d.status==="aborted")return ye;(u.status==="dirty"||d.status==="dirty")&&a.dirty(),o.set(u.value,d.value)}return{status:a.value,value:o}}}}Gi.create=(t,s,a)=>new Gi({valueType:s,keyType:t,typeName:ve.ZodMap,...ke(a)});class Rs extends Ee{_parse(s){const{status:a,ctx:r}=this._processInputParams(s);if(r.parsedType!==le.set)return re(r,{code:Q.invalid_type,expected:le.set,received:r.parsedType}),ye;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(re(r,{code:Q.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),a.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(re(r,{code:Q.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),a.dirty());const n=this._def.valueType;function l(c){const u=new Set;for(const d of c){if(d.status==="aborted")return ye;d.status==="dirty"&&a.dirty(),u.add(d.value)}return{status:a.value,value:u}}const o=[...r.data.values()].map((c,u)=>n._parse(new zt(r,c,r.path,u)));return r.common.async?Promise.all(o).then(c=>l(c)):l(o)}min(s,a){return new Rs({...this._def,minSize:{value:s,message:de.toString(a)}})}max(s,a){return new Rs({...this._def,maxSize:{value:s,message:de.toString(a)}})}size(s,a){return this.min(s,a).max(s,a)}nonempty(s){return this.min(1,s)}}Rs.create=(t,s)=>new Rs({valueType:t,minSize:null,maxSize:null,typeName:ve.ZodSet,...ke(s)});class Wi extends Ee{get schema(){return this._def.getter()}_parse(s){const{ctx:a}=this._processInputParams(s);return this._def.getter()._parse({data:a.data,path:a.path,parent:a})}}Wi.create=(t,s)=>new Wi({getter:t,typeName:ve.ZodLazy,...ke(s)});class zi extends Ee{_parse(s){if(s.data!==this._def.value){const a=this._getOrReturnCtx(s);return re(a,{received:a.data,code:Q.invalid_literal,expected:this._def.value}),ye}return{status:"valid",value:s.data}}get value(){return this._def.value}}zi.create=(t,s)=>new zi({value:t,typeName:ve.ZodLiteral,...ke(s)});function ll(t,s){return new ds({values:t,typeName:ve.ZodEnum,...ke(s)})}class ds extends Ee{_parse(s){if(typeof s.data!="string"){const a=this._getOrReturnCtx(s),r=this._def.values;return re(a,{expected:Fe.joinValues(r),received:a.parsedType,code:Q.invalid_type}),ye}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(s.data)){const a=this._getOrReturnCtx(s),r=this._def.values;return re(a,{received:a.data,code:Q.invalid_enum_value,options:r}),ye}return jt(s.data)}get options(){return this._def.values}get enum(){const s={};for(const a of this._def.values)s[a]=a;return s}get Values(){const s={};for(const a of this._def.values)s[a]=a;return s}get Enum(){const s={};for(const a of this._def.values)s[a]=a;return s}extract(s,a=this._def){return ds.create(s,{...this._def,...a})}exclude(s,a=this._def){return ds.create(this.options.filter(r=>!s.includes(r)),{...this._def,...a})}}ds.create=ll;class Ki extends Ee{_parse(s){const a=Fe.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(s);if(r.parsedType!==le.string&&r.parsedType!==le.number){const i=Fe.objectValues(a);return re(r,{expected:Fe.joinValues(i),received:r.parsedType,code:Q.invalid_type}),ye}if(this._cache||(this._cache=new Set(Fe.getValidEnumValues(this._def.values))),!this._cache.has(s.data)){const i=Fe.objectValues(a);return re(r,{received:r.data,code:Q.invalid_enum_value,options:i}),ye}return jt(s.data)}get enum(){return this._def.values}}Ki.create=(t,s)=>new Ki({values:t,typeName:ve.ZodNativeEnum,...ke(s)});class ma extends Ee{unwrap(){return this._def.type}_parse(s){const{ctx:a}=this._processInputParams(s);if(a.parsedType!==le.promise&&a.common.async===!1)return re(a,{code:Q.invalid_type,expected:le.promise,received:a.parsedType}),ye;const r=a.parsedType===le.promise?a.data:Promise.resolve(a.data);return jt(r.then(i=>this._def.type.parseAsync(i,{path:a.path,errorMap:a.common.contextualErrorMap})))}}ma.create=(t,s)=>new ma({type:t,typeName:ve.ZodPromise,...ke(s)});class us extends Ee{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ve.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(s){const{status:a,ctx:r}=this._processInputParams(s),i=this._def.effect||null,n={addIssue:l=>{re(r,l),l.fatal?a.abort():a.dirty()},get path(){return r.path}};if(n.addIssue=n.addIssue.bind(n),i.type==="preprocess"){const l=i.transform(r.data,n);if(r.common.async)return Promise.resolve(l).then(async o=>{if(a.value==="aborted")return ye;const c=await this._def.schema._parseAsync({data:o,path:r.path,parent:r});return c.status==="aborted"?ye:c.status==="dirty"||a.value==="dirty"?Ns(c.value):c});{if(a.value==="aborted")return ye;const o=this._def.schema._parseSync({data:l,path:r.path,parent:r});return o.status==="aborted"?ye:o.status==="dirty"||a.value==="dirty"?Ns(o.value):o}}if(i.type==="refinement"){const l=o=>{const c=i.refinement(o,n);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?ye:(o.status==="dirty"&&a.dirty(),l(o.value),{status:a.value,value:o.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>o.status==="aborted"?ye:(o.status==="dirty"&&a.dirty(),l(o.value).then(()=>({status:a.value,value:o.value}))))}if(i.type==="transform")if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!os(l))return ye;const o=i.transform(l.value,n);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:a.value,value:o}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>os(l)?Promise.resolve(i.transform(l.value,n)).then(o=>({status:a.value,value:o})):ye);Fe.assertNever(i)}}us.create=(t,s,a)=>new us({schema:t,typeName:ve.ZodEffects,effect:s,...ke(a)});us.createWithPreprocess=(t,s,a)=>new us({schema:s,effect:{type:"preprocess",transform:t},typeName:ve.ZodEffects,...ke(a)});class Vt extends Ee{_parse(s){return this._getType(s)===le.undefined?jt(void 0):this._def.innerType._parse(s)}unwrap(){return this._def.innerType}}Vt.create=(t,s)=>new Vt({innerType:t,typeName:ve.ZodOptional,...ke(s)});class ms extends Ee{_parse(s){return this._getType(s)===le.null?jt(null):this._def.innerType._parse(s)}unwrap(){return this._def.innerType}}ms.create=(t,s)=>new ms({innerType:t,typeName:ve.ZodNullable,...ke(s)});class cr extends Ee{_parse(s){const{ctx:a}=this._processInputParams(s);let r=a.data;return a.parsedType===le.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:a.path,parent:a})}removeDefault(){return this._def.innerType}}cr.create=(t,s)=>new cr({innerType:t,typeName:ve.ZodDefault,defaultValue:typeof s.default=="function"?s.default:()=>s.default,...ke(s)});class dr extends Ee{_parse(s){const{ctx:a}=this._processInputParams(s),r={...a,common:{...a.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return oa(i)?i.then(n=>({status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new _t(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new _t(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}dr.create=(t,s)=>new dr({innerType:t,typeName:ve.ZodCatch,catchValue:typeof s.catch=="function"?s.catch:()=>s.catch,...ke(s)});class Hi extends Ee{_parse(s){if(this._getType(s)!==le.nan){const r=this._getOrReturnCtx(s);return re(r,{code:Q.invalid_type,expected:le.nan,received:r.parsedType}),ye}return{status:"valid",value:s.data}}}Hi.create=t=>new Hi({typeName:ve.ZodNaN,...ke(t)});class xd extends Ee{_parse(s){const{ctx:a}=this._processInputParams(s),r=a.data;return this._def.type._parse({data:r,path:a.path,parent:a})}unwrap(){return this._def.type}}class Pr extends Ee{_parse(s){const{status:a,ctx:r}=this._processInputParams(s);if(r.common.async)return(async()=>{const n=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return n.status==="aborted"?ye:n.status==="dirty"?(a.dirty(),Ns(n.value)):this._def.out._parseAsync({data:n.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?ye:i.status==="dirty"?(a.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(s,a){return new Pr({in:s,out:a,typeName:ve.ZodPipeline})}}class ur extends Ee{_parse(s){const a=this._def.innerType._parse(s),r=i=>(os(i)&&(i.value=Object.freeze(i.value)),i);return oa(a)?a.then(i=>r(i)):r(a)}unwrap(){return this._def.innerType}}ur.create=(t,s)=>new ur({innerType:t,typeName:ve.ZodReadonly,...ke(s)});var ve;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(ve||(ve={}));const Je=Lt.create,bd=cs.create,ls=lr.create;Kt.create;Pt.create;const Tr=He.create;da.create;ua.create;es.create;ds.create;ma.create;Vt.create;ms.create;const yd={PASSWORD:"pickntrust2025"},bt=()=>yd.PASSWORD;var Na="Tabs",[vd]=qn(Na,[Gn]),ol=Gn(),[jd,Er]=vd(Na),cl=P.forwardRef((t,s)=>{const{__scopeTabs:a,value:r,onValueChange:i,defaultValue:n,orientation:l="horizontal",dir:o,activationMode:c="automatic",...u}=t,d=Yo(o),[m,h]=$n({prop:r,onChange:i,defaultProp:n??"",caller:Na});return e.jsx(jd,{scope:a,baseId:ec(),value:m,onValueChange:h,orientation:l,dir:d,activationMode:c,children:e.jsx(ss.div,{dir:d,"data-orientation":l,...u,ref:s})})});cl.displayName=Na;var dl="TabsList",ul=P.forwardRef((t,s)=>{const{__scopeTabs:a,loop:r=!0,...i}=t,n=Er(dl,a),l=ol(a);return e.jsx(tc,{asChild:!0,...l,orientation:n.orientation,dir:n.dir,loop:r,children:e.jsx(ss.div,{role:"tablist","aria-orientation":n.orientation,...i,ref:s})})});ul.displayName=dl;var ml="TabsTrigger",hl=P.forwardRef((t,s)=>{const{__scopeTabs:a,value:r,disabled:i=!1,...n}=t,l=Er(ml,a),o=ol(a),c=fl(l.baseId,r),u=xl(l.baseId,r),d=r===l.value;return e.jsx(sc,{asChild:!0,...o,focusable:!i,active:d,children:e.jsx(ss.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:c,...n,ref:s,onMouseDown:ks(t.onMouseDown,m=>{!i&&m.button===0&&m.ctrlKey===!1?l.onValueChange(r):m.preventDefault()}),onKeyDown:ks(t.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&l.onValueChange(r)}),onFocus:ks(t.onFocus,()=>{const m=l.activationMode!=="manual";!d&&!i&&m&&l.onValueChange(r)})})})});hl.displayName=ml;var pl="TabsContent",gl=P.forwardRef((t,s)=>{const{__scopeTabs:a,value:r,forceMount:i,children:n,...l}=t,o=Er(pl,a),c=fl(o.baseId,r),u=xl(o.baseId,r),d=r===o.value,m=P.useRef(d);return P.useEffect(()=>{const h=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(h)},[]),e.jsx(Wn,{present:i||d,children:({present:h})=>e.jsx(ss.div,{"data-state":d?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":c,hidden:!h,id:u,tabIndex:0,...l,ref:s,style:{...t.style,animationDuration:m.current?"0s":void 0},children:h&&n})})});gl.displayName=pl;function fl(t,s){return`${t}-trigger-${s}`}function xl(t,s){return`${t}-content-${s}`}var wd=cl,bl=ul,yl=hl,vl=gl;const jl=wd,As=P.forwardRef(({className:t,...s},a)=>e.jsx(bl,{ref:a,className:Es("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...s}));As.displayName=bl.displayName;const ze=P.forwardRef(({className:t,...s},a)=>e.jsx(yl,{ref:a,className:Es("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...s}));ze.displayName=yl.displayName;const Ge=P.forwardRef(({className:t,...s},a)=>e.jsx(vl,{ref:a,className:Es("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...s}));Ge.displayName=vl.displayName;function Nd(){var xe,qe,F,q,be,Be;const{toast:t}=ct(),s=ot(),[a,r]=P.useState("products"),[i,n]=P.useState(!1),[l,o]=P.useState({}),[c,u]=P.useState(""),[d,m]=P.useState(!1),h=(x,L)=>{const te=typeof x=="string"?parseFloat(x.toString().replace(/,/g,"")):x;return Ho(te,L||"INR")},[p,k]=P.useState({name:"",description:"",price:"",originalPrice:"",currency:"INR",imageUrl:"",affiliateUrl:"",category:"",subcategory:"",gender:"",rating:"4.5",reviewCount:"100",discount:"",isFeatured:!0,isService:!1,isAIApp:!1,hasTimer:!1,timerDuration:"24",pricingType:"one-time",monthlyPrice:"",yearlyPrice:"",isFree:!1,customPricingDetails:"",displayPages:["home"],customFields:{}}),[_,f]=P.useState([]),[T,M]=P.useState(null),S=()=>{f([..._,{key:"",value:""}])},w=x=>{const L=_.filter((N,D)=>D!==x);f(L);const te={...p.customFields},je=_[x];je.key&&delete te[je.key],k({...p,customFields:te})},B=(x,L,te)=>{const je=[..._],N=je[x].key;je[x]={key:L,value:te},f(je);const D={...p.customFields};N&&N!==L&&delete D[N],L&&(D[L]=te),k({...p,customFields:D})},{data:b=[],isLoading:C,error:j}=Ie({queryKey:["/api/products"],queryFn:async()=>{try{console.log("Fetching products from /api/products...");const x=await fetch("/api/products");if(console.log("Response status:",x.status),!x.ok){const te=await x.text();throw console.error("API Error:",x.status,te),new Error(`Failed to fetch products: ${x.status} ${te}`)}const L=await x.json();return console.log("API Response data:",L),Array.isArray(L)?(console.log("Data is array, returning:",L.length,"products"),L):L&&L.products&&Array.isArray(L.products)?(console.log("Data has products array, returning:",L.products.length,"products"),L.products):L&&typeof L=="object"?(console.log("Data is object but no products array, returning empty array"),[]):(console.log("Unexpected data format, returning empty array"),[])}catch(x){throw console.error("Fetch error:",x),x}},retry:1,retryDelay:1e3,staleTime:3e4}),{data:K=[]}=Ie({queryKey:["/api/nav-tabs"],queryFn:async()=>{let x;try{x=await fetch("/api/nav-tabs",{method:"GET",headers:{"Content-Type":"application/json"},mode:"cors"})}catch{console.log("Direct call failed, trying proxy..."),x=await fetch("/api/nav-tabs")}return x.ok?x.json():[]},staleTime:0,refetchOnWindowFocus:!0,refetchInterval:3e4}),H=[{id:"home",label:'<i className="fas fa-home"></i> Home Page',description:"Main website"},...(Array.isArray(K)?K:[]).filter(x=>x.is_active).sort((x,L)=>x.display_order-L.display_order).map(x=>({id:x.slug,label:`${x.name}`,description:x.description||"Navigation page"}))],{data:Z=[]}=Ie({queryKey:["/api/categories"],queryFn:async()=>{const x=await fetch("/api/categories");if(!x.ok)throw new Error("Failed to fetch categories");return x.json()},retry:1,staleTime:5*60*1e3}),{data:v=[]}=Ie({queryKey:["/api/categories/forms/products"],queryFn:async()=>{const x=await fetch("/api/categories/forms/products");if(!x.ok)throw new Error("Failed to fetch product categories");return x.json()},retry:1,staleTime:5*60*1e3}),{data:G=[]}=Ie({queryKey:["/api/categories/forms/services"],queryFn:async()=>{const x=await fetch("/api/categories/forms/services");if(!x.ok)throw new Error("Failed to fetch service categories");return x.json()},retry:1,staleTime:5*60*1e3}),{data:O=[]}=Ie({queryKey:["/api/categories/forms/aiapps"],queryFn:async()=>{const x=await fetch("/api/categories/forms/aiapps");if(!x.ok)throw new Error("Failed to fetch AI app categories");return x.json()},retry:1,staleTime:5*60*1e3}),{data:y=[]}=Ie({queryKey:["/api/categories/all-subcategories"],queryFn:async()=>{const x=await fetch("/api/categories");return x.ok?(await x.json()).filter(te=>te.parentId!==null&&te.parentId!==void 0):[]},retry:1,staleTime:0}),A=he({mutationFn:async x=>{var ce;const L=x.price?x.price.toString().replace(/[^\d.]/g,""):"0",te=x.originalPrice?x.originalPrice.toString().replace(/[^\d.]/g,""):null,je=Object.keys(x.customFields||{}).length>0?JSON.stringify(x.customFields):null,N=x.monthlyPrice?x.monthlyPrice.toString().replace(/[^\d.]/g,""):"",D=x.yearlyPrice?x.yearlyPrice.toString().replace(/[^\d.]/g,""):"";let U=N,se=D;x.pricingType==="monthly"&&!N&&L&&L!=="0"&&(U=L),x.pricingType==="yearly"&&!D&&L&&L!=="0"&&(se=L);const J={password:"pickntrust2025",name:x.name.trim(),description:x.description.trim(),price:parseFloat(L)||0,originalPrice:te?parseFloat(te):null,currency:x.currency||"INR",imageUrl:x.imageUrl.trim(),affiliateUrl:x.affiliateUrl.trim(),category:x.category,subcategory:x.subcategory||null,gender:x.gender||null,rating:parseFloat(x.rating)||4.5,reviewCount:parseInt(x.reviewCount)||100,discount:x.discount?parseInt(x.discount):null,isFeatured:!!x.isFeatured,isService:!!x.isService,isAIApp:!!x.isAIApp,isNew:!1,hasTimer:!!x.hasTimer,timerDuration:x.hasTimer?parseInt(x.timerDuration):null,customFields:je,pricingType:x.pricingType||"one-time",monthlyPrice:U||null,yearlyPrice:se||null,isFree:!!x.isFree,priceDescription:((ce=x.customPricingDetails)==null?void 0:ce.trim())||null,displayPages:x.displayPages||[]};console.log("Sending product data:",J);const z=await fetch("/api/admin/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(J)});if(!z.ok){const Ce=await z.text();console.error("Server response:",Ce);let Se;try{Se=JSON.parse(Ce)}catch{Se={message:Ce||"Failed to add product"}}throw new Error(Se.message||"Failed to add product")}return z.json()},onSuccess:async x=>{if(s.invalidateQueries({queryKey:["/api/products"]}),s.invalidateQueries({queryKey:["/api/categories"]}),s.invalidateQueries({queryKey:["/api/categories/products"]}),s.invalidateQueries({queryKey:["/api/categories/services"]}),s.invalidateQueries({queryKey:["/api/products/apps"]}),s.invalidateQueries({predicate:te=>te.queryKey[0]==="/api/products/apps"}),s.invalidateQueries({predicate:te=>te.queryKey[0]==="/api/apps/all-pages"}),s.invalidateQueries({queryKey:["/api/products/featured"]}),s.invalidateQueries({queryKey:["/api/products/services"]}),s.invalidateQueries({predicate:te=>te.queryKey[0]==="/api/products/page/top-picks"}),s.invalidateQueries({predicate:te=>te.queryKey[0]==="/api/services"}),["prime-picks","cue-picks","value-picks","click-picks","deals-hub","loot-box","global-picks"].forEach(te=>{s.invalidateQueries({queryKey:[`/api/products/page/${te}`]}),s.invalidateQueries({queryKey:[`/api/categories/page/${te}`]})}),x&&x.id)try{const te=p.isService||a==="services"?"service":"product";console.log(`<i className="fas fa-palette"></i> Triggering Canva automation for new ${te}:`,x.id);const je=localStorage.getItem("adminPassword")||"pickntrust2025",N=await fetch("/api/admin/canva/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:je,contentType:te,contentId:x.id})});if(N.ok){const D=await N.json();console.log('<i className="fas fa-check-circle"></i> Canva automation triggered successfully:',D),t({title:'<i className="fas fa-palette"></i> Automation Triggered!',description:"Product added and Canva automation started for social media posting."})}else console.log('<i className="fas fa-exclamation-triangle"></i> Canva automation failed, but product was added successfully'),t({title:'Product Added <i className="fas fa-check-circle"></i>',description:"Product added successfully! (Canva automation may be disabled)"})}catch(te){console.log('<i className="fas fa-exclamation-triangle"></i> Canva automation error:',te),t({title:'Product Added <i className="fas fa-check-circle"></i>',description:"Product added successfully! (Canva automation encountered an issue)"})}else t({title:"Success",description:"Product added successfully!"});k({name:"",description:"",price:"",originalPrice:"",currency:"INR",imageUrl:"",affiliateUrl:"",category:"",subcategory:"",gender:"",rating:"4.5",reviewCount:"100",discount:"",isFeatured:!0,isService:!1,isAIApp:!1,hasTimer:!1,timerDuration:"24",pricingType:"one-time",monthlyPrice:"",yearlyPrice:"",isFree:!1,customPricingDetails:"",displayPages:["home"],customFields:{}}),f([]),n(!1)},onError:x=>{t({title:"Error",description:x.message||"Failed to add product",variant:"destructive"})}}),$=he({mutationFn:async x=>{var ce;if(!T)throw new Error("No product ID for update");const L=x.price?x.price.toString().replace(/[^\d.]/g,""):"0",te=x.originalPrice?x.originalPrice.toString().replace(/[^\d.]/g,""):null,je=Object.keys(x.customFields||{}).length>0?JSON.stringify(x.customFields):null,N=x.monthlyPrice?x.monthlyPrice.toString().replace(/[^\d.]/g,""):"",D=x.yearlyPrice?x.yearlyPrice.toString().replace(/[^\d.]/g,""):"";let U=N,se=D;x.pricingType==="monthly"&&!N&&L&&L!=="0"&&(U=L),x.pricingType==="yearly"&&!D&&L&&L!=="0"&&(se=L);const J={password:"pickntrust2025",name:x.name.trim(),description:x.description.trim(),price:parseFloat(L)||0,originalPrice:te?parseFloat(te):null,currency:x.currency||"INR",imageUrl:x.imageUrl.trim(),affiliateUrl:x.affiliateUrl.trim(),category:x.category,subcategory:x.subcategory||null,gender:x.gender||null,rating:parseFloat(x.rating)||4.5,reviewCount:parseInt(x.reviewCount)||100,discount:x.discount?parseInt(x.discount):null,isFeatured:!!x.isFeatured,isService:!!x.isService,isAIApp:!!x.isAIApp,isNew:!1,hasTimer:!!x.hasTimer,timerDuration:x.hasTimer?parseInt(x.timerDuration):null,customFields:je,pricingType:x.pricingType||"one-time",monthlyPrice:U||null,yearlyPrice:se||null,isFree:!!x.isFree,priceDescription:((ce=x.customPricingDetails)==null?void 0:ce.trim())||null};console.log("Updating product data:",J);const z=await fetch(`/api/admin/products/${T}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(J)});if(!z.ok){const Ce=await z.text();console.error("Server response:",Ce);let Se;try{Se=JSON.parse(Ce)}catch{Se={message:Ce||"Failed to update product"}}throw new Error(Se.message||"Failed to update product")}return z.json()},onSuccess:async x=>{s.invalidateQueries({queryKey:["/api/products"]}),s.invalidateQueries({queryKey:["/api/categories"]}),s.invalidateQueries({queryKey:["/api/categories/products"]}),s.invalidateQueries({queryKey:["/api/categories/services"]}),s.invalidateQueries({queryKey:["/api/products/apps"]}),s.invalidateQueries({queryKey:["/api/products/featured"]}),s.invalidateQueries({queryKey:["/api/products/services"]}),["prime-picks","cue-picks","value-picks","click-picks","deals-hub","loot-box","global-picks"].forEach(te=>{s.invalidateQueries({queryKey:[`/api/products/page/${te}`]}),s.invalidateQueries({queryKey:[`/api/categories/page/${te}`]})}),t({title:"Success",description:"Product updated successfully!"}),k({name:"",description:"",price:"",originalPrice:"",currency:"INR",imageUrl:"",affiliateUrl:"",category:"",subcategory:"",gender:"",rating:"4.5",reviewCount:"100",discount:"",isFeatured:!0,isService:!1,isAIApp:!1,hasTimer:!1,timerDuration:"24",pricingType:"one-time",monthlyPrice:"",yearlyPrice:"",isFree:!1,customPricingDetails:"",displayPages:["home"],customFields:{}}),f([]),M(null),n(!1)},onError:x=>{t({title:"Error",description:x.message||"Failed to update product",variant:"destructive"})}}),W=he({mutationFn:async x=>{const L=await fetch("/api/products/extract",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:x})});if(!L.ok)throw new Error("Failed to extract product details");return L.json()},onSuccess:x=>{if(x.success&&x.data){const L=x.data;k({name:L.name||"",description:L.description||"",price:L.price||"",originalPrice:L.originalPrice||"",currency:L.currency||"INR",imageUrl:L.imageUrl||"",affiliateUrl:L.affiliateUrl||c,category:L.category||"Electronics & Gadgets",subcategory:"",gender:"",rating:L.rating||"4.5",reviewCount:L.reviewCount||"100",discount:L.discount||"",isFeatured:!0,isService:!1,isAIApp:!1,hasTimer:!1,timerDuration:"24",pricingType:"one-time",monthlyPrice:"",yearlyPrice:"",isFree:!1,customPricingDetails:"",displayPages:["home"],customFields:{}}),f([]),u(""),n(!0),t({title:"Product Extracted!",description:"Product details have been extracted. You can now edit and save."})}},onError:()=>{t({title:"Extraction Failed",description:"Could not extract product details from the URL. You can still add manually.",variant:"destructive"})}}),pe=he({mutationFn:async x=>{const te=await fetch(`/api/admin/products/${x}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:"pickntrust2025"})});if(!te.ok){const je=await te.json();throw new Error(je.message||"Failed to delete product")}return te.json()},onSuccess:()=>{t({title:"Success",description:"Product deleted from everywhere on the website!"}),s.invalidateQueries({queryKey:["/api/products"]}),s.invalidateQueries({queryKey:["/api/products/featured"]}),s.invalidateQueries({queryKey:["/api/products/services"]}),s.invalidateQueries({predicate:L=>L.queryKey[0]==="/api/products/category"}),["prime-picks","cue-picks","value-picks","click-picks","deals-hub","loot-box","global-picks"].forEach(L=>{s.invalidateQueries({queryKey:[`/api/products/page/${L}`]}),s.invalidateQueries({queryKey:[`/api/categories/page/${L}`]})}),s.invalidateQueries({queryKey:["/api/admin/stats"]}),s.removeQueries({predicate:L=>typeof L.queryKey[0]=="string"&&L.queryKey[0].includes("/api/products")})},onError:x=>{t({title:"Error",description:x.message||"Failed to delete product",variant:"destructive"})}}),De=x=>{if(x.preventDefault(),!p.name.trim()){t({title:"Validation Error",description:`${a==="services"?"Service":a==="aiapps"?"AI App":"Product"} name is required`,variant:"destructive"});return}if(a==="services"||a==="aiapps"){if(!p.isFree&&p.pricingType!=="free"){const L=p.pricingType==="one-time"||p.pricingType==="custom",te=p.pricingType==="monthly"||p.pricingType==="custom",je=p.pricingType==="yearly"||p.pricingType==="custom";if(L&&!p.price.trim()){t({title:"Validation Error",description:"Price is required for this pricing type",variant:"destructive"});return}if(te&&!p.monthlyPrice.trim()){t({title:"Validation Error",description:"Monthly price is required for this pricing type",variant:"destructive"});return}if(je&&!p.yearlyPrice.trim()){t({title:"Validation Error",description:"Yearly price is required for this pricing type",variant:"destructive"});return}}}else if(!p.price.trim()){t({title:"Validation Error",description:"Product price is required",variant:"destructive"});return}if(!p.category){t({title:"Validation Error",description:"Please select a category",variant:"destructive"});return}if(!p.description.trim()){t({title:"Validation Error",description:`${a==="services"?"Service":"Product"} description is required`,variant:"destructive"});return}if(!p.imageUrl.trim()){t({title:"Validation Error",description:`${a==="services"?"Service":"Product"} image URL is required`,variant:"destructive"});return}if(!p.affiliateUrl.trim()){t({title:"Validation Error",description:"Affiliate URL is required",variant:"destructive"});return}console.log("Form validation passed. Submitting:",a==="services"?"service":"product",p),T?$.mutate(p):A.mutate(p)},We=()=>{if(!c.trim()){t({title:"URL Required",description:"Please enter a product URL to extract details.",variant:"destructive"});return}m(!0),W.mutate(c),setTimeout(()=>m(!1),2e3)},Te=x=>{confirm("Are you sure you want to delete this product?")&&pe.mutate(x)},Me=(x,L)=>{const te=`${window.location.origin}`,je=`Check out this amazing deal: ${L.name} - ₹${L.price}${L.originalPrice?` (was ₹${L.originalPrice})`:""} at PickNTrust!`;let N="";switch(x){case"facebook":N="https://www.facebook.com/profile.php?id=61578969445670";break;case"telegram":N="https://t.me/+m-O-S6SSpVU2NWU1";break;case"twitter":N=`https://x.com/intent/tweet?text=${encodeURIComponent(je)}&url=${encodeURIComponent(te)}`;break;case"whatsapp":N="https://web.whatsapp.com/channel/0029Vb6osphADTODpfUO4h0C";break;case"instagram":const D=`<i className="fas fa-shopping-bag"></i> Amazing Deal Alert! ${L.name}

<i className="fas fa-dollar-sign"></i> Price: ₹${L.price}${L.originalPrice?` (was ₹${L.originalPrice})`:""}

<i className="fas fa-sparkles"></i> Shop now at PickNTrust

#PickNTrust #Deals #${L.category.replace(/\s+/g,"")} #Shopping`;navigator.clipboard.writeText(D+`

`+te),window.open("https://www.instagram.com/","_blank"),t({title:"Instagram Ready!",description:"Content copied to clipboard and Instagram opened. Paste to create your post!"}),o(se=>({...se,[L.id]:!1}));return;case"youtube":N="https://www.youtube.com/@PickNTrust";break;case"pinterest":N="https://www.pinterest.com/PickNTrust/";break;case"linkedin":N=`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(te)}`;break;case"reddit":N=`https://www.reddit.com/submit?url=${encodeURIComponent(te)}&title=${encodeURIComponent(L.name)}`;break}N&&window.open(N,"_blank","width=600,height=400"),o(D=>({...D,[L.id]:!1}))},Re=x=>{var L,te,je;k({name:x.name,description:x.description,price:x.price.toString(),originalPrice:((L=x.originalPrice)==null?void 0:L.toString())||"",currency:x.currency||"INR",imageUrl:x.imageUrl,affiliateUrl:x.affiliateUrl,category:x.category,subcategory:x.subcategory||"",gender:"",rating:x.rating.toString(),reviewCount:x.reviewCount.toString(),discount:((te=x.discount)==null?void 0:te.toString())||"",isFeatured:x.isFeatured,isService:!!x.isService,isAIApp:!!x.isAIApp,hasTimer:!!x.hasTimer,timerDuration:((je=x.timerDuration)==null?void 0:je.toString())||"24",pricingType:x.pricingType||"one-time",monthlyPrice:x.monthlyPrice||"",yearlyPrice:x.yearlyPrice||"",isFree:!!x.isFree,customPricingDetails:x.priceDescription||"",displayPages:x.displayPages||["home"],customFields:{}}),f([]),M(x.id),n(!0),t({title:"Edit Mode",description:"Product loaded for editing. Make your changes and save."})},E=()=>{M(null),n(!1),k({name:"",description:"",price:"",originalPrice:"",currency:"INR",imageUrl:"",affiliateUrl:"",category:"",subcategory:"",gender:"",rating:"4.5",reviewCount:"100",discount:"",isFeatured:!0,isService:!1,isAIApp:!1,hasTimer:!1,timerDuration:"24",pricingType:"one-time",monthlyPrice:"",yearlyPrice:"",isFree:!1,customPricingDetails:"",displayPages:["home"],customFields:{}}),f([]),t({title:"Edit Cancelled",description:"Product editing has been cancelled."})},ie=(x,L)=>{if(x&&L){const te=parseFloat(x.replace(/,/g,"")),je=parseFloat(L.replace(/,/g,""));if(je>te&&je>0)return Math.round((je-te)/je*100).toString()}return""},V=a==="services"?G.length>0?G.map(x=>x.name||x):["Credit Cards","Banking Services","Streaming Services","Software & Apps","Insurance","Investment","Mobile Apps","Subscription Services","Financial Services"]:a==="aiapps"?O.length>0?O.map(x=>x.name||x):["AI Apps","Productivity Apps","Developer Tools","Design Apps","Writing Tools","Image Generation","Video Editing","Audio Tools","Data Analysis","Automation Tools","Business Intelligence","Machine Learning","Natural Language Processing","Computer Vision"]:v.length>0?v.map(x=>x.name||x):["Electronics & Gadgets","Fashion & Clothing","Home & Kitchen","Health & Beauty","Sports & Fitness","Books & Education","Toys & Games","Automotive","Travel & Luggage","Pet Supplies","Office Supplies","Garden & Outdoor"];if(j)return e.jsx(ee,{children:e.jsxs(ge,{children:[e.jsx(fe,{className:"text-red-600",children:"Connection Error"}),e.jsxs(Ne,{className:"space-y-2",children:[e.jsx("p",{children:"Unable to connect to the server. This could be because:"}),e.jsxs("ul",{className:"list-disc list-inside text-sm space-y-1",children:[e.jsxs("li",{children:["The server is not running (try starting it with ",e.jsx("code",{className:"bg-gray-200 px-1 rounded",children:"npm run dev"}),")"]}),e.jsx("li",{children:"The server is running on a different port"}),e.jsx("li",{children:"There's a network connectivity issue"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(R,{onClick:()=>{window.location.reload()},variant:"outline",className:"mr-2",children:"Retry Connection"}),e.jsx(R,{onClick:()=>{n(!0),k({...p,isService:a==="services",isAIApp:a==="aiapps",category:""})},className:"bg-green-600 hover:bg-green-700",children:"Add Product Anyway"})]})]})]})});const oe=b.filter(x=>a==="services"?x.category==="Cards & Services"||x.isService===!0||V.includes(x.category):a==="aiapps"?x.category==="AI Apps"||x.isAIApp===!0:x.category!=="Cards & Services"&&x.category!=="AI Apps"&&x.isService!==!0&&x.isAIApp!==!0&&!G.map(L=>typeof L=="string"?L:L.name).includes(x.category));return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(ee,{className:"bg-gradient-to-r from-blue-900/20 to-purple-900/20 border-blue-700",children:[e.jsxs(ge,{children:[e.jsx(fe,{className:"flex items-center gap-3 text-2xl",children:e.jsxs("div",{className:"flex items-center gap-2",children:[a==="products"?e.jsx("i",{className:"fas fa-box text-blue-400"}):a==="services"?e.jsx("i",{className:"fas fa-credit-card text-purple-400"}):e.jsx("i",{className:"fas fa-robot text-green-400"}),"Product, Service & AI Apps Management"]})}),e.jsx(Ne,{className:"text-blue-200",children:"Manage your products, services, and AI apps with comprehensive admin controls"})]}),e.jsx(ae,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(R,{variant:a==="products"?"default":"outline",onClick:()=>{r("products"),n(!1),k({...p,isService:!1,isAIApp:!1,category:"",customFields:{}})},className:`flex items-center gap-2 ${a==="products"?"bg-blue-600 text-white":"border-blue-600 text-blue-300 hover:bg-blue-800"}`,children:[e.jsx("i",{className:"fas fa-box"}),"Products Management"]}),e.jsxs(R,{variant:a==="services"?"default":"outline",onClick:()=>{r("services"),n(!1),k({...p,isService:!0,isAIApp:!1,category:"",customFields:{}})},className:`flex items-center gap-2 ${a==="services"?"bg-purple-600 text-white":"border-purple-600 text-purple-300 hover:bg-purple-800"}`,children:[e.jsx("i",{className:"fas fa-credit-card"}),"Cards & Services"]}),e.jsxs(R,{variant:a==="aiapps"?"default":"outline",onClick:()=>{r("aiapps"),n(!1),k({...p,isService:!1,isAIApp:!0,category:"",customFields:{}})},className:`flex items-center gap-2 ${a==="aiapps"?"bg-green-600 text-white":"border-green-600 text-green-300 hover:bg-green-800"}`,children:[e.jsx("i",{className:"fas fa-robot"}),"AI Apps"]})]})})]}),e.jsxs(ee,{className:"border-2 border-dashed border-purple-400 bg-gradient-to-r from-purple-900/20 to-blue-900/20",children:[e.jsxs(ge,{children:[e.jsxs(fe,{className:"flex items-center gap-2 text-purple-300",children:[e.jsx(tr,{className:"w-5 h-5"}),"Smart ",a==="services"?"Service":a==="aiapps"?"AI App":"Product"," Extractor"]}),e.jsxs(Ne,{className:"text-blue-200",children:["Paste any ",a==="services"?"service":"product"," URL to automatically extract details (Amazon, eBay, Flipkart, etc.)"]})]}),e.jsxs(ae,{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx(X,{placeholder:`Paste ${a==="services"?"service":"product"} URL here (e.g., https://amazon.com/product/...)`,value:c,onChange:x=>u(x.target.value),className:"flex-1 bg-slate-800 border-slate-600 text-white placeholder-slate-400"}),e.jsx(R,{onClick:We,disabled:d||W.isPending,className:"bg-purple-600 hover:bg-purple-700 min-w-[140px]",children:d||W.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Ut,{className:"w-4 h-4 mr-2 animate-spin"}),"Extracting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(tr,{className:"w-4 h-4 mr-2"}),"Extract Details"]})})]}),e.jsxs("div",{className:"text-sm text-blue-200",children:[e.jsx("p",{className:"font-medium mb-2 text-purple-300",children:"Supported platforms:"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(we,{variant:"outline",className:"bg-slate-800 text-blue-300 border-slate-600",children:"Amazon"}),e.jsx(we,{variant:"outline",className:"bg-slate-800 text-blue-300 border-slate-600",children:"eBay"}),e.jsx(we,{variant:"outline",className:"bg-slate-800 text-blue-300 border-slate-600",children:"AliExpress"}),e.jsx(we,{variant:"outline",className:"bg-slate-800 text-blue-300 border-slate-600",children:"Flipkart"}),e.jsx(we,{variant:"outline",className:"bg-slate-800 text-blue-300 border-slate-600",children:"Shopify"}),e.jsx(we,{variant:"outline",className:"bg-slate-800 text-blue-300 border-slate-600",children:"And more..."})]})]})]})]}),e.jsxs(ee,{children:[e.jsxs(ge,{children:[e.jsxs(fe,{children:["Add New ",a==="services"?"Service":a==="aiapps"?"AI App":"Product"]}),e.jsxs(Ne,{className:"text-blue-200",children:["Add a new ",a==="services"?"service":a==="aiapps"?"AI app":"product"," manually or use the extractor above"]})]}),e.jsx(ae,{children:i?e.jsxs("form",{onSubmit:De,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:[a==="services"?"Service":a==="aiapps"?"AI App":"Product"," Name"]}),e.jsx("input",{type:"text",value:p.name,onChange:x=>k({...p,name:x.target.value}),placeholder:a==="services"?"e.g., HDFC Credit Card":a==="aiapps"?"e.g., ChatGPT Plus":"e.g., Wireless Headphones",className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white placeholder-slate-400",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:"Category"}),e.jsxs("select",{value:p.category,onChange:x=>k({...p,category:x.target.value,subcategory:""}),className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white",required:!0,children:[e.jsx("option",{value:"",children:"Select Category"}),V.map(x=>e.jsx("option",{value:x,children:x},x))]}),V.length===0&&e.jsx("p",{className:"text-xs text-yellow-400 mt-1",children:"Loading categories... If this persists, categories may need to be added in the Categories tab."})]}),y.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:"Subcategory (Optional)"}),e.jsxs("select",{value:p.subcategory,onChange:x=>k({...p,subcategory:x.target.value}),className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white",children:[e.jsx("option",{value:"",children:"Select Subcategory (Optional)"}),y.map(x=>e.jsx("option",{value:x.name,children:x.name},x.id))]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:"Gender (Optional)"}),e.jsxs("select",{value:p.gender||"",onChange:x=>k({...p,gender:x.target.value}),className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white",children:[e.jsx("option",{value:"",children:"Select Gender (Optional)"}),e.jsxs("option",{value:"men",children:[e.jsx("i",{className:"fas fa-male"})," Men"]}),e.jsxs("option",{value:"women",children:[e.jsx("i",{className:"fas fa-female"})," Women"]}),e.jsxs("option",{value:"boys",children:[e.jsx("i",{className:"fas fa-child"})," Boys"]}),e.jsxs("option",{value:"girls",children:[e.jsx("i",{className:"fas fa-child"})," Girls"]}),e.jsxs("option",{value:"common",children:[e.jsx("i",{className:"fas fa-globe"})," Common"]})]})]}),e.jsx("div",{})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:"Description"}),e.jsx("textarea",{value:p.description,onChange:x=>k({...p,description:x.target.value}),placeholder:"Product description...",className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white placeholder-slate-400",rows:3,required:!0})]}),a==="products"?e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-300",children:"Pricing Information"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:"Currency"}),e.jsx("select",{value:p.currency,onChange:x=>k({...p,currency:x.target.value}),className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white",children:Object.entries(Ot).map(([x,L])=>e.jsxs("option",{value:x,children:[L.symbol," ",x," - ",L.name]},x))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:["Price (",((xe=Ot[p.currency])==null?void 0:xe.symbol)||"₹",")"]}),e.jsx("input",{type:"text",value:p.price,onChange:x=>{const L=x.target.value.replace(/[^\d,]/g,""),te={...p,price:L},je=ie(L,p.originalPrice);je&&(te.discount=je),k(te)},placeholder:"2,999",className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white placeholder-slate-400",required:!0}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Use commas for thousands (e.g., 2,999)"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:["Original Price (",((qe=Ot[p.currency])==null?void 0:qe.symbol)||"₹",")"]}),e.jsx("input",{type:"text",value:p.originalPrice,onChange:x=>{const L=x.target.value.replace(/[^\d,]/g,""),te={...p,originalPrice:L},je=ie(p.price,L);je&&(te.discount=je),k(te)},placeholder:"3,999",className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white placeholder-slate-400"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Use commas for thousands (e.g., 3,999)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:"Discount (%)"}),e.jsx("input",{type:"number",value:p.discount,onChange:x=>k({...p,discount:x.target.value}),placeholder:"25",className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white placeholder-slate-400"})]})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:`text-lg font-semibold ${a==="services"?"text-purple-300":a==="aiapps"?"text-green-300":"text-blue-300"}`,children:"Pricing Information"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:"Pricing Type"}),e.jsxs("select",{value:p.pricingType||"one-time",onChange:x=>k({...p,pricingType:x.target.value}),className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white",children:[e.jsx("option",{value:"one-time",children:"One-time Payment"}),e.jsx("option",{value:"monthly",children:"Monthly Subscription"}),e.jsx("option",{value:"yearly",children:"Yearly Subscription"}),e.jsx("option",{value:"free",children:"Free"}),e.jsx("option",{value:"custom",children:"Custom Pricing"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:"Currency"}),e.jsx("select",{value:p.currency,onChange:x=>k({...p,currency:x.target.value}),className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white",children:Object.entries(Ot).map(([x,L])=>e.jsxs("option",{value:x,children:[L.symbol," ",x," - ",L.name]},x))})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"isFree",checked:p.isFree||p.pricingType==="free",onChange:x=>{const L=x.target.checked;k({...p,isFree:L,pricingType:L?"free":p.pricingType||"one-time"})},className:"mr-2"}),e.jsx("label",{htmlFor:"isFree",className:"text-sm font-medium text-blue-300",children:"Free Product/Service"})]}),!p.isFree&&p.pricingType!=="free"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(p.pricingType==="one-time"||p.pricingType==="custom")&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:["One-time Price (",((F=Ot[p.currency])==null?void 0:F.symbol)||"₹",")"]}),e.jsx("input",{type:"text",value:p.price,onChange:x=>{const L=x.target.value.replace(/[^\d,]/g,""),te={...p,price:L},je=ie(L,p.originalPrice);je&&(te.discount=je),k(te)},placeholder:"2,999",className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white placeholder-slate-400",required:p.pricingType==="one-time"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Use commas for thousands (e.g., 2,999)"})]}),(p.pricingType==="monthly"||p.pricingType==="custom")&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:["Monthly Price (",((q=Ot[p.currency])==null?void 0:q.symbol)||"₹",")"]}),e.jsx("input",{type:"text",value:p.monthlyPrice,onChange:x=>{const L=x.target.value.replace(/[^\d,]/g,"");k({...p,monthlyPrice:L})},placeholder:"299",className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white placeholder-slate-400",required:p.pricingType==="monthly"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Monthly subscription price"})]}),(p.pricingType==="yearly"||p.pricingType==="custom")&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:["Yearly Price (",((be=Ot[p.currency])==null?void 0:be.symbol)||"₹",")"]}),e.jsx("input",{type:"text",value:p.yearlyPrice,onChange:x=>{const L=x.target.value.replace(/[^\d,]/g,"");k({...p,yearlyPrice:L})},placeholder:"2,999",className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white placeholder-slate-400",required:p.pricingType==="yearly"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Yearly subscription price"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:"Price Description"}),e.jsx("input",{type:"text",value:p.customPricingDetails||"",onChange:x=>k({...p,customPricingDetails:x.target.value}),placeholder:"e.g., Starting from, Per user, One-time setup fee, Contact for pricing",className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white placeholder-slate-400"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Optional description to clarify pricing structure"})]}),p.pricingType==="custom"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:"Custom Pricing Details"}),e.jsx("textarea",{value:p.customPricingDetails||"",onChange:x=>k({...p,customPricingDetails:x.target.value}),placeholder:"Describe your custom pricing structure, tiers, or contact information...",className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white placeholder-slate-400",rows:3})]}),!p.isFree&&p.pricingType!=="free"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:["Original Price (",((Be=Ot[p.currency])==null?void 0:Be.symbol)||"₹",")"]}),e.jsx("input",{type:"text",value:p.originalPrice,onChange:x=>{const L=x.target.value.replace(/[^\d,]/g,""),te={...p,originalPrice:L},je=ie(p.price,L);je&&(te.discount=je),k(te)},placeholder:"3,999",className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white placeholder-slate-400"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Optional - for showing discounts"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:["Discount (%) ",e.jsx("span",{className:"text-xs text-green-400",children:"Auto-calculated"})]}),e.jsx("input",{type:"number",value:p.discount,onChange:x=>k({...p,discount:x.target.value}),placeholder:"25",className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white placeholder-slate-400",readOnly:!0}),e.jsx("p",{className:"text-xs text-green-400 mt-1",children:"Automatically calculated from prices"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:"Image URL"}),e.jsx("input",{type:"url",value:p.imageUrl,onChange:x=>k({...p,imageUrl:x.target.value}),placeholder:"https://example.com/image.jpg",className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white placeholder-slate-400",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:"Affiliate URL"}),e.jsx("input",{type:"url",value:p.affiliateUrl,onChange:x=>k({...p,affiliateUrl:x.target.value}),placeholder:"https://affiliate-link.com",className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white placeholder-slate-400",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:"Rating (1-5)"}),e.jsx("input",{type:"number",step:"0.1",min:"1",max:"5",value:p.rating,onChange:x=>k({...p,rating:x.target.value}),className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white placeholder-slate-400"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:"Review Count"}),e.jsx("input",{type:"number",value:p.reviewCount,onChange:x=>k({...p,reviewCount:x.target.value}),className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white placeholder-slate-400"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"featured",checked:p.isFeatured,onChange:x=>k({...p,isFeatured:x.target.checked}),className:"mr-2"}),e.jsx("label",{htmlFor:"featured",className:"text-sm font-medium text-blue-300",children:"Featured Product"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"isService",checked:p.isService,onChange:x=>k({...p,isService:x.target.checked}),className:"mr-2"}),e.jsxs("label",{htmlFor:"isService",className:"text-sm font-medium text-blue-300",children:[e.jsx("i",{className:"fas fa-credit-card"})," Service Product (Cards & Services)"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"isAIApp",checked:p.isAIApp,onChange:x=>k({...p,isAIApp:x.target.checked}),className:"mr-2"}),e.jsxs("label",{htmlFor:"isAIApp",className:"text-sm font-medium text-blue-300",children:[e.jsx("i",{className:"fas fa-robot"})," Apps & AI Apps"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"hasTimer",checked:p.hasTimer,onChange:x=>k({...p,hasTimer:x.target.checked}),className:"mr-2"}),e.jsx("label",{htmlFor:"hasTimer",className:"text-sm font-medium text-blue-300",children:"Add Countdown Timer"})]}),p.hasTimer&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:"Timer Duration (hours)"}),e.jsxs("select",{value:p.timerDuration,onChange:x=>k({...p,timerDuration:x.target.value}),className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white",children:[e.jsx("option",{value:"1",children:"1 hour"}),e.jsx("option",{value:"2",children:"2 hours"}),e.jsx("option",{value:"3",children:"3 hours"}),e.jsx("option",{value:"6",children:"6 hours"}),e.jsx("option",{value:"12",children:"12 hours"}),e.jsx("option",{value:"24",children:"24 hours (1 day)"}),e.jsx("option",{value:"48",children:"48 hours (2 days)"}),e.jsx("option",{value:"72",children:"72 hours (3 days)"}),e.jsx("option",{value:"168",children:"1 week"})]}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[e.jsx("i",{className:"fas fa-exclamation-triangle"})," Product will be automatically deleted when timer expires"]})]})]}),e.jsxs("div",{className:"bg-blue-900/30 border border-blue-600/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-blue-300 mb-3",children:[e.jsx("i",{className:"fas fa-globe"}),e.jsx("span",{className:"text-sm font-medium",children:"Where to Display This Product"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:H.map(x=>e.jsxs("label",{className:"flex items-start space-x-2 cursor-pointer p-2 rounded hover:bg-blue-800/30 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:p.displayPages.includes(x.id),onChange:L=>{L.target.checked?k({...p,displayPages:[...p.displayPages,x.id]}):k({...p,displayPages:p.displayPages.filter(te=>te!==x.id)})},className:"mt-1 rounded border-blue-400 text-blue-600 focus:ring-blue-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-blue-200",children:x.label}),e.jsx("div",{className:"text-xs text-blue-400",children:x.description})]})]},x.id))}),e.jsxs("p",{className:"text-xs text-blue-400 mt-3",children:[e.jsx("i",{className:"fas fa-lightbulb"})," Select multiple pages to show this product in different sections. Pages are dynamically loaded from Navigation Management and update in real-time."]})]}),a==="services"&&e.jsxs("div",{className:"bg-purple-900/30 border border-purple-600/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-purple-300 mb-2",children:[e.jsx("i",{className:"fas fa-info-circle"}),e.jsx("span",{className:"text-sm font-medium",children:"Service Product Information"})]}),e.jsx("p",{className:"text-purple-200 text-xs",children:"You're adding a service product for the Cards & Services section. Use the description field to include service-specific details like provider, features, eligibility, and terms."})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("label",{className:"text-lg font-semibold text-blue-300",children:"Custom Fields"}),e.jsxs(R,{type:"button",onClick:S,variant:"outline",size:"sm",className:"text-blue-600 border-blue-600 hover:bg-blue-50",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Add Custom Field"]})]}),_.length>0&&e.jsx("div",{className:"space-y-3",children:_.map((x,L)=>e.jsxs("div",{className:"flex gap-3 items-end",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:`custom-key-${L}`,className:"block text-sm font-medium mb-2 text-blue-300",children:"Field Name"}),e.jsx("input",{id:`custom-key-${L}`,value:x.key,onChange:te=>B(L,te.target.value,x.value),placeholder:"e.g., Brand, Color, Size",className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white placeholder-slate-400"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:`custom-value-${L}`,className:"block text-sm font-medium mb-2 text-blue-300",children:"Field Value"}),e.jsx("input",{id:`custom-value-${L}`,value:x.value,onChange:te=>B(L,x.key,te.target.value),placeholder:"e.g., Nike, Red, Large",className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white placeholder-slate-400"})]}),e.jsx(R,{type:"button",onClick:()=>w(L),variant:"outline",size:"sm",className:"text-red-600 border-red-600 hover:bg-red-50",children:e.jsx("i",{className:"fas fa-trash"})})]},L))}),_.length===0&&e.jsxs("div",{className:"text-center py-4 text-gray-500 text-sm",children:[e.jsx("i",{className:"fas fa-info-circle mr-2"}),'No custom fields added. Click "Add Custom Field" to add product-specific information.']})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{type:"submit",disabled:A.isPending||$.isPending,className:T?"bg-blue-600 hover:bg-blue-700":"bg-green-600 hover:bg-green-700",children:T?$.isPending?"Updating...":"Update Product":A.isPending?"Adding...":"Add Product"}),e.jsx(R,{type:"button",variant:"outline",onClick:T?E:()=>n(!1),children:"Cancel"})]})]}):e.jsx("div",{className:"flex gap-4",children:e.jsx(R,{onClick:()=>{n(!0),k({...p,isService:a==="services",category:""})},className:`${a==="services"?"bg-purple-600 hover:bg-purple-700":a==="aiapps"?"bg-green-600 hover:bg-green-700":"bg-blue-600 hover:bg-blue-700"}`,children:a==="services"?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-credit-card mr-2"}),"Add Service Manually"]}):a==="aiapps"?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-robot mr-2"}),"Add AI App Manually"]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-box mr-2"}),"Add Product Manually"]})})})})]}),e.jsxs(ee,{children:[e.jsx(ge,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(fe,{children:["Current ",a==="services"?"Services":a==="aiapps"?"AI Apps":"Products"," (",oe.length,")"]}),e.jsxs(Ne,{className:"text-blue-200",children:["Manage all your ",a==="services"?"services":a==="aiapps"?"AI apps":"products"," with full control"]})]}),oe.length>0&&e.jsxs(R,{variant:"destructive",size:"sm",onClick:()=>{if(window.confirm(`Are you sure you want to delete ALL ${a==="services"?"services":a==="aiapps"?"AI apps":"products"}? This action cannot be undone.`)){const x=oe.map(L=>fetch(`/api/admin/products/${L.id}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:"pickntrust2025"})}));Promise.all(x).then(()=>{t({title:"Success",description:`All ${a==="services"?"services":a==="aiapps"?"AI apps":"products"} deleted successfully`}),s.invalidateQueries({queryKey:["/api/products"]}),["prime-picks","cue-picks","value-picks","click-picks","deals-hub","loot-box","global-picks"].forEach(te=>{s.invalidateQueries({queryKey:[`/api/products/page/${te}`]}),s.invalidateQueries({queryKey:[`/api/categories/page/${te}`]})})}).catch(()=>{t({title:"Error",description:"Failed to delete some items",variant:"destructive"})})}},className:"bg-red-600 hover:bg-red-700",children:[e.jsx("i",{className:"fas fa-trash mr-2"}),"Delete All ",a==="services"?"Services":a==="aiapps"?"AI Apps":"Products"]})]})}),e.jsx(ae,{children:C?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsxs("p",{className:"mt-2 text-gray-600",children:["Loading ",a==="services"?"services":"products","..."]})]}):oe.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"mb-4",children:a==="services"?e.jsx("i",{className:"fas fa-credit-card text-6xl text-purple-400 mb-4"}):a==="aiapps"?e.jsx("i",{className:"fas fa-robot text-6xl text-green-400 mb-4"}):e.jsx("i",{className:"fas fa-box text-6xl text-blue-400 mb-4"})}),e.jsxs("p",{className:"text-gray-600 mb-2",children:["No ",a==="services"?"services":a==="aiapps"?"AI apps":"products"," found in this category."]}),e.jsxs("p",{className:"text-gray-500 text-sm",children:["Add your first ",a==="services"?"service":a==="aiapps"?"AI app":"product"," using the form above."]})]}):e.jsx("div",{className:"space-y-4",children:oe.map(x=>e.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-lg hover:bg-gray-750 transition-colors ${a==="services"?"bg-purple-900/20 border border-purple-600/30":a==="aiapps"?"bg-green-900/20 border border-green-600/30":"bg-gray-800"}`,children:[e.jsx("div",{className:"w-20 h-20 rounded-lg overflow-hidden flex-shrink-0",children:e.jsx("img",{src:x.imageUrl,alt:x.name,className:"w-full h-full object-cover",onError:L=>{L.target.src="https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=400"}})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-400 truncate",children:x.name}),a==="services"&&e.jsx("span",{className:"bg-purple-600 text-white px-2 py-1 rounded text-xs",children:"SERVICE"}),a==="aiapps"&&e.jsx("span",{className:"bg-green-600 text-white px-2 py-1 rounded text-xs",children:"AI APP"})]}),e.jsx("p",{className:"text-gray-300 text-sm mb-2 line-clamp-1",children:x.description}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsx("span",{className:"text-green-400 font-bold",children:h(x.price,x.currency)}),x.originalPrice&&e.jsx("span",{className:"text-gray-500 line-through",children:h(x.originalPrice,x.currency)}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-yellow-400",children:"⭐"}),e.jsx("span",{className:"text-white",children:x.rating}),e.jsxs("span",{className:"text-gray-400",children:["(",x.reviewCount,")"]})]}),e.jsx("span",{className:"text-gray-400",children:x.category}),x.isFeatured&&e.jsx("span",{className:"bg-purple-600 text-white px-2 py-1 rounded text-xs",children:"FEATURED"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>o(L=>({...L,[x.id]:!L[x.id]})),className:"p-2 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors",title:`Share ${a==="services"?"service":a==="aiapps"?"AI app":"product"}`,children:e.jsx("i",{className:"fas fa-share text-gray-300"})}),l[x.id]&&e.jsxs("div",{className:"absolute right-0 top-full mt-2 bg-white border rounded-lg shadow-lg p-2 z-50 min-w-[160px] max-h-[300px] overflow-y-auto",children:[e.jsxs("button",{onClick:()=>Me("facebook",x),className:"flex items-center gap-2 px-3 py-2 text-sm hover:bg-blue-50 rounded w-full text-left text-gray-700",children:[e.jsx("i",{className:"fab fa-facebook text-blue-600"}),"Facebook"]}),e.jsxs("button",{onClick:()=>Me("twitter",x),className:"flex items-center gap-2 px-3 py-2 text-sm hover:bg-gray-50 rounded w-full text-left text-gray-700",children:[e.jsx("div",{className:"w-4 h-4 bg-black rounded-sm flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-bold",children:"𝕏"})}),"X (Twitter)"]}),e.jsxs("button",{onClick:()=>Me("whatsapp",x),className:"flex items-center gap-2 px-3 py-2 text-sm hover:bg-green-50 rounded w-full text-left text-gray-700",children:[e.jsx("i",{className:"fab fa-whatsapp text-green-600"}),"WhatsApp"]}),e.jsxs("button",{onClick:()=>Me("instagram",x),className:"flex items-center gap-2 px-3 py-2 text-sm hover:bg-purple-50 rounded w-full text-left text-gray-700",children:[e.jsx("i",{className:"fab fa-instagram text-purple-600"}),"Instagram"]}),e.jsxs("button",{onClick:()=>Me("youtube",x),className:"flex items-center gap-2 px-3 py-2 text-sm hover:bg-red-50 rounded w-full text-left text-gray-700",children:[e.jsx("i",{className:"fab fa-youtube text-red-600"}),"YouTube"]}),e.jsxs("button",{onClick:()=>Me("telegram",x),className:"flex items-center gap-2 px-3 py-2 text-sm hover:bg-blue-50 rounded w-full text-left text-gray-700",children:[e.jsx("i",{className:"fab fa-telegram text-blue-500"}),"Telegram"]}),e.jsxs("button",{onClick:()=>Me("pinterest",x),className:"flex items-center gap-2 px-3 py-2 text-sm hover:bg-red-50 rounded w-full text-left text-gray-700",children:[e.jsx("i",{className:"fab fa-pinterest text-red-600"}),"Pinterest"]}),e.jsxs("button",{onClick:()=>Me("linkedin",x),className:"flex items-center gap-2 px-3 py-2 text-sm hover:bg-blue-50 rounded w-full text-left text-gray-700",children:[e.jsx("i",{className:"fab fa-linkedin text-blue-700"}),"LinkedIn"]}),e.jsxs("button",{onClick:()=>Me("reddit",x),className:"flex items-center gap-2 px-3 py-2 text-sm hover:bg-orange-50 rounded w-full text-left text-gray-700",children:[e.jsx("i",{className:"fab fa-reddit text-orange-600"}),"Reddit"]})]})]}),e.jsx("button",{onClick:()=>window.open(x.affiliateUrl,"_blank"),className:"p-2 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors",title:"Open affiliate link",children:e.jsx("i",{className:"fas fa-external-link-alt text-gray-300"})}),e.jsx("button",{onClick:()=>Re(x),className:"p-2 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors",title:`Edit ${a==="services"?"service":a==="aiapps"?"AI app":"product"}`,children:e.jsx("i",{className:"fas fa-edit text-gray-300"})}),e.jsx("button",{onClick:()=>Te(x.id),disabled:pe.isPending,className:"p-2 bg-red-600 hover:bg-red-700 rounded-lg transition-colors",title:`Delete ${a==="services"?"service":a==="aiapps"?"AI app":"product"}`,children:e.jsx("i",{className:"fas fa-trash text-white"})})]})]},x.id))})})]})]})}function kd(){const{toast:t}=ct(),s=ot(),[a,r]=P.useState(!1),[i,n]=P.useState(null),[l,o]=P.useState(new Set),[c,u]=P.useState({name:"",description:"",icon:"fas fa-tag",color:"#6366F1",parentId:null,isForProducts:!0,isForServices:!1,isForAIApps:!1,displayOrder:0}),{data:d=[],isLoading:m,error:h}=Ie({queryKey:["/api/categories"],queryFn:async()=>{const O=await fetch("/api/categories");if(!O.ok)throw new Error("Failed to fetch categories");return O.json()},retry:1}),p=he({mutationFn:async O=>{const A=await fetch("/api/admin/categories",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:"pickntrust2025",...O})});if(!A.ok){const $=await A.json();throw new Error($.message||"Failed to add category")}return A.json()},onSuccess:()=>{s.invalidateQueries({queryKey:["/api/categories"]}),u({name:"",description:"",icon:"fas fa-tag",color:"#6366F1",parentId:null,isForProducts:!0,isForServices:!1,isForAIApps:!1,displayOrder:0}),r(!1),t({title:"Success",description:"Category added successfully!"})},onError:O=>{t({title:"Error",description:O.message||"Failed to add category",variant:"destructive"})}}),k=he({mutationFn:async({categoryId:O,categoryData:y})=>{const $=await fetch(`/api/admin/categories/${O}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:"pickntrust2025",...y})});if(!$.ok){const W=await $.json();throw new Error(W.message||"Failed to update category")}return $.json()},onSuccess:()=>{s.invalidateQueries({queryKey:["/api/categories"]}),n(null),u({name:"",description:"",icon:"fas fa-tag",color:"#6366F1",parentId:null,isForProducts:!0,isForServices:!1,isForAIApps:!1,displayOrder:0}),r(!1),t({title:"Success",description:"Category updated successfully!"})},onError:O=>{t({title:"Error",description:O.message||"Failed to update category",variant:"destructive"})}}),_=he({mutationFn:async O=>{const A=await fetch(`/api/admin/categories/${O}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:"pickntrust2025"})});if(!A.ok){const $=await A.json();throw new Error($.message||"Failed to delete category")}return A.json()},onSuccess:()=>{s.invalidateQueries({queryKey:["/api/categories"]}),t({title:"Success",description:"Category deleted successfully!"})},onError:O=>{t({title:"Error",description:O.message||"Failed to delete category",variant:"destructive"})}}),f=he({mutationFn:async O=>{const A=await fetch("/api/admin/categories/reorder",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:"pickntrust2025",categoryOrders:O})});if(!A.ok){const $=await A.json();throw new Error($.message||"Failed to reorder categories")}return A.json()},onSuccess:()=>{s.invalidateQueries({queryKey:["/api/categories"]}),t({title:"Success",description:"Category order updated successfully!"})},onError:O=>{t({title:"Error",description:O.message||"Failed to reorder categories",variant:"destructive"})}}),T=O=>{if(O.preventDefault(),!c.name.trim()){t({title:"Error",description:"Category name is required",variant:"destructive"});return}p.mutate(c)},M=O=>{n(O),u({name:O.name,description:O.description,icon:O.icon,color:O.color,parentId:O.parentId??null,isForProducts:O.isForProducts??!0,isForServices:O.isForServices??!1,isForAIApps:O.isForAIApps??!1,displayOrder:O.displayOrder??0}),r(!0),window.scrollTo({top:0,behavior:"smooth"})},S=O=>{if(O.preventDefault(),!i||!c.name.trim()){t({title:"Error",description:"Category name is required",variant:"destructive"});return}k.mutate({categoryId:i.id,categoryData:c})},w=O=>{confirm("Are you sure you want to delete this category?")&&_.mutate(O)},B=()=>{n(null),u({name:"",description:"",icon:"fas fa-tag",color:"#6366F1",parentId:null,isForProducts:!0,isForServices:!1,isForAIApps:!1,displayOrder:0}),r(!1)},b=(O,y)=>{const A=d.findIndex(We=>We.id===O);if(A===-1)return;const $=y==="up"?A-1:A+1;if($<0||$>=d.length)return;const W=[...d],[pe]=W.splice(A,1);W.splice($,0,pe);const De=W.map((We,Te)=>({id:We.id,displayOrder:(Te+1)*10}));f.mutate(De)},C=O=>d.findIndex(A=>A.id===O)>0,j=O=>d.findIndex(A=>A.id===O)<d.length-1,K=(O,y)=>{const A=[{id:O,displayOrder:y}];f.mutate(A)},H=O=>{o(y=>{const A=new Set(y);return A.has(O)?A.delete(O):A.add(O),A})},Z=O=>l.has(O),v=["fas fa-laptop","fas fa-tshirt","fas fa-home","fas fa-heart","fas fa-dumbbell","fas fa-book","fas fa-gamepad","fas fa-car","fas fa-suitcase","fas fa-paw","fas fa-briefcase","fas fa-leaf","fas fa-baby","fas fa-music","fas fa-palette","fas fa-utensils","fas fa-gem","fas fa-camera","fas fa-tools","fas fa-trophy","fas fa-code","fas fa-calendar","fas fa-gift","fas fa-graduation-cap","fas fa-play","fas fa-cloud","fas fa-shield-alt","fas fa-server","fas fa-paint-brush","fas fa-tasks","fas fa-chart-line","fas fa-shopping-cart","fas fa-comments","fas fa-coins","fas fa-robot"],G=["#6366F1","#EC4899","#10B981","#F59E0B","#EF4444","#8B5CF6","#06B6D4","#84CC16","#F97316","#14B8A6","#6B7280","#22C55E","#F472B6","#A855F7","#FB7185","#FBBF24","#C084FC","#60A5FA","#34D399","#F87171","#818CF8","#FB923C","#A78BFA"];return h?e.jsxs(ee,{children:[e.jsxs(ge,{children:[e.jsx(fe,{className:"text-red-600",children:"Error Loading Categories"}),e.jsx(Ne,{className:"text-blue-200",children:"Failed to load categories. Using fallback data."})]}),e.jsx(ae,{children:e.jsx("p",{className:"text-gray-600",children:"The categories are being displayed from fallback data. Check your server connection and API endpoints."})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs(ee,{children:[e.jsxs(ge,{children:[e.jsx(fe,{children:i?`Edit Category: ${i.name}`:"Add New Category"}),e.jsx(Ne,{className:"text-blue-200",children:i?"Update the category details below":"Create a new category for organizing products"})]}),e.jsx(ae,{children:a?e.jsxs("form",{onSubmit:i?S:T,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:"Category Name"}),e.jsx("input",{type:"text",value:c.name,onChange:O=>u({...c,name:O.target.value}),placeholder:"e.g., Electronics & Gadgets",className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white placeholder-slate-400",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:"Description"}),e.jsx("input",{type:"text",value:c.description,onChange:O=>u({...c,description:O.target.value}),placeholder:"e.g., Latest tech & gadgets",className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white placeholder-slate-400",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:"Parent Category (Optional)"}),e.jsxs("select",{value:c.parentId||"",onChange:O=>u({...c,parentId:O.target.value?parseInt(O.target.value):null}),className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white",children:[e.jsx("option",{value:"",children:"None (Main Category)"}),d.filter(O=>!O.parentId&&O.id!==(i==null?void 0:i.id)).map(O=>e.jsx("option",{value:O.id,children:O.name},O.id))]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:'Select a parent category to create a subcategory, or leave as "None" for a main category.'})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:"Icon"}),e.jsx("select",{value:c.icon,onChange:O=>u({...c,icon:O.target.value}),className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white mb-2",children:v.map(O=>e.jsx("option",{value:O,children:O.replace("fas fa-","").replace("-"," ")},O))}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"block text-xs font-medium mb-1 text-blue-300",children:"Or enter custom icon class:"}),e.jsx("input",{type:"text",value:c.icon,onChange:O=>u({...c,icon:O.target.value}),placeholder:"e.g., fas fa-star, fab fa-apple, etc.",className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white placeholder-slate-400 text-sm"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:'Use FontAwesome classes like "fas fa-star" or "fab fa-apple"'})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:`${c.icon} text-xl mr-2 text-blue-400`}),e.jsx("span",{className:"text-sm text-blue-300",children:"Preview"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:"Color"}),e.jsx("div",{className:"grid grid-cols-6 gap-2 mb-2",children:G.map(O=>e.jsx("button",{type:"button",onClick:()=>u({...c,color:O}),className:`w-8 h-8 rounded-full border-2 ${c.color===O?"border-gray-800":"border-gray-300"}`,style:{backgroundColor:O}},O))}),e.jsx("input",{type:"color",value:c.color,onChange:O=>u({...c,color:O.target.value}),className:"w-full h-10 border border-slate-600 rounded-lg bg-slate-800"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:"Category Type"}),e.jsxs("div",{className:"flex gap-4 flex-wrap",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:c.isForProducts,onChange:O=>u({...c,isForProducts:O.target.checked}),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("span",{className:"text-blue-300",children:"For Products"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:c.isForServices,onChange:O=>u({...c,isForServices:O.target.checked}),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("span",{className:"text-blue-300",children:"For Services"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:c.isForAIApps,onChange:O=>u({...c,isForAIApps:O.target.checked}),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("span",{className:"text-blue-300",children:"For AI Apps"})]})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Select which type of content this category should be used for"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-blue-300",children:"Display Order"}),e.jsx("input",{type:"number",value:c.displayOrder,onChange:O=>u({...c,displayOrder:parseInt(O.target.value)||0}),placeholder:"e.g., 0, 1, 2, 10, 20...",className:"w-full px-3 py-2 border border-slate-600 rounded-lg focus:ring-2 focus:ring-purple-500 bg-slate-800 text-white placeholder-slate-400",min:"0"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Lower numbers appear first. Use 0, 1, 2... for sequential order, or 10, 20, 30... to allow easy insertion."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{type:"submit",disabled:i?k.isPending:p.isPending,className:"bg-green-600 hover:bg-green-700",children:i?k.isPending?"Updating...":"Update Category":p.isPending?"Adding...":"Add Category"}),e.jsx(R,{type:"button",variant:"outline",onClick:B,children:"Cancel"})]})]}):e.jsx(R,{onClick:()=>r(!0),className:"bg-blue-600 hover:bg-blue-700",children:"Add Category"})})]}),e.jsxs(ee,{children:[e.jsxs(ge,{children:[e.jsxs(fe,{children:["Manage Categories (",d.length,")"]}),e.jsx(Ne,{className:"text-blue-200",children:"View and manage all categories"})]}),e.jsx(ae,{children:m?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Loading categories..."})]}):d.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-600",children:"No categories found. Add your first category above."})}):e.jsx("div",{className:"space-y-4",children:(()=>{const O=d.filter(A=>!A.parentId),y=d.reduce((A,$)=>($.parentId&&(A[$.parentId]||(A[$.parentId]=[]),A[$.parentId].push($)),A),{});return O.map(A=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"border border-gray-300 dark:border-gray-600 rounded-lg p-4 hover:shadow-md transition-shadow bg-white dark:bg-gray-800",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[y[A.id]&&y[A.id].length>0&&e.jsx("button",{onClick:()=>H(A.id),className:"w-8 h-8 rounded-full flex items-center justify-center hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:Z(A.id)?"Expand subcategories":"Collapse subcategories",children:e.jsx("i",{className:`fas ${Z(A.id)?"fa-chevron-right":"fa-chevron-down"} text-gray-600 dark:text-gray-400 text-sm`})}),e.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center shadow-md",style:{backgroundColor:A.color},children:e.jsx("i",{className:`${A.icon} text-white text-lg`})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-bold text-gray-900 dark:text-white text-lg",children:A.name}),e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200",children:"Main Category"}),y[A.id]&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200",children:[y[A.id].length," subcategories"]}),y[A.id]&&y[A.id].length>0&&e.jsxs("button",{onClick:()=>H(A.id),className:"ml-2 text-sm text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:[Z(A.id)?"Show":"Hide"," subcategories"]})]}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 mt-1",children:A.description}),e.jsxs("div",{className:"flex gap-1 mt-2 flex-wrap",children:[A.isForProducts&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:"Products"}),A.isForServices&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:"Services"}),A.isForAIApps&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",children:"AI Apps"}),!A.isForProducts&&!A.isForServices&&!A.isForAIApps&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200",children:"General"})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 ml-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("label",{className:"text-xs text-gray-600 dark:text-gray-400 whitespace-nowrap",children:"Order:"}),e.jsx("input",{type:"number",value:A.displayOrder||0,onChange:$=>K(A.id,parseInt($.target.value)||0),className:"w-16 px-2 py-1 text-xs border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white",min:"0",step:"10",title:"Display order (lower numbers appear first)"})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(R,{variant:"outline",size:"sm",onClick:()=>b(A.id,"up"),disabled:!C(A.id)||f.isPending,className:"text-gray-600 hover:text-gray-700 hover:bg-gray-50 dark:hover:bg-gray-900/20 border-gray-300 dark:border-gray-600 px-2",title:"Move up",children:e.jsx("i",{className:"fas fa-arrow-up text-xs"})}),e.jsx(R,{variant:"outline",size:"sm",onClick:()=>b(A.id,"down"),disabled:!j(A.id)||f.isPending,className:"text-gray-600 hover:text-gray-700 hover:bg-gray-50 dark:hover:bg-gray-900/20 border-gray-300 dark:border-gray-600 px-2",title:"Move down",children:e.jsx("i",{className:"fas fa-arrow-down text-xs"})})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>M(A),className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50 dark:hover:bg-blue-900/20 border-blue-300 dark:border-blue-600",children:[e.jsx("i",{className:"fas fa-edit mr-1"}),"Edit"]}),e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>w(A.id),disabled:_.isPending,className:"text-white bg-red-600 hover:bg-red-700 border-red-600 hover:border-red-700",children:[e.jsx("i",{className:"fas fa-trash mr-1"}),"Delete"]})]})]})]})}),y[A.id]&&!Z(A.id)&&e.jsx("div",{className:"ml-8 space-y-2 animate-in slide-in-from-top-2 duration-200",children:y[A.id].map($=>e.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-3 hover:shadow-md transition-shadow bg-gray-50 dark:bg-gray-900/50",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center shadow-md",style:{backgroundColor:$.color},children:e.jsx("i",{className:`${$.icon} text-white text-sm`})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white text-base",children:$.name}),e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200",children:"Subcategory"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:$.description}),e.jsxs("div",{className:"flex gap-1 mt-2 flex-wrap",children:[$.isForProducts&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:"Products"}),$.isForServices&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:"Services"}),$.isForAIApps&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",children:"AI Apps"}),!$.isForProducts&&!$.isForServices&&!$.isForAIApps&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200",children:"General"})]})]})]}),e.jsxs("div",{className:"flex gap-1 ml-4",children:[e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>M($),className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50 dark:hover:bg-blue-900/20 border-blue-300 dark:border-blue-600",children:[e.jsx("i",{className:"fas fa-edit mr-1"}),"Edit"]}),e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>w($.id),disabled:_.isPending,className:"text-white bg-red-600 hover:bg-red-700 border-red-600 hover:border-red-700",children:[e.jsx("i",{className:"fas fa-trash mr-1"}),"Delete"]})]})]})},$.id))})]},A.id))})()})})]})]})}function Cd(){const{toast:t}=ct(),s=ot(),[a,r]=P.useState(!1),[i,n]=P.useState(!1),[l,o]=P.useState({title:"",excerpt:"",content:"",category:"",tags:"",imageUrl:"",videoUrl:"",readTime:"3 min read",slug:"",publishDate:new Date().toISOString().split("T")[0],hasTimer:!1,timerDuration:"24"}),c=async S=>{var b;const w=(b=S.target.files)==null?void 0:b[0];if(!w)return;if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp","image/bmp","image/svg+xml","image/tiff","image/tif","image/ico","image/avif","image/heic","image/heif"].includes(w.type)){t({title:"Invalid File Type",description:"Please upload a valid image file (JPEG, PNG, GIF, WebP, BMP, SVG, TIFF, ICO, AVIF, HEIC)",variant:"destructive"});return}if(w.size>10*1024*1024){t({title:"File Too Large",description:"Please upload an image smaller than 10MB. For larger images, use an image URL instead.",variant:"destructive"});return}n(!0);try{const C=await u(w),j=new FileReader;j.onload=K=>{var O;const H=(O=K.target)==null?void 0:O.result;o({...l,imageUrl:H}),n(!1);const Z=w.type.split("/")[1].toUpperCase(),v=(w.size/1024/1024).toFixed(2),G=(C.size/1024/1024).toFixed(2);t({title:"Success",description:`${Z} image uploaded successfully! Original: ${v}MB → Optimized: ${G}MB`})},j.onerror=()=>{n(!1),t({title:"Upload Error",description:"Failed to read the image file. Please try again.",variant:"destructive"})},j.readAsDataURL(C)}catch{n(!1),t({title:"Error",description:"Failed to upload image. Try using a smaller image or an image URL instead.",variant:"destructive"})}},u=S=>new Promise(w=>{const B=document.createElement("canvas"),b=B.getContext("2d"),C=document.createElement("img");C.onload=()=>{if(!b){w(S);return}const j=1200,K=800;let{width:H,height:Z}=C;H>j&&(Z=Z*j/H,H=j),Z>K&&(H=H*K/Z,Z=K),B.width=H,B.height=Z,b.drawImage(C,0,0,H,Z),B.toBlob(v=>{if(v){const G=new File([v],S.name,{type:S.type,lastModified:Date.now()});w(G)}else w(S)},S.type,.8)},C.onerror=()=>w(S),C.src=URL.createObjectURL(S)}),{data:d=[],isLoading:m,error:h}=Ie({queryKey:["/api/blog"],queryFn:async()=>{try{const S=await fetch("/api/blog");if(!S.ok)throw new Error(`HTTP ${S.status}: ${S.statusText}`);const w=S.headers.get("content-type");if(!w||!w.includes("application/json")){const B=await S.text();throw console.error("Non-JSON response:",B),new Error("Server returned non-JSON response. Check server logs.")}return S.json()}catch(S){throw console.error("Blog fetch error:",S),S}},retry:1}),p=he({mutationFn:async S=>{try{const w="pickntrust2025",B=S.tags.split(",").map(K=>K.trim()).filter(K=>K.length>0),b={password:w,...S,tags:JSON.stringify(B),publishedAt:new Date().toISOString(),slug:S.slug||S.title.toLowerCase().replace(/[^a-z0-9]+/g,"-"),hasTimer:S.hasTimer,timerDuration:S.hasTimer?S.timerDuration:null},C=await fetch("/api/admin/blog",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)});if(!C.ok){const K=C.headers.get("content-type");if(K&&K.includes("application/json")){const H=await C.json();throw new Error(H.message||`HTTP ${C.status}: ${C.statusText}`)}else{const H=await C.text();throw console.error("Non-JSON error response:",H),new Error(`Server error: ${C.status} ${C.statusText}. Check server logs.`)}}return await C.json()}catch(w){throw w}},onSuccess:async S=>{if(s.invalidateQueries({queryKey:["/api/blog"]}),S&&S.id)try{const w=localStorage.getItem("adminPassword")||"pickntrust2025",B=await fetch(`/api/admin/canva/settings?password=${w}`);if(B.ok){const b=await B.json();if(b.enableBlogPosts!==!1&&b.isEnabled){const j=await fetch("/api/admin/canva/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:w,contentType:"blog",contentId:S.id})});if(j.ok){const K=await j.json();t({title:'<i className="fas fa-palette"></i> Blog Post Published!',description:"Blog post added and Canva automation started for social media posting."})}else t({title:'Blog Post Published <i className="fas fa-check-circle"></i>',description:"Blog post added successfully! (Canva automation may be disabled)"})}else t({title:'Blog Post Published <i className="fas fa-check-circle"></i>',description:"Blog post added successfully! (Blog automation is disabled)"})}else t({title:'Blog Post Published <i className="fas fa-check-circle"></i>',description:"Blog post added successfully!"})}catch{t({title:'Blog Post Published <i className="fas fa-check-circle"></i>',description:"Blog post added successfully! (Canva automation encountered an issue)"})}else t({title:"Success",description:"Blog post added successfully!"});o({title:"",excerpt:"",content:"",category:"",tags:"",imageUrl:"",videoUrl:"",readTime:"3 min read",slug:"",publishDate:new Date().toISOString().split("T")[0],hasTimer:!1,timerDuration:"24"}),r(!1)},onError:S=>{t({title:"Error",description:S.message||"Failed to add blog post",variant:"destructive"})}}),k=he({mutationFn:async S=>{const B=await fetch(`/api/admin/blog/${S}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:"pickntrust2025"})});if(!B.ok){const b=await B.json();throw new Error(b.message||"Failed to delete blog post")}return B.json()},onSuccess:()=>{s.invalidateQueries({queryKey:["/api/blog"]}),t({title:"Success",description:"Blog post deleted successfully!"})},onError:S=>{t({title:"Error",description:S.message||"Failed to delete blog post",variant:"destructive"})}}),_=S=>{if(S.preventDefault(),!l.title.trim()||!l.content.trim()){t({title:"Error",description:"Title and content are required",variant:"destructive"});return}p.mutate(l)},f=S=>{confirm("Are you sure you want to delete this blog post?")&&k.mutate(S)},T=S=>{o({title:S.title,excerpt:S.excerpt,content:S.content,category:S.category,tags:typeof S.tags=="string"?JSON.parse(S.tags).join(", "):S.tags,imageUrl:S.imageUrl,videoUrl:S.videoUrl||"",readTime:S.readTime,slug:S.slug,publishDate:new Date(S.publishedAt).toISOString().split("T")[0],hasTimer:S.hasTimer||!1,timerDuration:S.timerDuration||"24"}),r(!0),t({title:"Edit Mode",description:"Blog post loaded for editing. Make your changes and save."})},M=["Technology","Lifestyle","Fashion","Health","Travel","Food","Business","Entertainment","Sports","Education","Deals","Reviews","Gadgets","Mobile","Computing"];return h?e.jsx(ee,{children:e.jsxs(ge,{children:[e.jsx(fe,{className:"text-red-600",children:"Error Loading Blog Posts"}),e.jsx(Ne,{className:"text-gray-700",children:"Failed to load blog posts. Check your server connection."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[e.jsx("i",{className:"fas fa-edit"})," Image Blog Management"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Create engaging blog posts with high-quality images up to 10MB"})]}),e.jsxs(R,{onClick:()=>r(!0),className:"bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(Xe,{className:"w-4 h-4 mr-2"}),"Add New Blog Post"]})]}),a&&e.jsxs(ee,{className:"bg-gray-900 text-white border-gray-700",children:[e.jsxs(ge,{children:[e.jsxs(fe,{className:"flex items-center gap-2 text-orange-400",children:[e.jsx(Xe,{className:"w-5 h-5"}),"Create New Blog Post"]}),e.jsx(Ne,{className:"text-gray-300",children:"Add engaging content with high-quality image support (up to 10MB) and optional auto-delete timer"})]}),e.jsx(ae,{className:"space-y-6",children:e.jsxs("form",{onSubmit:_,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(I,{className:"text-white font-medium",children:"Blog Title *"}),e.jsx(X,{value:l.title,onChange:S=>o({...l,title:S.target.value}),placeholder:"10 Best Budget Smartphones Under ₹20,000",className:"bg-gray-800 border-gray-600 text-white mt-2",required:!0})]}),e.jsxs("div",{children:[e.jsx(I,{className:"text-white font-medium",children:"Excerpt *"}),e.jsx(It,{value:l.excerpt,onChange:S=>o({...l,excerpt:S.target.value}),placeholder:"Short description for homepage",className:"bg-gray-800 border-gray-600 text-white mt-2",rows:4,required:!0})]}),e.jsxs("div",{children:[e.jsx(I,{className:"text-white font-medium",children:"Full Content *"}),e.jsx(It,{value:l.content,onChange:S=>o({...l,content:S.target.value}),placeholder:"Full blog post content with Markdown formatting",className:"bg-gray-800 border-gray-600 text-white mt-2 font-mono text-sm",rows:12,required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(I,{className:"text-white font-medium",children:"Category *"}),e.jsxs(Le,{value:l.category,onValueChange:S=>o({...l,category:S}),children:[e.jsx(Ue,{className:"bg-gray-800 border-gray-600 text-white mt-2",children:e.jsx(Ve,{placeholder:"Select category"})}),e.jsx($e,{className:"bg-gray-800 border-gray-600",children:M.map(S=>e.jsx(ue,{value:S,className:"text-white hover:bg-gray-700",children:S},S))})]})]}),e.jsxs("div",{children:[e.jsx(I,{className:"text-white font-medium",children:"Tags"}),e.jsx(X,{value:l.tags,onChange:S=>o({...l,tags:S.target.value}),placeholder:"deals, budget, tech, gadgets",className:"bg-gray-800 border-gray-600 text-white mt-2"})]})]}),e.jsxs("div",{children:[e.jsx(I,{className:"text-white font-medium",children:"Blog Image"}),e.jsx(X,{value:l.imageUrl,onChange:S=>o({...l,imageUrl:S.target.value}),placeholder:"Paste image URL here or upload from device",className:"bg-gray-800 border-gray-600 text-white mt-2"}),e.jsxs("div",{className:"mt-2",children:[e.jsx("input",{type:"file",accept:"image/jpeg,image/jpg,image/png,image/gif,image/webp,image/bmp,image/svg+xml,image/tiff,image/ico,image/avif,image/heic",className:"hidden",id:"image-upload",onChange:c}),e.jsxs(R,{type:"button",variant:"outline",size:"sm",onClick:()=>{var S;return(S=document.getElementById("image-upload"))==null?void 0:S.click()},className:"text-xs",disabled:i,children:[e.jsx(ta,{className:"w-3 h-3 mr-1"}),i?"Uploading...":"Upload from Device"]}),e.jsxs("p",{className:"text-xs text-blue-400 mt-1",children:[e.jsx("i",{className:"fas fa-folder"})," Supports: JPEG, PNG, GIF, WebP, BMP, SVG, TIFF, ICO, AVIF, HEIC (max 10MB)"]})]}),l.imageUrl&&e.jsxs("div",{className:"mt-3 border border-gray-600 rounded-lg overflow-hidden",children:[e.jsx("img",{src:l.imageUrl,alt:"Preview",className:"w-full h-32 object-cover",onError:S=>{S.target.src="https://images.unsplash.com/photo-1486312338219-ce68d2c6f44d?w=400"}}),e.jsx("div",{className:"p-2 bg-gray-800",children:e.jsxs("p",{className:"text-xs text-green-400",children:[e.jsx("i",{className:"fas fa-check-circle"})," High-quality image loaded successfully"]})})]})]}),e.jsxs("div",{children:[e.jsx(I,{className:"text-white font-medium",children:"Video URL (Optional)"}),e.jsx(X,{value:l.videoUrl,onChange:S=>o({...l,videoUrl:S.target.value}),placeholder:"https://www.youtube.com/watch?v=... or https://vimeo.com/...",className:"bg-gray-800 border-gray-600 text-white mt-2"}),e.jsxs("p",{className:"text-xs text-blue-400 mt-1",children:[e.jsx("i",{className:"fas fa-film"})," Supports: YouTube, Vimeo, TikTok, Instagram, Facebook, Twitter, Dailymotion, Twitch"]}),l.videoUrl&&e.jsx("div",{className:"mt-3 p-3 bg-gray-800 border border-gray-600 rounded-lg",children:e.jsxs("p",{className:"text-xs text-green-400",children:[e.jsx("i",{className:"fas fa-check-circle"})," Video URL added - will be displayed in blog post"]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"hasTimer",checked:l.hasTimer,onChange:S=>o({...l,hasTimer:S.target.checked}),className:"rounded border-gray-600 bg-gray-700"}),e.jsxs(I,{htmlFor:"hasTimer",className:"text-white text-sm",children:[e.jsx("i",{className:"fas fa-check-circle"})," Add Countdown Timer"]})]}),l.hasTimer&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{className:"text-white text-sm",children:"Timer Duration (hours)"}),e.jsxs(Le,{value:l.timerDuration,onValueChange:S=>o({...l,timerDuration:S}),children:[e.jsx(Ue,{className:"bg-gray-800 border-gray-600 text-white",children:e.jsx(Ve,{placeholder:"Select duration"})}),e.jsxs($e,{className:"bg-gray-800 border-gray-600",children:[e.jsx(ue,{value:"1",className:"text-white hover:bg-gray-700",children:"1 hour"}),e.jsx(ue,{value:"2",className:"text-white hover:bg-gray-700",children:"2 hours"}),e.jsx(ue,{value:"3",className:"text-white hover:bg-gray-700",children:"3 hours"}),e.jsx(ue,{value:"6",className:"text-white hover:bg-gray-700",children:"6 hours"}),e.jsx(ue,{value:"12",className:"text-white hover:bg-gray-700",children:"12 hours"}),e.jsx(ue,{value:"24",className:"text-white hover:bg-gray-700",children:"24 hours (1 day)"}),e.jsx(ue,{value:"48",className:"text-white hover:bg-gray-700",children:"48 hours (2 days)"}),e.jsx(ue,{value:"72",className:"text-white hover:bg-gray-700",children:"72 hours (3 days)"}),e.jsx(ue,{value:"168",className:"text-white hover:bg-gray-700",children:"168 hours (1 week)"})]})]}),e.jsxs("p",{className:"text-yellow-400 text-xs",children:[e.jsx("i",{className:"fas fa-exclamation-triangle"})," Blog post will be automatically deleted when timer expires"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(I,{className:"text-white font-medium",children:"Publish Date"}),e.jsx(X,{type:"date",value:l.publishDate,onChange:S=>o({...l,publishDate:S.target.value}),className:"bg-gray-800 border-gray-600 text-white mt-2"})]}),e.jsxs("div",{children:[e.jsx(I,{className:"text-white font-medium",children:"Read Time"}),e.jsx(X,{value:l.readTime,onChange:S=>o({...l,readTime:S.target.value}),placeholder:"3 min read",className:"bg-gray-800 border-gray-600 text-white mt-2"})]}),e.jsxs("div",{children:[e.jsx(I,{className:"text-white font-medium",children:"URL Slug"}),e.jsx(X,{value:l.slug,onChange:S=>o({...l,slug:S.target.value}),placeholder:"url-friendly-title",className:"bg-gray-800 border-gray-600 text-white mt-2"})]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4",children:[e.jsxs(R,{type:"button",variant:"outline",className:"text-blue-400 border-blue-400 hover:bg-blue-900",children:[e.jsx(pt,{className:"w-4 h-4 mr-2"}),"Live Preview"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(R,{type:"button",variant:"outline",onClick:()=>r(!1),className:"text-gray-400 border-gray-600 hover:bg-gray-800",children:"Cancel"}),e.jsx(R,{type:"submit",disabled:p.isPending,className:"bg-green-600 hover:bg-green-700 text-white",children:p.isPending?"Publishing...":"Publish Blog Post"})]})]})]})})]}),e.jsxs(ee,{children:[e.jsxs(ge,{children:[e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(Yt,{className:"w-5 h-5"}),"Current Blog Posts (",d.length,")"]}),e.jsx(Ne,{className:"text-blue-200",children:"Manage all your high-quality image-based blog posts (up to 10MB each)"})]}),e.jsx(ae,{children:m?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Loading blog posts..."})]}):d.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-600",children:"No blog posts found. Add your first post above."})}):e.jsx("div",{className:"space-y-4",children:d.map(S=>e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-800 rounded-lg hover:bg-gray-750 transition-colors",children:[e.jsx("div",{className:"w-20 h-20 rounded-lg overflow-hidden flex-shrink-0",children:e.jsx("img",{src:S.imageUrl||"https://images.unsplash.com/photo-1486312338219-ce68d2c6f44d?w=400",alt:S.title,className:"w-full h-full object-cover",onError:w=>{w.target.src="https://images.unsplash.com/photo-1486312338219-ce68d2c6f44d?w=400"}})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-400 mb-1 truncate",children:S.title}),e.jsx("p",{className:"text-gray-300 text-sm mb-2 line-clamp-1",children:S.excerpt}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsx("span",{className:"text-gray-400",children:S.category}),e.jsx("span",{className:"text-gray-400",children:S.readTime}),e.jsx("span",{className:"text-gray-400",children:new Date(S.publishedAt).toLocaleDateString()}),S.hasTimer&&e.jsxs("span",{className:"bg-yellow-600 text-white px-2 py-1 rounded text-xs flex items-center gap-1",children:[e.jsx(ia,{className:"w-3 h-3"}),S.timerDuration,"h timer"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>window.open(`/blog/${S.slug}`,"_blank"),className:"p-2 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors",title:"View blog post",children:e.jsx("i",{className:"fas fa-external-link-alt text-gray-300"})}),e.jsx("button",{onClick:()=>T(S),className:"p-2 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors",title:"Edit blog post",children:e.jsx("i",{className:"fas fa-edit text-gray-300"})}),e.jsx("button",{onClick:()=>f(S.id),disabled:k.isPending,className:"p-2 bg-red-600 hover:bg-red-700 rounded-lg transition-colors",title:"Delete blog post",children:e.jsx("i",{className:"fas fa-trash text-white"})})]})]},S.id))})})]})]})}function Sd(){const{toast:t}=ct(),s=ot(),[a,r]=P.useState("any-website"),[i,n]=P.useState(!1),[l,o]=P.useState(!1),[c,u]=P.useState("auto"),[d,m]=P.useState({title:"",description:"",category:"",tags:"",videoUrl:"",thumbnailUrl:"",platform:"any-website",duration:"",customFields:{},hasTimer:!1,timerDuration:"24",pages:[],showOnHomepage:!0,ctaText:"",ctaUrl:""}),h=[{id:"any-website",name:"Any Website",icon:e.jsx(Fs,{className:"w-5 h-5"}),color:"bg-gray-600",placeholder:"https://example.com/video.mp4"},{id:"youtube",name:"YouTube",icon:e.jsx(ii,{className:"w-5 h-5"}),color:"bg-red-600",placeholder:"https://www.youtube.com/watch?v=..."},{id:"instagram",name:"Instagram",icon:e.jsx(sr,{className:"w-5 h-5"}),color:"bg-purple-600",placeholder:"https://www.instagram.com/p/..."},{id:"tiktok",name:"TikTok",icon:e.jsx(ic,{className:"w-5 h-5"}),color:"bg-black",placeholder:"https://www.tiktok.com/@user/video/..."},{id:"vimeo",name:"Vimeo",icon:e.jsx(wt,{className:"w-5 h-5"}),color:"bg-blue-500",placeholder:"https://vimeo.com/..."},{id:"facebook",name:"Facebook",icon:e.jsx("div",{className:"w-5 h-5 bg-blue-600 rounded text-white text-xs flex items-center justify-center font-bold",children:"f"}),color:"bg-blue-600",placeholder:"https://www.facebook.com/watch/?v=..."},{id:"file-upload",name:"File Upload",icon:e.jsx(ta,{className:"w-5 h-5"}),color:"bg-green-600",placeholder:"Upload video file from device"}],p=(v,G)=>{if(!v||c!=="auto")return"";const O=v.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/);if(O)return`https://img.youtube.com/vi/${O[1]}/hqdefault.jpg`;const y=v.match(/vimeo\.com\/(\d+)/);return y?`https://vumbnail.com/${y[1]}.jpg`:v.includes("instagram.com")?"https://images.unsplash.com/photo-1611262588024-d12430b98920?w=400&h=300&fit=crop":v.includes("tiktok.com")?"https://images.unsplash.com/photo-1611605698335-8b1569810432?w=400&h=300&fit=crop":v.includes("facebook.com")?"https://images.unsplash.com/photo-1611162617474-5b21e879e113?w=400&h=300&fit=crop":""};P.useEffect(()=>{if(d.videoUrl&&c==="auto"){const v=p(d.videoUrl);v&&m(G=>({...G,thumbnailUrl:v}))}},[d.videoUrl,a,c]);const k=async v=>{var y;const G=(y=v.target.files)==null?void 0:y[0];if(!G)return;if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp","image/bmp","image/svg+xml","image/tiff","image/ico","image/avif"].includes(G.type)){t({title:"Invalid Image Format",description:"Please upload a valid image file",variant:"destructive"});return}if(G.size>10*1024*1024){t({title:"Image Too Large",description:"Please upload a thumbnail smaller than 10MB.",variant:"destructive"});return}o(!0);try{const A=new FileReader;A.onload=$=>{var pe;const W=(pe=$.target)==null?void 0:pe.result;m({...d,thumbnailUrl:W}),u("upload"),o(!1),t({title:"Success",description:"Thumbnail uploaded successfully!"})},A.readAsDataURL(G)}catch{o(!1),t({title:"Error",description:"Failed to upload thumbnail",variant:"destructive"})}},_=async v=>{var y;const G=(y=v.target.files)==null?void 0:y[0];if(!G)return;if(!["video/mp4","video/webm","video/ogg","video/mov","video/avi","video/wmv","video/flv","video/mkv","video/m4v","video/3gp"].includes(G.type)){t({title:"Invalid Video Format",description:"Please upload a valid video file",variant:"destructive"});return}if(G.size>100*1024*1024){t({title:"Video File Too Large",description:"Please upload a video smaller than 100MB.",variant:"destructive"});return}n(!0);try{const A=new FileReader;A.onload=$=>{var pe;const W=(pe=$.target)==null?void 0:pe.result;m({...d,videoUrl:W,platform:"file-upload"}),n(!1),t({title:"Success",description:"Video uploaded successfully!"})},A.readAsDataURL(G)}catch{n(!1),t({title:"Error",description:"Failed to upload video",variant:"destructive"})}},f=(v,G)=>{if(!v)return null;if(G==="file-upload"||v.startsWith("data:video/"))return e.jsxs("div",{className:"relative",children:[e.jsx("video",{src:v,className:"w-full h-32 object-cover rounded",controls:!1,muted:!0,preload:"metadata"}),e.jsx("div",{className:"absolute inset-0 bg-black/30 flex items-center justify-center rounded",children:e.jsx("div",{className:"bg-white/90 rounded-full p-3",children:e.jsx(wt,{className:"w-6 h-6 text-gray-800"})})})]});const O=v.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/);return O?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:`https://img.youtube.com/vi/${O[1]}/maxresdefault.jpg`,alt:"Video thumbnail",className:"w-full h-32 object-cover rounded"}),e.jsx("div",{className:"absolute inset-0 bg-black/30 flex items-center justify-center rounded",children:e.jsx("div",{className:"bg-red-600 rounded-full p-3",children:e.jsx(ii,{className:"w-6 h-6 text-white"})})})]}):e.jsx("div",{className:"w-full h-32 bg-gray-700 rounded flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(wt,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),e.jsxs("p",{className:"text-xs text-gray-400 capitalize",children:[G," Video"]})]})})},{data:T=[],isLoading:M}=Ie({queryKey:["/api/video-content"],queryFn:async()=>{try{const v=await fetch("/api/video-content");return v.ok?v.json():[]}catch(v){return console.log("Failed to fetch video content:",v),[]}},retry:!1,refetchOnWindowFocus:!1}),{data:S=[]}=Ie({queryKey:["/api/nav-tabs"],queryFn:async()=>{try{const v=await fetch("/api/nav-tabs");return v.ok?v.json():[]}catch(v){return console.log("Failed to fetch navigation tabs:",v),[]}},retry:!1,refetchOnWindowFocus:!1}),w=[{value:"home",label:'<i className="fas fa-home"></i> Home Page',description:"Main website homepage"},{value:"services",label:'<i className="fas fa-tools"></i> Services Page',description:"Services and subscriptions"},{value:"apps",label:'<i className="fas fa-mobile-alt"></i> Apps Page',description:"Apps and AI tools"},{value:"blog",label:'<i className="fas fa-edit"></i> Blog Page',description:"Blog articles and posts"},{value:"top-picks",label:'<i className="fas fa-fire"></i> Top Picks',description:"Today's top picks and featured deals"},...(Array.isArray(S)?S:[]).filter(v=>v&&v.is_active).sort((v,G)=>(v.display_order||0)-(G.display_order||0)).map(v=>({value:v.slug||"",label:`${v.name||"Unnamed"}`,description:v.description||"Navigation page"}))],B=he({mutationFn:async v=>{const G={password:"pickntrust2025",title:v.title,description:v.description||"",category:v.category||"",tags:v.tags?v.tags.split(",").map(y=>y.trim()):[],videoUrl:v.videoUrl,thumbnailUrl:v.thumbnailUrl||"",platform:v.platform,duration:v.duration||"",hasTimer:!!v.hasTimer,timerDuration:v.hasTimer?parseInt(v.timerDuration):null,pages:v.pages||[],showOnHomepage:!!v.showOnHomepage,ctaText:v.ctaText||"",ctaUrl:v.ctaUrl||""},O=await fetch("/api/admin/video-content",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(G)});if(!O.ok)throw new Error("Failed to add video");return O.json()},onSuccess:()=>{t({title:"Success!",description:"Video content added successfully."}),s.invalidateQueries({queryKey:["/api/video-content"]}),m({title:"",description:"",category:"",tags:"",videoUrl:"",thumbnailUrl:"",platform:"any-website",duration:"",customFields:{},hasTimer:!1,timerDuration:"24",pages:[],showOnHomepage:!0,ctaText:"",ctaUrl:""})},onError:v=>{t({title:"Error",description:v.message||"Failed to add video content",variant:"destructive"})}}),b=he({mutationFn:async v=>{const G=await fetch(`/api/admin/video-content/${v}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:"pickntrust2025"})});if(!G.ok)throw new Error("Failed to delete video");return G.json()},onSuccess:()=>{t({title:"Success",description:"Video content deleted successfully!"}),s.invalidateQueries({queryKey:["/api/video-content"]})},onError:v=>{t({title:"Error",description:v.message||"Failed to delete video content",variant:"destructive"})}}),C=he({mutationFn:async()=>{const v=await fetch("/api/admin/video-content/bulk-delete",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:"pickntrust2025"})});if(!v.ok)throw new Error("Failed to delete all videos");return v.json()},onSuccess:()=>{t({title:"Success",description:"All videos deleted successfully!"}),s.invalidateQueries({queryKey:["/api/video-content"]})},onError:v=>{t({title:"Error",description:v.message||"Failed to delete all videos",variant:"destructive"})}}),j=v=>{if(v.preventDefault(),!d.title.trim()||!d.videoUrl.trim()){t({title:"Error",description:"Title and video URL are required",variant:"destructive"});return}B.mutate({...d,platform:a})},K=v=>{confirm("Are you sure you want to delete this video content?")&&b.mutate(v)},H=()=>{if(!Array.isArray(T)||T.length===0){t({title:"No Videos",description:"There are no videos to delete.",variant:"destructive"});return}const v=`Are you sure you want to delete ALL ${T.length} videos? This action cannot be undone!`;confirm(v)&&C.mutate()},Z=h.find(v=>v.id===a);return e.jsxs("div",{className:"space-y-6",children:[e.jsx(ee,{className:"bg-gradient-to-r from-purple-900 to-blue-900 text-white border-purple-700",children:e.jsxs(ge,{children:[e.jsxs(fe,{className:"flex items-center gap-3 text-2xl",children:[e.jsx(wt,{className:"w-8 h-8 text-purple-300"}),e.jsx("i",{className:"fas fa-video"})," Video Content Manager"]}),e.jsx(Ne,{className:"text-purple-200",children:"Upload video files or add videos from any platform with auto-generated thumbnails"})]})}),e.jsx("div",{className:"flex flex-wrap gap-2",children:h.map(v=>e.jsxs(R,{variant:a===v.id?"default":"outline",onClick:()=>{r(v.id),m({...d,platform:v.id})},className:`flex items-center gap-2 ${a===v.id?`${v.color} text-white`:"border-gray-600 text-gray-300 hover:bg-gray-800"}`,children:[v.icon,v.name]},v.id))}),e.jsxs(ee,{className:"bg-gray-900 text-white border-gray-700",children:[e.jsxs(ge,{children:[e.jsxs(fe,{className:"flex items-center gap-2 text-orange-400",children:[Z==null?void 0:Z.icon,"Add ",Z==null?void 0:Z.name," Video"]}),e.jsx(Ne,{className:"text-gray-300",children:"Add videos with automatic thumbnail extraction and timer functionality"})]}),e.jsx(ae,{children:e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(I,{className:"text-white font-medium",children:"Video URL *"}),e.jsx(X,{value:d.videoUrl,onChange:v=>m({...d,videoUrl:v.target.value}),placeholder:Z==null?void 0:Z.placeholder,className:"bg-gray-800 border-gray-600 text-white mt-2",required:!0}),e.jsxs("div",{className:"mt-3 p-4 bg-gray-800 rounded-lg border border-gray-600",children:[e.jsx(I,{className:"text-white font-medium mb-2 block",children:"Or Upload Video File"}),e.jsx("input",{type:"file",accept:"video/*",className:"hidden",id:"video-upload",onChange:_}),e.jsxs(R,{type:"button",variant:"outline",size:"sm",onClick:()=>{var v;return(v=document.getElementById("video-upload"))==null?void 0:v.click()},className:"w-full",disabled:i,children:[e.jsx(ta,{className:"w-4 h-4 mr-2"}),i?"Uploading...":"Upload Video File"]}),e.jsxs("p",{className:"text-xs text-purple-400 mt-2",children:[e.jsx("i",{className:"fas fa-film"})," Supports: MP4, WebM, OGG, MOV, AVI, WMV, FLV, MKV, M4V, 3GP (max 100MB)"]})]})]}),e.jsx("div",{children:d.videoUrl&&e.jsxs("div",{children:[e.jsx(I,{className:"text-white font-medium",children:"Preview"}),e.jsx("div",{className:"mt-2 border border-gray-600 rounded-lg overflow-hidden",children:f(d.videoUrl,d.platform)})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(I,{className:"text-white font-medium",children:"Title *"}),e.jsx(X,{value:d.title,onChange:v=>m({...d,title:v.target.value}),placeholder:"Amazing Video Title",className:"bg-gray-800 border-gray-600 text-white mt-2",required:!0})]}),e.jsxs("div",{children:[e.jsx(I,{className:"text-white font-medium",children:"Category"}),e.jsxs(Le,{value:d.category,onValueChange:v=>m({...d,category:v}),children:[e.jsx(Ue,{className:"bg-gray-800 border-gray-600 text-white mt-2",children:e.jsx(Ve,{placeholder:"Select category"})}),e.jsx($e,{className:"bg-gray-800 border-gray-600",children:["Entertainment","Education","Technology","Music","Gaming","Sports","News","Comedy","Tutorial","Review"].map(v=>e.jsx(ue,{value:v,className:"text-white hover:bg-gray-700",children:v},v))})]})]})]}),e.jsxs("div",{children:[e.jsx(I,{className:"text-white font-medium",children:"Description"}),e.jsx(It,{value:d.description,onChange:v=>m({...d,description:v.target.value}),placeholder:"Detailed description of the video content...",className:"bg-gray-800 border-gray-600 text-white mt-2",rows:4})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(I,{className:"text-white font-medium",children:"Tags"}),e.jsx(X,{value:d.tags,onChange:v=>m({...d,tags:v.target.value}),placeholder:"viral, trending, funny",className:"bg-gray-800 border-gray-600 text-white mt-2"})]}),e.jsxs("div",{children:[e.jsx(I,{className:"text-white font-medium",children:"Duration"}),e.jsx(X,{value:d.duration,onChange:v=>m({...d,duration:v.target.value}),placeholder:"5:30",className:"bg-gray-800 border-gray-600 text-white mt-2"})]})]}),e.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg border border-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Yt,{className:"w-5 h-5 text-blue-400"}),e.jsx(I,{className:"text-white font-medium",children:"Video Thumbnail"})]}),e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",id:"auto-thumbnail",name:"thumbnailMode",checked:c==="auto",onChange:()=>{u("auto");const v=p(d.videoUrl);v&&m({...d,thumbnailUrl:v})},className:"rounded border-gray-600 bg-gray-700"}),e.jsx(I,{htmlFor:"auto-thumbnail",className:"text-white text-sm",children:"Auto-generate (Default)"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",id:"manual-thumbnail",name:"thumbnailMode",checked:c==="manual",onChange:()=>u("manual"),className:"rounded border-gray-600 bg-gray-700"}),e.jsx(I,{htmlFor:"manual-thumbnail",className:"text-white text-sm",children:"Manual URL"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",id:"upload-thumbnail",name:"thumbnailMode",checked:c==="upload",onChange:()=>u("upload"),className:"rounded border-gray-600 bg-gray-700"}),e.jsx(I,{htmlFor:"upload-thumbnail",className:"text-white text-sm",children:"Upload Image"})]})]}),c==="auto"&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{value:d.thumbnailUrl,placeholder:"Auto-generated from video URL",className:"bg-gray-700 border-gray-600 text-white",disabled:!0}),e.jsxs(R,{type:"button",variant:"outline",size:"sm",onClick:()=>{const v=p(d.videoUrl);v?(m({...d,thumbnailUrl:v}),t({title:"Success",description:"Thumbnail auto-generated!"})):t({title:"Info",description:"Auto-generation not available for this platform."})},disabled:!d.videoUrl,children:[e.jsx(Dt,{className:"w-3 h-3 mr-1"}),"Regenerate"]})]}),e.jsxs("p",{className:"text-xs text-blue-400",children:[e.jsx("i",{className:"fas fa-sparkles"})," Automatically extracts thumbnail from YouTube, Vimeo, and other supported platforms"]})]}),c==="manual"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(X,{value:d.thumbnailUrl,onChange:v=>m({...d,thumbnailUrl:v.target.value}),placeholder:"https://example.com/thumbnail.jpg",className:"bg-gray-700 border-gray-600 text-white"}),e.jsxs("p",{className:"text-xs text-green-400",children:[e.jsx("i",{className:"fas fa-link"})," Enter a direct URL to your custom thumbnail image"]})]}),c==="upload"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"file",accept:"image/*",className:"hidden",id:"thumbnail-upload",onChange:k}),e.jsxs(R,{type:"button",variant:"outline",size:"sm",onClick:()=>{var v;return(v=document.getElementById("thumbnail-upload"))==null?void 0:v.click()},className:"w-full",disabled:l,children:[e.jsx(ta,{className:"w-4 h-4 mr-2"}),l?"Uploading...":"Upload Thumbnail Image"]}),e.jsxs("p",{className:"text-xs text-purple-400",children:[e.jsx("i",{className:"fas fa-folder"})," Supports: JPEG, PNG, GIF, WebP, BMP, SVG, TIFF, ICO, AVIF (max 10MB)"]})]}),d.thumbnailUrl&&e.jsxs("div",{className:"mt-3 border border-gray-600 rounded-lg overflow-hidden",children:[e.jsx("img",{src:d.thumbnailUrl,alt:"Thumbnail preview",className:"w-full h-32 object-cover",onError:v=>{v.target.src="https://images.unsplash.com/photo-1486312338219-ce68d2c6f44d?w=400"}}),e.jsx("div",{className:"p-2 bg-gray-800",children:e.jsxs("p",{className:"text-xs text-green-400",children:[e.jsx("i",{className:"fas fa-check-circle"})," Thumbnail loaded successfully"]})})]})]}),e.jsxs("div",{className:"p-4 bg-gray-800 rounded-lg border border-gray-600",children:[e.jsx("h3",{className:"text-white font-medium mb-4",children:"📍 Video Display Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"showOnHomepage",checked:d.showOnHomepage,onChange:v=>m({...d,showOnHomepage:v.target.checked}),className:"rounded"}),e.jsxs(I,{htmlFor:"showOnHomepage",className:"text-white",children:[e.jsx("i",{className:"fas fa-home"})," Show on Homepage"]})]}),e.jsxs("div",{children:[e.jsxs(I,{className:"text-white font-medium mb-3 block",children:[e.jsx("i",{className:"fas fa-file-alt"})," Additional Pages (Select Multiple)"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 max-h-40 overflow-y-auto",children:w.map(v=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:`page-${v.value}`,checked:d.pages.includes(v.value),onChange:G=>{G.target.checked?m({...d,pages:[...d.pages,v.value]}):m({...d,pages:d.pages.filter(O=>O!==v.value)})},className:"rounded"}),e.jsx(I,{htmlFor:`page-${v.value}`,className:"text-white text-sm",children:v.label})]},v.value))}),e.jsxs("p",{className:"text-xs text-blue-400 mt-2",children:[e.jsx("i",{className:"fas fa-sparkles"})," Video will appear on homepage (if checked) and all selected pages"]})]})]})]}),e.jsxs("div",{className:"p-4 bg-gray-800 rounded-lg border border-gray-600",children:[e.jsxs("h3",{className:"text-white font-medium mb-4",children:[e.jsx("i",{className:"fas fa-link"})," Call-to-Action Button (Optional)"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(I,{className:"text-white font-medium",children:"Button Text"}),e.jsx(X,{value:d.ctaText,onChange:v=>m({...d,ctaText:v.target.value}),placeholder:"e.g., Learn More, Buy Now, Visit Site",className:"bg-gray-700 border-gray-600 text-white mt-2"})]}),e.jsxs("div",{children:[e.jsx(I,{className:"text-white font-medium",children:"Button URL"}),e.jsx(X,{value:d.ctaUrl,onChange:v=>m({...d,ctaUrl:v.target.value}),placeholder:"https://example.com",className:"bg-gray-700 border-gray-600 text-white mt-2",type:"url"})]})]}),d.ctaText&&d.ctaUrl&&e.jsxs("div",{className:"mt-3 p-3 bg-green-900/30 border border-green-600/50 rounded-lg",children:[e.jsx("div",{className:"flex items-center gap-2 text-green-400",children:e.jsxs("span",{className:"text-sm font-medium",children:[e.jsx("i",{className:"fas fa-check-circle"})," CTA Button Preview"]})}),e.jsx("button",{className:"mt-2 px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium",children:d.ctaText}),e.jsxs("p",{className:"text-green-300 text-xs mt-1",children:["Will link to: ",d.ctaUrl]})]})]}),e.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg border border-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(ia,{className:"w-5 h-5 text-yellow-400"}),e.jsx(I,{className:"text-white font-medium",children:"Auto-Delete Timer"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"hasTimer",checked:d.hasTimer,onChange:v=>m({...d,hasTimer:v.target.checked}),className:"rounded border-gray-600 bg-gray-700"}),e.jsx(I,{htmlFor:"hasTimer",className:"text-white text-sm",children:"Enable auto-delete after specified hours"})]}),d.hasTimer&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(Le,{value:d.timerDuration,onValueChange:v=>m({...d,timerDuration:v}),children:[e.jsx(Ue,{className:"bg-gray-700 border-gray-600 text-white w-40",children:e.jsx(Ve,{})}),e.jsxs($e,{className:"bg-gray-800 border-gray-600",children:[e.jsx(ue,{value:"1",className:"text-white hover:bg-gray-700",children:"1 hour"}),e.jsx(ue,{value:"6",className:"text-white hover:bg-gray-700",children:"6 hours"}),e.jsx(ue,{value:"12",className:"text-white hover:bg-gray-700",children:"12 hours"}),e.jsx(ue,{value:"24",className:"text-white hover:bg-gray-700",children:"24 hours (1 day)"}),e.jsx(ue,{value:"48",className:"text-white hover:bg-gray-700",children:"48 hours (2 days)"}),e.jsx(ue,{value:"72",className:"text-white hover:bg-gray-700",children:"72 hours (3 days)"}),e.jsx(ue,{value:"168",className:"text-white hover:bg-gray-700",children:"168 hours (1 week)"})]})]})})]}),d.hasTimer&&e.jsxs("div",{className:"mt-3 p-3 bg-yellow-900/30 border border-yellow-600/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-yellow-400",children:[e.jsx("i",{className:"fas fa-exclamation-triangle"}),e.jsx("span",{className:"text-sm font-medium",children:"Auto-Delete Warning"})]}),e.jsxs("p",{className:"text-yellow-300 text-xs mt-1",children:["This video will be automatically deleted after ",d.timerDuration," hours. The countdown is hidden from frontend users."]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(R,{type:"submit",disabled:B.isPending,className:"bg-green-600 hover:bg-green-700 text-white px-8",children:B.isPending?"Adding Video...":"Add Video Content"})})]})})]}),e.jsxs(ee,{children:[e.jsx(ge,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(fe,{children:["Video Library (",Array.isArray(T)?T.length:0,")"]}),e.jsx(Ne,{children:"Manage all your video content with editing, timer status, and organization tools"})]}),Array.isArray(T)&&T.length>0&&e.jsxs(R,{variant:"destructive",size:"sm",onClick:H,disabled:C.isPending,className:"bg-red-600 hover:bg-red-700",children:[e.jsx(Wt,{className:"w-4 h-4 mr-2"}),C.isPending?"Deleting...":"Delete All"]})]})}),e.jsx(ae,{children:M?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Loading video content..."})]}):!Array.isArray(T)||T.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(wt,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No video content found. Add your first video above."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:T.map(v=>{var G,O;return e.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"relative",children:[f(v.videoUrl,v.platform),e.jsx(we,{className:`absolute top-2 right-2 ${((G=h.find(y=>y.id===v.platform))==null?void 0:G.color)||"bg-gray-600"}`,children:((O=h.find(y=>y.id===v.platform))==null?void 0:O.name)||v.platform}),v.hasTimer&&e.jsxs(we,{className:"absolute top-2 left-2 bg-yellow-600 text-white",children:[e.jsx(ia,{className:"w-3 h-3 mr-1"}),v.timerDuration,"h"]})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-semibold text-white mb-2 line-clamp-2",children:v.title}),e.jsx("p",{className:"text-gray-400 text-sm mb-3 line-clamp-2",children:v.description}),e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(we,{variant:"secondary",className:"text-xs",children:v.category}),v.duration&&e.jsx("span",{className:"text-xs text-gray-400",children:v.duration})]})}),e.jsxs("div",{className:"flex flex-wrap gap-1 mb-3",children:[v.showOnHomepage&&e.jsxs(we,{className:"bg-blue-600 text-white text-xs",children:[e.jsx("i",{className:"fas fa-home"})," Homepage"]}),v.pages&&v.pages.length>0&&e.jsxs(we,{className:"bg-green-600 text-white text-xs",children:["📍 ",v.pages.length," Page",v.pages.length>1?"s":""]}),v.ctaText&&v.ctaUrl&&e.jsxs(we,{className:"bg-purple-600 text-white text-xs",children:[e.jsx("i",{className:"fas fa-link"})," CTA"]}),!v.showOnHomepage&&(!v.pages||v.pages.length===0)&&e.jsx(we,{className:"bg-gray-600 text-white text-xs",children:"🚫 Not displayed"})]}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(R,{variant:"ghost",size:"sm",className:"text-gray-400 hover:text-white",onClick:()=>window.open(v.videoUrl,"_blank"),title:"View video",children:e.jsx(pt,{className:"w-4 h-4"})}),e.jsx(R,{variant:"ghost",size:"sm",className:"text-gray-400 hover:text-white",onClick:()=>{m({title:v.title,description:v.description||"",category:v.category||"",tags:Array.isArray(v.tags)?v.tags.join(", "):v.tags||"",videoUrl:v.videoUrl,thumbnailUrl:v.thumbnailUrl||"",platform:v.platform,duration:v.duration||"",customFields:v.customFields||{},hasTimer:v.hasTimer||!1,timerDuration:v.timerDuration?v.timerDuration.toString():"24",pages:v.pages||[],showOnHomepage:v.showOnHomepage??!0,ctaText:v.ctaText||"",ctaUrl:v.ctaUrl||""}),r(v.platform),v.thumbnailUrl&&(v.thumbnailUrl.includes("youtube.com")||v.thumbnailUrl.includes("vimeo.com")?u("auto"):v.thumbnailUrl.startsWith("data:image/")?u("upload"):u("manual")),t({title:"Edit Mode",description:"Video content loaded for editing. Make your changes and save."}),window.scrollTo({top:0,behavior:"smooth"})},title:"Edit video",children:e.jsx(Tt,{className:"w-4 h-4"})}),e.jsx(R,{variant:"ghost",size:"sm",className:"text-red-400 hover:text-red-300",onClick:()=>K(v.id),disabled:b.isPending,title:"Delete video",children:e.jsx(Wt,{className:"w-4 h-4"})})]})})]})]},v.id)})})})]})]})}function Xs({value:t,onChange:s,label:a,className:r=""}){const[i,n]=P.useState(!1),[l,o]=P.useState(!1),[c,u]=P.useState("RGB"),[d,m]=P.useState([]),h=[["#000000","#7F7F7F","#880015","#ED1C24","#FF7F27","#FFF200","#22B14C","#00A2E8","#3F48CC","#A349A4"],["#FFFFFF","#C3C3C3","#B97A57","#FFAEC9","#FFC90E","#EFE4B0","#B5E61D","#99D9EA","#7092BE","#C8BFE7"],["#F7F7F7","#A0A0A0","#C49C94","#F7977A","#F9AD81","#FDC68A","#C4DF9B","#A2D2FF","#738BD7","#D8A1D6"],["#E6E6E6","#7F7F7F","#A67C52","#F15A24","#F26522","#F7931E","#8DC73F","#39B54A","#00AEEF","#652C91"],["#CCCCCC","#595959","#8C6239","#C1272D","#E4002B","#F15A29","#8CC63F","#00A651","#0071BC","#92278F"],["#B3B3B3","#3F3F3F","#603813","#9E0B0F","#DA020E","#DD4124","#79B82F","#00A99D","#0054A6","#6B1E99"]],p=["#E74C3C","#F39C12","#F1C40F","#2ECC71","#1ABC9C","#3498DB","#9B59B6","#E67E22","#95A5A6","#34495E"],k=[["#FFB3BA","#FF6B6B","#8B4513","#CD5C5C","#DC143C","#AFEEEE","#40E0D0","#4169E1","#6495ED","#98FB98"],["#FFEB9C","#FFD700","#DEB887","#D2691E","#FF4500","#DA70D6","#9370DB","#4B0082","#483D8B","#C0C0C0"],["#90EE90","#32CD32","#228B22","#006400","#FFB6C1","#FF1493","#DC143C","#B22222","#8A2BE2","#9400D3"],["#98FB98","#00FA9A","#00CED1","#9932CC","#FF6347","#FF8C00","#FFD700","#808080","#696969","#2F4F4F"]],_=b=>{const C=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(b);return C?{r:parseInt(C[1],16),g:parseInt(C[2],16),b:parseInt(C[3],16)}:{r:0,g:0,b:0}},f=(b,C,j)=>"#"+((1<<24)+(b<<16)+(C<<8)+j).toString(16).slice(1),T=_(t),[M,S]=P.useState(T),w=(b,C)=>{const j={...M,[b]:C};S(j),s(f(j.r,j.g,j.b))},B=b=>{!d.includes(b)&&d.length<24&&m([...d,b])};return e.jsxs("div",{className:`relative ${r}`,children:[a&&e.jsx(I,{className:"text-white font-medium mb-2 block",children:a}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 rounded border-2 border-gray-600 cursor-pointer",style:{backgroundColor:t},onClick:()=>n(!i)}),e.jsx("button",{type:"button",className:"text-gray-400 text-sm",onClick:()=>n(!i),children:e.jsx(nc,{className:"w-4 h-4"})})]}),e.jsx(X,{value:t,onChange:b=>s(b.target.value),className:"bg-gray-900 border-gray-600 text-white flex-1",placeholder:"#3b82f6"})]}),i&&e.jsx(ee,{className:"absolute top-full left-0 z-50 w-80 mt-2 bg-gray-800 border-gray-600",children:e.jsxs(ae,{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",className:"rounded"}),e.jsx("span",{className:"text-white text-sm",children:"Automatic"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-white text-sm font-medium mb-2",children:"Theme Colors"}),e.jsx("div",{className:"space-y-1",children:h.map((b,C)=>e.jsx("div",{className:"flex gap-1",children:b.map((j,K)=>e.jsx("button",{className:"w-6 h-6 rounded border border-gray-600 hover:scale-110 transition-transform",style:{backgroundColor:j},onClick:()=>{s(j),n(!1)}},K))},C))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-white text-sm font-medium mb-2",children:"Standard Colors"}),e.jsx("div",{className:"flex gap-1",children:p.map((b,C)=>e.jsx("button",{className:"w-6 h-6 rounded border border-gray-600 hover:scale-110 transition-transform",style:{backgroundColor:b},onClick:()=>{s(b),n(!1)}},C))})]}),e.jsxs(R,{variant:"ghost",className:"w-full text-blue-400 hover:bg-gray-700 justify-start",onClick:()=>o(!0),children:[e.jsx(ar,{className:"w-4 h-4 mr-2"}),"More Colors..."]})]})}),l&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs(ee,{className:"w-[600px] max-h-[90vh] overflow-y-auto bg-gray-800 border-gray-600",children:[e.jsx(ge,{children:e.jsx(fe,{className:"text-white",children:"Edit colours"})}),e.jsxs(ae,{className:"space-y-6",children:[e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"w-full h-48 rounded-lg relative cursor-crosshair",style:{background:"linear-gradient(to right, #ff0000, #ffff00, #00ff00, #00ffff, #0000ff, #ff00ff, #ff0000)"},children:e.jsx("div",{className:"absolute w-4 h-4 border-2 border-white rounded-full transform -translate-x-2 -translate-y-2",style:{left:"10%",top:"20%"}})}),e.jsxs("div",{className:"mt-4 flex items-center gap-3",children:[e.jsx("div",{className:"w-full h-6 rounded",style:{background:"linear-gradient(to right, #000000, #ffffff)"}}),e.jsx("div",{className:"w-4 h-6 bg-white border border-gray-400 rounded"})]})]}),e.jsxs("div",{className:"w-48 space-y-4",children:[e.jsx(X,{value:t,onChange:b=>s(b.target.value),className:"bg-gray-700 border-gray-600 text-white",placeholder:"#3b82f6"}),e.jsxs(Le,{value:c,onValueChange:u,children:[e.jsx(Ue,{className:"bg-gray-700 border-gray-600 text-white",children:e.jsx(Ve,{})}),e.jsxs($e,{className:"bg-gray-700 border-gray-600",children:[e.jsx(ue,{value:"RGB",className:"text-white",children:"RGB"}),e.jsx(ue,{value:"HSL",className:"text-white",children:"HSL"}),e.jsx(ue,{value:"HSV",className:"text-white",children:"HSV"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-white text-sm mb-1",children:[e.jsx("span",{children:"Red"}),e.jsx("span",{children:M.r})]}),e.jsx("input",{type:"range",min:"0",max:"255",value:M.r,onChange:b=>w("r",parseInt(b.target.value)),className:"w-full h-2 bg-gray-600 rounded-lg appearance-none slider-thumb"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-white text-sm mb-1",children:[e.jsx("span",{children:"Green"}),e.jsx("span",{children:M.g})]}),e.jsx("input",{type:"range",min:"0",max:"255",value:M.g,onChange:b=>w("g",parseInt(b.target.value)),className:"w-full h-2 bg-gray-600 rounded-lg appearance-none slider-thumb"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-white text-sm mb-1",children:[e.jsx("span",{children:"Blue"}),e.jsx("span",{children:M.b})]}),e.jsx("input",{type:"range",min:"0",max:"255",value:M.b,onChange:b=>w("b",parseInt(b.target.value)),className:"w-full h-2 bg-gray-600 rounded-lg appearance-none slider-thumb"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-white text-sm font-medium mb-3",children:"Basic colours"}),e.jsx("div",{className:"space-y-2",children:k.map((b,C)=>e.jsx("div",{className:"flex gap-2",children:b.map((j,K)=>e.jsx("button",{className:"w-8 h-8 rounded border border-gray-600 hover:scale-110 transition-transform",style:{backgroundColor:j},onClick:()=>{s(j),B(j)}},K))},C))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h4",{className:"text-white text-sm font-medium",children:"Customised colours"}),e.jsx(R,{variant:"ghost",size:"sm",className:"text-gray-400 hover:text-white",onClick:()=>B(t),children:e.jsx(Xe,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"grid grid-cols-6 gap-2",children:Array.from({length:24},(b,C)=>e.jsx("button",{className:"w-8 h-8 rounded border-2 border-dashed border-gray-600 hover:border-gray-400 transition-colors",style:{backgroundColor:d[C]||"transparent",borderStyle:d[C]?"solid":"dashed"},onClick:()=>{d[C]&&s(d[C])}},C))})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(R,{variant:"ghost",onClick:()=>o(!1),className:"text-gray-400 hover:text-white",children:"Cancel"}),e.jsx(R,{onClick:()=>{o(!1),n(!1),B(t)},className:"bg-orange-600 hover:bg-orange-700 text-white",children:"OK"})]})]})]})}),e.jsx("style",{dangerouslySetInnerHTML:{__html:`
          .slider-thumb::-webkit-slider-thumb {
            appearance: none;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #3b82f6;
            cursor: pointer;
            border: 2px solid white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
          }
          
          .slider-thumb::-moz-range-thumb {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #3b82f6;
            cursor: pointer;
            border: 2px solid white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
          }
        `}})]})}const mr={home:{name:"Home Page",icon:"🏠",description:"Main landing page with featured content"},blog:{name:"Blog Listing",icon:"📝",description:"Blog posts listing page"},"blog-post":{name:"Blog Posts",icon:"📖",description:"Individual blog post pages"},apps:{name:"Apps & AI Tools",icon:"📱",description:"Apps and AI tools showcase"},videos:{name:"Videos",icon:"🎥",description:"Video content and reviews"},services:{name:"Services",icon:"🛠️",description:"Services and subscriptions"},"top-picks":{name:"Top Picks",icon:"⭐",description:"Editor's choice products"},"travel-picks":{name:"Travel Picks",icon:"✈️",description:"Travel deals and recommendations"},"prime-picks":{name:"Prime Picks",icon:"👑",description:"Premium product selections"},"value-picks":{name:"Value Picks",icon:"💎",description:"Best value for money deals"},"click-picks":{name:"Click Picks",icon:"🖱️",description:"One-click shopping deals"},"cue-picks":{name:"Cue Picks",icon:"🎯",description:"Trending and curated picks"},"global-picks":{name:"Global Picks",icon:"🌍",description:"International product selections"},"deals-hub":{name:"Deals Hub",icon:"🔥",description:"Hot deals and discounts"},"loot-box":{name:"Loot Box",icon:"📦",description:"Mystery deals and surprises"},flights:{name:"Flights",icon:"🛫",description:"Flight booking and deals"},hotels:{name:"Hotels",icon:"🏨",description:"Hotel booking and deals"},search:{name:"Search Results",icon:"🔍",description:"Product search results"},"browse-categories":{name:"Browse Categories",icon:"📂",description:"Product category browser"},wishlist:{name:"Wishlist",icon:"❤️",description:"User wishlist and saved items"}};function Fr(){return Object.keys(mr).map(a=>{const r=mr[a];return{id:a,path:a==="home"?"/":`/${a}`,...r}}).sort((a,r)=>a.name.localeCompare(r.name))}function Ad(t){const s=mr[t];return s?{id:t,path:t==="home"?"/":`/${t}`,...s}:null}function Qi(t){const s=Ad(t);return s?`${s.icon} ${s.name}`:t}async function Pd(){try{const t=await fetch("/api/pages");if(!t.ok)throw new Error(`API request failed: ${t.status}`);const s=await t.json();if(s.success&&Array.isArray(s.pages))return s.pages;throw new Error("Invalid API response format")}catch(t){return console.error("Failed to fetch pages from API:",t),Fr()}}async function Td(){try{return await Pd()}catch(t){return console.warn("API unavailable, using static pages:",t),Fr()}}function Ed(){var b,C;const{toast:t}=ct(),s=ot(),[a,r]=P.useState(!1),[i,n]=P.useState([]);P.useEffect(()=>{(async()=>{try{const K=await Td();n(K)}catch(K){console.error("Failed to load pages:",K);const H=Fr();n(H)}})()},[]);const[l,o]=P.useState({message:"",textColor:"#ffffff",backgroundColor:"#3b82f6",fontSize:"Medium (16px)",fontWeight:"Normal",textDecoration:"None",fontStyle:"Normal",animationSpeed:"Medium (30s)",textBorderWidth:"None (0px)",textBorderStyle:"Solid",textBorderColor:"#000000",bannerBorderWidth:"None (0px)",bannerBorderStyle:"Solid",bannerBorderColor:"#000000",page:"",isGlobal:!0}),{data:c=[],isLoading:u,error:d}=Ie({queryKey:["/api/admin/announcements"],queryFn:async()=>{const K=await fetch("/api/admin/announcements?password=pickntrust2025");if(!K.ok)throw new Error("Failed to fetch announcements");return K.json()},retry:1}),m=he({mutationFn:async j=>{const K="pickntrust2025",H={...j,fontSize:j.fontSize.includes("(")?j.fontSize.match(/\(([^)]+)\)/)[1]:j.fontSize,animationSpeed:j.animationSpeed.includes("(")?j.animationSpeed.match(/\(([^)]+)\)/)[1].replace("s",""):j.animationSpeed,textBorderWidth:j.textBorderWidth.includes("(")?j.textBorderWidth.match(/\(([^)]+)\)/)[1]:j.textBorderWidth,bannerBorderWidth:j.bannerBorderWidth.includes("(")?j.bannerBorderWidth.match(/\(([^)]+)\)/)[1]:j.bannerBorderWidth},Z=await fetch("/api/admin/announcements",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:K,...H})});if(!Z.ok){const v=await Z.json();throw new Error(v.message||"Failed to add announcement")}return Z.json()},onSuccess:()=>{s.invalidateQueries({queryKey:["/api/admin/announcements"]}),o({message:"",textColor:"#ffffff",backgroundColor:"#3b82f6",fontSize:"Medium (16px)",fontWeight:"Normal",textDecoration:"None",fontStyle:"Normal",animationSpeed:"Medium (30s)",textBorderWidth:"None (0px)",textBorderStyle:"Solid",textBorderColor:"#000000",bannerBorderWidth:"None (0px)",bannerBorderStyle:"Solid",bannerBorderColor:"#000000",page:"",isGlobal:!0}),r(!1),t({title:"Success",description:"Announcement created successfully!"})},onError:j=>{t({title:"Error",description:j.message||"Failed to create announcement",variant:"destructive"})}}),h=he({mutationFn:async j=>{const H=await fetch(`/api/admin/announcements/${j}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:"pickntrust2025"})});if(!H.ok){const Z=await H.json();throw new Error(Z.message||"Failed to delete announcement")}return H.json()},onSuccess:()=>{s.invalidateQueries({queryKey:["/api/admin/announcements"]}),t({title:"Success",description:"Announcement deleted successfully!"})},onError:j=>{t({title:"Error",description:j.message||"Failed to delete announcement",variant:"destructive"})}}),p=j=>{if(j.preventDefault(),!l.message.trim()){t({title:"Error",description:"Announcement message is required",variant:"destructive"});return}m.mutate(l)},k=j=>{confirm("Are you sure you want to delete this announcement?")&&h.mutate(j)},_=["Extra Small (10px)","Small (12px)","Medium (16px)","Large (20px)","Extra Large (24px)","Huge (28px)","Giant (32px)","Massive (40px)"],f=["Thin","Extra Light","Light","Normal","Medium","Semi Bold","Bold","Extra Bold","Black"],T=["Normal","Italic","Oblique"],M=["None","Underline","Overline","Line Through","Underline Overline"],S=["Lightning (5s)","Very Fast (10s)","Fast (20s)","Medium (30s)","Slow (40s)","Very Slow (60s)","Crawl (90s)"],w=["None (0px)","Hair (0.5px)","Thin (1px)","Medium (2px)","Thick (3px)","Extra Thick (5px)","Ultra Thick (8px)"],B=["Solid","Dashed","Dotted","Double","Groove","Ridge","Inset","Outset"];return d?e.jsx(ee,{children:e.jsxs(ge,{children:[e.jsx(fe,{className:"text-red-600",children:"Error Loading Announcements"}),e.jsx(Ne,{children:"Failed to load announcements. Check your server connection."})]})}):e.jsxs("div",{className:"space-y-6 bg-gray-900 min-h-screen p-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(lc,{className:"w-6 h-6 text-blue-400"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-400",children:"Announcement Banner"}),e.jsx("p",{className:"text-gray-400",children:"Manage the scrolling announcement banner shown on the homepage"})]})]}),e.jsx(ee,{className:"bg-gray-800 border-gray-700",children:e.jsx(ae,{className:"p-6",children:e.jsx("div",{className:"border-2 border-dashed border-gray-600 rounded-lg p-8 text-center",children:e.jsx("p",{className:"text-gray-400",children:c.length>0&&c.some(j=>j.isActive)?`Active announcement: "${(b=c.find(j=>j.isActive))==null?void 0:b.message}"`:"No active announcement. Create one below."})})})}),e.jsxs(ee,{className:"bg-gray-800 border-gray-700",children:[e.jsx(ge,{children:e.jsx(fe,{className:"text-blue-400",children:"Create New Announcement"})}),e.jsx(ae,{className:"space-y-6",children:e.jsxs("form",{onSubmit:p,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(I,{className:"text-white font-medium",children:"Announcement Message"}),e.jsx(It,{value:l.message,onChange:j=>o({...l,message:j.target.value}),placeholder:"Enter your announcement message (use emojis for more appeal!)",className:"bg-gray-900 border-gray-600 text-white mt-2",rows:3,required:!0})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(I,{className:"text-white font-medium",children:"Page Targeting"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(I,{className:"text-white font-medium",children:"Announcement Type"}),e.jsxs(Le,{value:l.isGlobal?"global":"page-specific",onValueChange:j=>o({...l,isGlobal:j==="global",page:j==="global"?"":l.page}),children:[e.jsx(Ue,{className:"bg-gray-900 border-gray-600 text-white mt-2",children:e.jsx(Ve,{})}),e.jsxs($e,{className:"bg-gray-900 border-gray-600",children:[e.jsx(ue,{value:"global",className:"text-white hover:bg-gray-700",children:"🌐 Global (All Pages)"}),e.jsx(ue,{value:"page-specific",className:"text-white hover:bg-gray-700",children:"📄 Page-Specific"})]})]})]}),!l.isGlobal&&e.jsxs("div",{children:[e.jsx(I,{className:"text-white font-medium",children:"Target Page"}),e.jsxs(Le,{value:l.page,onValueChange:j=>o({...l,page:j}),children:[e.jsx(Ue,{className:"bg-gray-900 border-gray-600 text-white mt-2",children:e.jsx(Ve,{placeholder:"Select a page"})}),e.jsx($e,{className:"bg-gray-900 border-gray-600",children:i.map(j=>e.jsxs(ue,{value:j.id,className:"text-white hover:bg-gray-700",children:[j.icon," ",j.name]},j.id))})]})]})]}),e.jsx("p",{className:"text-gray-400 text-sm",children:l.isGlobal?"This announcement will appear on all pages of the website.":"This announcement will only appear on the selected page."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(Xs,{label:"Text Color",value:l.textColor,onChange:j=>o({...l,textColor:j})}),e.jsx(Xs,{label:"Background Color",value:l.backgroundColor,onChange:j=>o({...l,backgroundColor:j})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(I,{className:"text-white font-medium",children:"Font Size"}),e.jsxs(Le,{value:l.fontSize,onValueChange:j=>o({...l,fontSize:j}),children:[e.jsx(Ue,{className:"bg-gray-900 border-gray-600 text-white mt-2",children:e.jsx(Ve,{})}),e.jsx($e,{className:"bg-gray-900 border-gray-600",children:_.map(j=>e.jsx(ue,{value:j,className:"text-white hover:bg-gray-700",children:j},j))})]})]}),e.jsxs("div",{children:[e.jsx(I,{className:"text-white font-medium",children:"Font Weight"}),e.jsxs(Le,{value:l.fontWeight,onValueChange:j=>o({...l,fontWeight:j}),children:[e.jsx(Ue,{className:"bg-gray-900 border-gray-600 text-white mt-2",children:e.jsx(Ve,{})}),e.jsx($e,{className:"bg-gray-900 border-gray-600",children:f.map(j=>e.jsx(ue,{value:j,className:"text-white hover:bg-gray-700",children:j},j))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(I,{className:"text-white font-medium",children:"Font Style"}),e.jsxs(Le,{value:l.fontStyle,onValueChange:j=>o({...l,fontStyle:j}),children:[e.jsx(Ue,{className:"bg-gray-900 border-gray-600 text-white mt-2",children:e.jsx(Ve,{})}),e.jsx($e,{className:"bg-gray-900 border-gray-600",children:T.map(j=>e.jsx(ue,{value:j,className:"text-white hover:bg-gray-700",children:j},j))})]})]}),e.jsxs("div",{children:[e.jsx(I,{className:"text-white font-medium",children:"Text Decoration"}),e.jsxs(Le,{value:l.textDecoration,onValueChange:j=>o({...l,textDecoration:j}),children:[e.jsx(Ue,{className:"bg-gray-900 border-gray-600 text-white mt-2",children:e.jsx(Ve,{})}),e.jsx($e,{className:"bg-gray-900 border-gray-600",children:M.map(j=>e.jsx(ue,{value:j,className:"text-white hover:bg-gray-700",children:j},j))})]})]})]}),e.jsxs("div",{children:[e.jsx(I,{className:"text-white font-medium",children:"Animation Speed"}),e.jsxs(Le,{value:l.animationSpeed,onValueChange:j=>o({...l,animationSpeed:j}),children:[e.jsx(Ue,{className:"bg-gray-900 border-gray-600 text-white mt-2",children:e.jsx(Ve,{})}),e.jsx($e,{className:"bg-gray-900 border-gray-600",children:S.map(j=>e.jsx(ue,{value:j,className:"text-white hover:bg-gray-700",children:j},j))})]})]}),e.jsxs(ee,{className:"bg-gray-900 border-blue-600",children:[e.jsx(ge,{className:"pb-3",children:e.jsxs(fe,{className:"text-blue-400 text-lg flex items-center gap-2",children:[e.jsx(Kn,{className:"w-5 h-5"}),"Text Border Options"]})}),e.jsx(ae,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(I,{className:"text-white font-medium",children:"Border Width"}),e.jsxs(Le,{value:l.textBorderWidth,onValueChange:j=>o({...l,textBorderWidth:j}),children:[e.jsx(Ue,{className:"bg-gray-800 border-gray-600 text-white mt-2",children:e.jsx(Ve,{})}),e.jsx($e,{className:"bg-gray-800 border-gray-600",children:w.map(j=>e.jsx(ue,{value:j,className:"text-white hover:bg-gray-700",children:j},j))})]})]}),e.jsxs("div",{children:[e.jsx(I,{className:"text-white font-medium",children:"Border Style"}),e.jsxs(Le,{value:l.textBorderStyle,onValueChange:j=>o({...l,textBorderStyle:j}),children:[e.jsx(Ue,{className:"bg-gray-800 border-gray-600 text-white mt-2",children:e.jsx(Ve,{})}),e.jsx($e,{className:"bg-gray-800 border-gray-600",children:B.map(j=>e.jsx(ue,{value:j,className:"text-white hover:bg-gray-700",children:j},j))})]})]}),e.jsx(Xs,{label:"Border Color",value:l.textBorderColor,onChange:j=>o({...l,textBorderColor:j})})]})})]}),e.jsxs(ee,{className:"bg-gray-900 border-green-600",children:[e.jsx(ge,{className:"pb-3",children:e.jsxs(fe,{className:"text-green-400 text-lg flex items-center gap-2",children:[e.jsx(St,{className:"w-5 h-5"}),"Banner Border Options"]})}),e.jsx(ae,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(I,{className:"text-white font-medium",children:"Border Width"}),e.jsxs(Le,{value:l.bannerBorderWidth,onValueChange:j=>o({...l,bannerBorderWidth:j}),children:[e.jsx(Ue,{className:"bg-gray-800 border-gray-600 text-white mt-2",children:e.jsx(Ve,{})}),e.jsx($e,{className:"bg-gray-800 border-gray-600",children:w.map(j=>e.jsx(ue,{value:j,className:"text-white hover:bg-gray-700",children:j},j))})]})]}),e.jsxs("div",{children:[e.jsx(I,{className:"text-white font-medium",children:"Border Style"}),e.jsxs(Le,{value:l.bannerBorderStyle,onValueChange:j=>o({...l,bannerBorderStyle:j}),children:[e.jsx(Ue,{className:"bg-gray-800 border-gray-600 text-white mt-2",children:e.jsx(Ve,{})}),e.jsx($e,{className:"bg-gray-800 border-gray-600",children:B.map(j=>e.jsx(ue,{value:j,className:"text-white hover:bg-gray-700",children:j},j))})]})]}),e.jsx(Xs,{label:"Border Color",value:l.bannerBorderColor,onChange:j=>o({...l,bannerBorderColor:j})})]})})]}),e.jsxs("div",{children:[e.jsx(I,{className:"text-white font-medium",children:"Preview"}),e.jsx("div",{className:"mt-2 bg-blue-600 rounded-lg p-4 overflow-hidden",children:e.jsx("div",{className:"text-center whitespace-nowrap animate-marquee",style:{color:l.textColor,backgroundColor:l.backgroundColor,fontSize:l.fontSize.includes("(")?(C=l.fontSize.match(/\(([^)]+)\)/))==null?void 0:C[1]:"16px",fontWeight:l.fontWeight.toLowerCase(),fontStyle:l.fontStyle.toLowerCase(),textDecoration:l.textDecoration.toLowerCase().replace(" ","-"),padding:"12px",borderRadius:"4px"},children:l.message||"Your announcement will appear here..."})})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4",children:[e.jsxs(R,{type:"button",variant:"outline",className:"text-blue-400 border-blue-400 hover:bg-blue-900",children:[e.jsx(pt,{className:"w-4 h-4 mr-2"}),"Live Preview"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(R,{type:"button",variant:"outline",onClick:()=>r(!1),className:"text-gray-400 border-gray-600 hover:bg-gray-800",children:"Cancel"}),e.jsx(R,{type:"submit",disabled:m.isPending,className:"bg-blue-600 hover:bg-blue-700 text-white",children:m.isPending?"Saving...":"Save Announcement"})]})]})]})})]}),c.length>0&&e.jsxs(ee,{className:"bg-gray-800 border-gray-700",children:[e.jsxs(ge,{children:[e.jsxs(fe,{className:"text-white",children:["Manage Announcements (",c.length,")"]}),e.jsx(Ne,{className:"text-gray-400",children:"View and manage all announcements"})]}),e.jsx(ae,{children:u?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-400",children:"Loading announcements..."})]}):e.jsx("div",{className:"space-y-4",children:c.map(j=>e.jsx("div",{className:"border border-gray-600 rounded-lg p-4 hover:shadow-md transition-shadow bg-gray-900",children:e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("h3",{className:"font-semibold text-white",children:["Announcement #",j.id]}),j.isActive&&e.jsx(we,{className:"bg-green-600 text-white",children:"Active"}),j.isGlobal?e.jsx(we,{className:"bg-blue-600 text-white",children:"🌐 Global"}):e.jsx(we,{className:"bg-purple-600 text-white",children:j.page?Qi(j.page):"📄 Page-Specific"})]}),e.jsx("div",{className:"p-3 rounded mb-2 text-center",style:{backgroundColor:j.backgroundColor,color:j.textColor,fontSize:j.fontSize,fontWeight:j.fontWeight},children:j.message}),e.jsxs("div",{className:"text-sm text-gray-400",children:[e.jsxs("p",{children:["Animation Speed: ",j.animationSpeed,"s"]}),e.jsxs("p",{children:["Target: ",j.isGlobal?"All Pages (Global)":`${j.page?Qi(j.page):"Page-Specific"} Only`]}),e.jsxs("p",{children:["Created: ",j.createdAt?new Date(j.createdAt).toLocaleDateString():"Unknown"]})]})]}),e.jsx(R,{variant:"outline",size:"sm",onClick:()=>k(j.id),disabled:h.isPending,className:"text-red-400 border-red-400 hover:bg-red-900/20",children:"Delete"})]})},j.id))})})]})]})}var ka="Checkbox",[Fd]=qn(ka),[Dd,Dr]=Fd(ka);function Id(t){const{__scopeCheckbox:s,checked:a,children:r,defaultChecked:i,disabled:n,form:l,name:o,onCheckedChange:c,required:u,value:d="on",internal_do_not_use_render:m}=t,[h,p]=$n({prop:a,defaultProp:i??!1,onChange:c,caller:ka}),[k,_]=P.useState(null),[f,T]=P.useState(null),M=P.useRef(!1),S=k?!!l||!!k.closest("form"):!0,w={checked:h,disabled:n,setChecked:p,control:k,setControl:_,name:o,form:l,value:d,hasConsumerStoppedPropagationRef:M,required:u,defaultChecked:$t(i)?!1:i,isFormControl:S,bubbleInput:f,setBubbleInput:T};return e.jsx(Dd,{scope:s,...w,children:_d(m)?m(w):r})}var wl="CheckboxTrigger",Nl=P.forwardRef(({__scopeCheckbox:t,onKeyDown:s,onClick:a,...r},i)=>{const{control:n,value:l,disabled:o,checked:c,required:u,setControl:d,setChecked:m,hasConsumerStoppedPropagationRef:h,isFormControl:p,bubbleInput:k}=Dr(wl,t),_=zn(i,d),f=P.useRef(c);return P.useEffect(()=>{const T=n==null?void 0:n.form;if(T){const M=()=>m(f.current);return T.addEventListener("reset",M),()=>T.removeEventListener("reset",M)}},[n,m]),e.jsx(ss.button,{type:"button",role:"checkbox","aria-checked":$t(c)?"mixed":c,"aria-required":u,"data-state":Pl(c),"data-disabled":o?"":void 0,disabled:o,value:l,...r,ref:_,onKeyDown:ks(s,T=>{T.key==="Enter"&&T.preventDefault()}),onClick:ks(a,T=>{m(M=>$t(M)?!0:!M),k&&p&&(h.current=T.isPropagationStopped(),h.current||T.stopPropagation())})})});Nl.displayName=wl;var Ir=P.forwardRef((t,s)=>{const{__scopeCheckbox:a,name:r,checked:i,defaultChecked:n,required:l,disabled:o,value:c,onCheckedChange:u,form:d,...m}=t;return e.jsx(Id,{__scopeCheckbox:a,checked:i,defaultChecked:n,disabled:o,required:l,onCheckedChange:u,name:r,form:d,value:c,internal_do_not_use_render:({isFormControl:h})=>e.jsxs(e.Fragment,{children:[e.jsx(Nl,{...m,ref:s,__scopeCheckbox:a}),h&&e.jsx(Al,{__scopeCheckbox:a})]})})});Ir.displayName=ka;var kl="CheckboxIndicator",Cl=P.forwardRef((t,s)=>{const{__scopeCheckbox:a,forceMount:r,...i}=t,n=Dr(kl,a);return e.jsx(Wn,{present:r||$t(n.checked)||n.checked===!0,children:e.jsx(ss.span,{"data-state":Pl(n.checked),"data-disabled":n.disabled?"":void 0,...i,ref:s,style:{pointerEvents:"none",...t.style}})})});Cl.displayName=kl;var Sl="CheckboxBubbleInput",Al=P.forwardRef(({__scopeCheckbox:t,...s},a)=>{const{control:r,hasConsumerStoppedPropagationRef:i,checked:n,defaultChecked:l,required:o,disabled:c,name:u,value:d,form:m,bubbleInput:h,setBubbleInput:p}=Dr(Sl,t),k=zn(a,p),_=ac(n),f=rc(r);P.useEffect(()=>{const M=h;if(!M)return;const S=window.HTMLInputElement.prototype,B=Object.getOwnPropertyDescriptor(S,"checked").set,b=!i.current;if(_!==n&&B){const C=new Event("click",{bubbles:b});M.indeterminate=$t(n),B.call(M,$t(n)?!1:n),M.dispatchEvent(C)}},[h,_,n,i]);const T=P.useRef($t(n)?!1:n);return e.jsx(ss.input,{type:"checkbox","aria-hidden":!0,defaultChecked:l??T.current,required:o,disabled:c,name:u,value:d,form:m,...s,tabIndex:-1,ref:k,style:{...s.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});Al.displayName=Sl;function _d(t){return typeof t=="function"}function $t(t){return t==="indeterminate"}function Pl(t){return $t(t)?"indeterminate":t?"checked":"unchecked"}const Tl=P.forwardRef(({className:t,...s},a)=>e.jsx(Ir,{ref:a,className:Es("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...s,children:e.jsx(Cl,{className:Es("flex items-center justify-center text-current"),children:e.jsx(oc,{className:"h-4 w-4"})})}));Tl.displayName=Ir.displayName;const Rd=[{id:"1",name:"Product Price Monitor",description:"Automatically check and update product prices from affiliate sources",type:"price_update",status:"active",schedule:"Every 6 hours",lastRun:new Date(Date.now()-2*60*60*1e3),nextRun:new Date(Date.now()+4*60*60*1e3),successRate:98.5},{id:"2",name:"New Product Discovery",description:"Scan affiliate networks for trending products in selected categories",type:"product_sync",status:"active",schedule:"Daily at 2:00 AM",lastRun:new Date(Date.now()-8*60*60*1e3),nextRun:new Date(Date.now()+16*60*60*1e3),successRate:92.1},{id:"3",name:"Weekly Newsletter",description:"Generate and send weekly newsletter with top deals and new products",type:"email_campaign",status:"paused",schedule:"Weekly on Sunday",lastRun:new Date(Date.now()-7*24*60*60*1e3),nextRun:new Date(Date.now()+2*24*60*60*1e3),successRate:95.8},{id:"4",name:"Content Auto-Generation",description:"Generate product descriptions and blog content using AI",type:"content_generation",status:"active",schedule:"Every 12 hours",lastRun:new Date(Date.now()-5*60*60*1e3),nextRun:new Date(Date.now()+7*60*60*1e3),successRate:87.3},{id:"5",name:"Analytics Report",description:"Generate daily analytics reports and performance insights",type:"analytics",status:"active",schedule:"Daily at 6:00 AM",lastRun:new Date(Date.now()-18*60*60*1e3),nextRun:new Date(Date.now()+6*60*60*1e3),successRate:99.2},{id:"6",name:"Database Backup",description:"Automated backup of all database content and configurations",type:"backup",status:"active",schedule:"Daily at 3:00 AM",lastRun:new Date(Date.now()-21*60*60*1e3),nextRun:new Date(Date.now()+3*60*60*1e3),successRate:100}];function Od(){const{toast:t}=ct(),s=ot(),[a,r]=P.useState(Rd),[i,n]=P.useState(!1),[l,o]=P.useState({name:"",description:"",type:"product_sync",schedule:"daily"}),[c,u]=P.useState([]),[d,m]=P.useState(!1),[h,p]=P.useState({key:"",name:"",apiUrl:"",apiKey:"",apiSecret:"",webhookUrl:"",color:"text-purple-300",icon:ni}),[k,_]=P.useState({templates:[],audio:[]}),[f,T]=P.useState(null),[M,S]=P.useState(!1),[w,B]=P.useState({isEnabled:!1,autoGenerateCaptions:!0,autoGenerateHashtags:!0,platforms:["instagram","facebook"],scheduleType:"immediate",scheduleDelayMinutes:0,enableBlogPosts:!0,enableVideos:!0}),[b,C]=P.useState(!1),[j,K]=P.useState({instagram:[""],"instagram-reels":[""],facebook:[""],twitter:[""],whatsapp:[""],telegram:[""],youtube:[""],"youtube-shorts":[""]}),[H,Z]=P.useState([""]),[v,G]=P.useState({instagram:null,"instagram-reels":null,facebook:null,twitter:null,whatsapp:null,telegram:null,youtube:null,"youtube-shorts":null}),[O,y]=P.useState(null),A=()=>{if(!h.key||!h.name){t({title:"Error",description:"Platform key and name are required",variant:"destructive"});return}({...h,key:h.key.toLowerCase().replace(/\s+/g,"_"),id:Date.now().toString()})},$=async()=>{try{const q=await(await fetch("/api/admin/backend-templates?password=admin")).json();q.success&&_({templates:q.templates||[],audio:q.audio||[]})}catch(F){console.error("Error fetching backend templates:",F)}},W=async()=>{try{const q=await(await fetch("/api/admin/backend-templates/stats?password=admin")).json();q.success&&T(q.stats)}catch(F){console.error("Error fetching template stats:",F)}},pe=async()=>{try{const q=await(await fetch("/api/admin/backend-templates/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:"admin",productData:{id:Date.now(),name:"Test Electronics Product",description:"A high-tech gadget for testing our smart template system",price:"₹1,999",category:"electronics",imageUrl:"/placeholder-image.png"}})})).json();if(q.success)t({title:"Template Test Successful",description:`Generated content: ${q.generatedUrl}`});else throw new Error(q.error||"Test failed")}catch(F){console.error("Template test failed:",F),t({title:"Template Test Failed",description:F.message,variant:"destructive"})}};P.useEffect(()=>{$(),W()},[]);const De=F=>{u(q=>q.filter(be=>be.id!==F)),t({title:"Platform Removed",description:"Platform has been removed successfully"})},We=async F=>{try{t({title:"Platform Test",description:`Testing connection to ${F.name}...`})}catch{t({title:"Test Failed",description:"Failed to connect to platform",variant:"destructive"})}},{data:Te,isLoading:Me}=Ie({queryKey:["canva-settings"],queryFn:async()=>({is_enabled:!1,auto_generate_captions:!0,auto_generate_hashtags:!0,platforms:["instagram","facebook"],schedule_type:"immediate",schedule_delay_minutes:0,enable_blog_posts:!0,enable_videos:!0}),enabled:!1}),Re=he({mutationFn:async F=>(await new Promise(q=>setTimeout(q,300)),{success:!0,message:"Settings updated successfully",settings:F}),onSuccess:F=>{if(t({title:'Settings Saved <i className="fas fa-check-circle"></i>',description:"Canva automation settings updated successfully."}),F.settings){const q={...F.settings,platforms:Array.isArray(F.settings.platforms)?F.settings.platforms:JSON.parse(F.settings.platforms||"[]")};B(q)}s.invalidateQueries({queryKey:["canva-settings"]}),s.refetchQueries({queryKey:["canva-settings"]}),C(!1)},onError:F=>{t({title:'Error <i className="fas fa-times-circle"></i>',description:F.message||"Failed to update Canva settings.",variant:"destructive"}),s.refetchQueries({queryKey:["canva-settings"]})}}),E=he({mutationFn:async()=>(await new Promise(F=>setTimeout(F,1500)),{success:!0,message:'Canva automation test completed successfully! <i className="fas fa-palette"></i><i className="fas fa-sparkles"></i>',details:"Mock test created a sample social media post with auto-generated caption and hashtags."}),onSuccess:F=>{t({title:"Test Successful",description:F.message||"Canva automation test completed successfully."})},onError:F=>{t({title:"Test Failed",description:F.message||"Failed to test Canva automation.",variant:"destructive"})}});P.useEffect(()=>{if(Te&&!Re.isPending){const F={isEnabled:Te.is_enabled||!1,apiKey:Te.api_key||"",apiSecret:Te.api_secret||"",defaultTemplateId:Te.default_template_id||"",autoGenerateCaptions:Te.auto_generate_captions!==!1,autoGenerateHashtags:Te.auto_generate_hashtags!==!1,defaultCaption:Te.default_caption||"",defaultHashtags:Te.default_hashtags||"",platforms:Array.isArray(Te.platforms)?Te.platforms:typeof Te.platforms=="string"?JSON.parse(Te.platforms||"[]"):["instagram","facebook"],scheduleType:Te.schedule_type||"immediate",scheduleDelayMinutes:Te.schedule_delay_minutes||0,enableBlogPosts:Te.enable_blog_posts!==!1,enableVideos:Te.enable_videos!==!1};B(F)}},[Te,Re.isPending]);const ie=he({mutationFn:async({taskId:F,newStatus:q})=>(await new Promise(be=>setTimeout(be,1e3)),{taskId:F,newStatus:q}),onSuccess:({taskId:F,newStatus:q})=>{r(be=>be.map(Be=>Be.id===F?{...Be,status:q}:Be)),t({title:"Task Updated",description:`Automation task ${q==="active"?"activated":q==="paused"?"paused":"stopped"} successfully.`})},onError:()=>{t({title:"Error",description:"Failed to update automation task.",variant:"destructive"})}}),g=he({mutationFn:async F=>(await new Promise(q=>setTimeout(q,1500)),{id:Date.now().toString(),...F,status:"active",successRate:0,nextRun:new Date(Date.now()+60*60*1e3)}),onSuccess:F=>{r(q=>[...q,F]),o({name:"",description:"",type:"product_sync",schedule:"daily"}),n(!1),t({title:"Task Created",description:"New automation task created successfully."})},onError:()=>{t({title:"Error",description:"Failed to create automation task.",variant:"destructive"})}}),V=(F,q)=>{const be=q==="active"?"paused":"active";ie.mutate({taskId:F,newStatus:be})},oe=()=>{if(!l.name.trim()||!l.description.trim()){t({title:"Validation Error",description:"Please fill in all required fields.",variant:"destructive"});return}g.mutate(l)},xe=F=>{switch(F){case"product_sync":return e.jsx(Hn,{className:"w-4 h-4"});case"price_update":return e.jsx(Ra,{className:"w-4 h-4"});case"email_campaign":return e.jsx(pi,{className:"w-4 h-4"});case"content_generation":return e.jsx(Qs,{className:"w-4 h-4"});case"analytics":return e.jsx(sa,{className:"w-4 h-4"});case"backup":return e.jsx(ns,{className:"w-4 h-4"});default:return e.jsx(li,{className:"w-4 h-4"})}},qe=F=>F.toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[e.jsx(ee,{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:e.jsx(ae,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-100 text-sm",children:"Active Tasks"}),e.jsx("p",{className:"text-2xl font-bold",children:a.filter(F=>F.status==="active").length})]}),e.jsx(Qs,{className:"w-8 h-8 text-blue-200"})]})})}),e.jsx(ee,{className:"bg-gradient-to-r from-green-500 to-green-600 text-white",children:e.jsx(ae,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-100 text-sm",children:"Success Rate"}),e.jsxs("p",{className:"text-2xl font-bold",children:[Math.round(a.reduce((F,q)=>F+q.successRate,0)/a.length),"%"]})]}),e.jsx(Ds,{className:"w-8 h-8 text-green-200"})]})})}),e.jsx(ee,{className:"bg-gradient-to-r from-purple-500 to-purple-600 text-white",children:e.jsx(ae,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-purple-100 text-sm",children:"Scheduled"}),e.jsx("p",{className:"text-2xl font-bold",children:a.filter(F=>F.nextRun).length})]}),e.jsx(cc,{className:"w-8 h-8 text-purple-200"})]})})}),e.jsx(ee,{className:"bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:e.jsx(ae,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-orange-100 text-sm",children:"Total Tasks"}),e.jsx("p",{className:"text-2xl font-bold",children:a.length})]}),e.jsx(li,{className:"w-8 h-8 text-orange-200"})]})})})]}),e.jsxs(ee,{className:"bg-gradient-to-r from-purple-200 to-pink-300 text-black border-0 shadow-xl",children:[e.jsxs(ge,{children:[e.jsxs(fe,{className:"flex items-center gap-2 text-black font-bold text-lg",children:[e.jsx(ni,{className:"w-5 h-5"}),e.jsx("i",{className:"fas fa-palette"})," Social Media Automation with Canva",e.jsx(we,{variant:w.isEnabled?"default":"secondary",className:"bg-white/80 text-black border-gray-300 font-semibold",children:w.isEnabled?'<i className="fas fa-check-circle"></i> ON':'<i className="fas fa-times-circle"></i> OFF'})]}),e.jsx(Ne,{className:"text-black font-medium",children:"Automatically create and post beautiful social media content using Canva templates"})]}),e.jsx(ae,{children:Me?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(Dt,{className:"w-6 h-6 animate-spin mr-2 text-white"}),e.jsx("span",{className:"text-white",children:"Loading settings..."})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white/15 backdrop-blur-sm p-4 rounded-lg border border-white/30 shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-white text-pink-600 rounded-full w-7 h-7 flex items-center justify-center text-sm font-bold shadow-md",children:"1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-black text-base",children:"Turn On Automation"}),e.jsx("p",{className:"text-sm text-black font-medium",children:w.isEnabled?"🟢 Automation is running":"🔴 Click to start automation"})]})]}),e.jsx(et,{checked:w.isEnabled,onCheckedChange:F=>{const q={...w},be={...w,isEnabled:F};B(be),Re.mutate(be,{onError:()=>{B(q)}})},className:"data-[state=checked]:bg-green-500",disabled:Re.isPending})]})}),e.jsxs("div",{className:"bg-white/15 backdrop-blur-sm p-4 rounded-lg border border-white/30 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"bg-white text-pink-600 rounded-full w-7 h-7 flex items-center justify-center text-sm font-bold shadow-md",children:"2"}),e.jsx("h4",{className:"font-bold text-black text-base",children:"Choose Social Media Platforms"})]}),e.jsx("p",{className:"text-sm text-black font-medium mb-3",children:"Select where you want to post your content:"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{key:"instagram",name:"Instagram",icon:sr,color:"text-pink-300"},{key:"facebook",name:"Facebook",icon:oi,color:"text-blue-300"},{key:"twitter",name:"Twitter/X",icon:ci,color:"text-blue-200"},{key:"whatsapp",name:"WhatsApp",icon:di,color:"text-green-300"},{key:"telegram",name:"Telegram",icon:ui,color:"text-blue-300"},{key:"youtube",name:"YouTube",icon:wt,color:"text-red-300"},...c].map(F=>e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-white/20 rounded-lg border border-white/30 hover:bg-white/25 transition-colors shadow-sm",children:[e.jsx(Tl,{id:F.key,checked:w.platforms.includes(F.key),onCheckedChange:q=>{const be=q?[...w.platforms,F.key]:w.platforms.filter(x=>x!==F.key),Be={...w,platforms:be};B(Be),Re.mutate(Be)}}),e.jsx(F.icon,{className:`w-4 h-4 ${F.color} drop-shadow-sm`}),e.jsx(I,{htmlFor:F.key,className:"text-sm font-semibold cursor-pointer text-black",children:F.name})]},F.key))}),e.jsx("div",{className:"mt-4 flex justify-center",children:e.jsxs(R,{onClick:()=>m(!0),variant:"outline",className:"bg-white/10 border-white/30 text-black hover:bg-white/20 transition-colors",children:[e.jsx(Xe,{className:"w-4 h-4 mr-2"}),"Add Custom Platform"]})}),c.length>0&&e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx(I,{className:"text-sm font-semibold text-black",children:"Custom Platforms:"}),c.map(F=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/10 rounded-lg border border-white/20",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F.icon,{className:`w-4 h-4 ${F.color}`}),e.jsx("span",{className:"text-sm font-medium text-black",children:F.name}),e.jsx(we,{variant:"secondary",className:"text-xs",children:F.key})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{onClick:()=>We(F),size:"sm",variant:"outline",className:"text-xs",children:"Test"}),e.jsx(R,{onClick:()=>De(F.id),size:"sm",variant:"destructive",className:"text-xs",children:"Remove"})]})]},F.id))]}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("div",{children:[e.jsxs(I,{htmlFor:"manual-caption",className:"text-sm font-semibold text-black mb-2 block",children:[e.jsx("i",{className:"fas fa-edit"})," Manual Caption (Optional)"]}),e.jsx(It,{id:"manual-caption",placeholder:"Write your custom caption here...",value:w.defaultCaption||"",onChange:F=>{const q={...w,defaultCaption:F.target.value};B(q),Re.mutate(q)},className:"bg-white/20 border-white/30 text-black placeholder:text-gray-600 focus:bg-white/30 transition-colors",rows:3})]}),e.jsxs("div",{children:[e.jsxs(I,{htmlFor:"manual-hashtags",className:"text-sm font-semibold text-black mb-2 block",children:[e.jsx("i",{className:"fas fa-tag"})," Manual Hashtags (Optional)"]}),e.jsx(X,{id:"manual-hashtags",placeholder:"#example #hashtags #socialmedia",value:w.defaultHashtags||"",onChange:F=>{const q={...w,defaultHashtags:F.target.value};B(q),Re.mutate(q)},className:"bg-white/20 border-white/30 text-black placeholder:text-gray-600 focus:bg-white/30 transition-colors"})]})]}),e.jsxs("div",{className:"mt-4 p-4 bg-white/10 rounded-lg border border-white/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ar,{className:"w-5 h-5 text-black"}),e.jsxs(I,{className:"text-sm font-semibold text-black",children:[e.jsx("i",{className:"fas fa-palette"})," Canva Template Settings"]})]}),e.jsx(et,{checked:b,onCheckedChange:C,className:"data-[state=checked]:bg-pink-500"})]}),b&&e.jsxs("div",{className:"space-y-4 animate-in slide-in-from-top-2 duration-200",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsxs(I,{htmlFor:"api-key",className:"text-sm font-semibold text-black mb-2 block",children:[e.jsx("i",{className:"fas fa-key"})," API Key"]}),e.jsx(X,{id:"api-key",type:"password",placeholder:"Enter your Canva API key",value:w.apiKey||"",onChange:F=>{const q={...w,apiKey:F.target.value};B(q),Re.mutate(q)},className:"bg-white/20 border-white/30 text-black placeholder:text-gray-600 focus:bg-white/30 transition-colors"})]}),e.jsxs("div",{children:[e.jsxs(I,{htmlFor:"api-secret",className:"text-sm font-semibold text-black mb-2 block",children:[e.jsx("i",{className:"fas fa-lock"})," API Secret"]}),e.jsx(X,{id:"api-secret",type:"password",placeholder:"Enter your Canva API secret",value:w.apiSecret||"",onChange:F=>{const q={...w,apiSecret:F.target.value};B(q),Re.mutate(q)},className:"bg-white/20 border-white/30 text-black placeholder:text-gray-600 focus:bg-white/30 transition-colors"})]})]}),e.jsxs("div",{children:[e.jsxs(I,{className:"text-sm font-semibold text-black mb-3 block",children:[e.jsx("i",{className:"fas fa-mobile-alt"})," Platform Templates"]}),e.jsx("div",{className:"space-y-3",children:[{key:"instagram",name:"Instagram",icon:sr,color:"text-pink-500"},{key:"instagram-reels",name:"Instagram Reels",icon:wt,color:"text-pink-600"},{key:"facebook",name:"Facebook",icon:oi,color:"text-blue-500"},{key:"twitter",name:"Twitter/X",icon:ci,color:"text-blue-400"},{key:"whatsapp",name:"WhatsApp",icon:di,color:"text-green-500"},{key:"telegram",name:"Telegram",icon:ui,color:"text-blue-500"},{key:"youtube",name:"YouTube",icon:wt,color:"text-red-500"},{key:"youtube-shorts",name:"YouTube Shorts",icon:mi,color:"text-red-600"}].map(F=>e.jsxs("div",{className:"p-3 bg-white/10 rounded-lg border border-white/20",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(F.icon,{className:`w-4 h-4 ${F.color}`}),e.jsxs("span",{className:"text-sm font-medium text-black",children:[F.name," Templates"]})]}),e.jsxs("div",{className:"space-y-2",children:[j[F.key].map((q,be)=>e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx(R,{type:"button",variant:"ghost",size:"sm",onClick:()=>{const Be={...v};Be[F.key]=v[F.key]===be?null:be,G(Be)},className:`w-6 h-6 p-0 rounded-full border-2 ${v[F.key]===be?"bg-green-500 border-green-500 text-white":"bg-white/20 border-white/40 text-gray-600 hover:bg-white/30"}`,children:v[F.key]===be?'<i className="fas fa-check"></i>':""}),e.jsx(X,{placeholder:`${F.name} template ID`,value:q,onChange:Be=>{const x={...j};x[F.key][be]=Be.target.value,K(x)},className:"bg-white/20 border-white/30 text-black placeholder:text-gray-600 focus:bg-white/30 transition-colors flex-1"})]}),j[F.key].length>1&&e.jsx(R,{type:"button",variant:"outline",size:"sm",onClick:()=>{const Be={...j};Be[F.key].splice(be,1),K(Be);const x={...v};x[F.key]!==null&&x[F.key]>=Be[F.key].length&&(x[F.key]=Be[F.key].length>0?Math.max(0,Be[F.key].length-1):null),G(x)},className:"bg-red-500/20 border-red-300 text-red-700 hover:bg-red-500/30",children:e.jsx("i",{className:"fas fa-times-circle"})})]},be)),e.jsx(R,{type:"button",variant:"outline",size:"sm",onClick:()=>{const q={...j};q[F.key].push(""),K(q)},className:"bg-green-500/20 border-green-300 text-green-700 hover:bg-green-500/30 w-full",children:"➕ Add Template"})]})]},F.key))})]}),e.jsxs("div",{children:[e.jsxs(I,{className:"text-sm font-semibold text-black mb-2 block",children:[e.jsx("i",{className:"fas fa-clipboard"})," Extra Templates"]}),e.jsxs("div",{className:"space-y-2",children:[H.map((F,q)=>e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx(R,{type:"button",variant:"ghost",size:"sm",onClick:()=>{y(O===q?null:q)},className:`w-6 h-6 p-0 rounded-full border-2 ${O===q?"bg-green-500 border-green-500 text-white":"bg-white/20 border-white/40 text-gray-600 hover:bg-white/30"}`,children:O===q?'<i className="fas fa-check"></i>':""}),e.jsx(X,{placeholder:"Extra template ID",value:F,onChange:be=>{const Be=[...H];Be[q]=be.target.value,Z(Be)},className:"bg-white/20 border-white/30 text-black placeholder:text-gray-600 focus:bg-white/30 transition-colors flex-1"})]}),H.length>1&&e.jsx(R,{type:"button",variant:"outline",size:"sm",onClick:()=>{const be=[...H];be.splice(q,1),Z(be),O!==null&&O>=be.length&&y(be.length>0?Math.max(0,be.length-1):null)},className:"bg-red-500/20 border-red-300 text-red-700 hover:bg-red-500/30",children:e.jsx("i",{className:"fas fa-times-circle"})})]},q)),e.jsx(R,{type:"button",variant:"outline",size:"sm",onClick:()=>{Z([...H,""])},className:"bg-green-500/20 border-green-300 text-green-700 hover:bg-green-500/30 w-full",children:"➕ Add Extra Template"})]})]})]})]})]}),e.jsxs("div",{className:"bg-white/15 backdrop-blur-sm p-4 rounded-lg border border-white/30 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"bg-white text-pink-600 rounded-full w-7 h-7 flex items-center justify-center text-sm font-bold shadow-md",children:"3"}),e.jsx("h4",{className:"font-bold text-black text-base",children:"Content Options"})]}),e.jsx("p",{className:"text-sm text-black font-medium mb-3",children:"What should we automatically add to your posts?"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/20 rounded-lg border border-white/30 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Kn,{className:"w-4 h-4 text-pink-100 drop-shadow-sm"}),e.jsx(I,{className:"text-sm font-semibold text-black",children:"Auto-write captions"})]}),e.jsx(et,{checked:w.autoGenerateCaptions,onCheckedChange:F=>{const q={...w},be={...w,autoGenerateCaptions:F};B(be),Re.mutate(be,{onError:()=>{B(q)}})},disabled:Re.isPending})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/20 rounded-lg border border-white/30 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_a,{className:"w-4 h-4 text-pink-100 drop-shadow-sm"}),e.jsx(I,{className:"text-sm font-semibold text-black",children:"Auto-generate hashtags"})]}),e.jsx(et,{checked:w.autoGenerateHashtags,onCheckedChange:F=>{const q={...w},be={...w,autoGenerateHashtags:F};B(be),Re.mutate(be,{onError:()=>{B(q)}})},disabled:Re.isPending})]})]})]}),e.jsxs("div",{className:"bg-white/15 backdrop-blur-sm p-4 rounded-lg border border-white/30 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"bg-white text-pink-600 rounded-full w-7 h-7 flex items-center justify-center text-sm font-bold shadow-md",children:"4"}),e.jsx("h4",{className:"font-bold text-black text-base",children:"Test or Go Live"})]}),e.jsx("p",{className:"text-sm text-black font-medium mb-3",children:"Test your automation or create content manually:"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(R,{onClick:()=>E.mutate(),disabled:E.isPending||!w.isEnabled,className:"bg-white text-pink-600 hover:bg-pink-50 border-0",children:[E.isPending?e.jsx(Dt,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(mi,{className:"w-4 h-4 mr-2"}),e.jsx("i",{className:"fas fa-flask"})," Test Automation"]}),e.jsxs(R,{variant:"outline",className:"border-white/30 text-white hover:bg-white/10",children:[e.jsx("i",{className:"fas fa-mobile-alt"})," Manual Post"]})]})]})]})})]}),e.jsxs(ee,{className:"bg-gradient-to-r from-purple-200 to-indigo-300 text-black border-0 shadow-xl",children:[e.jsxs(ge,{children:[e.jsxs(fe,{className:"flex items-center gap-2 text-black font-bold text-lg",children:[e.jsx(ar,{className:"w-5 h-5"}),"🧠 Smart Backend Template System"]}),e.jsx(Ne,{className:"text-black font-medium",children:"Universal template library with AI-powered selection and rotation"})]}),e.jsx(ae,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white/20 backdrop-blur-sm p-4 rounded-lg border border-white/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Yt,{className:"w-5 h-5 text-purple-600"}),e.jsx("h4",{className:"font-semibold text-black",children:"Templates"})]}),e.jsx("p",{className:"text-2xl font-bold text-black",children:k.templates.length}),e.jsx("p",{className:"text-sm text-gray-700",children:"Available templates"})]}),e.jsxs("div",{className:"bg-white/20 backdrop-blur-sm p-4 rounded-lg border border-white/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(_a,{className:"w-5 h-5 text-purple-600"}),e.jsx("h4",{className:"font-semibold text-black",children:"Audio Files"})]}),e.jsx("p",{className:"text-2xl font-bold text-black",children:k.audio.length}),e.jsx("p",{className:"text-sm text-gray-700",children:"Background music"})]}),e.jsxs("div",{className:"bg-white/20 backdrop-blur-sm p-4 rounded-lg border border-white/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(sa,{className:"w-5 h-5 text-purple-600"}),e.jsx("h4",{className:"font-semibold text-black",children:"Total Usage"})]}),e.jsx("p",{className:"text-2xl font-bold text-black",children:(f==null?void 0:f.totalUsage)||0}),e.jsx("p",{className:"text-sm text-gray-700",children:"Content generated"})]}),e.jsxs("div",{className:"bg-white/20 backdrop-blur-sm p-4 rounded-lg border border-white/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ra,{className:"w-5 h-5 text-purple-600"}),e.jsx("h4",{className:"font-semibold text-black",children:"Categories"})]}),e.jsx("p",{className:"text-2xl font-bold text-black",children:f?Object.keys(f.categoryDistribution||{}).length:0}),e.jsx("p",{className:"text-sm text-gray-700",children:"Content types"})]})]}),e.jsxs("div",{className:"bg-white/15 backdrop-blur-sm p-4 rounded-lg border border-white/30 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-black text-base mb-1",children:"🎨 Template Library Management"}),e.jsx("p",{className:"text-sm text-black font-medium",children:"Upload templates and audio files to the universal folders"})]}),e.jsx(et,{checked:M,onCheckedChange:S,className:"data-[state=checked]:bg-purple-500"})]}),M&&e.jsxs("div",{className:"space-y-4 mt-4 p-4 bg-white/5 rounded-lg border border-white/10",children:[e.jsxs("div",{className:"bg-white/10 p-4 rounded-lg border border-white/20",children:[e.jsx("h5",{className:"font-semibold text-black mb-2",children:"📁 Upload Instructions:"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm text-black",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium mb-1",children:"🖼️ Templates:"}),e.jsx("p",{children:"Copy image/video files to:"}),e.jsx("code",{className:"bg-black/20 px-2 py-1 rounded text-xs",children:"backend-assets/templates/universal/"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium mb-1",children:"🎵 Audio:"}),e.jsx("p",{children:"Copy music files to:"}),e.jsx("code",{className:"bg-black/20 px-2 py-1 rounded text-xs",children:"backend-assets/audio/universal/"})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs(R,{onClick:()=>pe(),className:"bg-purple-600 hover:bg-purple-700 text-white",children:[e.jsx(hi,{className:"w-4 h-4 mr-2"}),"Test Template Generation"]}),e.jsxs(R,{onClick:()=>$(),variant:"outline",className:"bg-white/10 border-white/30 text-black hover:bg-white/20",children:[e.jsx(Dt,{className:"w-4 h-4 mr-2"}),"Refresh Library"]}),e.jsxs(R,{onClick:()=>W(),variant:"outline",className:"bg-white/10 border-white/30 text-black hover:bg-white/20",children:[e.jsx(sa,{className:"w-4 h-4 mr-2"}),"Update Stats"]})]}),e.jsxs("div",{className:"bg-blue-500/10 p-4 rounded-lg border border-blue-500/20",children:[e.jsx("h5",{className:"font-semibold text-black mb-2",children:"📋 Supported File Extensions:"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm text-black",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium mb-1",children:"🖼️ Template Files:"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.jsx("span",{className:"bg-black/20 px-2 py-1 rounded text-xs",children:".jpg"}),e.jsx("span",{className:"bg-black/20 px-2 py-1 rounded text-xs",children:".jpeg"}),e.jsx("span",{className:"bg-black/20 px-2 py-1 rounded text-xs",children:".png"}),e.jsx("span",{className:"bg-black/20 px-2 py-1 rounded text-xs",children:".gif"}),e.jsx("span",{className:"bg-black/20 px-2 py-1 rounded text-xs",children:".webp"}),e.jsx("span",{className:"bg-black/20 px-2 py-1 rounded text-xs",children:".svg"}),e.jsx("span",{className:"bg-black/20 px-2 py-1 rounded text-xs",children:".mp4"}),e.jsx("span",{className:"bg-black/20 px-2 py-1 rounded text-xs",children:".webm"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium mb-1",children:"🎵 Audio Files:"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.jsx("span",{className:"bg-black/20 px-2 py-1 rounded text-xs",children:".mp3"}),e.jsx("span",{className:"bg-black/20 px-2 py-1 rounded text-xs",children:".wav"}),e.jsx("span",{className:"bg-black/20 px-2 py-1 rounded text-xs",children:".ogg"}),e.jsx("span",{className:"bg-black/20 px-2 py-1 rounded text-xs",children:".m4a"}),e.jsx("span",{className:"bg-black/20 px-2 py-1 rounded text-xs",children:".aac"}),e.jsx("span",{className:"bg-black/20 px-2 py-1 rounded text-xs",children:".flac"})]})]})]})]}),k.templates.length>0&&e.jsxs("div",{className:"bg-white/10 p-4 rounded-lg border border-white/20",children:[e.jsx("h5",{className:"font-semibold text-black mb-3",children:"📚 Template Library:"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:k.templates.slice(0,8).map((F,q)=>{var be;return e.jsxs("div",{className:"bg-white/20 p-3 rounded-lg border border-white/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Yt,{className:"w-4 h-4 text-purple-600"}),e.jsx("span",{className:"text-xs font-medium text-black truncate",children:F.filename||`Template ${q+1}`})]}),e.jsxs("div",{className:"text-xs text-gray-700",children:[e.jsxs("p",{children:["Style: ",((be=F.characteristics)==null?void 0:be.style)||"Unknown"]}),e.jsxs("p",{children:["Type: ",F.type||"image"]})]})]},F.id||q)})}),k.templates.length>8&&e.jsxs("p",{className:"text-sm text-gray-700 mt-2 text-center",children:["+",k.templates.length-8," more templates"]})]}),k.audio.length>0&&e.jsxs("div",{className:"bg-white/10 p-4 rounded-lg border border-white/20",children:[e.jsx("h5",{className:"font-semibold text-black mb-3",children:"🎵 Audio Library:"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:k.audio.slice(0,6).map((F,q)=>{var be;return e.jsxs("div",{className:"bg-white/20 p-3 rounded-lg border border-white/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(_a,{className:"w-4 h-4 text-purple-600"}),e.jsx("span",{className:"text-xs font-medium text-black truncate",children:F.filename||`Audio ${q+1}`})]}),e.jsxs("div",{className:"text-xs text-gray-700",children:[e.jsxs("p",{children:["Genre: ",((be=F.characteristics)==null?void 0:be.genre)||"Unknown"]}),e.jsxs("p",{children:["Duration: ",F.duration||0,"s"]})]})]},F.id||q)})}),k.audio.length>6&&e.jsxs("p",{className:"text-sm text-gray-700 mt-2 text-center",children:["+",k.audio.length-6," more audio files"]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-500/20 to-indigo-500/20 p-4 rounded-lg border border-white/30",children:[e.jsx("h5",{className:"font-semibold text-black mb-2",children:"🧠 Smart Features:"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm text-black",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium mb-1",children:"✨ AI-Powered Selection:"}),e.jsx("p",{children:"Automatically matches templates to product categories, colors, and mood"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium mb-1",children:"🔄 Smart Rotation:"}),e.jsx("p",{children:"Prevents repetition by rotating templates and tracking usage history"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium mb-1",children:"📊 Performance Learning:"}),e.jsx("p",{children:"Learns from engagement metrics to improve future selections"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium mb-1",children:"🎯 Universal Compatibility:"}),e.jsx("p",{children:"Works with any content type - no category folders needed"})]})]})]})]})]})]})})]}),e.jsxs(ee,{children:[e.jsxs(ge,{children:[e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(Xe,{className:"w-5 h-5"}),"Create Automation Task"]}),e.jsx(Ne,{children:"Set up automated tasks to streamline your workflow"})]}),e.jsx(ae,{children:i?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"taskName",children:"Task Name"}),e.jsx(X,{id:"taskName",value:l.name,onChange:F=>o({...l,name:F.target.value}),placeholder:"e.g., Daily Price Updates"})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"taskType",children:"Task Type"}),e.jsxs(Le,{value:l.type,onValueChange:F=>o({...l,type:F}),children:[e.jsx(Ue,{children:e.jsx(Ve,{})}),e.jsxs($e,{children:[e.jsx(ue,{value:"product_sync",children:"Product Sync"}),e.jsx(ue,{value:"price_update",children:"Price Update"}),e.jsx(ue,{value:"email_campaign",children:"Email Campaign"}),e.jsx(ue,{value:"content_generation",children:"Content Generation"}),e.jsx(ue,{value:"analytics",children:"Analytics"}),e.jsx(ue,{value:"backup",children:"Backup"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"taskDescription",children:"Description"}),e.jsx(X,{id:"taskDescription",value:l.description,onChange:F=>o({...l,description:F.target.value}),placeholder:"Describe what this automation task will do"})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"taskSchedule",children:"Schedule"}),e.jsxs(Le,{value:l.schedule,onValueChange:F=>o({...l,schedule:F}),children:[e.jsx(Ue,{children:e.jsx(Ve,{})}),e.jsxs($e,{children:[e.jsx(ue,{value:"hourly",children:"Every Hour"}),e.jsx(ue,{value:"every-6-hours",children:"Every 6 Hours"}),e.jsx(ue,{value:"every-12-hours",children:"Every 12 Hours"}),e.jsx(ue,{value:"daily",children:"Daily"}),e.jsx(ue,{value:"weekly",children:"Weekly"}),e.jsx(ue,{value:"monthly",children:"Monthly"})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{onClick:oe,disabled:g.isPending,className:"bg-green-600 hover:bg-green-700",children:g.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Dt,{className:"w-4 h-4 mr-2 animate-spin"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ds,{className:"w-4 h-4 mr-2"}),"Create Task"]})}),e.jsx(R,{variant:"outline",onClick:()=>n(!1),children:"Cancel"})]})]}):e.jsxs(R,{onClick:()=>n(!0),className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Xe,{className:"w-4 h-4 mr-2"}),"New Automation Task"]})})]}),e.jsxs(ee,{className:"bg-gradient-to-r from-indigo-200 to-purple-300 text-black border-0 shadow-xl",children:[e.jsxs(ge,{children:[e.jsxs(fe,{className:"flex items-center gap-2 text-black font-bold text-lg",children:[e.jsx(Qs,{className:"w-5 h-5"}),e.jsx("i",{className:"fas fa-robot"})," Automation Tasks (",a.length,")"]}),e.jsx(Ne,{className:"text-black font-medium",children:"Manage your automated workflows and schedules"})]}),e.jsx(ae,{children:e.jsx("div",{className:"space-y-4",children:a.map(F=>e.jsx("div",{className:"bg-white/10 backdrop-blur-sm border border-white/20 rounded-lg p-4 hover:bg-white/15 transition-all duration-300",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${F.status==="active"?"bg-green-400":F.status==="paused"?"bg-yellow-400":"bg-red-400"} mt-2`}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"text-black",children:xe(F.type)}),e.jsx("h3",{className:"font-semibold text-black",children:F.name}),e.jsx(we,{className:`${F.status==="active"?"bg-green-500 text-white":F.status==="paused"?"bg-yellow-500 text-white":"bg-red-500 text-white"} border-0`,children:F.status})]}),e.jsx("p",{className:"text-sm text-black mb-3",children:F.description}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-black",children:"Schedule:"}),e.jsx("p",{className:"font-medium text-black",children:F.schedule})]}),F.lastRun&&e.jsxs("div",{children:[e.jsx("span",{className:"text-black",children:"Last Run:"}),e.jsx("p",{className:"font-medium text-black",children:qe(F.lastRun)})]}),F.nextRun&&e.jsxs("div",{children:[e.jsx("span",{className:"text-black",children:"Next Run:"}),e.jsx("p",{className:"font-medium text-black",children:qe(F.nextRun)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-black",children:"Success Rate:"}),e.jsxs("p",{className:"font-medium text-black",children:[F.successRate,"%"]})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsx(R,{size:"sm",onClick:()=>V(F.id,F.status),disabled:ie.isPending,className:`${F.status==="active"?"bg-yellow-500 hover:bg-yellow-600 text-white":"bg-green-500 hover:bg-green-600 text-white"} border-0`,children:F.status==="active"?e.jsxs(e.Fragment,{children:[e.jsx(dc,{className:"w-4 h-4 mr-1"}),"Pause"]}):e.jsxs(e.Fragment,{children:[e.jsx(uc,{className:"w-4 h-4 mr-1"}),"Start"]})}),e.jsxs(R,{size:"sm",className:"bg-blue-500 hover:bg-blue-600 text-white border-0",children:[e.jsx(St,{className:"w-4 h-4 mr-1"}),"Configure"]})]})]})},F.id))})})]}),e.jsxs(ee,{className:"bg-gradient-to-r from-blue-200 to-cyan-300 text-black border-0 shadow-xl",children:[e.jsxs(ge,{children:[e.jsxs(fe,{className:"flex items-center gap-2 text-black font-bold text-lg",children:[e.jsx(hi,{className:"w-5 h-5"}),e.jsx("i",{className:"fas fa-bolt"})," Quick Setup Templates"]}),e.jsx(Ne,{className:"text-black font-medium",children:"Pre-configured automation templates for common tasks"})]}),e.jsx(ae,{children:e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg p-4 hover:shadow-lg transition-all duration-300 cursor-pointer transform hover:scale-105",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ra,{className:"w-5 h-5 text-blue-100"}),e.jsx("h4",{className:"font-semibold text-white",children:"Price Monitoring"})]}),e.jsx("p",{className:"text-sm text-blue-100 mb-3",children:"Monitor product prices and update automatically"}),e.jsx(R,{size:"sm",className:"w-full bg-white text-blue-600 hover:bg-blue-50 border-0",children:"Setup Now"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-lg p-4 hover:shadow-lg transition-all duration-300 cursor-pointer transform hover:scale-105",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(pi,{className:"w-5 h-5 text-green-100"}),e.jsx("h4",{className:"font-semibold text-white",children:"Email Campaigns"})]}),e.jsx("p",{className:"text-sm text-green-100 mb-3",children:"Automated email marketing and newsletters"}),e.jsx(R,{size:"sm",className:"w-full bg-white text-green-600 hover:bg-green-50 border-0",children:"Setup Now"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg p-4 hover:shadow-lg transition-all duration-300 cursor-pointer transform hover:scale-105",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Qs,{className:"w-5 h-5 text-purple-100"}),e.jsx("h4",{className:"font-semibold text-white",children:"Content Generation"})]}),e.jsx("p",{className:"text-sm text-purple-100 mb-3",children:"AI-powered content creation and optimization"}),e.jsx(R,{size:"sm",className:"w-full bg-white text-purple-600 hover:bg-purple-50 border-0",children:"Setup Now"})]})]})})]}),d&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Add Custom Platform"}),e.jsx(R,{onClick:()=>m(!1),variant:"ghost",size:"sm",className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"platform-name",className:"text-sm font-medium text-gray-700",children:"Platform Name *"}),e.jsx(X,{id:"platform-name",placeholder:"e.g., Discord, Reddit, TikTok",value:h.name,onChange:F=>p(q=>({...q,name:F.target.value,key:F.target.value.toLowerCase().replace(/\s+/g,"_")})),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"platform-key",className:"text-sm font-medium text-gray-700",children:"Platform Key *"}),e.jsx(X,{id:"platform-key",placeholder:"e.g., discord, reddit, tiktok",value:h.key,onChange:F=>p(q=>({...q,key:F.target.value.toLowerCase().replace(/\s+/g,"_")})),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"api-url",className:"text-sm font-medium text-gray-700",children:"API URL"}),e.jsx(X,{id:"api-url",placeholder:"https://api.platform.com/v1/",value:h.apiUrl,onChange:F=>p(q=>({...q,apiUrl:F.target.value})),className:"mt-1"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"api-key",className:"text-sm font-medium text-gray-700",children:"API Key"}),e.jsx(X,{id:"api-key",placeholder:"Your API key",value:h.apiKey,onChange:F=>p(q=>({...q,apiKey:F.target.value})),className:"mt-1",type:"password"})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"api-secret",className:"text-sm font-medium text-gray-700",children:"API Secret"}),e.jsx(X,{id:"api-secret",placeholder:"Your API secret",value:h.apiSecret,onChange:F=>p(q=>({...q,apiSecret:F.target.value})),className:"mt-1",type:"password"})]})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"webhook-url",className:"text-sm font-medium text-gray-700",children:"Webhook URL (Optional)"}),e.jsx(X,{id:"webhook-url",placeholder:"https://hooks.platform.com/webhook",value:h.webhookUrl,onChange:F=>p(q=>({...q,webhookUrl:F.target.value})),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(I,{className:"text-sm font-medium text-gray-700",children:"Icon Color"}),e.jsxs(Le,{value:h.color,onValueChange:F=>p(q=>({...q,color:F})),children:[e.jsx(Ue,{className:"mt-1",children:e.jsx(Ve,{})}),e.jsxs($e,{children:[e.jsx(ue,{value:"text-purple-300",children:"Purple"}),e.jsx(ue,{value:"text-pink-300",children:"Pink"}),e.jsx(ue,{value:"text-blue-300",children:"Blue"}),e.jsx(ue,{value:"text-green-300",children:"Green"}),e.jsx(ue,{value:"text-yellow-300",children:"Yellow"}),e.jsx(ue,{value:"text-red-300",children:"Red"}),e.jsx(ue,{value:"text-orange-300",children:"Orange"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx(R,{onClick:()=>m(!1),variant:"outline",children:"Cancel"}),e.jsx(R,{onClick:A,className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Add Platform"})]})]})})]})}function it(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var Bd=typeof Symbol=="function"&&Symbol.observable||"@@observable",Xi=Bd,Zi=()=>Math.random().toString(36).substring(7).split("").join("."),Md={INIT:`@@redux/INIT${Zi()}`,REPLACE:`@@redux/REPLACE${Zi()}`},Ji=Md;function Ld(t){if(typeof t!="object"||t===null)return!1;let s=t;for(;Object.getPrototypeOf(s)!==null;)s=Object.getPrototypeOf(s);return Object.getPrototypeOf(t)===s||Object.getPrototypeOf(t)===null}function El(t,s,a){if(typeof t!="function")throw new Error(it(2));if(typeof s=="function"&&typeof a=="function"||typeof a=="function"&&typeof arguments[3]=="function")throw new Error(it(0));if(typeof s=="function"&&typeof a>"u"&&(a=s,s=void 0),typeof a<"u"){if(typeof a!="function")throw new Error(it(1));return a(El)(t,s)}let r=t,i=s,n=new Map,l=n,o=0,c=!1;function u(){l===n&&(l=new Map,n.forEach((f,T)=>{l.set(T,f)}))}function d(){if(c)throw new Error(it(3));return i}function m(f){if(typeof f!="function")throw new Error(it(4));if(c)throw new Error(it(5));let T=!0;u();const M=o++;return l.set(M,f),function(){if(T){if(c)throw new Error(it(6));T=!1,u(),l.delete(M),n=null}}}function h(f){if(!Ld(f))throw new Error(it(7));if(typeof f.type>"u")throw new Error(it(8));if(typeof f.type!="string")throw new Error(it(17));if(c)throw new Error(it(9));try{c=!0,i=r(i,f)}finally{c=!1}return(n=l).forEach(M=>{M()}),f}function p(f){if(typeof f!="function")throw new Error(it(10));r=f,h({type:Ji.REPLACE})}function k(){const f=m;return{subscribe(T){if(typeof T!="object"||T===null)throw new Error(it(11));function M(){const w=T;w.next&&w.next(d())}return M(),{unsubscribe:f(M)}},[Xi](){return this}}}return h({type:Ji.INIT}),{dispatch:h,subscribe:m,getState:d,replaceReducer:p,[Xi]:k}}function Yi(t,s){return function(...a){return s(t.apply(this,a))}}function en(t,s){if(typeof t=="function")return Yi(t,s);if(typeof t!="object"||t===null)throw new Error(it(16));const a={};for(const r in t){const i=t[r];typeof i=="function"&&(a[r]=Yi(i,s))}return a}function Fl(...t){return t.length===0?s=>s:t.length===1?t[0]:t.reduce((s,a)=>(...r)=>s(a(...r)))}function Ud(...t){return s=>(a,r)=>{const i=s(a,r);let n=()=>{throw new Error(it(15))};const l={getState:i.getState,dispatch:(c,...u)=>n(c,...u)},o=t.map(c=>c(l));return n=Fl(...o)(i.dispatch),{...i,dispatch:n}}}var Vd={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ws=P;function $d(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var qd=typeof Object.is=="function"?Object.is:$d,Gd=Ws.useSyncExternalStore,Wd=Ws.useRef,zd=Ws.useEffect,Kd=Ws.useMemo,Hd=Ws.useDebugValue;Vd.useSyncExternalStoreWithSelector=function(t,s,a,r,i){var n=Wd(null);if(n.current===null){var l={hasValue:!1,value:null};n.current=l}else l=n.current;n=Kd(function(){function c(p){if(!u){if(u=!0,d=p,p=r(p),i!==void 0&&l.hasValue){var k=l.value;if(i(k,p))return m=k}return m=p}if(k=m,qd(d,p))return k;var _=r(p);return i!==void 0&&i(k,_)?(d=p,k):(d=p,m=_)}var u=!1,d,m,h=a===void 0?null:a;return[function(){return c(s())},h===null?void 0:function(){return c(h())}]},[s,a,r,i]);var o=Gd(t,n[0],n[1]);return zd(function(){l.hasValue=!0,l.value=o},[o]),Hd(o),o};var Qd=P.version.startsWith("19"),Xd=Symbol.for(Qd?"react.transitional.element":"react.element"),Zd=Symbol.for("react.portal"),Jd=Symbol.for("react.fragment"),Yd=Symbol.for("react.strict_mode"),eu=Symbol.for("react.profiler"),tu=Symbol.for("react.consumer"),su=Symbol.for("react.context"),Dl=Symbol.for("react.forward_ref"),au=Symbol.for("react.suspense"),ru=Symbol.for("react.suspense_list"),_r=Symbol.for("react.memo"),iu=Symbol.for("react.lazy"),nu=Dl,lu=_r;function ou(t){if(typeof t=="object"&&t!==null){const{$$typeof:s}=t;switch(s){case Xd:switch(t=t.type,t){case Jd:case eu:case Yd:case au:case ru:return t;default:switch(t=t&&t.$$typeof,t){case su:case Dl:case iu:case _r:return t;case tu:return t;default:return s}}case Zd:return s}}}function cu(t){return ou(t)===_r}function du(t,s,a,r,{areStatesEqual:i,areOwnPropsEqual:n,areStatePropsEqual:l}){let o=!1,c,u,d,m,h;function p(M,S){return c=M,u=S,d=t(c,u),m=s(r,u),h=a(d,m,u),o=!0,h}function k(){return d=t(c,u),s.dependsOnOwnProps&&(m=s(r,u)),h=a(d,m,u),h}function _(){return t.dependsOnOwnProps&&(d=t(c,u)),s.dependsOnOwnProps&&(m=s(r,u)),h=a(d,m,u),h}function f(){const M=t(c,u),S=!l(M,d);return d=M,S&&(h=a(d,m,u)),h}function T(M,S){const w=!n(S,u),B=!i(M,c,S,u);return c=M,u=S,w&&B?k():w?_():B?f():h}return function(S,w){return o?T(S,w):p(S,w)}}function uu(t,{initMapStateToProps:s,initMapDispatchToProps:a,initMergeProps:r,...i}){const n=s(t,i),l=a(t,i),o=r(t,i);return du(n,l,o,t,i)}function mu(t,s){const a={};for(const r in t){const i=t[r];typeof i=="function"&&(a[r]=(...n)=>s(i(...n)))}return a}function hr(t){return function(a){const r=t(a);function i(){return r}return i.dependsOnOwnProps=!1,i}}function tn(t){return t.dependsOnOwnProps?!!t.dependsOnOwnProps:t.length!==1}function Il(t,s){return function(r,{displayName:i}){const n=function(o,c){return n.dependsOnOwnProps?n.mapToProps(o,c):n.mapToProps(o,void 0)};return n.dependsOnOwnProps=!0,n.mapToProps=function(o,c){n.mapToProps=t,n.dependsOnOwnProps=tn(t);let u=n(o,c);return typeof u=="function"&&(n.mapToProps=u,n.dependsOnOwnProps=tn(u),u=n(o,c)),u},n}}function Rr(t,s){return(a,r)=>{throw new Error(`Invalid value of type ${typeof t} for ${s} argument when connecting component ${r.wrappedComponentName}.`)}}function hu(t){return t&&typeof t=="object"?hr(s=>mu(t,s)):t?typeof t=="function"?Il(t):Rr(t,"mapDispatchToProps"):hr(s=>({dispatch:s}))}function pu(t){return t?typeof t=="function"?Il(t):Rr(t,"mapStateToProps"):hr(()=>({}))}function gu(t,s,a){return{...a,...t,...s}}function fu(t){return function(a,{displayName:r,areMergedPropsEqual:i}){let n=!1,l;return function(c,u,d){const m=t(c,u,d);return n?i(m,l)||(l=m):(n=!0,l=m),l}}}function xu(t){return t?typeof t=="function"?fu(t):Rr(t,"mergeProps"):()=>gu}function bu(t){t()}function yu(){let t=null,s=null;return{clear(){t=null,s=null},notify(){bu(()=>{let a=t;for(;a;)a.callback(),a=a.next})},get(){const a=[];let r=t;for(;r;)a.push(r),r=r.next;return a},subscribe(a){let r=!0;const i=s={callback:a,next:null,prev:s};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:s=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var sn={notify(){},get:()=>[]};function _l(t,s){let a,r=sn,i=0,n=!1;function l(_){d();const f=r.subscribe(_);let T=!1;return()=>{T||(T=!0,f(),m())}}function o(){r.notify()}function c(){k.onStateChange&&k.onStateChange()}function u(){return n}function d(){i++,a||(a=s?s.addNestedSub(c):t.subscribe(c),r=yu())}function m(){i--,a&&i===0&&(a(),a=void 0,r.clear(),r=sn)}function h(){n||(n=!0,d())}function p(){n&&(n=!1,m())}const k={addNestedSub:l,notifyNestedSubs:o,handleChangeWrapper:c,isSubscribed:u,trySubscribe:h,tryUnsubscribe:p,getListeners:()=>r};return k}var vu=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ju=vu(),wu=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Nu=wu(),ku=()=>ju||Nu?P.useLayoutEffect:P.useEffect,ha=ku();function an(t,s){return t===s?t!==0||s!==0||1/t===1/s:t!==t&&s!==s}function $a(t,s){if(an(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;const a=Object.keys(t),r=Object.keys(s);if(a.length!==r.length)return!1;for(let i=0;i<a.length;i++)if(!Object.prototype.hasOwnProperty.call(s,a[i])||!an(t[a[i]],s[a[i]]))return!1;return!0}var Cu={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Su={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Au={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Rl={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Pu={[nu]:Au,[lu]:Rl};function rn(t){return cu(t)?Rl:Pu[t.$$typeof]||Cu}var Tu=Object.defineProperty,Eu=Object.getOwnPropertyNames,nn=Object.getOwnPropertySymbols,Fu=Object.getOwnPropertyDescriptor,Du=Object.getPrototypeOf,ln=Object.prototype;function pr(t,s){if(typeof s!="string"){if(ln){const n=Du(s);n&&n!==ln&&pr(t,n)}let a=Eu(s);nn&&(a=a.concat(nn(s)));const r=rn(t),i=rn(s);for(let n=0;n<a.length;++n){const l=a[n];if(!Su[l]&&!(i&&i[l])&&!(r&&r[l])){const o=Fu(s,l);try{Tu(t,l,o)}catch{}}}}return t}var qa=Symbol.for("react-redux-context"),Ga=typeof globalThis<"u"?globalThis:{};function Iu(){if(!P.createContext)return{};const t=Ga[qa]??(Ga[qa]=new Map);let s=t.get(P.createContext);return s||(s=P.createContext(null),t.set(P.createContext,s)),s}var Ol=Iu(),_u=[null,null];function Ru(t,s,a){ha(()=>t(...s),a)}function Ou(t,s,a,r,i,n){t.current=r,a.current=!1,i.current&&(i.current=null,n())}function Bu(t,s,a,r,i,n,l,o,c,u,d){if(!t)return()=>{};let m=!1,h=null;const p=()=>{if(m||!o.current)return;const _=s.getState();let f,T;try{f=r(_,i.current)}catch(M){T=M,h=M}T||(h=null),f===n.current?l.current||u():(n.current=f,c.current=f,l.current=!0,d())};return a.onStateChange=p,a.trySubscribe(),p(),()=>{if(m=!0,a.tryUnsubscribe(),a.onStateChange=null,h)throw h}}function Mu(t,s){return t===s}function Lu(t,s,a,{pure:r,areStatesEqual:i=Mu,areOwnPropsEqual:n=$a,areStatePropsEqual:l=$a,areMergedPropsEqual:o=$a,forwardRef:c=!1,context:u=Ol}={}){const d=u,m=pu(t),h=hu(s),p=xu(a),k=!!t;return f=>{const T=f.displayName||f.name||"Component",M=`Connect(${T})`,S={shouldHandleStateChanges:k,displayName:M,wrappedComponentName:T,WrappedComponent:f,initMapStateToProps:m,initMapDispatchToProps:h,initMergeProps:p,areStatesEqual:i,areStatePropsEqual:l,areOwnPropsEqual:n,areMergedPropsEqual:o};function w(C){const[j,K,H]=P.useMemo(()=>{const{reactReduxForwardedRef:F,...q}=C;return[C.context,F,q]},[C]),Z=P.useMemo(()=>{let F=d;return j!=null&&j.Consumer,F},[j,d]),v=P.useContext(Z),G=!!C.store&&!!C.store.getState&&!!C.store.dispatch,O=!!v&&!!v.store,y=G?C.store:v.store,A=O?v.getServerState:y.getState,$=P.useMemo(()=>uu(y.dispatch,S),[y]),[W,pe]=P.useMemo(()=>{if(!k)return _u;const F=_l(y,G?void 0:v.subscription),q=F.notifyNestedSubs.bind(F);return[F,q]},[y,G,v]),De=P.useMemo(()=>G?v:{...v,subscription:W},[G,v,W]),We=P.useRef(void 0),Te=P.useRef(H),Me=P.useRef(void 0),Re=P.useRef(!1),E=P.useRef(!1),ie=P.useRef(void 0);ha(()=>(E.current=!0,()=>{E.current=!1}),[]);const g=P.useMemo(()=>()=>Me.current&&H===Te.current?Me.current:$(y.getState(),H),[y,H]),V=P.useMemo(()=>q=>W?Bu(k,y,W,$,Te,We,Re,E,Me,pe,q):()=>{},[W]);Ru(Ou,[Te,We,Re,H,Me,pe]);let oe;try{oe=P.useSyncExternalStore(V,g,A?()=>$(A(),H):g)}catch(F){throw ie.current&&(F.message+=`
The error may be correlated with this previous error:
${ie.current.stack}

`),F}ha(()=>{ie.current=void 0,Me.current=void 0,We.current=oe});const xe=P.useMemo(()=>P.createElement(f,{...oe,ref:K}),[K,f,oe]);return P.useMemo(()=>k?P.createElement(Z.Provider,{value:De},xe):xe,[Z,xe,De])}const b=P.memo(w);if(b.WrappedComponent=f,b.displayName=w.displayName=M,c){const j=P.forwardRef(function(H,Z){return P.createElement(b,{...H,reactReduxForwardedRef:Z})});return j.displayName=M,j.WrappedComponent=f,pr(j,f)}return pr(b,f)}}var Bl=Lu;function Uu(t){const{children:s,context:a,serverState:r,store:i}=t,n=P.useMemo(()=>{const c=_l(i);return{store:i,subscription:c,getServerState:r?()=>r:void 0}},[i,r]),l=P.useMemo(()=>i.getState(),[i]);ha(()=>{const{subscription:c}=n;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),l!==i.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[n,l]);const o=a||Ol;return P.createElement(o.Provider,{value:n},s)}var Vu=Uu,$u="Invariant failed";function qu(t,s){throw new Error($u)}var Ct=function(s){var a=s.top,r=s.right,i=s.bottom,n=s.left,l=r-n,o=i-a,c={top:a,right:r,bottom:i,left:n,width:l,height:o,x:n,y:a,center:{x:(r+n)/2,y:(i+a)/2}};return c},Or=function(s,a){return{top:s.top-a.top,left:s.left-a.left,bottom:s.bottom+a.bottom,right:s.right+a.right}},on=function(s,a){return{top:s.top+a.top,left:s.left+a.left,bottom:s.bottom-a.bottom,right:s.right-a.right}},Gu=function(s,a){return{top:s.top+a.y,left:s.left+a.x,bottom:s.bottom+a.y,right:s.right+a.x}},Wa={top:0,right:0,bottom:0,left:0},Br=function(s){var a=s.borderBox,r=s.margin,i=r===void 0?Wa:r,n=s.border,l=n===void 0?Wa:n,o=s.padding,c=o===void 0?Wa:o,u=Ct(Or(a,i)),d=Ct(on(a,l)),m=Ct(on(d,c));return{marginBox:u,borderBox:Ct(a),paddingBox:d,contentBox:m,margin:i,border:l,padding:c}},xt=function(s){var a=s.slice(0,-2),r=s.slice(-2);if(r!=="px")return 0;var i=Number(a);return isNaN(i)&&qu(),i},Wu=function(){return{x:window.pageXOffset,y:window.pageYOffset}},pa=function(s,a){var r=s.borderBox,i=s.border,n=s.margin,l=s.padding,o=Gu(r,a);return Br({borderBox:o,border:i,margin:n,padding:l})},ga=function(s,a){return a===void 0&&(a=Wu()),pa(s,a)},Ml=function(s,a){var r={top:xt(a.marginTop),right:xt(a.marginRight),bottom:xt(a.marginBottom),left:xt(a.marginLeft)},i={top:xt(a.paddingTop),right:xt(a.paddingRight),bottom:xt(a.paddingBottom),left:xt(a.paddingLeft)},n={top:xt(a.borderTopWidth),right:xt(a.borderRightWidth),bottom:xt(a.borderBottomWidth),left:xt(a.borderLeftWidth)};return Br({borderBox:s,margin:r,padding:i,border:n})},Ll=function(s){var a=s.getBoundingClientRect(),r=window.getComputedStyle(s);return Ml(a,r)},Os=function(s){var a=[],r=null,i=function(){for(var l=arguments.length,o=new Array(l),c=0;c<l;c++)o[c]=arguments[c];a=o,!r&&(r=requestAnimationFrame(function(){r=null,s.apply(void 0,a)}))};return i.cancel=function(){r&&(cancelAnimationFrame(r),r=null)},i};function fa(){return fa=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)({}).hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},fa.apply(null,arguments)}function Ul(t,s){}Ul.bind(null,"warn");Ul.bind(null,"error");function qt(){}function zu(t,s){return{...t,...s}}function yt(t,s,a){const r=s.map(i=>{const n=zu(a,i.options);return t.addEventListener(i.eventName,i.fn,n),function(){t.removeEventListener(i.eventName,i.fn,n)}});return function(){r.forEach(n=>{n()})}}const Ku="Invariant failed";class xa extends Error{}xa.prototype.toString=function(){return this.message};function Y(t,s){throw new xa(Ku)}class Hu extends Ae.Component{constructor(...s){super(...s),this.callbacks=null,this.unbind=qt,this.onWindowError=a=>{const r=this.getCallbacks();r.isDragging()&&r.tryAbort(),a.error instanceof xa&&a.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=a=>{this.callbacks=a}}componentDidMount(){this.unbind=yt(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(s){if(s instanceof xa){this.setState({});return}throw s}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const Qu=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,ba=t=>t+1,Xu=t=>`
  You have lifted an item in position ${ba(t.source.index)}
`,Vl=(t,s)=>{const a=t.droppableId===s.droppableId,r=ba(t.index),i=ba(s.index);return a?`
      You have moved the item from position ${r}
      to position ${i}
    `:`
    You have moved the item from position ${r}
    in list ${t.droppableId}
    to list ${s.droppableId}
    in position ${i}
  `},$l=(t,s,a)=>s.droppableId===a.droppableId?`
      The item ${t}
      has been combined with ${a.draggableId}`:`
      The item ${t}
      in list ${s.droppableId}
      has been combined with ${a.draggableId}
      in list ${a.droppableId}
    `,Zu=t=>{const s=t.destination;if(s)return Vl(t.source,s);const a=t.combine;return a?$l(t.draggableId,t.source,a):"You are over an area that cannot be dropped on"},cn=t=>`
  The item has returned to its starting position
  of ${ba(t.index)}
`,Ju=t=>{if(t.reason==="CANCEL")return`
      Movement cancelled.
      ${cn(t.source)}
    `;const s=t.destination,a=t.combine;return s?`
      You have dropped the item.
      ${Vl(t.source,s)}
    `:a?`
      You have dropped the item.
      ${$l(t.draggableId,t.source,a)}
    `:`
    The item has been dropped while not over a drop area.
    ${cn(t.source)}
  `},ra={dragHandleUsageInstructions:Qu,onDragStart:Xu,onDragUpdate:Zu,onDragEnd:Ju};function Yu(t,s){return!!(t===s||Number.isNaN(t)&&Number.isNaN(s))}function ql(t,s){if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(!Yu(t[a],s[a]))return!1;return!0}function Pe(t,s){const a=P.useState(()=>({inputs:s,result:t()}))[0],r=P.useRef(!0),i=P.useRef(a),l=r.current||!!(s&&i.current.inputs&&ql(s,i.current.inputs))?i.current:{inputs:s,result:t()};return P.useEffect(()=>{r.current=!1,i.current=l},[l]),l.result}function me(t,s){return Pe(()=>t,s)}const st={x:0,y:0},at=(t,s)=>({x:t.x+s.x,y:t.y+s.y}),ut=(t,s)=>({x:t.x-s.x,y:t.y-s.y}),Gt=(t,s)=>t.x===s.x&&t.y===s.y,fs=t=>({x:t.x!==0?-t.x:0,y:t.y!==0?-t.y:0}),ts=(t,s,a=0)=>t==="x"?{x:s,y:a}:{x:a,y:s},Bs=(t,s)=>Math.sqrt((s.x-t.x)**2+(s.y-t.y)**2),dn=(t,s)=>Math.min(...s.map(a=>Bs(t,a))),Gl=t=>s=>({x:t(s.x),y:t(s.y)});var em=(t,s)=>{const a=Ct({top:Math.max(s.top,t.top),right:Math.min(s.right,t.right),bottom:Math.min(s.bottom,t.bottom),left:Math.max(s.left,t.left)});return a.width<=0||a.height<=0?null:a};const zs=(t,s)=>({top:t.top+s.y,left:t.left+s.x,bottom:t.bottom+s.y,right:t.right+s.x}),un=t=>[{x:t.left,y:t.top},{x:t.right,y:t.top},{x:t.left,y:t.bottom},{x:t.right,y:t.bottom}],tm={top:0,right:0,bottom:0,left:0},sm=(t,s)=>s?zs(t,s.scroll.diff.displacement):t,am=(t,s,a)=>a&&a.increasedBy?{...t,[s.end]:t[s.end]+a.increasedBy[s.line]}:t,rm=(t,s)=>s&&s.shouldClipSubject?em(s.pageMarginBox,t):Ct(t);var hs=({page:t,withPlaceholder:s,axis:a,frame:r})=>{const i=sm(t.marginBox,r),n=am(i,a,s),l=rm(n,r);return{page:t,withPlaceholder:s,active:l}},Mr=(t,s)=>{t.frame||Y();const a=t.frame,r=ut(s,a.scroll.initial),i=fs(r),n={...a,scroll:{initial:a.scroll.initial,current:s,diff:{value:r,displacement:i},max:a.scroll.max}},l=hs({page:t.subject.page,withPlaceholder:t.subject.withPlaceholder,axis:t.axis,frame:n});return{...t,frame:n,subject:l}};function tt(t,s=ql){let a=null;function r(...i){if(a&&a.lastThis===this&&s(i,a.lastArgs))return a.lastResult;const n=t.apply(this,i);return a={lastResult:n,lastArgs:i,lastThis:this},n}return r.clear=function(){a=null},r}const Wl=tt(t=>t.reduce((s,a)=>(s[a.descriptor.id]=a,s),{})),zl=tt(t=>t.reduce((s,a)=>(s[a.descriptor.id]=a,s),{})),Ca=tt(t=>Object.values(t)),im=tt(t=>Object.values(t));var xs=tt((t,s)=>im(s).filter(r=>t===r.descriptor.droppableId).sort((r,i)=>r.descriptor.index-i.descriptor.index));function Lr(t){return t.at&&t.at.type==="REORDER"?t.at.destination:null}function Sa(t){return t.at&&t.at.type==="COMBINE"?t.at.combine:null}var Aa=tt((t,s)=>s.filter(a=>a.descriptor.id!==t.descriptor.id)),nm=({isMovingForward:t,draggable:s,destination:a,insideDestination:r,previousImpact:i})=>{if(!a.isCombineEnabled||!Lr(i))return null;function l(p){const k={type:"COMBINE",combine:{draggableId:p,droppableId:a.descriptor.id}};return{...i,at:k}}const o=i.displaced.all,c=o.length?o[0]:null;if(t)return c?l(c):null;const u=Aa(s,r);if(!c){if(!u.length)return null;const p=u[u.length-1];return l(p.descriptor.id)}const d=u.findIndex(p=>p.descriptor.id===c);d===-1&&Y();const m=d-1;if(m<0)return null;const h=u[m];return l(h.descriptor.id)},bs=(t,s)=>t.descriptor.droppableId===s.descriptor.id;const Kl={point:st,value:0},Ms={invisible:{},visible:{},all:[]},lm={displaced:Ms,displacedBy:Kl,at:null};var vt=(t,s)=>a=>t<=a&&a<=s,Hl=t=>{const s=vt(t.top,t.bottom),a=vt(t.left,t.right);return r=>{if(s(r.top)&&s(r.bottom)&&a(r.left)&&a(r.right))return!0;const n=s(r.top)||s(r.bottom),l=a(r.left)||a(r.right);if(n&&l)return!0;const c=r.top<t.top&&r.bottom>t.bottom,u=r.left<t.left&&r.right>t.right;return c&&u?!0:c&&l||u&&n}},om=t=>{const s=vt(t.top,t.bottom),a=vt(t.left,t.right);return r=>s(r.top)&&s(r.bottom)&&a(r.left)&&a(r.right)};const Ur={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},Ql={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var cm=t=>s=>{const a=vt(s.top,s.bottom),r=vt(s.left,s.right);return i=>t===Ur?a(i.top)&&a(i.bottom):r(i.left)&&r(i.right)};const dm=(t,s)=>{const a=s.frame?s.frame.scroll.diff.displacement:st;return zs(t,a)},um=(t,s,a)=>s.subject.active?a(s.subject.active)(t):!1,mm=(t,s,a)=>a(s)(t),Vr=({target:t,destination:s,viewport:a,withDroppableDisplacement:r,isVisibleThroughFrameFn:i})=>{const n=r?dm(t,s):t;return um(n,s,i)&&mm(n,a,i)},hm=t=>Vr({...t,isVisibleThroughFrameFn:Hl}),Xl=t=>Vr({...t,isVisibleThroughFrameFn:om}),pm=t=>Vr({...t,isVisibleThroughFrameFn:cm(t.destination.axis)}),gm=(t,s,a)=>{if(typeof a=="boolean")return a;if(!s)return!0;const{invisible:r,visible:i}=s;if(r[t])return!1;const n=i[t];return n?n.shouldAnimate:!0};function fm(t,s){const a=t.page.marginBox,r={top:s.point.y,right:0,bottom:0,left:s.point.x};return Ct(Or(a,r))}function Ls({afterDragging:t,destination:s,displacedBy:a,viewport:r,forceShouldAnimate:i,last:n}){return t.reduce(function(o,c){const u=fm(c,a),d=c.descriptor.id;if(o.all.push(d),!hm({target:u,destination:s,viewport:r,withDroppableDisplacement:!0}))return o.invisible[c.descriptor.id]=!0,o;const h=gm(d,n,i),p={draggableId:d,shouldAnimate:h};return o.visible[d]=p,o},{all:[],visible:{},invisible:{}})}function xm(t,s){if(!t.length)return 0;const a=t[t.length-1].descriptor.index;return s.inHomeList?a:a+1}function mn({insideDestination:t,inHomeList:s,displacedBy:a,destination:r}){const i=xm(t,{inHomeList:s});return{displaced:Ms,displacedBy:a,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:i}}}}function ya({draggable:t,insideDestination:s,destination:a,viewport:r,displacedBy:i,last:n,index:l,forceShouldAnimate:o}){const c=bs(t,a);if(l==null)return mn({insideDestination:s,inHomeList:c,displacedBy:i,destination:a});const u=s.find(k=>k.descriptor.index===l);if(!u)return mn({insideDestination:s,inHomeList:c,displacedBy:i,destination:a});const d=Aa(t,s),m=s.indexOf(u),h=d.slice(m);return{displaced:Ls({afterDragging:h,destination:a,displacedBy:i,last:n,viewport:r.frame,forceShouldAnimate:o}),displacedBy:i,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:l}}}}function Ht(t,s){return!!s.effected[t]}var bm=({isMovingForward:t,destination:s,draggables:a,combine:r,afterCritical:i})=>{if(!s.isCombineEnabled)return null;const n=r.draggableId,o=a[n].descriptor.index;return Ht(n,i)?t?o:o-1:t?o+1:o},ym=({isMovingForward:t,isInHomeList:s,insideDestination:a,location:r})=>{if(!a.length)return null;const i=r.index,n=t?i+1:i-1,l=a[0].descriptor.index,o=a[a.length-1].descriptor.index,c=s?o:o+1;return n<l||n>c?null:n},vm=({isMovingForward:t,isInHomeList:s,draggable:a,draggables:r,destination:i,insideDestination:n,previousImpact:l,viewport:o,afterCritical:c})=>{const u=l.at;if(u||Y(),u.type==="REORDER"){const m=ym({isMovingForward:t,isInHomeList:s,location:u.destination,insideDestination:n});return m==null?null:ya({draggable:a,insideDestination:n,destination:i,viewport:o,last:l.displaced,displacedBy:l.displacedBy,index:m})}const d=bm({isMovingForward:t,destination:i,displaced:l.displaced,draggables:r,combine:u.combine,afterCritical:c});return d==null?null:ya({draggable:a,insideDestination:n,destination:i,viewport:o,last:l.displaced,displacedBy:l.displacedBy,index:d})},jm=({displaced:t,afterCritical:s,combineWith:a,displacedBy:r})=>{const i=!!(t.visible[a]||t.invisible[a]);return Ht(a,s)?i?st:fs(r.point):i?r.point:st},wm=({afterCritical:t,impact:s,draggables:a})=>{const r=Sa(s);r||Y();const i=r.draggableId,n=a[i].page.borderBox.center,l=jm({displaced:s.displaced,afterCritical:t,combineWith:i,displacedBy:s.displacedBy});return at(n,l)};const Zl=(t,s)=>s.margin[t.start]+s.borderBox[t.size]/2,Nm=(t,s)=>s.margin[t.end]+s.borderBox[t.size]/2,$r=(t,s,a)=>s[t.crossAxisStart]+a.margin[t.crossAxisStart]+a.borderBox[t.crossAxisSize]/2,hn=({axis:t,moveRelativeTo:s,isMoving:a})=>ts(t.line,s.marginBox[t.end]+Zl(t,a),$r(t,s.marginBox,a)),pn=({axis:t,moveRelativeTo:s,isMoving:a})=>ts(t.line,s.marginBox[t.start]-Nm(t,a),$r(t,s.marginBox,a)),km=({axis:t,moveInto:s,isMoving:a})=>ts(t.line,s.contentBox[t.start]+Zl(t,a),$r(t,s.contentBox,a));var Cm=({impact:t,draggable:s,draggables:a,droppable:r,afterCritical:i})=>{const n=xs(r.descriptor.id,a),l=s.page,o=r.axis;if(!n.length)return km({axis:o,moveInto:r.page,isMoving:l});const{displaced:c,displacedBy:u}=t,d=c.all[0];if(d){const h=a[d];if(Ht(d,i))return pn({axis:o,moveRelativeTo:h.page,isMoving:l});const p=pa(h.page,u.point);return pn({axis:o,moveRelativeTo:p,isMoving:l})}const m=n[n.length-1];if(m.descriptor.id===s.descriptor.id)return l.borderBox.center;if(Ht(m.descriptor.id,i)){const h=pa(m.page,fs(i.displacedBy.point));return hn({axis:o,moveRelativeTo:h,isMoving:l})}return hn({axis:o,moveRelativeTo:m.page,isMoving:l})},gr=(t,s)=>{const a=t.frame;return a?at(s,a.scroll.diff.displacement):s};const Sm=({impact:t,draggable:s,droppable:a,draggables:r,afterCritical:i})=>{const n=s.page.borderBox.center,l=t.at;return!a||!l?n:l.type==="REORDER"?Cm({impact:t,draggable:s,draggables:r,droppable:a,afterCritical:i}):wm({impact:t,draggables:r,afterCritical:i})};var Pa=t=>{const s=Sm(t),a=t.droppable;return a?gr(a,s):s},Jl=(t,s)=>{const a=ut(s,t.scroll.initial),r=fs(a);return{frame:Ct({top:s.y,bottom:s.y+t.frame.height,left:s.x,right:s.x+t.frame.width}),scroll:{initial:t.scroll.initial,max:t.scroll.max,current:s,diff:{value:a,displacement:r}}}};function gn(t,s){return t.map(a=>s[a])}function Am(t,s){for(let a=0;a<s.length;a++){const r=s[a].visible[t];if(r)return r}return null}var Pm=({impact:t,viewport:s,destination:a,draggables:r,maxScrollChange:i})=>{const n=Jl(s,at(s.scroll.current,i)),l=a.frame?Mr(a,at(a.frame.scroll.current,i)):a,o=t.displaced,c=Ls({afterDragging:gn(o.all,r),destination:a,displacedBy:t.displacedBy,viewport:n.frame,last:o,forceShouldAnimate:!1}),u=Ls({afterDragging:gn(o.all,r),destination:l,displacedBy:t.displacedBy,viewport:s.frame,last:o,forceShouldAnimate:!1}),d={},m={},h=[o,c,u];return o.all.forEach(k=>{const _=Am(k,h);if(_){m[k]=_;return}d[k]=!0}),{...t,displaced:{all:o.all,invisible:d,visible:m}}},Tm=(t,s)=>at(t.scroll.diff.displacement,s),qr=({pageBorderBoxCenter:t,draggable:s,viewport:a})=>{const r=Tm(a,t),i=ut(r,s.page.borderBox.center);return at(s.client.borderBox.center,i)},Yl=({draggable:t,destination:s,newPageBorderBoxCenter:a,viewport:r,withDroppableDisplacement:i,onlyOnMainAxis:n=!1})=>{const l=ut(a,t.page.borderBox.center),c={target:zs(t.page.borderBox,l),destination:s,withDroppableDisplacement:i,viewport:r};return n?pm(c):Xl(c)},Em=({isMovingForward:t,draggable:s,destination:a,draggables:r,previousImpact:i,viewport:n,previousPageBorderBoxCenter:l,previousClientSelection:o,afterCritical:c})=>{if(!a.isEnabled)return null;const u=xs(a.descriptor.id,r),d=bs(s,a),m=nm({isMovingForward:t,draggable:s,destination:a,insideDestination:u,previousImpact:i})||vm({isMovingForward:t,isInHomeList:d,draggable:s,draggables:r,destination:a,insideDestination:u,previousImpact:i,viewport:n,afterCritical:c});if(!m)return null;const h=Pa({impact:m,draggable:s,droppable:a,draggables:r,afterCritical:c});if(Yl({draggable:s,destination:a,newPageBorderBoxCenter:h,viewport:n.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:qr({pageBorderBoxCenter:h,draggable:s,viewport:n}),impact:m,scrollJumpRequest:null};const k=ut(h,l),_=Pm({impact:m,viewport:n,destination:a,draggables:r,maxScrollChange:k});return{clientSelection:o,impact:_,scrollJumpRequest:k}};const rt=t=>{const s=t.subject.active;return s||Y(),s};var Fm=({isMovingForward:t,pageBorderBoxCenter:s,source:a,droppables:r,viewport:i})=>{const n=a.subject.active;if(!n)return null;const l=a.axis,o=vt(n[l.start],n[l.end]),c=Ca(r).filter(d=>d!==a).filter(d=>d.isEnabled).filter(d=>!!d.subject.active).filter(d=>Hl(i.frame)(rt(d))).filter(d=>{const m=rt(d);return t?n[l.crossAxisEnd]<m[l.crossAxisEnd]:m[l.crossAxisStart]<n[l.crossAxisStart]}).filter(d=>{const m=rt(d),h=vt(m[l.start],m[l.end]);return o(m[l.start])||o(m[l.end])||h(n[l.start])||h(n[l.end])}).sort((d,m)=>{const h=rt(d)[l.crossAxisStart],p=rt(m)[l.crossAxisStart];return t?h-p:p-h}).filter((d,m,h)=>rt(d)[l.crossAxisStart]===rt(h[0])[l.crossAxisStart]);if(!c.length)return null;if(c.length===1)return c[0];const u=c.filter(d=>vt(rt(d)[l.start],rt(d)[l.end])(s[l.line]));return u.length===1?u[0]:u.length>1?u.sort((d,m)=>rt(d)[l.start]-rt(m)[l.start])[0]:c.sort((d,m)=>{const h=dn(s,un(rt(d))),p=dn(s,un(rt(m)));return h!==p?h-p:rt(d)[l.start]-rt(m)[l.start]})[0]};const fn=(t,s)=>{const a=t.page.borderBox.center;return Ht(t.descriptor.id,s)?ut(a,s.displacedBy.point):a},Dm=(t,s)=>{const a=t.page.borderBox;return Ht(t.descriptor.id,s)?zs(a,fs(s.displacedBy.point)):a};var Im=({pageBorderBoxCenter:t,viewport:s,destination:a,insideDestination:r,afterCritical:i})=>r.filter(l=>Xl({target:Dm(l,i),destination:a,viewport:s.frame,withDroppableDisplacement:!0})).sort((l,o)=>{const c=Bs(t,gr(a,fn(l,i))),u=Bs(t,gr(a,fn(o,i)));return c<u?-1:u<c?1:l.descriptor.index-o.descriptor.index})[0]||null,Ks=tt(function(s,a){const r=a[s.line];return{value:r,point:ts(s.line,r)}});const _m=(t,s,a)=>{const r=t.axis;if(t.descriptor.mode==="virtual")return ts(r.line,s[r.line]);const i=t.subject.page.contentBox[r.size],c=xs(t.descriptor.id,a).reduce((u,d)=>u+d.client.marginBox[r.size],0)+s[r.line]-i;return c<=0?null:ts(r.line,c)},eo=(t,s)=>({...t,scroll:{...t.scroll,max:s}}),to=(t,s,a)=>{const r=t.frame;bs(s,t)&&Y(),t.subject.withPlaceholder&&Y();const i=Ks(t.axis,s.displaceBy).point,n=_m(t,i,a),l={placeholderSize:i,increasedBy:n,oldFrameMaxScroll:t.frame?t.frame.scroll.max:null};if(!r){const d=hs({page:t.subject.page,withPlaceholder:l,axis:t.axis,frame:t.frame});return{...t,subject:d}}const o=n?at(r.scroll.max,n):r.scroll.max,c=eo(r,o),u=hs({page:t.subject.page,withPlaceholder:l,axis:t.axis,frame:c});return{...t,subject:u,frame:c}},Rm=t=>{const s=t.subject.withPlaceholder;s||Y();const a=t.frame;if(!a){const l=hs({page:t.subject.page,axis:t.axis,frame:null,withPlaceholder:null});return{...t,subject:l}}const r=s.oldFrameMaxScroll;r||Y();const i=eo(a,r),n=hs({page:t.subject.page,axis:t.axis,frame:i,withPlaceholder:null});return{...t,subject:n,frame:i}};var Om=({previousPageBorderBoxCenter:t,moveRelativeTo:s,insideDestination:a,draggable:r,draggables:i,destination:n,viewport:l,afterCritical:o})=>{if(!s){if(a.length)return null;const m={displaced:Ms,displacedBy:Kl,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:0}}},h=Pa({impact:m,draggable:r,droppable:n,draggables:i,afterCritical:o}),p=bs(r,n)?n:to(n,r,i);return Yl({draggable:r,destination:p,newPageBorderBoxCenter:h,viewport:l.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?m:null}const c=t[n.axis.line]<=s.page.borderBox.center[n.axis.line],u=(()=>{const m=s.descriptor.index;return s.descriptor.id===r.descriptor.id||c?m:m+1})(),d=Ks(n.axis,r.displaceBy);return ya({draggable:r,insideDestination:a,destination:n,viewport:l,displacedBy:d,last:Ms,index:u})},Bm=({isMovingForward:t,previousPageBorderBoxCenter:s,draggable:a,isOver:r,draggables:i,droppables:n,viewport:l,afterCritical:o})=>{const c=Fm({isMovingForward:t,pageBorderBoxCenter:s,source:r,droppables:n,viewport:l});if(!c)return null;const u=xs(c.descriptor.id,i),d=Im({pageBorderBoxCenter:s,viewport:l,destination:c,insideDestination:u,afterCritical:o}),m=Om({previousPageBorderBoxCenter:s,destination:c,draggable:a,draggables:i,moveRelativeTo:d,insideDestination:u,viewport:l,afterCritical:o});if(!m)return null;const h=Pa({impact:m,draggable:a,droppable:c,draggables:i,afterCritical:o});return{clientSelection:qr({pageBorderBoxCenter:h,draggable:a,viewport:l}),impact:m,scrollJumpRequest:null}},mt=t=>{const s=t.at;return s?s.type==="REORDER"?s.destination.droppableId:s.combine.droppableId:null};const Mm=(t,s)=>{const a=mt(t);return a?s[a]:null};var Lm=({state:t,type:s})=>{const a=Mm(t.impact,t.dimensions.droppables),r=!!a,i=t.dimensions.droppables[t.critical.droppable.id],n=a||i,l=n.axis.direction,o=l==="vertical"&&(s==="MOVE_UP"||s==="MOVE_DOWN")||l==="horizontal"&&(s==="MOVE_LEFT"||s==="MOVE_RIGHT");if(o&&!r)return null;const c=s==="MOVE_DOWN"||s==="MOVE_RIGHT",u=t.dimensions.draggables[t.critical.draggable.id],d=t.current.page.borderBoxCenter,{draggables:m,droppables:h}=t.dimensions;return o?Em({isMovingForward:c,previousPageBorderBoxCenter:d,draggable:u,destination:n,draggables:m,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):Bm({isMovingForward:c,previousPageBorderBoxCenter:d,draggable:u,isOver:n,draggables:m,droppables:h,viewport:t.viewport,afterCritical:t.afterCritical})};function Xt(t){return t.phase==="DRAGGING"||t.phase==="COLLECTING"}function so(t){const s=vt(t.top,t.bottom),a=vt(t.left,t.right);return function(i){return s(i.y)&&a(i.x)}}function Um(t,s){return t.left<s.right&&t.right>s.left&&t.top<s.bottom&&t.bottom>s.top}function Vm({pageBorderBox:t,draggable:s,candidates:a}){const r=s.page.borderBox.center,i=a.map(n=>{const l=n.axis,o=ts(n.axis.line,t.center[l.line],n.page.borderBox.center[l.crossAxisLine]);return{id:n.descriptor.id,distance:Bs(r,o)}}).sort((n,l)=>l.distance-n.distance);return i[0]?i[0].id:null}function $m({pageBorderBox:t,draggable:s,droppables:a}){const r=Ca(a).filter(i=>{if(!i.isEnabled)return!1;const n=i.subject.active;if(!n||!Um(t,n))return!1;if(so(n)(t.center))return!0;const l=i.axis,o=n.center[l.crossAxisLine],c=t[l.crossAxisStart],u=t[l.crossAxisEnd],d=vt(n[l.crossAxisStart],n[l.crossAxisEnd]),m=d(c),h=d(u);return!m&&!h?!0:m?c<o:u>o});return r.length?r.length===1?r[0].descriptor.id:Vm({pageBorderBox:t,draggable:s,candidates:r}):null}const ao=(t,s)=>Ct(zs(t,s));var qm=(t,s)=>{const a=t.frame;return a?ao(s,a.scroll.diff.value):s};function ro({displaced:t,id:s}){return!!(t.visible[s]||t.invisible[s])}function Gm({draggable:t,closest:s,inHomeList:a}){return s?a&&s.descriptor.index>t.descriptor.index?s.descriptor.index-1:s.descriptor.index:null}var Wm=({pageBorderBoxWithDroppableScroll:t,draggable:s,destination:a,insideDestination:r,last:i,viewport:n,afterCritical:l})=>{const o=a.axis,c=Ks(a.axis,s.displaceBy),u=c.value,d=t[o.start],m=t[o.end],p=Aa(s,r).find(_=>{const f=_.descriptor.id,T=_.page.borderBox.center[o.line],M=Ht(f,l),S=ro({displaced:i,id:f});return M?S?m<=T:d<T-u:S?m<=T+u:d<T})||null,k=Gm({draggable:s,closest:p,inHomeList:bs(s,a)});return ya({draggable:s,insideDestination:r,destination:a,viewport:n,last:i,displacedBy:c,index:k})};const zm=4;var Km=({draggable:t,pageBorderBoxWithDroppableScroll:s,previousImpact:a,destination:r,insideDestination:i,afterCritical:n})=>{if(!r.isCombineEnabled)return null;const l=r.axis,o=Ks(r.axis,t.displaceBy),c=o.value,u=s[l.start],d=s[l.end],h=Aa(t,i).find(k=>{const _=k.descriptor.id,f=k.page.borderBox,M=f[l.size]/zm,S=Ht(_,n),w=ro({displaced:a.displaced,id:_});return S?w?d>f[l.start]+M&&d<f[l.end]-M:u>f[l.start]-c+M&&u<f[l.end]-c-M:w?d>f[l.start]+c+M&&d<f[l.end]+c-M:u>f[l.start]+M&&u<f[l.end]-M});return h?{displacedBy:o,displaced:a.displaced,at:{type:"COMBINE",combine:{draggableId:h.descriptor.id,droppableId:r.descriptor.id}}}:null},io=({pageOffset:t,draggable:s,draggables:a,droppables:r,previousImpact:i,viewport:n,afterCritical:l})=>{const o=ao(s.page.borderBox,t),c=$m({pageBorderBox:o,draggable:s,droppables:r});if(!c)return lm;const u=r[c],d=xs(u.descriptor.id,a),m=qm(u,o);return Km({pageBorderBoxWithDroppableScroll:m,draggable:s,previousImpact:i,destination:u,insideDestination:d,afterCritical:l})||Wm({pageBorderBoxWithDroppableScroll:m,draggable:s,destination:u,insideDestination:d,last:i.displaced,viewport:n,afterCritical:l})},Gr=(t,s)=>({...t,[s.descriptor.id]:s});const Hm=({previousImpact:t,impact:s,droppables:a})=>{const r=mt(t),i=mt(s);if(!r||r===i)return a;const n=a[r];if(!n.subject.withPlaceholder)return a;const l=Rm(n);return Gr(a,l)};var Qm=({draggable:t,draggables:s,droppables:a,previousImpact:r,impact:i})=>{const n=Hm({previousImpact:r,impact:i,droppables:a}),l=mt(i);if(!l)return n;const o=a[l];if(bs(t,o)||o.subject.withPlaceholder)return n;const c=to(o,t,s);return Gr(n,c)},Ps=({state:t,clientSelection:s,dimensions:a,viewport:r,impact:i,scrollJumpRequest:n})=>{const l=r||t.viewport,o=a||t.dimensions,c=s||t.current.client.selection,u=ut(c,t.initial.client.selection),d={offset:u,selection:c,borderBoxCenter:at(t.initial.client.borderBoxCenter,u)},m={selection:at(d.selection,l.scroll.current),borderBoxCenter:at(d.borderBoxCenter,l.scroll.current),offset:at(d.offset,l.scroll.diff.value)},h={client:d,page:m};if(t.phase==="COLLECTING")return{...t,dimensions:o,viewport:l,current:h};const p=o.draggables[t.critical.draggable.id],k=i||io({pageOffset:m.offset,draggable:p,draggables:o.draggables,droppables:o.droppables,previousImpact:t.impact,viewport:l,afterCritical:t.afterCritical}),_=Qm({draggable:p,impact:k,previousImpact:t.impact,draggables:o.draggables,droppables:o.droppables});return{...t,current:h,dimensions:{draggables:o.draggables,droppables:_},impact:k,viewport:l,scrollJumpRequest:n||null,forceShouldAnimate:n?!1:null}};function Xm(t,s){return t.map(a=>s[a])}var no=({impact:t,viewport:s,draggables:a,destination:r,forceShouldAnimate:i})=>{const n=t.displaced,l=Xm(n.all,a),o=Ls({afterDragging:l,destination:r,displacedBy:t.displacedBy,viewport:s.frame,forceShouldAnimate:i,last:n});return{...t,displaced:o}},lo=({impact:t,draggable:s,droppable:a,draggables:r,viewport:i,afterCritical:n})=>{const l=Pa({impact:t,draggable:s,draggables:r,droppable:a,afterCritical:n});return qr({pageBorderBoxCenter:l,draggable:s,viewport:i})},oo=({state:t,dimensions:s,viewport:a})=>{t.movementMode!=="SNAP"&&Y();const r=t.impact,i=a||t.viewport,n=s||t.dimensions,{draggables:l,droppables:o}=n,c=l[t.critical.draggable.id],u=mt(r);u||Y();const d=o[u],m=no({impact:r,viewport:i,destination:d,draggables:l}),h=lo({impact:m,draggable:c,droppable:d,draggables:l,viewport:i,afterCritical:t.afterCritical});return Ps({impact:m,clientSelection:h,state:t,dimensions:n,viewport:i})},Zm=t=>({index:t.index,droppableId:t.droppableId}),co=({draggable:t,home:s,draggables:a,viewport:r})=>{const i=Ks(s.axis,t.displaceBy),n=xs(s.descriptor.id,a),l=n.indexOf(t);l===-1&&Y();const o=n.slice(l+1),c=o.reduce((h,p)=>(h[p.descriptor.id]=!0,h),{}),u={inVirtualList:s.descriptor.mode==="virtual",displacedBy:i,effected:c};return{impact:{displaced:Ls({afterDragging:o,destination:s,displacedBy:i,last:null,viewport:r.frame,forceShouldAnimate:!1}),displacedBy:i,at:{type:"REORDER",destination:Zm(t.descriptor)}},afterCritical:u}},Jm=(t,s)=>({draggables:t.draggables,droppables:Gr(t.droppables,s)}),Ym=({draggable:t,offset:s,initialWindowScroll:a})=>{const r=pa(t.client,s),i=ga(r,a);return{...t,placeholder:{...t.placeholder,client:r},client:r,page:i}},eh=t=>{const s=t.frame;return s||Y(),s},th=({additions:t,updatedDroppables:s,viewport:a})=>{const r=a.scroll.diff.value;return t.map(i=>{const n=i.descriptor.droppableId,l=s[n],c=eh(l).scroll.diff.value,u=at(r,c);return Ym({draggable:i,offset:u,initialWindowScroll:a.scroll.initial})})},sh=({state:t,published:s})=>{const a=s.modified.map(T=>{const M=t.dimensions.droppables[T.droppableId];return Mr(M,T.scroll)}),r={...t.dimensions.droppables,...Wl(a)},i=zl(th({additions:s.additions,updatedDroppables:r,viewport:t.viewport})),n={...t.dimensions.draggables,...i};s.removals.forEach(T=>{delete n[T]});const l={droppables:r,draggables:n},o=mt(t.impact),c=o?l.droppables[o]:null,u=l.draggables[t.critical.draggable.id],d=l.droppables[t.critical.droppable.id],{impact:m,afterCritical:h}=co({draggable:u,home:d,draggables:n,viewport:t.viewport}),p=c&&c.isCombineEnabled?t.impact:m,k=io({pageOffset:t.current.page.offset,draggable:l.draggables[t.critical.draggable.id],draggables:l.draggables,droppables:l.droppables,previousImpact:p,viewport:t.viewport,afterCritical:h}),_={...t,phase:"DRAGGING",impact:k,onLiftImpact:m,dimensions:l,afterCritical:h,forceShouldAnimate:!1};return t.phase==="COLLECTING"?_:{..._,phase:"DROP_PENDING",reason:t.reason,isWaiting:!1}};const fr=t=>t.movementMode==="SNAP",za=(t,s,a)=>{const r=Jm(t.dimensions,s);return!fr(t)||a?Ps({state:t,dimensions:r}):oo({state:t,dimensions:r})};function Ka(t){return t.isDragging&&t.movementMode==="SNAP"?{...t,scrollJumpRequest:null}:t}const xn={phase:"IDLE",completed:null,shouldFlush:!1};var ah=(t=xn,s)=>{if(s.type==="FLUSH")return{...xn,shouldFlush:!0};if(s.type==="INITIAL_PUBLISH"){t.phase!=="IDLE"&&Y();const{critical:a,clientSelection:r,viewport:i,dimensions:n,movementMode:l}=s.payload,o=n.draggables[a.draggable.id],c=n.droppables[a.droppable.id],u={selection:r,borderBoxCenter:o.client.borderBox.center,offset:st},d={client:u,page:{selection:at(u.selection,i.scroll.initial),borderBoxCenter:at(u.selection,i.scroll.initial),offset:at(u.selection,i.scroll.diff.value)}},m=Ca(n.droppables).every(_=>!_.isFixedOnPage),{impact:h,afterCritical:p}=co({draggable:o,home:c,draggables:n.draggables,viewport:i});return{phase:"DRAGGING",isDragging:!0,critical:a,movementMode:l,dimensions:n,initial:d,current:d,isWindowScrollAllowed:m,impact:h,afterCritical:p,onLiftImpact:h,viewport:i,scrollJumpRequest:null,forceShouldAnimate:null}}if(s.type==="COLLECTION_STARTING")return t.phase==="COLLECTING"||t.phase==="DROP_PENDING"?t:(t.phase!=="DRAGGING"&&Y(),{...t,phase:"COLLECTING"});if(s.type==="PUBLISH_WHILE_DRAGGING")return t.phase==="COLLECTING"||t.phase==="DROP_PENDING"||Y(),sh({state:t,published:s.payload});if(s.type==="MOVE"){if(t.phase==="DROP_PENDING")return t;Xt(t)||Y();const{client:a}=s.payload;return Gt(a,t.current.client.selection)?t:Ps({state:t,clientSelection:a,impact:fr(t)?t.impact:null})}if(s.type==="UPDATE_DROPPABLE_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="COLLECTING")return Ka(t);Xt(t)||Y();const{id:a,newScroll:r}=s.payload,i=t.dimensions.droppables[a];if(!i)return t;const n=Mr(i,r);return za(t,n,!1)}if(s.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(t.phase==="DROP_PENDING")return t;Xt(t)||Y();const{id:a,isEnabled:r}=s.payload,i=t.dimensions.droppables[a];i||Y(),i.isEnabled===r&&Y();const n={...i,isEnabled:r};return za(t,n,!0)}if(s.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(t.phase==="DROP_PENDING")return t;Xt(t)||Y();const{id:a,isCombineEnabled:r}=s.payload,i=t.dimensions.droppables[a];i||Y(),i.isCombineEnabled===r&&Y();const n={...i,isCombineEnabled:r};return za(t,n,!0)}if(s.type==="MOVE_BY_WINDOW_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="DROP_ANIMATING")return t;Xt(t)||Y(),t.isWindowScrollAllowed||Y();const a=s.payload.newScroll;if(Gt(t.viewport.scroll.current,a))return Ka(t);const r=Jl(t.viewport,a);return fr(t)?oo({state:t,viewport:r}):Ps({state:t,viewport:r})}if(s.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Xt(t))return t;const a=s.payload.maxScroll;if(Gt(a,t.viewport.scroll.max))return t;const r={...t.viewport,scroll:{...t.viewport.scroll,max:a}};return{...t,viewport:r}}if(s.type==="MOVE_UP"||s.type==="MOVE_DOWN"||s.type==="MOVE_LEFT"||s.type==="MOVE_RIGHT"){if(t.phase==="COLLECTING"||t.phase==="DROP_PENDING")return t;t.phase!=="DRAGGING"&&Y();const a=Lm({state:t,type:s.type});return a?Ps({state:t,impact:a.impact,clientSelection:a.clientSelection,scrollJumpRequest:a.scrollJumpRequest}):t}if(s.type==="DROP_PENDING"){const a=s.payload.reason;return t.phase!=="COLLECTING"&&Y(),{...t,phase:"DROP_PENDING",isWaiting:!0,reason:a}}if(s.type==="DROP_ANIMATE"){const{completed:a,dropDuration:r,newHomeClientOffset:i}=s.payload;return t.phase==="DRAGGING"||t.phase==="DROP_PENDING"||Y(),{phase:"DROP_ANIMATING",completed:a,dropDuration:r,newHomeClientOffset:i,dimensions:t.dimensions}}if(s.type==="DROP_COMPLETE"){const{completed:a}=s.payload;return{phase:"IDLE",completed:a,shouldFlush:!1}}return t};function _e(t,s){return t instanceof Object&&"type"in t&&t.type===s}const rh=t=>({type:"BEFORE_INITIAL_CAPTURE",payload:t}),ih=t=>({type:"LIFT",payload:t}),nh=t=>({type:"INITIAL_PUBLISH",payload:t}),lh=t=>({type:"PUBLISH_WHILE_DRAGGING",payload:t}),oh=()=>({type:"COLLECTION_STARTING",payload:null}),ch=t=>({type:"UPDATE_DROPPABLE_SCROLL",payload:t}),dh=t=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:t}),uh=t=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:t}),uo=t=>({type:"MOVE",payload:t}),mh=t=>({type:"MOVE_BY_WINDOW_SCROLL",payload:t}),hh=t=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:t}),ph=()=>({type:"MOVE_UP",payload:null}),gh=()=>({type:"MOVE_DOWN",payload:null}),fh=()=>({type:"MOVE_RIGHT",payload:null}),xh=()=>({type:"MOVE_LEFT",payload:null}),Wr=()=>({type:"FLUSH",payload:null}),bh=t=>({type:"DROP_ANIMATE",payload:t}),zr=t=>({type:"DROP_COMPLETE",payload:t}),mo=t=>({type:"DROP",payload:t}),yh=t=>({type:"DROP_PENDING",payload:t}),ho=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var vh=t=>({getState:s,dispatch:a})=>r=>i=>{if(!_e(i,"LIFT")){r(i);return}const{id:n,clientSelection:l,movementMode:o}=i.payload,c=s();c.phase==="DROP_ANIMATING"&&a(zr({completed:c.completed})),s().phase!=="IDLE"&&Y(),a(Wr()),a(rh({draggableId:n,movementMode:o}));const d={draggableId:n,scrollOptions:{shouldPublishImmediately:o==="SNAP"}},{critical:m,dimensions:h,viewport:p}=t.startPublishing(d);a(nh({critical:m,dimensions:h,clientSelection:l,movementMode:o,viewport:p}))},jh=t=>()=>s=>a=>{_e(a,"INITIAL_PUBLISH")&&t.dragging(),_e(a,"DROP_ANIMATE")&&t.dropping(a.payload.completed.result.reason),(_e(a,"FLUSH")||_e(a,"DROP_COMPLETE"))&&t.resting(),s(a)};const Kr={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},Us={opacity:{drop:0,combining:.7},scale:{drop:.75}},po={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Qt=`${po.outOfTheWay}s ${Kr.outOfTheWay}`,Ts={fluid:`opacity ${Qt}`,snap:`transform ${Qt}, opacity ${Qt}`,drop:t=>{const s=`${t}s ${Kr.drop}`;return`transform ${s}, opacity ${s}`},outOfTheWay:`transform ${Qt}`,placeholder:`height ${Qt}, width ${Qt}, margin ${Qt}`},bn=t=>Gt(t,st)?void 0:`translate(${t.x}px, ${t.y}px)`,xr={moveTo:bn,drop:(t,s)=>{const a=bn(t);if(a)return s?`${a} scale(${Us.scale.drop})`:a}},{minDropTime:br,maxDropTime:go}=po,wh=go-br,yn=1500,Nh=.6;var kh=({current:t,destination:s,reason:a})=>{const r=Bs(t,s);if(r<=0)return br;if(r>=yn)return go;const i=r/yn,n=br+wh*i,l=a==="CANCEL"?n*Nh:n;return Number(l.toFixed(2))},Ch=({impact:t,draggable:s,dimensions:a,viewport:r,afterCritical:i})=>{const{draggables:n,droppables:l}=a,o=mt(t),c=o?l[o]:null,u=l[s.descriptor.droppableId],d=lo({impact:t,draggable:s,draggables:n,afterCritical:i,droppable:c||u,viewport:r});return ut(d,s.client.borderBox.center)},Sh=({draggables:t,reason:s,lastImpact:a,home:r,viewport:i,onLiftImpact:n})=>!a.at||s!=="DROP"?{impact:no({draggables:t,impact:n,destination:r,viewport:i,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:a.at.type==="REORDER"?{impact:a,didDropInsideDroppable:!0}:{impact:{...a,displaced:Ms},didDropInsideDroppable:!0};const Ah=({getState:t,dispatch:s})=>a=>r=>{if(!_e(r,"DROP")){a(r);return}const i=t(),n=r.payload.reason;if(i.phase==="COLLECTING"){s(yh({reason:n}));return}if(i.phase==="IDLE")return;i.phase==="DROP_PENDING"&&i.isWaiting&&Y(),i.phase==="DRAGGING"||i.phase==="DROP_PENDING"||Y();const o=i.critical,c=i.dimensions,u=c.draggables[i.critical.draggable.id],{impact:d,didDropInsideDroppable:m}=Sh({reason:n,lastImpact:i.impact,afterCritical:i.afterCritical,onLiftImpact:i.onLiftImpact,home:i.dimensions.droppables[i.critical.droppable.id],viewport:i.viewport,draggables:i.dimensions.draggables}),h=m?Lr(d):null,p=m?Sa(d):null,k={index:o.draggable.index,droppableId:o.droppable.id},_={draggableId:u.descriptor.id,type:u.descriptor.type,source:k,reason:n,mode:i.movementMode,destination:h,combine:p},f=Ch({impact:d,draggable:u,dimensions:c,viewport:i.viewport,afterCritical:i.afterCritical}),T={critical:i.critical,afterCritical:i.afterCritical,result:_,impact:d};if(!(!Gt(i.current.client.offset,f)||!!_.combine)){s(zr({completed:T}));return}const S=kh({current:i.current.client.offset,destination:f,reason:n});s(bh({newHomeClientOffset:f,dropDuration:S,completed:T}))};var fo=()=>({x:window.pageXOffset,y:window.pageYOffset});function Ph(t){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:s=>{s.target!==window&&s.target!==window.document||t()}}}function Th({onWindowScroll:t}){function s(){t(fo())}const a=Os(s),r=Ph(a);let i=qt;function n(){return i!==qt}function l(){n()&&Y(),i=yt(window,[r])}function o(){n()||Y(),a.cancel(),i(),i=qt}return{start:l,stop:o,isActive:n}}const Eh=t=>_e(t,"DROP_COMPLETE")||_e(t,"DROP_ANIMATE")||_e(t,"FLUSH"),Fh=t=>{const s=Th({onWindowScroll:a=>{t.dispatch(mh({newScroll:a}))}});return a=>r=>{!s.isActive()&&_e(r,"INITIAL_PUBLISH")&&s.start(),s.isActive()&&Eh(r)&&s.stop(),a(r)}};var Dh=t=>{let s=!1,a=!1;const r=setTimeout(()=>{a=!0}),i=n=>{s||a||(s=!0,t(n),clearTimeout(r))};return i.wasCalled=()=>s,i},Ih=()=>{const t=[],s=i=>{const n=t.findIndex(o=>o.timerId===i);n===-1&&Y();const[l]=t.splice(n,1);l.callback()};return{add:i=>{const n=setTimeout(()=>s(n)),l={timerId:n,callback:i};t.push(l)},flush:()=>{if(!t.length)return;const i=[...t];t.length=0,i.forEach(n=>{clearTimeout(n.timerId),n.callback()})}}};const _h=(t,s)=>t==null&&s==null?!0:t==null||s==null?!1:t.droppableId===s.droppableId&&t.index===s.index,Rh=(t,s)=>t==null&&s==null?!0:t==null||s==null?!1:t.draggableId===s.draggableId&&t.droppableId===s.droppableId,Oh=(t,s)=>{if(t===s)return!0;const a=t.draggable.id===s.draggable.id&&t.draggable.droppableId===s.draggable.droppableId&&t.draggable.type===s.draggable.type&&t.draggable.index===s.draggable.index,r=t.droppable.id===s.droppable.id&&t.droppable.type===s.droppable.type;return a&&r},vs=(t,s)=>{s()},Zs=(t,s)=>({draggableId:t.draggable.id,type:t.droppable.type,source:{droppableId:t.droppable.id,index:t.draggable.index},mode:s});function Ha(t,s,a,r){if(!t){a(r(s));return}const i=Dh(a);t(s,{announce:i}),i.wasCalled()||a(r(s))}var Bh=(t,s)=>{const a=Ih();let r=null;const i=(m,h)=>{r&&Y(),vs("onBeforeCapture",()=>{const p=t().onBeforeCapture;p&&p({draggableId:m,mode:h})})},n=(m,h)=>{r&&Y(),vs("onBeforeDragStart",()=>{const p=t().onBeforeDragStart;p&&p(Zs(m,h))})},l=(m,h)=>{r&&Y();const p=Zs(m,h);r={mode:h,lastCritical:m,lastLocation:p.source,lastCombine:null},a.add(()=>{vs("onDragStart",()=>Ha(t().onDragStart,p,s,ra.onDragStart))})},o=(m,h)=>{const p=Lr(h),k=Sa(h);r||Y();const _=!Oh(m,r.lastCritical);_&&(r.lastCritical=m);const f=!_h(r.lastLocation,p);f&&(r.lastLocation=p);const T=!Rh(r.lastCombine,k);if(T&&(r.lastCombine=k),!_&&!f&&!T)return;const M={...Zs(m,r.mode),combine:k,destination:p};a.add(()=>{vs("onDragUpdate",()=>Ha(t().onDragUpdate,M,s,ra.onDragUpdate))})},c=()=>{r||Y(),a.flush()},u=m=>{r||Y(),r=null,vs("onDragEnd",()=>Ha(t().onDragEnd,m,s,ra.onDragEnd))};return{beforeCapture:i,beforeStart:n,start:l,update:o,flush:c,drop:u,abort:()=>{if(!r)return;const m={...Zs(r.lastCritical,r.mode),combine:null,destination:null,reason:"CANCEL"};u(m)}}},Mh=(t,s)=>{const a=Bh(t,s);return r=>i=>n=>{if(_e(n,"BEFORE_INITIAL_CAPTURE")){a.beforeCapture(n.payload.draggableId,n.payload.movementMode);return}if(_e(n,"INITIAL_PUBLISH")){const o=n.payload.critical;a.beforeStart(o,n.payload.movementMode),i(n),a.start(o,n.payload.movementMode);return}if(_e(n,"DROP_COMPLETE")){const o=n.payload.completed.result;a.flush(),i(n),a.drop(o);return}if(i(n),_e(n,"FLUSH")){a.abort();return}const l=r.getState();l.phase==="DRAGGING"&&a.update(l.critical,l.impact)}};const Lh=t=>s=>a=>{if(!_e(a,"DROP_ANIMATION_FINISHED")){s(a);return}const r=t.getState();r.phase!=="DROP_ANIMATING"&&Y(),t.dispatch(zr({completed:r.completed}))},Uh=t=>{let s=null,a=null;function r(){a&&(cancelAnimationFrame(a),a=null),s&&(s(),s=null)}return i=>n=>{if((_e(n,"FLUSH")||_e(n,"DROP_COMPLETE")||_e(n,"DROP_ANIMATION_FINISHED"))&&r(),i(n),!_e(n,"DROP_ANIMATE"))return;const l={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){t.getState().phase==="DROP_ANIMATING"&&t.dispatch(ho())}};a=requestAnimationFrame(()=>{a=null,s=yt(window,[l])})}};var Vh=t=>()=>s=>a=>{(_e(a,"DROP_COMPLETE")||_e(a,"FLUSH")||_e(a,"DROP_ANIMATE"))&&t.stopPublishing(),s(a)},$h=t=>{let s=!1;return()=>a=>r=>{if(_e(r,"INITIAL_PUBLISH")){s=!0,t.tryRecordFocus(r.payload.critical.draggable.id),a(r),t.tryRestoreFocusRecorded();return}if(a(r),!!s){if(_e(r,"FLUSH")){s=!1,t.tryRestoreFocusRecorded();return}if(_e(r,"DROP_COMPLETE")){s=!1;const i=r.payload.completed.result;i.combine&&t.tryShiftRecord(i.draggableId,i.combine.draggableId),t.tryRestoreFocusRecorded()}}}};const qh=t=>_e(t,"DROP_COMPLETE")||_e(t,"DROP_ANIMATE")||_e(t,"FLUSH");var Gh=t=>s=>a=>r=>{if(qh(r)){t.stop(),a(r);return}if(_e(r,"INITIAL_PUBLISH")){a(r);const i=s.getState();i.phase!=="DRAGGING"&&Y(),t.start(i);return}a(r),t.scroll(s.getState())};const Wh=t=>s=>a=>{if(s(a),!_e(a,"PUBLISH_WHILE_DRAGGING"))return;const r=t.getState();r.phase==="DROP_PENDING"&&(r.isWaiting||t.dispatch(mo({reason:r.reason})))},zh=Fl;var Kh=({dimensionMarshal:t,focusMarshal:s,styleMarshal:a,getResponders:r,announce:i,autoScroller:n})=>El(ah,zh(Ud(jh(a),Vh(t),vh(t),Ah,Lh,Uh,Wh,Gh(n),Fh,$h(s),Mh(r,i))));const Qa=()=>({additions:{},removals:{},modified:{}});function Hh({registry:t,callbacks:s}){let a=Qa(),r=null;const i=()=>{r||(s.collectionStarting(),r=requestAnimationFrame(()=>{r=null;const{additions:c,removals:u,modified:d}=a,m=Object.keys(c).map(k=>t.draggable.getById(k).getDimension(st)).sort((k,_)=>k.descriptor.index-_.descriptor.index),h=Object.keys(d).map(k=>{const f=t.droppable.getById(k).callbacks.getScrollWhileDragging();return{droppableId:k,scroll:f}}),p={additions:m,removals:Object.keys(u),modified:h};a=Qa(),s.publish(p)}))};return{add:c=>{const u=c.descriptor.id;a.additions[u]=c,a.modified[c.descriptor.droppableId]=!0,a.removals[u]&&delete a.removals[u],i()},remove:c=>{const u=c.descriptor;a.removals[u.id]=!0,a.modified[u.droppableId]=!0,a.additions[u.id]&&delete a.additions[u.id],i()},stop:()=>{r&&(cancelAnimationFrame(r),r=null,a=Qa())}}}var xo=({scrollHeight:t,scrollWidth:s,height:a,width:r})=>{const i=ut({x:s,y:t},{x:r,y:a});return{x:Math.max(0,i.x),y:Math.max(0,i.y)}},bo=()=>{const t=document.documentElement;return t||Y(),t},yo=()=>{const t=bo();return xo({scrollHeight:t.scrollHeight,scrollWidth:t.scrollWidth,width:t.clientWidth,height:t.clientHeight})},Qh=()=>{const t=fo(),s=yo(),a=t.y,r=t.x,i=bo(),n=i.clientWidth,l=i.clientHeight,o=r+n,c=a+l;return{frame:Ct({top:a,left:r,right:o,bottom:c}),scroll:{initial:t,current:t,max:s,diff:{value:st,displacement:st}}}},Xh=({critical:t,scrollOptions:s,registry:a})=>{const r=Qh(),i=r.scroll.current,n=t.droppable,l=a.droppable.getAllByType(n.type).map(d=>d.callbacks.getDimensionAndWatchScroll(i,s)),o=a.draggable.getAllByType(t.draggable.type).map(d=>d.getDimension(i));return{dimensions:{draggables:zl(o),droppables:Wl(l)},critical:t,viewport:r}};function vn(t,s,a){return!(a.descriptor.id===s.id||a.descriptor.type!==s.type||t.droppable.getById(a.descriptor.droppableId).descriptor.mode!=="virtual")}var Zh=(t,s)=>{let a=null;const r=Hh({callbacks:{publish:s.publishWhileDragging,collectionStarting:s.collectionStarting},registry:t}),i=(h,p)=>{t.droppable.exists(h)||Y(),a&&s.updateDroppableIsEnabled({id:h,isEnabled:p})},n=(h,p)=>{a&&(t.droppable.exists(h)||Y(),s.updateDroppableIsCombineEnabled({id:h,isCombineEnabled:p}))},l=(h,p)=>{a&&(t.droppable.exists(h)||Y(),s.updateDroppableScroll({id:h,newScroll:p}))},o=(h,p)=>{a&&t.droppable.getById(h).callbacks.scroll(p)},c=()=>{if(!a)return;r.stop();const h=a.critical.droppable;t.droppable.getAllByType(h.type).forEach(p=>p.callbacks.dragStopped()),a.unsubscribe(),a=null},u=h=>{a||Y();const p=a.critical.draggable;h.type==="ADDITION"&&vn(t,p,h.value)&&r.add(h.value),h.type==="REMOVAL"&&vn(t,p,h.value)&&r.remove(h.value)};return{updateDroppableIsEnabled:i,updateDroppableIsCombineEnabled:n,scrollDroppable:o,updateDroppableScroll:l,startPublishing:h=>{a&&Y();const p=t.draggable.getById(h.draggableId),k=t.droppable.getById(p.descriptor.droppableId),_={draggable:p.descriptor,droppable:k.descriptor},f=t.subscribe(u);return a={critical:_,unsubscribe:f},Xh({critical:_,registry:t,scrollOptions:h.scrollOptions})},stopPublishing:c}},vo=(t,s)=>t.phase==="IDLE"?!0:t.phase!=="DROP_ANIMATING"||t.completed.result.draggableId===s?!1:t.completed.result.reason==="DROP",Jh=t=>{window.scrollBy(t.x,t.y)};const Yh=tt(t=>Ca(t).filter(s=>!(!s.isEnabled||!s.frame))),ep=(t,s)=>Yh(s).find(r=>(r.frame||Y(),so(r.frame.pageMarginBox)(t)))||null;var tp=({center:t,destination:s,droppables:a})=>{if(s){const i=a[s];return i.frame?i:null}return ep(t,a)};const Vs={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:t=>t**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var sp=(t,s,a=()=>Vs)=>{const r=a(),i=t[s.size]*r.startFromPercentage,n=t[s.size]*r.maxScrollAtPercentage;return{startScrollingFrom:i,maxScrollValueAt:n}},jo=({startOfRange:t,endOfRange:s,current:a})=>{const r=s-t;return r===0?0:(a-t)/r},Hr=1,ap=(t,s,a=()=>Vs)=>{const r=a();if(t>s.startScrollingFrom)return 0;if(t<=s.maxScrollValueAt)return r.maxPixelScroll;if(t===s.startScrollingFrom)return Hr;const n=1-jo({startOfRange:s.maxScrollValueAt,endOfRange:s.startScrollingFrom,current:t}),l=r.maxPixelScroll*r.ease(n);return Math.ceil(l)},rp=(t,s,a)=>{const r=a(),i=r.durationDampening.accelerateAt,n=r.durationDampening.stopDampeningAt,l=s,o=n,u=Date.now()-l;if(u>=n)return t;if(u<i)return Hr;const d=jo({startOfRange:i,endOfRange:o,current:u}),m=t*r.ease(d);return Math.ceil(m)},jn=({distanceToEdge:t,thresholds:s,dragStartTime:a,shouldUseTimeDampening:r,getAutoScrollerOptions:i})=>{const n=ap(t,s,i);return n===0?0:r?Math.max(rp(n,a,i),Hr):n},wn=({container:t,distanceToEdges:s,dragStartTime:a,axis:r,shouldUseTimeDampening:i,getAutoScrollerOptions:n})=>{const l=sp(t,r,n);return s[r.end]<s[r.start]?jn({distanceToEdge:s[r.end],thresholds:l,dragStartTime:a,shouldUseTimeDampening:i,getAutoScrollerOptions:n}):-1*jn({distanceToEdge:s[r.start],thresholds:l,dragStartTime:a,shouldUseTimeDampening:i,getAutoScrollerOptions:n})},ip=({container:t,subject:s,proposedScroll:a})=>{const r=s.height>t.height,i=s.width>t.width;return!i&&!r?a:i&&r?null:{x:i?0:a.x,y:r?0:a.y}};const np=Gl(t=>t===0?0:t);var wo=({dragStartTime:t,container:s,subject:a,center:r,shouldUseTimeDampening:i,getAutoScrollerOptions:n})=>{const l={top:r.y-s.top,right:s.right-r.x,bottom:s.bottom-r.y,left:r.x-s.left},o=wn({container:s,distanceToEdges:l,dragStartTime:t,axis:Ur,shouldUseTimeDampening:i,getAutoScrollerOptions:n}),c=wn({container:s,distanceToEdges:l,dragStartTime:t,axis:Ql,shouldUseTimeDampening:i,getAutoScrollerOptions:n}),u=np({x:c,y:o});if(Gt(u,st))return null;const d=ip({container:s,subject:a,proposedScroll:u});return d?Gt(d,st)?null:d:null};const lp=Gl(t=>t===0?0:t>0?1:-1),Qr=(()=>{const t=(s,a)=>s<0?s:s>a?s-a:0;return({current:s,max:a,change:r})=>{const i=at(s,r),n={x:t(i.x,a.x),y:t(i.y,a.y)};return Gt(n,st)?null:n}})(),No=({max:t,current:s,change:a})=>{const r={x:Math.max(s.x,t.x),y:Math.max(s.y,t.y)},i=lp(a),n=Qr({max:r,current:s,change:i});return!n||i.x!==0&&n.x===0||i.y!==0&&n.y===0},Xr=(t,s)=>No({current:t.scroll.current,max:t.scroll.max,change:s}),op=(t,s)=>{if(!Xr(t,s))return null;const a=t.scroll.max,r=t.scroll.current;return Qr({current:r,max:a,change:s})},Zr=(t,s)=>{const a=t.frame;return a?No({current:a.scroll.current,max:a.scroll.max,change:s}):!1},cp=(t,s)=>{const a=t.frame;return!a||!Zr(t,s)?null:Qr({current:a.scroll.current,max:a.scroll.max,change:s})};var dp=({viewport:t,subject:s,center:a,dragStartTime:r,shouldUseTimeDampening:i,getAutoScrollerOptions:n})=>{const l=wo({dragStartTime:r,container:t.frame,subject:s,center:a,shouldUseTimeDampening:i,getAutoScrollerOptions:n});return l&&Xr(t,l)?l:null},up=({droppable:t,subject:s,center:a,dragStartTime:r,shouldUseTimeDampening:i,getAutoScrollerOptions:n})=>{const l=t.frame;if(!l)return null;const o=wo({dragStartTime:r,container:l.pageMarginBox,subject:s,center:a,shouldUseTimeDampening:i,getAutoScrollerOptions:n});return o&&Zr(t,o)?o:null},Nn=({state:t,dragStartTime:s,shouldUseTimeDampening:a,scrollWindow:r,scrollDroppable:i,getAutoScrollerOptions:n})=>{const l=t.current.page.borderBoxCenter,c=t.dimensions.draggables[t.critical.draggable.id].page.marginBox;if(t.isWindowScrollAllowed){const m=t.viewport,h=dp({dragStartTime:s,viewport:m,subject:c,center:l,shouldUseTimeDampening:a,getAutoScrollerOptions:n});if(h){r(h);return}}const u=tp({center:l,destination:mt(t.impact),droppables:t.dimensions.droppables});if(!u)return;const d=up({dragStartTime:s,droppable:u,subject:c,center:l,shouldUseTimeDampening:a,getAutoScrollerOptions:n});d&&i(u.descriptor.id,d)},mp=({scrollWindow:t,scrollDroppable:s,getAutoScrollerOptions:a=()=>Vs})=>{const r=Os(t),i=Os(s);let n=null;const l=u=>{n||Y();const{shouldUseTimeDampening:d,dragStartTime:m}=n;Nn({state:u,scrollWindow:r,scrollDroppable:i,dragStartTime:m,shouldUseTimeDampening:d,getAutoScrollerOptions:a})};return{start:u=>{n&&Y();const d=Date.now();let m=!1;const h=()=>{m=!0};Nn({state:u,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:h,scrollDroppable:h,getAutoScrollerOptions:a}),n={dragStartTime:d,shouldUseTimeDampening:m},m&&l(u)},stop:()=>{n&&(r.cancel(),i.cancel(),n=null)},scroll:l}},hp=({move:t,scrollDroppable:s,scrollWindow:a})=>{const r=(o,c)=>{const u=at(o.current.client.selection,c);t({client:u})},i=(o,c)=>{if(!Zr(o,c))return c;const u=cp(o,c);if(!u)return s(o.descriptor.id,c),null;const d=ut(c,u);return s(o.descriptor.id,d),ut(c,d)},n=(o,c,u)=>{if(!o||!Xr(c,u))return u;const d=op(c,u);if(!d)return a(u),null;const m=ut(u,d);return a(m),ut(u,m)};return o=>{const c=o.scrollJumpRequest;if(!c)return;const u=mt(o.impact);u||Y();const d=i(o.dimensions.droppables[u],c);if(!d)return;const m=o.viewport,h=n(o.isWindowScrollAllowed,m,d);h&&r(o,h)}},pp=({scrollDroppable:t,scrollWindow:s,move:a,getAutoScrollerOptions:r})=>{const i=mp({scrollWindow:s,scrollDroppable:t,getAutoScrollerOptions:r}),n=hp({move:a,scrollWindow:s,scrollDroppable:t});return{scroll:c=>{if(!(r().disabled||c.phase!=="DRAGGING")){if(c.movementMode==="FLUID"){i.scroll(c);return}c.scrollJumpRequest&&n(c)}},start:i.start,stop:i.stop}};const ps="data-rfd",gs=(()=>{const t=`${ps}-drag-handle`;return{base:t,draggableId:`${t}-draggable-id`,contextId:`${t}-context-id`}})(),yr=(()=>{const t=`${ps}-draggable`;return{base:t,contextId:`${t}-context-id`,id:`${t}-id`}})(),gp=(()=>{const t=`${ps}-droppable`;return{base:t,contextId:`${t}-context-id`,id:`${t}-id`}})(),kn={contextId:`${ps}-scroll-container-context-id`},fp=t=>s=>`[${s}="${t}"]`,js=(t,s)=>t.map(a=>{const r=a.styles[s];return r?`${a.selector} { ${r} }`:""}).join(" "),xp="pointer-events: none;";var bp=t=>{const s=fp(t),a=(()=>{const o=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:s(gs.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:o,dragging:xp,dropAnimating:o}}})(),r=(()=>{const o=`
      transition: ${Ts.outOfTheWay};
    `;return{selector:s(yr.contextId),styles:{dragging:o,dropAnimating:o,userCancel:o}}})(),i={selector:s(gp.contextId),styles:{always:"overflow-anchor: none;"}},l=[r,a,i,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:js(l,"always"),resting:js(l,"resting"),dragging:js(l,"dragging"),dropAnimating:js(l,"dropAnimating"),userCancel:js(l,"userCancel")}};const ht=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?P.useLayoutEffect:P.useEffect,Xa=()=>{const t=document.querySelector("head");return t||Y(),t},Cn=t=>{const s=document.createElement("style");return t&&s.setAttribute("nonce",t),s.type="text/css",s};function yp(t,s){const a=Pe(()=>bp(t),[t]),r=P.useRef(null),i=P.useRef(null),n=me(tt(m=>{const h=i.current;h||Y(),h.textContent=m}),[]),l=me(m=>{const h=r.current;h||Y(),h.textContent=m},[]);ht(()=>{!r.current&&!i.current||Y();const m=Cn(s),h=Cn(s);return r.current=m,i.current=h,m.setAttribute(`${ps}-always`,t),h.setAttribute(`${ps}-dynamic`,t),Xa().appendChild(m),Xa().appendChild(h),l(a.always),n(a.resting),()=>{const p=k=>{const _=k.current;_||Y(),Xa().removeChild(_),k.current=null};p(r),p(i)}},[s,l,n,a.always,a.resting,t]);const o=me(()=>n(a.dragging),[n,a.dragging]),c=me(m=>{if(m==="DROP"){n(a.dropAnimating);return}n(a.userCancel)},[n,a.dropAnimating,a.userCancel]),u=me(()=>{i.current&&n(a.resting)},[n,a.resting]);return Pe(()=>({dragging:o,dropping:c,resting:u}),[o,c,u])}function ko(t,s){return Array.from(t.querySelectorAll(s))}var Co=t=>t&&t.ownerDocument&&t.ownerDocument.defaultView?t.ownerDocument.defaultView:window;function Ta(t){return t instanceof Co(t).HTMLElement}function vp(t,s){const a=`[${gs.contextId}="${t}"]`,r=ko(document,a);if(!r.length)return null;const i=r.find(n=>n.getAttribute(gs.draggableId)===s);return!i||!Ta(i)?null:i}function jp(t){const s=P.useRef({}),a=P.useRef(null),r=P.useRef(null),i=P.useRef(!1),n=me(function(h,p){const k={id:h,focus:p};return s.current[h]=k,function(){const f=s.current;f[h]!==k&&delete f[h]}},[]),l=me(function(h){const p=vp(t,h);p&&p!==document.activeElement&&p.focus()},[t]),o=me(function(h,p){a.current===h&&(a.current=p)},[]),c=me(function(){r.current||i.current&&(r.current=requestAnimationFrame(()=>{r.current=null;const h=a.current;h&&l(h)}))},[l]),u=me(function(h){a.current=null;const p=document.activeElement;p&&p.getAttribute(gs.draggableId)===h&&(a.current=h)},[]);return ht(()=>(i.current=!0,function(){i.current=!1;const h=r.current;h&&cancelAnimationFrame(h)}),[]),Pe(()=>({register:n,tryRecordFocus:u,tryRestoreFocusRecorded:c,tryShiftRecord:o}),[n,u,c,o])}function wp(){const t={draggables:{},droppables:{}},s=[];function a(m){return s.push(m),function(){const p=s.indexOf(m);p!==-1&&s.splice(p,1)}}function r(m){s.length&&s.forEach(h=>h(m))}function i(m){return t.draggables[m]||null}function n(m){const h=i(m);return h||Y(),h}const l={register:m=>{t.draggables[m.descriptor.id]=m,r({type:"ADDITION",value:m})},update:(m,h)=>{const p=t.draggables[h.descriptor.id];p&&p.uniqueId===m.uniqueId&&(delete t.draggables[h.descriptor.id],t.draggables[m.descriptor.id]=m)},unregister:m=>{const h=m.descriptor.id,p=i(h);p&&m.uniqueId===p.uniqueId&&(delete t.draggables[h],t.droppables[m.descriptor.droppableId]&&r({type:"REMOVAL",value:m}))},getById:n,findById:i,exists:m=>!!i(m),getAllByType:m=>Object.values(t.draggables).filter(h=>h.descriptor.type===m)};function o(m){return t.droppables[m]||null}function c(m){const h=o(m);return h||Y(),h}const u={register:m=>{t.droppables[m.descriptor.id]=m},unregister:m=>{const h=o(m.descriptor.id);h&&m.uniqueId===h.uniqueId&&delete t.droppables[m.descriptor.id]},getById:c,findById:o,exists:m=>!!o(m),getAllByType:m=>Object.values(t.droppables).filter(h=>h.descriptor.type===m)};function d(){t.draggables={},t.droppables={},s.length=0}return{draggable:l,droppable:u,subscribe:a,clean:d}}function Np(){const t=Pe(wp,[]);return P.useEffect(()=>function(){t.clean()},[t]),t}var Jr=Ae.createContext(null),va=()=>{const t=document.body;return t||Y(),t};const kp={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},Cp=t=>`rfd-announcement-${t}`;function Sp(t){const s=Pe(()=>Cp(t),[t]),a=P.useRef(null);return P.useEffect(function(){const n=document.createElement("div");return a.current=n,n.id=s,n.setAttribute("aria-live","assertive"),n.setAttribute("aria-atomic","true"),fa(n.style,kp),va().appendChild(n),function(){setTimeout(function(){const c=va();c.contains(n)&&c.removeChild(n),n===a.current&&(a.current=null)})}},[s]),me(i=>{const n=a.current;if(n){n.textContent=i;return}},[])}const Ap={separator:"::"};function Yr(t,s=Ap){const a=Ae.useId();return Pe(()=>`${t}${s.separator}${a}`,[s.separator,t,a])}function Pp({contextId:t,uniqueId:s}){return`rfd-hidden-text-${t}-${s}`}function Tp({contextId:t,text:s}){const a=Yr("hidden-text",{separator:"-"}),r=Pe(()=>Pp({contextId:t,uniqueId:a}),[a,t]);return P.useEffect(function(){const n=document.createElement("div");return n.id=r,n.textContent=s,n.style.display="none",va().appendChild(n),function(){const o=va();o.contains(n)&&o.removeChild(n)}},[r,s]),r}var Ea=Ae.createContext(null);function So(t){const s=P.useRef(t);return P.useEffect(()=>{s.current=t}),s}function Ep(){let t=null;function s(){return!!t}function a(l){return l===t}function r(l){t&&Y();const o={abandon:l};return t=o,o}function i(){t||Y(),t=null}function n(){t&&(t.abandon(),i())}return{isClaimed:s,isActive:a,claim:r,release:i,tryAbandon:n}}function $s(t){return t.phase==="IDLE"||t.phase==="DROP_ANIMATING"?!1:t.isDragging}const Fp=9,Dp=13,ei=27,Ao=32,Ip=33,_p=34,Rp=35,Op=36,Bp=37,Mp=38,Lp=39,Up=40,Vp={[Dp]:!0,[Fp]:!0};var Po=t=>{Vp[t.keyCode]&&t.preventDefault()};const Fa=(()=>{const t="visibilitychange";return typeof document>"u"?t:[t,`ms${t}`,`webkit${t}`,`moz${t}`,`o${t}`].find(r=>`on${r}`in document)||t})(),To=0,Sn=5;function $p(t,s){return Math.abs(s.x-t.x)>=Sn||Math.abs(s.y-t.y)>=Sn}const An={type:"IDLE"};function qp({cancel:t,completed:s,getPhase:a,setPhase:r}){return[{eventName:"mousemove",fn:i=>{const{button:n,clientX:l,clientY:o}=i;if(n!==To)return;const c={x:l,y:o},u=a();if(u.type==="DRAGGING"){i.preventDefault(),u.actions.move(c);return}u.type!=="PENDING"&&Y();const d=u.point;if(!$p(d,c))return;i.preventDefault();const m=u.actions.fluidLift(c);r({type:"DRAGGING",actions:m})}},{eventName:"mouseup",fn:i=>{const n=a();if(n.type!=="DRAGGING"){t();return}i.preventDefault(),n.actions.drop({shouldBlockNextClick:!0}),s()}},{eventName:"mousedown",fn:i=>{a().type==="DRAGGING"&&i.preventDefault(),t()}},{eventName:"keydown",fn:i=>{if(a().type==="PENDING"){t();return}if(i.keyCode===ei){i.preventDefault(),t();return}Po(i)}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{a().type==="PENDING"&&t()}},{eventName:"webkitmouseforcedown",fn:i=>{const n=a();if(n.type==="IDLE"&&Y(),n.actions.shouldRespectForcePress()){t();return}i.preventDefault()}},{eventName:Fa,fn:t}]}function Gp(t){const s=P.useRef(An),a=P.useRef(qt),r=Pe(()=>({eventName:"mousedown",fn:function(m){if(m.defaultPrevented||m.button!==To||m.ctrlKey||m.metaKey||m.shiftKey||m.altKey)return;const h=t.findClosestDraggableId(m);if(!h)return;const p=t.tryGetLock(h,l,{sourceEvent:m});if(!p)return;m.preventDefault();const k={x:m.clientX,y:m.clientY};a.current(),u(p,k)}}),[t]),i=Pe(()=>({eventName:"webkitmouseforcewillbegin",fn:d=>{if(d.defaultPrevented)return;const m=t.findClosestDraggableId(d);if(!m)return;const h=t.findOptionsForDraggable(m);h&&(h.shouldRespectForcePress||t.canGetLock(m)&&d.preventDefault())}}),[t]),n=me(function(){const m={passive:!1,capture:!0};a.current=yt(window,[i,r],m)},[i,r]),l=me(()=>{s.current.type!=="IDLE"&&(s.current=An,a.current(),n())},[n]),o=me(()=>{const d=s.current;l(),d.type==="DRAGGING"&&d.actions.cancel({shouldBlockNextClick:!0}),d.type==="PENDING"&&d.actions.abort()},[l]),c=me(function(){const m={capture:!0,passive:!1},h=qp({cancel:o,completed:l,getPhase:()=>s.current,setPhase:p=>{s.current=p}});a.current=yt(window,h,m)},[o,l]),u=me(function(m,h){s.current.type!=="IDLE"&&Y(),s.current={type:"PENDING",point:h,actions:m},c()},[c]);ht(function(){return n(),function(){a.current()}},[n])}function Wp(){}const zp={[_p]:!0,[Ip]:!0,[Op]:!0,[Rp]:!0};function Kp(t,s){function a(){s(),t.cancel()}function r(){s(),t.drop()}return[{eventName:"keydown",fn:i=>{if(i.keyCode===ei){i.preventDefault(),a();return}if(i.keyCode===Ao){i.preventDefault(),r();return}if(i.keyCode===Up){i.preventDefault(),t.moveDown();return}if(i.keyCode===Mp){i.preventDefault(),t.moveUp();return}if(i.keyCode===Lp){i.preventDefault(),t.moveRight();return}if(i.keyCode===Bp){i.preventDefault(),t.moveLeft();return}if(zp[i.keyCode]){i.preventDefault();return}Po(i)}},{eventName:"mousedown",fn:a},{eventName:"mouseup",fn:a},{eventName:"click",fn:a},{eventName:"touchstart",fn:a},{eventName:"resize",fn:a},{eventName:"wheel",fn:a,options:{passive:!0}},{eventName:Fa,fn:a}]}function Hp(t){const s=P.useRef(Wp),a=Pe(()=>({eventName:"keydown",fn:function(n){if(n.defaultPrevented||n.keyCode!==Ao)return;const l=t.findClosestDraggableId(n);if(!l)return;const o=t.tryGetLock(l,d,{sourceEvent:n});if(!o)return;n.preventDefault();let c=!0;const u=o.snapLift();s.current();function d(){c||Y(),c=!1,s.current(),r()}s.current=yt(window,Kp(u,d),{capture:!0,passive:!1})}}),[t]),r=me(function(){const n={passive:!1,capture:!0};s.current=yt(window,[a],n)},[a]);ht(function(){return r(),function(){s.current()}},[r])}const Za={type:"IDLE"},Qp=120,Xp=.15;function Zp({cancel:t,getPhase:s}){return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:a=>{a.preventDefault()}},{eventName:"keydown",fn:a=>{if(s().type!=="DRAGGING"){t();return}a.keyCode===ei&&a.preventDefault(),t()}},{eventName:Fa,fn:t}]}function Jp({cancel:t,completed:s,getPhase:a}){return[{eventName:"touchmove",options:{capture:!1},fn:r=>{const i=a();if(i.type!=="DRAGGING"){t();return}i.hasMoved=!0;const{clientX:n,clientY:l}=r.touches[0],o={x:n,y:l};r.preventDefault(),i.actions.move(o)}},{eventName:"touchend",fn:r=>{const i=a();if(i.type!=="DRAGGING"){t();return}r.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),s()}},{eventName:"touchcancel",fn:r=>{if(a().type!=="DRAGGING"){t();return}r.preventDefault(),t()}},{eventName:"touchforcechange",fn:r=>{const i=a();i.type==="IDLE"&&Y();const n=r.touches[0];if(!n||!(n.force>=Xp))return;const o=i.actions.shouldRespectForcePress();if(i.type==="PENDING"){o&&t();return}if(o){if(i.hasMoved){r.preventDefault();return}t();return}r.preventDefault()}},{eventName:Fa,fn:t}]}function Yp(t){const s=P.useRef(Za),a=P.useRef(qt),r=me(function(){return s.current},[]),i=me(function(p){s.current=p},[]),n=Pe(()=>({eventName:"touchstart",fn:function(p){if(p.defaultPrevented)return;const k=t.findClosestDraggableId(p);if(!k)return;const _=t.tryGetLock(k,o,{sourceEvent:p});if(!_)return;const f=p.touches[0],{clientX:T,clientY:M}=f,S={x:T,y:M};a.current(),m(_,S)}}),[t]),l=me(function(){const p={capture:!0,passive:!1};a.current=yt(window,[n],p)},[n]),o=me(()=>{const h=s.current;h.type!=="IDLE"&&(h.type==="PENDING"&&clearTimeout(h.longPressTimerId),i(Za),a.current(),l())},[l,i]),c=me(()=>{const h=s.current;o(),h.type==="DRAGGING"&&h.actions.cancel({shouldBlockNextClick:!0}),h.type==="PENDING"&&h.actions.abort()},[o]),u=me(function(){const p={capture:!0,passive:!1},k={cancel:c,completed:o,getPhase:r},_=yt(window,Jp(k),p),f=yt(window,Zp(k),p);a.current=function(){_(),f()}},[c,r,o]),d=me(function(){const p=r();p.type!=="PENDING"&&Y();const k=p.actions.fluidLift(p.point);i({type:"DRAGGING",actions:k,hasMoved:!1})},[r,i]),m=me(function(p,k){r().type!=="IDLE"&&Y();const _=setTimeout(d,Qp);i({type:"PENDING",point:k,actions:p,longPressTimerId:_}),u()},[u,r,i,d]);ht(function(){return l(),function(){a.current();const k=r();k.type==="PENDING"&&(clearTimeout(k.longPressTimerId),i(Za))}},[r,l,i]),ht(function(){return yt(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const eg=["input","button","textarea","select","option","optgroup","video","audio"];function Eo(t,s){if(s==null)return!1;if(eg.includes(s.tagName.toLowerCase()))return!0;const r=s.getAttribute("contenteditable");return r==="true"||r===""?!0:s===t?!1:Eo(t,s.parentElement)}function tg(t,s){const a=s.target;return Ta(a)?Eo(t,a):!1}var sg=t=>Ct(t.getBoundingClientRect()).center;function ag(t){return t instanceof Co(t).Element}const rg=(()=>{const t="matches";return typeof document>"u"?t:[t,"msMatchesSelector","webkitMatchesSelector"].find(r=>r in Element.prototype)||t})();function Fo(t,s){return t==null?null:t[rg](s)?t:Fo(t.parentElement,s)}function ig(t,s){return t.closest?t.closest(s):Fo(t,s)}function ng(t){return`[${gs.contextId}="${t}"]`}function lg(t,s){const a=s.target;if(!ag(a))return null;const r=ng(t),i=ig(a,r);return!i||!Ta(i)?null:i}function og(t,s){const a=lg(t,s);return a?a.getAttribute(gs.draggableId):null}function cg(t,s){const a=`[${yr.contextId}="${t}"]`,i=ko(document,a).find(n=>n.getAttribute(yr.id)===s);return!i||!Ta(i)?null:i}function dg(t){t.preventDefault()}function Js({expected:t,phase:s,isLockActive:a,shouldWarn:r}){return!(!a()||t!==s)}function Do({lockAPI:t,store:s,registry:a,draggableId:r}){if(t.isClaimed())return!1;const i=a.draggable.findById(r);return!(!i||!i.options.isEnabled||!vo(s.getState(),r))}function ug({lockAPI:t,contextId:s,store:a,registry:r,draggableId:i,forceSensorStop:n,sourceEvent:l}){if(!Do({lockAPI:t,store:a,registry:r,draggableId:i}))return null;const c=r.draggable.getById(i),u=cg(s,c.descriptor.id);if(!u||l&&!c.options.canDragInteractiveElements&&tg(u,l))return null;const d=t.claim(n||qt);let m="PRE_DRAG";function h(){return c.options.shouldRespectForcePress}function p(){return t.isActive(d)}function k(B,b){Js({expected:B,phase:m,isLockActive:p,shouldWarn:!0})&&a.dispatch(b())}const _=k.bind(null,"DRAGGING");function f(B){function b(){t.release(),m="COMPLETED"}m!=="PRE_DRAG"&&(b(),Y()),a.dispatch(ih(B.liftActionArgs)),m="DRAGGING";function C(j,K={shouldBlockNextClick:!1}){if(B.cleanup(),K.shouldBlockNextClick){const H=yt(window,[{eventName:"click",fn:dg,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(H)}b(),a.dispatch(mo({reason:j}))}return{isActive:()=>Js({expected:"DRAGGING",phase:m,isLockActive:p,shouldWarn:!1}),shouldRespectForcePress:h,drop:j=>C("DROP",j),cancel:j=>C("CANCEL",j),...B.actions}}function T(B){const b=Os(j=>{_(()=>uo({client:j}))});return{...f({liftActionArgs:{id:i,clientSelection:B,movementMode:"FLUID"},cleanup:()=>b.cancel(),actions:{move:b}}),move:b}}function M(){const B={moveUp:()=>_(ph),moveRight:()=>_(fh),moveDown:()=>_(gh),moveLeft:()=>_(xh)};return f({liftActionArgs:{id:i,clientSelection:sg(u),movementMode:"SNAP"},cleanup:qt,actions:B})}function S(){Js({expected:"PRE_DRAG",phase:m,isLockActive:p,shouldWarn:!0})&&t.release()}return{isActive:()=>Js({expected:"PRE_DRAG",phase:m,isLockActive:p,shouldWarn:!1}),shouldRespectForcePress:h,fluidLift:T,snapLift:M,abort:S}}const mg=[Gp,Hp,Yp];function hg({contextId:t,store:s,registry:a,customSensors:r,enableDefaultSensors:i}){const n=[...i?mg:[],...r||[]],l=P.useState(()=>Ep())[0],o=me(function(f,T){$s(f)&&!$s(T)&&l.tryAbandon()},[l]);ht(function(){let f=s.getState();return s.subscribe(()=>{const M=s.getState();o(f,M),f=M})},[l,s,o]),ht(()=>l.tryAbandon,[l.tryAbandon]);const c=me(_=>Do({lockAPI:l,registry:a,store:s,draggableId:_}),[l,a,s]),u=me((_,f,T)=>ug({lockAPI:l,registry:a,contextId:t,store:s,draggableId:_,forceSensorStop:f||null,sourceEvent:T&&T.sourceEvent?T.sourceEvent:null}),[t,l,a,s]),d=me(_=>og(t,_),[t]),m=me(_=>{const f=a.draggable.findById(_);return f?f.options:null},[a.draggable]),h=me(function(){l.isClaimed()&&(l.tryAbandon(),s.getState().phase!=="IDLE"&&s.dispatch(Wr()))},[l,s]),p=me(()=>l.isClaimed(),[l]),k=Pe(()=>({canGetLock:c,tryGetLock:u,findClosestDraggableId:d,findOptionsForDraggable:m,tryReleaseLock:h,isLockClaimed:p}),[c,u,d,m,h,p]);for(let _=0;_<n.length;_++)n[_](k)}const pg=t=>({onBeforeCapture:s=>{const a=()=>{t.onBeforeCapture&&t.onBeforeCapture(s)};Vn.flushSync(a)},onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragEnd:t.onDragEnd,onDragUpdate:t.onDragUpdate}),gg=t=>({...Vs,...t.autoScrollerOptions,durationDampening:{...Vs.durationDampening,...t.autoScrollerOptions}});function ws(t){return t.current||Y(),t.current}function fg(t){const{contextId:s,setCallbacks:a,sensors:r,nonce:i,dragHandleUsageInstructions:n}=t,l=P.useRef(null),o=So(t),c=me(()=>pg(o.current),[o]),u=me(()=>gg(o.current),[o]),d=Sp(s),m=Tp({contextId:s,text:n}),h=yp(s,i),p=me(H=>{ws(l).dispatch(H)},[]),k=Pe(()=>en({publishWhileDragging:lh,updateDroppableScroll:ch,updateDroppableIsEnabled:dh,updateDroppableIsCombineEnabled:uh,collectionStarting:oh},p),[p]),_=Np(),f=Pe(()=>Zh(_,k),[_,k]),T=Pe(()=>pp({scrollWindow:Jh,scrollDroppable:f.scrollDroppable,getAutoScrollerOptions:u,...en({move:uo},p)}),[f.scrollDroppable,p,u]),M=jp(s),S=Pe(()=>Kh({announce:d,autoScroller:T,dimensionMarshal:f,focusMarshal:M,getResponders:c,styleMarshal:h}),[d,T,f,M,c,h]);l.current=S;const w=me(()=>{const H=ws(l);H.getState().phase!=="IDLE"&&H.dispatch(Wr())},[]),B=me(()=>{const H=ws(l).getState();return H.phase==="DROP_ANIMATING"?!0:H.phase==="IDLE"?!1:H.isDragging},[]),b=Pe(()=>({isDragging:B,tryAbort:w}),[B,w]);a(b);const C=me(H=>vo(ws(l).getState(),H),[]),j=me(()=>Xt(ws(l).getState()),[]),K=Pe(()=>({marshal:f,focus:M,contextId:s,canLift:C,isMovementAllowed:j,dragHandleUsageInstructionsId:m,registry:_}),[s,f,m,M,C,j,_]);return hg({contextId:s,store:S,registry:_,customSensors:r||null,enableDefaultSensors:t.enableDefaultSensors!==!1}),P.useEffect(()=>w,[w]),Ae.createElement(Ea.Provider,{value:K},Ae.createElement(Vu,{context:Jr,store:S},t.children))}function xg(){return Ae.useId()}function Io(t){const s=xg(),a=t.dragHandleUsageInstructions||ra.dragHandleUsageInstructions;return Ae.createElement(Hu,null,r=>Ae.createElement(fg,{nonce:t.nonce,contextId:s,setCallbacks:r,dragHandleUsageInstructions:a,enableDefaultSensors:t.enableDefaultSensors,sensors:t.sensors,onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragUpdate:t.onDragUpdate,onDragEnd:t.onDragEnd,autoScrollerOptions:t.autoScrollerOptions},t.children))}const Pn={dragging:5e3,dropAnimating:4500},bg=(t,s)=>s?Ts.drop(s.duration):t?Ts.snap:Ts.fluid,yg=(t,s)=>{if(t)return s?Us.opacity.drop:Us.opacity.combining},vg=t=>t.forceShouldAnimate!=null?t.forceShouldAnimate:t.mode==="SNAP";function jg(t){const a=t.dimension.client,{offset:r,combineWith:i,dropping:n}=t,l=!!i,o=vg(t),c=!!n,u=c?xr.drop(r,l):xr.moveTo(r);return{position:"fixed",top:a.marginBox.top,left:a.marginBox.left,boxSizing:"border-box",width:a.borderBox.width,height:a.borderBox.height,transition:bg(o,n),transform:u,opacity:yg(l,c),zIndex:c?Pn.dropAnimating:Pn.dragging,pointerEvents:"none"}}function wg(t){return{transform:xr.moveTo(t.offset),transition:t.shouldAnimateDisplacement?void 0:"none"}}function Ng(t){return t.type==="DRAGGING"?jg(t):wg(t)}function kg(t,s,a=st){const r=window.getComputedStyle(s),i=s.getBoundingClientRect(),n=Ml(i,r),l=ga(n,a),o={client:n,tagName:s.tagName.toLowerCase(),display:r.display},c={x:n.marginBox.width,y:n.marginBox.height};return{descriptor:t,placeholder:o,displaceBy:c,client:n,page:l}}function Cg(t){const s=Yr("draggable"),{descriptor:a,registry:r,getDraggableRef:i,canDragInteractiveElements:n,shouldRespectForcePress:l,isEnabled:o}=t,c=Pe(()=>({canDragInteractiveElements:n,shouldRespectForcePress:l,isEnabled:o}),[n,o,l]),u=me(p=>{const k=i();return k||Y(),kg(a,k,p)},[a,i]),d=Pe(()=>({uniqueId:s,descriptor:a,options:c,getDimension:u}),[a,u,c,s]),m=P.useRef(d),h=P.useRef(!0);ht(()=>(r.draggable.register(m.current),()=>r.draggable.unregister(m.current)),[r.draggable]),ht(()=>{if(h.current){h.current=!1;return}const p=m.current;m.current=d,r.draggable.update(d,p)},[d,r.draggable])}var ti=Ae.createContext(null);function ja(t){const s=P.useContext(t);return s||Y(),s}function Sg(t){t.preventDefault()}const Ag=t=>{const s=P.useRef(null),a=me((b=null)=>{s.current=b},[]),r=me(()=>s.current,[]),{contextId:i,dragHandleUsageInstructionsId:n,registry:l}=ja(Ea),{type:o,droppableId:c}=ja(ti),u=Pe(()=>({id:t.draggableId,index:t.index,type:o,droppableId:c}),[t.draggableId,t.index,o,c]),{children:d,draggableId:m,isEnabled:h,shouldRespectForcePress:p,canDragInteractiveElements:k,isClone:_,mapped:f,dropAnimationFinished:T}=t;if(!_){const b=Pe(()=>({descriptor:u,registry:l,getDraggableRef:r,canDragInteractiveElements:k,shouldRespectForcePress:p,isEnabled:h}),[u,l,r,k,p,h]);Cg(b)}const M=Pe(()=>h?{tabIndex:0,role:"button","aria-describedby":n,"data-rfd-drag-handle-draggable-id":m,"data-rfd-drag-handle-context-id":i,draggable:!1,onDragStart:Sg}:null,[i,n,m,h]),S=me(b=>{f.type==="DRAGGING"&&f.dropping&&b.propertyName==="transform"&&Vn.flushSync(T)},[T,f]),w=Pe(()=>{const b=Ng(f),C=f.type==="DRAGGING"&&f.dropping?S:void 0;return{innerRef:a,draggableProps:{"data-rfd-draggable-context-id":i,"data-rfd-draggable-id":m,style:b,onTransitionEnd:C},dragHandleProps:M}},[i,M,m,f,S,a]),B=Pe(()=>({draggableId:u.id,type:u.type,source:{index:u.index,droppableId:u.droppableId}}),[u.droppableId,u.id,u.index,u.type]);return Ae.createElement(Ae.Fragment,null,d(w,f.snapshot,B))};var _o=(t,s)=>t===s,Ro=t=>{const{combine:s,destination:a}=t;return a?a.droppableId:s?s.droppableId:null};const Pg=t=>t.combine?t.combine.draggableId:null,Tg=t=>t.at&&t.at.type==="COMBINE"?t.at.combine.draggableId:null;function Eg(){const t=tt((i,n)=>({x:i,y:n})),s=tt((i,n,l=null,o=null,c=null)=>({isDragging:!0,isClone:n,isDropAnimating:!!c,dropAnimation:c,mode:i,draggingOver:l,combineWith:o,combineTargetFor:null})),a=tt((i,n,l,o,c=null,u=null,d=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:c,combineWith:u,mode:n,offset:i,dimension:l,forceShouldAnimate:d,snapshot:s(n,o,c,u,null)}}));return(i,n)=>{if($s(i)){if(i.critical.draggable.id!==n.draggableId)return null;const l=i.current.client.offset,o=i.dimensions.draggables[n.draggableId],c=mt(i.impact),u=Tg(i.impact),d=i.forceShouldAnimate;return a(t(l.x,l.y),i.movementMode,o,n.isClone,c,u,d)}if(i.phase==="DROP_ANIMATING"){const l=i.completed;if(l.result.draggableId!==n.draggableId)return null;const o=n.isClone,c=i.dimensions.draggables[n.draggableId],u=l.result,d=u.mode,m=Ro(u),h=Pg(u),k={duration:i.dropDuration,curve:Kr.drop,moveTo:i.newHomeClientOffset,opacity:h?Us.opacity.drop:null,scale:h?Us.scale.drop:null};return{mapped:{type:"DRAGGING",offset:i.newHomeClientOffset,dimension:c,dropping:k,draggingOver:m,combineWith:h,mode:d,forceShouldAnimate:null,snapshot:s(d,o,m,h,k)}}}return null}}function Oo(t=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:t,combineWith:null}}const Fg={mapped:{type:"SECONDARY",offset:st,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:Oo(null)}};function Dg(){const t=tt((l,o)=>({x:l,y:o})),s=tt(Oo),a=tt((l,o=null,c)=>({mapped:{type:"SECONDARY",offset:l,combineTargetFor:o,shouldAnimateDisplacement:c,snapshot:s(o)}})),r=l=>l?a(st,l,!0):null,i=(l,o,c,u)=>{const d=c.displaced.visible[l],m=!!(u.inVirtualList&&u.effected[l]),h=Sa(c),p=h&&h.draggableId===l?o:null;if(!d){if(!m)return r(p);if(c.displaced.invisible[l])return null;const f=fs(u.displacedBy.point),T=t(f.x,f.y);return a(T,p,!0)}if(m)return r(p);const k=c.displacedBy.point,_=t(k.x,k.y);return a(_,p,d.shouldAnimate)};return(l,o)=>{if($s(l))return l.critical.draggable.id===o.draggableId?null:i(o.draggableId,l.critical.draggable.id,l.impact,l.afterCritical);if(l.phase==="DROP_ANIMATING"){const c=l.completed;return c.result.draggableId===o.draggableId?null:i(o.draggableId,c.result.draggableId,c.impact,c.afterCritical)}return null}}const Ig=()=>{const t=Eg(),s=Dg();return(r,i)=>t(r,i)||s(r,i)||Fg},_g={dropAnimationFinished:ho},Rg=Bl(Ig,_g,null,{context:Jr,areStatePropsEqual:_o})(Ag);function Bo(t){return ja(ti).isUsingCloneFor===t.draggableId&&!t.isClone?null:Ae.createElement(Rg,t)}function Mo(t){const s=typeof t.isDragDisabled=="boolean"?!t.isDragDisabled:!0,a=!!t.disableInteractiveElementBlocking,r=!!t.shouldRespectForcePress;return Ae.createElement(Bo,fa({},t,{isClone:!1,isEnabled:s,canDragInteractiveElements:a,shouldRespectForcePress:r}))}const Lo=t=>s=>t===s,Og=Lo("scroll"),Bg=Lo("auto"),Tn=(t,s)=>s(t.overflowX)||s(t.overflowY),Mg=t=>{const s=window.getComputedStyle(t),a={overflowX:s.overflowX,overflowY:s.overflowY};return Tn(a,Og)||Tn(a,Bg)},Lg=()=>!1,Uo=t=>t==null?null:t===document.body?Lg()?t:null:t===document.documentElement?null:Mg(t)?t:Uo(t.parentElement);var vr=t=>({x:t.scrollLeft,y:t.scrollTop});const Vo=t=>t?window.getComputedStyle(t).position==="fixed"?!0:Vo(t.parentElement):!1;var Ug=t=>{const s=Uo(t),a=Vo(t);return{closestScrollable:s,isFixedOnPage:a}},Vg=({descriptor:t,isEnabled:s,isCombineEnabled:a,isFixedOnPage:r,direction:i,client:n,page:l,closest:o})=>{const c=(()=>{if(!o)return null;const{scrollSize:h,client:p}=o,k=xo({scrollHeight:h.scrollHeight,scrollWidth:h.scrollWidth,height:p.paddingBox.height,width:p.paddingBox.width});return{pageMarginBox:o.page.marginBox,frameClient:p,scrollSize:h,shouldClipSubject:o.shouldClipSubject,scroll:{initial:o.scroll,current:o.scroll,max:k,diff:{value:st,displacement:st}}}})(),u=i==="vertical"?Ur:Ql,d=hs({page:l,withPlaceholder:null,axis:u,frame:c});return{descriptor:t,isCombineEnabled:a,isFixedOnPage:r,axis:u,isEnabled:s,client:n,page:l,frame:c,subject:d}};const $g=(t,s)=>{const a=Ll(t);if(!s||t!==s)return a;const r=a.paddingBox.top-s.scrollTop,i=a.paddingBox.left-s.scrollLeft,n=r+s.scrollHeight,l=i+s.scrollWidth,c=Or({top:r,right:l,bottom:n,left:i},a.border);return Br({borderBox:c,margin:a.margin,border:a.border,padding:a.padding})};var qg=({ref:t,descriptor:s,env:a,windowScroll:r,direction:i,isDropDisabled:n,isCombineEnabled:l,shouldClipSubject:o})=>{const c=a.closestScrollable,u=$g(t,c),d=ga(u,r),m=(()=>{if(!c)return null;const p=Ll(c),k={scrollHeight:c.scrollHeight,scrollWidth:c.scrollWidth};return{client:p,page:ga(p,r),scroll:vr(c),scrollSize:k,shouldClipSubject:o}})();return Vg({descriptor:s,isEnabled:!n,isCombineEnabled:l,isFixedOnPage:a.isFixedOnPage,direction:i,client:u,page:d,closest:m})};const Gg={passive:!1},Wg={passive:!0};var En=t=>t.shouldPublishImmediately?Gg:Wg;const Ys=t=>t&&t.env.closestScrollable||null;function zg(t){const s=P.useRef(null),a=ja(Ea),r=Yr("droppable"),{registry:i,marshal:n}=a,l=So(t),o=Pe(()=>({id:t.droppableId,type:t.type,mode:t.mode}),[t.droppableId,t.mode,t.type]),c=P.useRef(o),u=Pe(()=>tt((w,B)=>{s.current||Y();const b={x:w,y:B};n.updateDroppableScroll(o.id,b)}),[o.id,n]),d=me(()=>{const w=s.current;return!w||!w.env.closestScrollable?st:vr(w.env.closestScrollable)},[]),m=me(()=>{const w=d();u(w.x,w.y)},[d,u]),h=Pe(()=>Os(m),[m]),p=me(()=>{const w=s.current,B=Ys(w);if(w&&B||Y(),w.scrollOptions.shouldPublishImmediately){m();return}h()},[h,m]),k=me((w,B)=>{s.current&&Y();const b=l.current,C=b.getDroppableRef();C||Y();const j=Ug(C),K={ref:C,descriptor:o,env:j,scrollOptions:B};s.current=K;const H=qg({ref:C,descriptor:o,env:j,windowScroll:w,direction:b.direction,isDropDisabled:b.isDropDisabled,isCombineEnabled:b.isCombineEnabled,shouldClipSubject:!b.ignoreContainerClipping}),Z=j.closestScrollable;return Z&&(Z.setAttribute(kn.contextId,a.contextId),Z.addEventListener("scroll",p,En(K.scrollOptions))),H},[a.contextId,o,p,l]),_=me(()=>{const w=s.current,B=Ys(w);return w&&B||Y(),vr(B)},[]),f=me(()=>{const w=s.current;w||Y();const B=Ys(w);s.current=null,B&&(h.cancel(),B.removeAttribute(kn.contextId),B.removeEventListener("scroll",p,En(w.scrollOptions)))},[p,h]),T=me(w=>{const B=s.current;B||Y();const b=Ys(B);b||Y(),b.scrollTop+=w.y,b.scrollLeft+=w.x},[]),M=Pe(()=>({getDimensionAndWatchScroll:k,getScrollWhileDragging:_,dragStopped:f,scroll:T}),[f,k,_,T]),S=Pe(()=>({uniqueId:r,descriptor:o,callbacks:M}),[M,o,r]);ht(()=>(c.current=S.descriptor,i.droppable.register(S),()=>{s.current&&f(),i.droppable.unregister(S)}),[M,o,f,S,n,i.droppable]),ht(()=>{s.current&&n.updateDroppableIsEnabled(c.current.id,!t.isDropDisabled)},[t.isDropDisabled,n]),ht(()=>{s.current&&n.updateDroppableIsCombineEnabled(c.current.id,t.isCombineEnabled)},[t.isCombineEnabled,n])}function Ja(){}const Fn={width:0,height:0,margin:tm},Kg=({isAnimatingOpenOnMount:t,placeholder:s,animate:a})=>t||a==="close"?Fn:{height:s.client.borderBox.height,width:s.client.borderBox.width,margin:s.client.margin},Hg=({isAnimatingOpenOnMount:t,placeholder:s,animate:a})=>{const r=Kg({isAnimatingOpenOnMount:t,placeholder:s,animate:a});return{display:s.display,boxSizing:"border-box",width:r.width,height:r.height,marginTop:r.margin.top,marginRight:r.margin.right,marginBottom:r.margin.bottom,marginLeft:r.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:a!=="none"?Ts.placeholder:null}},Qg=t=>{const s=P.useRef(null),a=me(()=>{s.current&&(clearTimeout(s.current),s.current=null)},[]),{animate:r,onTransitionEnd:i,onClose:n,contextId:l}=t,[o,c]=P.useState(t.animate==="open");P.useEffect(()=>o?r!=="open"?(a(),c(!1),Ja):s.current?Ja:(s.current=setTimeout(()=>{s.current=null,c(!1)}),a):Ja,[r,o,a]);const u=me(m=>{m.propertyName==="height"&&(i(),r==="close"&&n())},[r,n,i]),d=Hg({isAnimatingOpenOnMount:o,animate:t.animate,placeholder:t.placeholder});return Ae.createElement(t.placeholder.tagName,{style:d,"data-rfd-placeholder-context-id":l,onTransitionEnd:u,ref:t.innerRef})};var Xg=Ae.memo(Qg);class Zg extends Ae.PureComponent{constructor(...s){super(...s),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(s,a){return s.shouldAnimate?s.on?{isVisible:!0,data:s.on,animate:"open"}:a.isVisible?{isVisible:!0,data:a.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!s.on,data:s.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const s={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(s)}}const Jg=t=>{const s=P.useContext(Ea);s||Y();const{contextId:a,isMovementAllowed:r}=s,i=P.useRef(null),n=P.useRef(null),{children:l,droppableId:o,type:c,mode:u,direction:d,ignoreContainerClipping:m,isDropDisabled:h,isCombineEnabled:p,snapshot:k,useClone:_,updateViewportMaxScroll:f,getContainerForClone:T}=t,M=me(()=>i.current,[]),S=me((Z=null)=>{i.current=Z},[]);me(()=>n.current,[]);const w=me((Z=null)=>{n.current=Z},[]),B=me(()=>{r()&&f({maxScroll:yo()})},[r,f]);zg({droppableId:o,type:c,mode:u,direction:d,isDropDisabled:h,isCombineEnabled:p,ignoreContainerClipping:m,getDroppableRef:M});const b=Pe(()=>Ae.createElement(Zg,{on:t.placeholder,shouldAnimate:t.shouldAnimatePlaceholder},({onClose:Z,data:v,animate:G})=>Ae.createElement(Xg,{placeholder:v,onClose:Z,innerRef:w,animate:G,contextId:a,onTransitionEnd:B})),[a,B,t.placeholder,t.shouldAnimatePlaceholder,w]),C=Pe(()=>({innerRef:S,placeholder:b,droppableProps:{"data-rfd-droppable-id":o,"data-rfd-droppable-context-id":a}}),[a,o,b,S]),j=_?_.dragging.draggableId:null,K=Pe(()=>({droppableId:o,type:c,isUsingCloneFor:j}),[o,j,c]);function H(){if(!_)return null;const{dragging:Z,render:v}=_,G=Ae.createElement(Bo,{draggableId:Z.draggableId,index:Z.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(O,y)=>v(O,y,Z));return Ko.createPortal(G,T())}return Ae.createElement(ti.Provider,{value:K},l(C,k),H())};function Yg(){return document.body||Y(),document.body}const Dn={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:Yg},$o=t=>{let s={...t},a;for(a in Dn)t[a]===void 0&&(s={...s,[a]:Dn[a]});return s},Ya=(t,s)=>t===s.droppable.type,In=(t,s)=>s.draggables[t.draggable.id],ef=()=>{const t={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},s={...t,shouldAnimatePlaceholder:!1},a=tt(n=>({draggableId:n.id,type:n.type,source:{index:n.index,droppableId:n.droppableId}})),r=tt((n,l,o,c,u,d)=>{const m=u.descriptor.id;if(u.descriptor.droppableId===n){const k=d?{render:d,dragging:a(u.descriptor)}:null,_={isDraggingOver:o,draggingOverWith:o?m:null,draggingFromThisWith:m,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!1,snapshot:_,useClone:k}}if(!l)return s;if(!c)return t;const p={isDraggingOver:o,draggingOverWith:m,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!0,snapshot:p,useClone:null}});return(n,l)=>{const o=$o(l),c=o.droppableId,u=o.type,d=!o.isDropDisabled,m=o.renderClone;if($s(n)){const h=n.critical;if(!Ya(u,h))return s;const p=In(h,n.dimensions),k=mt(n.impact)===c;return r(c,d,k,k,p,m)}if(n.phase==="DROP_ANIMATING"){const h=n.completed;if(!Ya(u,h.critical))return s;const p=In(h.critical,n.dimensions);return r(c,d,Ro(h.result)===c,mt(h.impact)===c,p,m)}if(n.phase==="IDLE"&&n.completed&&!n.shouldFlush){const h=n.completed;if(!Ya(u,h.critical))return s;const p=mt(h.impact)===c,k=!!(h.impact.at&&h.impact.at.type==="COMBINE"),_=h.critical.droppable.id===c;return p?k?t:s:_?t:s}return s}},tf={updateViewportMaxScroll:hh},qo=Bl(ef,tf,(t,s,a)=>({...$o(a),...t,...s}),{context:Jr,areStatePropsEqual:_o})(Jg),sf=["#000000","#6B7280","#DC2626","#EF4444","#F97316","#EAB308","#22C55E","#3B82F6","#8B5CF6","#EC4899","#FFFFFF","#9CA3AF","#92400E","#F8BBD0","#FCD34D","#FEF3C7","#BBF7D0","#BFDBFE","#DDD6FE","#FBCFE8","#F9FAFB","#D1D5DB","#A78BFA","#FBBF24","#F59E0B","#FBBF24","#D9F99D","#DBEAFE","#C7D2FE","#F3E8FF","#F3F4F6","#6B7280","#8B4513","#FF6347","#FF8C00","#FFD700","#ADFF2F","#00CED1","#1E90FF","#9932CC","#E5E7EB","#4B5563","#A0522D","#CD5C5C","#DC143C","#B22222","#32CD32","#228B22","#4169E1","#8A2BE2","#D1D5DB","#374151","#8B4513","#B22222","#FF0000","#FF4500","#7CFC00","#20B2AA","#0000FF","#4B0082"],af=["#EF4444","#F97316","#EAB308","#22C55E","#06B6D4","#3B82F6","#8B5CF6","#F97316","#6B7280","#374151"];function rf(){const{toast:t}=ct(),s=ot(),[a,r]=P.useState(!1),[i,n]=P.useState(null),[l,o]=P.useState({name:"",slug:"",icon:"fas fa-star",color_from:"#3B82F6",color_to:"#1D4ED8",colorStyle:"gradient",description:""}),{data:c=[],isLoading:u}=Ie({queryKey:["/api/admin/nav-tabs"],queryFn:async()=>{let b;try{b=await fetch("/api/admin/nav-tabs",{method:"GET",headers:{"Content-Type":"application/json"},mode:"cors"})}catch{console.log("Direct call failed, trying proxy..."),b=await fetch("/api/admin/nav-tabs")}if(!b.ok)throw new Error("Failed to fetch navigation tabs");return b.json()},staleTime:0}),d=he({mutationFn:async b=>{let C;try{C=await fetch("/api/admin/nav-tabs",{method:"POST",headers:{"Content-Type":"application/json"},mode:"cors",body:JSON.stringify(b)})}catch{console.log("Direct call failed, trying proxy..."),C=await fetch("/api/admin/nav-tabs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)})}if(!C.ok){const j=await C.json();throw new Error(j.message||"Failed to create navigation tab")}return C.json()},onSuccess:()=>{s.invalidateQueries({queryKey:["/api/admin/nav-tabs"]}),s.invalidateQueries({queryKey:["/api/nav-tabs"]}),s.invalidateQueries({predicate:b=>{var C;return!!((C=b.queryKey[0])!=null&&C.toString().includes("/api/nav-tabs/"))}}),s.refetchQueries({queryKey:["/api/nav-tabs"]}),r(!1),o({name:"",slug:"",icon:"fas fa-star",color_from:"#3B82F6",color_to:"#1D4ED8",colorStyle:"gradient",description:""}),t({title:"Success",description:"Navigation tab created successfully"})},onError:b=>{console.error("Update mutation error:",b),t({title:"Update Failed",description:`Failed to update navigation tab: ${b.message}`,variant:"destructive"})}}),m=he({mutationFn:async({id:b,...C})=>{const j=await fetch(`/api/admin/nav-tabs/${b}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(C)});if(!j.ok){const H=await j.json().catch(()=>({message:"Network error"}));throw console.error("API Error:",H),new Error(H.message||"Failed to update navigation tab")}return await j.json()},onSuccess:b=>{s.invalidateQueries({queryKey:["/api/admin/nav-tabs"]}),s.invalidateQueries({queryKey:["/api/nav-tabs"]}),s.invalidateQueries({predicate:C=>{var j;return!!((j=C.queryKey[0])!=null&&j.toString().includes("/api/nav-tabs/"))}}),s.refetchQueries({queryKey:["/api/nav-tabs"]}),n(null),t({title:"Success",description:"Navigation tab updated successfully"})},onError:b=>{t({title:"Error",description:b.message,variant:"destructive"})}}),h=he({mutationFn:async({id:b})=>{const C=await fetch(`/api/admin/nav-tabs/${b}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!C.ok){const j=await C.json();throw new Error(j.message||"Failed to delete navigation tab")}return C.json()},onSuccess:()=>{s.invalidateQueries({queryKey:["/api/admin/nav-tabs"]}),s.invalidateQueries({queryKey:["/api/nav-tabs"]}),s.invalidateQueries({predicate:b=>{var C;return!!((C=b.queryKey[0])!=null&&C.toString().includes("/api/nav-tabs/"))}}),s.refetchQueries({queryKey:["/api/nav-tabs"]}),t({title:"Success",description:"Navigation tab deleted successfully"})},onError:b=>{t({title:"Error",description:b.message,variant:"destructive"})}}),p=he({mutationFn:async({tabOrders:b,password:C})=>{const j=await fetch("/api/admin/nav-tabs/reorder",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({tabOrders:b,password:C})});if(!j.ok){const K=await j.json();throw new Error(K.message||"Failed to reorder navigation tabs")}return j.json()},onSuccess:()=>{s.invalidateQueries({queryKey:["/api/admin/nav-tabs"]}),s.invalidateQueries({queryKey:["/api/nav-tabs"]}),s.invalidateQueries({predicate:b=>{var C;return!!((C=b.queryKey[0])!=null&&C.toString().includes("/api/nav-tabs/"))}}),s.refetchQueries({queryKey:["/api/nav-tabs"]}),t({title:"Success",description:"Navigation tabs reordered successfully"})},onError:b=>{t({title:"Error",description:b.message,variant:"destructive"})}}),k=async b=>{b.preventDefault(),i?m.mutate({id:i,...l}):d.mutate({...l})},_=async b=>{confirm("Are you sure you want to delete this navigation tab?")&&h.mutate({id:b})},f=b=>{n(b.id),o({name:b.name,slug:b.slug,icon:b.icon,color_from:b.color_from,color_to:b.color_to,colorStyle:b.colorStyle||"gradient",description:b.description||""}),r(!0)},T=()=>{r(!1),n(null),o({name:"",slug:"",icon:"fas fa-star",color_from:"#3B82F6",color_to:"#1D4ED8",colorStyle:"gradient",description:""})},M=b=>b.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim(),S=b=>{o(C=>({...C,name:b,slug:i?C.slug:M(b)}))},w=b=>{if(!b.destination)return;const C=Array.from(c),[j]=C.splice(b.source.index,1);C.splice(b.destination.index,0,j);const K=prompt("Enter admin password to reorder tabs:");if(!K)return;const H=C.map((Z,v)=>({id:Z.id}));p.mutate({tabOrders:H,password:K})},B=async b=>{try{let C;try{C=await fetch(`/api/admin/nav-tabs/${b.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},mode:"cors",body:JSON.stringify({is_active:!b.is_active})})}catch{console.log("Direct call failed, trying proxy..."),C=await fetch(`/api/admin/nav-tabs/${b.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({is_active:!b.is_active})})}if(C.ok)s.invalidateQueries({queryKey:["/api/admin/nav-tabs"]}),s.invalidateQueries({queryKey:["/api/nav-tabs"]}),s.invalidateQueries({predicate:j=>{var K;return!!((K=j.queryKey[0])!=null&&K.toString().includes("/api/nav-tabs/"))}}),s.refetchQueries({queryKey:["/api/nav-tabs"]}),t({title:"Success",description:`Tab ${b.is_active?"deactivated":"activated"} successfully`});else{const j=await C.json().catch(()=>({message:"Network error"}));throw new Error(j.message||"Failed to toggle tab status")}}catch(C){const j=C instanceof Error?C.message:"Unknown error occurred";t({title:"Error",description:`Failed to toggle tab status: ${j}`,variant:"destructive"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Navigation Management"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage navigation tabs and create new pages"})]}),e.jsxs(R,{onClick:()=>r(!0),className:"bg-blue-600 hover:bg-blue-700",disabled:a,children:[e.jsx(Xe,{className:"w-4 h-4 mr-2"}),"Add Navigation Tab"]})]}),a&&e.jsxs(ee,{className:"border-blue-200 bg-blue-50 dark:bg-blue-900/20",children:[e.jsxs(ge,{children:[e.jsx(fe,{className:"text-blue-800 dark:text-blue-200",children:i?"Edit Navigation Tab":"Add New Navigation Tab"}),e.jsx(Ne,{children:i?"Update the navigation tab details":"Create a new navigation tab and its dedicated page"})]}),e.jsx(ae,{children:e.jsxs("form",{onSubmit:k,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"name",children:"Tab Name"}),e.jsx(X,{id:"name",value:l.name,onChange:b=>S(b.target.value),placeholder:"e.g., Tech Picks",required:!0})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"slug",children:"URL Slug"}),e.jsx(X,{id:"slug",value:l.slug,onChange:b=>o(C=>({...C,slug:b.target.value})),placeholder:"e.g., tech-picks",required:!0})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"icon",children:"Icon Class"}),e.jsx(X,{id:"icon",value:l.icon,onChange:b=>o(C=>({...C,icon:b.target.value})),placeholder:"e.g., fas fa-laptop"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[e.jsx(I,{className:"text-gray-700 dark:text-gray-300",children:"Color Style"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{type:"button",size:"sm",variant:l.colorStyle==="gradient"?"default":"outline",onClick:()=>o(b=>({...b,colorStyle:"gradient"})),children:"Gradient"}),e.jsx(R,{type:"button",size:"sm",variant:l.colorStyle==="palette"?"default":"outline",onClick:()=>o(b=>({...b,colorStyle:"palette"})),children:"Color Palette"})]})]}),l.colorStyle==="gradient"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"color_from",className:"text-gray-700 dark:text-gray-300",children:"Gradient Start Color"}),e.jsx(X,{id:"color_from",type:"color",value:l.color_from,onChange:b=>o(C=>({...C,color_from:b.target.value})),className:"bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600"})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"color_to",className:"text-gray-700 dark:text-gray-300",children:"Gradient End Color"}),e.jsx(X,{id:"color_to",type:"color",value:l.color_to,onChange:b=>o(C=>({...C,color_to:b.target.value})),className:"bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600"})]})]}),l.colorStyle==="palette"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx(I,{className:"text-gray-700 dark:text-gray-300 mb-3 block",children:"Theme Colors"}),e.jsx("div",{className:"grid grid-cols-10 gap-2 mb-4",children:sf.map((b,C)=>e.jsx("button",{type:"button",className:`w-8 h-8 rounded border-2 hover:scale-110 transition-transform ${l.color_from===b?"border-gray-900 dark:border-white shadow-lg":"border-gray-300 dark:border-gray-600"}`,style:{backgroundColor:b},onClick:()=>o(j=>({...j,color_from:b,color_to:b})),title:b},C))}),e.jsx(I,{className:"text-gray-700 dark:text-gray-300 mb-3 block",children:"Standard Colors"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:af.map((b,C)=>e.jsx("button",{type:"button",className:`w-8 h-8 rounded border-2 hover:scale-110 transition-transform ${l.color_from===b?"border-gray-900 dark:border-white shadow-lg":"border-gray-300 dark:border-gray-600"}`,style:{backgroundColor:b},onClick:()=>o(j=>({...j,color_from:b,color_to:b})),title:b},C))})]})})]})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"description",children:"Description"}),e.jsx(It,{id:"description",value:l.description,onChange:b=>o(C=>({...C,description:b.target.value})),placeholder:"Brief description of this navigation tab",rows:3})]}),e.jsxs("div",{className:"p-4 bg-gray-100 dark:bg-gray-800 rounded-lg",children:[e.jsx(I,{className:"text-sm font-medium mb-2 block text-gray-700 dark:text-gray-300",children:"Preview:"}),e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full text-white text-sm font-medium",style:{background:l.colorStyle==="gradient"?`linear-gradient(to right, ${l.color_from}, ${l.color_to})`:l.color_from},children:[e.jsx("i",{className:l.icon}),e.jsx("span",{children:l.name||"Tab Name"})]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-600 dark:text-gray-400",children:["Style: ",l.colorStyle==="gradient"?"Gradient":"Solid Color"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(R,{type:"submit",disabled:d.isPending||m.isPending,className:"bg-green-600 hover:bg-green-700",children:[e.jsx(qs,{className:"w-4 h-4 mr-2"}),i?"Update Tab":"Create Tab"]}),e.jsxs(R,{type:"button",variant:"outline",onClick:T,children:[e.jsx(Jt,{className:"w-4 h-4 mr-2"}),"Cancel"]})]})]})})]}),e.jsxs(ee,{children:[e.jsxs(ge,{children:[e.jsx(fe,{children:"Current Navigation Tabs"}),e.jsx(Ne,{children:"Drag and drop to reorder tabs. System tabs cannot be deleted."})]}),e.jsx(ae,{children:u?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Loading navigation tabs..."})]}):Array.isArray(c)&&c.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No navigation tabs found."})}):e.jsx(Io,{onDragEnd:w,children:e.jsx(qo,{droppableId:"nav-tabs",children:b=>e.jsxs("div",{...b.droppableProps,ref:b.innerRef,className:"space-y-2",children:[(Array.isArray(c)?c:[]).map((C,j)=>e.jsx(Mo,{draggableId:C.id.toString(),index:j,children:(K,H)=>e.jsxs("div",{ref:K.innerRef,...K.draggableProps,className:`p-4 border rounded-lg bg-white dark:bg-gray-800 ${H.isDragging?"shadow-lg":"shadow-sm"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{...K.dragHandleProps,className:"cursor-grab",children:e.jsx(mc,{className:"w-5 h-5 text-gray-400"})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 rounded-full text-white text-sm font-medium",style:{background:C.colorStyle==="palette"||!C.colorStyle?C.color_from:`linear-gradient(to right, ${C.color_from}, ${C.color_to})`},children:[e.jsx("i",{className:C.icon}),e.jsx("span",{children:C.name})]}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["/",C.slug]}),e.jsxs("div",{className:"flex gap-2",children:[C.is_system&&e.jsx(we,{variant:"secondary",className:"text-xs",children:"System"}),e.jsx(we,{variant:C.is_active?"default":"secondary",className:"text-xs",children:C.is_active?"Active":"Inactive"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:C.is_active,onChange:()=>B(C),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-900 dark:text-gray-300",children:C.is_active?"Active":"Inactive"})]})}),e.jsx(R,{size:"sm",variant:"outline",onClick:()=>f(C),disabled:a,children:e.jsx(Tt,{className:"w-4 h-4"})}),!C.is_system&&e.jsx(R,{size:"sm",variant:"outline",onClick:()=>_(C.id),disabled:h.isPending,className:"text-red-600 hover:text-red-700",children:e.jsx(Wt,{className:"w-4 h-4"})})]})]}),C.description&&e.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400 ml-9",children:C.description})]})},C.id)),b.placeholder]})})})})]})]})}const ea=[{value:"home",label:"Home Page"},{value:"top-picks",label:"Top Picks"},{value:"services",label:"Services Page"},{value:"apps",label:"Apps & AI Apps"},{value:"categories",label:"Categories Page"},{value:"blog",label:"Blog Page"},{value:"videos",label:"Videos Page"},{value:"wishlist",label:"Wishlist Page"},{value:"contact",label:"Contact Page"},{value:"prime-picks",label:"Prime Picks"},{value:"cue-picks",label:"Cue Picks"},{value:"value-picks",label:"Value Picks"},{value:"click-picks",label:"Click Picks"},{value:"deals-hub",label:"Deals Hub"},{value:"global-picks",label:"Global Picks"},{value:"loot-box",label:"Loot Box"}],_n=[{value:"image",label:"Custom Image"},{value:"unsplash",label:"Unsplash Image"},{value:"text-only",label:"Text Only"}],Rn=[{value:"font-sans",label:"Sans Serif"},{value:"font-serif",label:"Serif"},{value:"font-mono",label:"Monospace"},{value:"font-display",label:"Display"}],On=[{value:"font-light",label:"Light"},{value:"font-normal",label:"Normal"},{value:"font-medium",label:"Medium"},{value:"font-semibold",label:"Semi Bold"},{value:"font-bold",label:"Bold"},{value:"font-extrabold",label:"Extra Bold"}],nf=[{value:"bg-gradient-to-r from-blue-600 to-purple-600",label:"Blue to Purple"},{value:"bg-gradient-to-r from-green-400 to-blue-500",label:"Green to Blue"},{value:"bg-gradient-to-r from-purple-400 to-pink-400",label:"Purple to Pink"},{value:"bg-gradient-to-r from-yellow-400 to-orange-500",label:"Yellow to Orange"},{value:"bg-gradient-to-r from-red-400 to-pink-500",label:"Red to Pink"},{value:"bg-gradient-to-r from-indigo-500 to-purple-600",label:"Indigo to Purple"}],Bn=["#000000","#6B7280","#DC2626","#EF4444","#F97316","#EAB308","#22C55E","#3B82F6","#8B5CF6","#EC4899","#FFFFFF","#9CA3AF","#92400E","#F8BBD0","#FCD34D","#FEF3C7","#BBF7D0","#BFDBFE","#DDD6FE","#FBCFE8","#F9FAFB","#D1D5DB","#A78BFA","#FBBF24","#F59E0B","#FBBF24","#D9F99D","#DBEAFE","#C7D2FE","#F3E8FF","#F3F4F6","#6B7280","#8B4513","#FF6347","#FF8C00","#FFD700","#ADFF2F","#00CED1","#1E90FF","#9932CC","#E5E7EB","#4B5563","#A0522D","#CD5C5C","#DC143C","#B22222","#32CD32","#228B22","#4169E1","#8A2BE2","#D1D5DB","#374151","#8B4513","#B22222","#FF0000","#FF4500","#7CFC00","#20B2AA","#0000FF","#4B0082"],Mn=["#EF4444","#F97316","#EAB308","#22C55E","#06B6D4","#3B82F6","#8B5CF6","#F97316","#6B7280","#374151"],lf=[{value:"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",label:"Blue to Purple"},{value:"bg-gradient-to-r from-green-400 to-blue-500 bg-clip-text text-transparent",label:"Green to Blue"},{value:"bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent",label:"Purple to Pink"},{value:"bg-gradient-to-r from-yellow-400 to-orange-500 bg-clip-text text-transparent",label:"Yellow to Orange"},{value:"bg-gradient-to-r from-red-400 to-pink-500 bg-clip-text text-transparent",label:"Red to Pink"},{value:"bg-gradient-to-r from-indigo-500 to-purple-600 bg-clip-text text-transparent",label:"Indigo to Purple"}],of=[{value:"none",label:"No Icon"},{value:"emoji",label:"Emoji"},{value:"fontawesome",label:"Font Awesome"}],cf=[{value:"left",label:"Left of Title"},{value:"right",label:"Right of Title"},{value:"top",label:"Above Title"}],df=[{value:"🎉",label:"🎉 Party"},{value:"🔥",label:"🔥 Fire"},{value:"⭐",label:"⭐ Star"},{value:"💎",label:"💎 Diamond"},{value:"🚀",label:"🚀 Rocket"},{value:"👑",label:"👑 Crown"},{value:"🎯",label:"🎯 Target"},{value:"💰",label:"💰 Money"},{value:"🛍️",label:"🛍️ Shopping"},{value:"🎁",label:"🎁 Gift"},{value:"⚡",label:"⚡ Lightning"},{value:"🌟",label:"🌟 Glowing Star"},{value:"🔔",label:"🔔 Bell"},{value:"📢",label:"📢 Megaphone"},{value:"🎊",label:"🎊 Confetti"},{value:"💫",label:"💫 Dizzy"},{value:"🏆",label:"🏆 Trophy"},{value:"🎪",label:"🎪 Circus"},{value:"🎨",label:"🎨 Art"},{value:"🌈",label:"🌈 Rainbow"}],uf=[{value:"fas fa-star",label:"Star"},{value:"fas fa-crown",label:"Crown"},{value:"fas fa-fire",label:"Fire"},{value:"fas fa-gem",label:"Gem"},{value:"fas fa-rocket",label:"Rocket"},{value:"fas fa-bolt",label:"Lightning Bolt"},{value:"fas fa-trophy",label:"Trophy"},{value:"fas fa-gift",label:"Gift"},{value:"fas fa-shopping-cart",label:"Shopping Cart"},{value:"fas fa-shopping-bag",label:"Shopping Bag"},{value:"fas fa-heart",label:"Heart"},{value:"fas fa-thumbs-up",label:"Thumbs Up"},{value:"fas fa-bullseye",label:"Bullseye"},{value:"fas fa-magic",label:"Magic Wand"},{value:"fas fa-sparkles",label:"Sparkles"},{value:"fas fa-medal",label:"Medal"},{value:"fas fa-award",label:"Award"},{value:"fas fa-certificate",label:"Certificate"},{value:"fas fa-tags",label:"Tags"},{value:"fas fa-percent",label:"Percent"},{value:"fas fa-dollar-sign",label:"Dollar Sign"},{value:"fas fa-coins",label:"Coins"},{value:"fas fa-hand-holding-usd",label:"Money Hand"},{value:"fas fa-piggy-bank",label:"Piggy Bank"},{value:"fas fa-briefcase",label:"Briefcase"},{value:"fas fa-chart-line",label:"Chart Line"},{value:"fas fa-handshake",label:"Handshake"},{value:"fas fa-store",label:"Store"},{value:"fas fa-credit-card",label:"Credit Card"},{value:"fas fa-wallet",label:"Wallet"},{value:"fas fa-receipt",label:"Receipt"},{value:"fas fa-cash-register",label:"Cash Register"},{value:"fas fa-laptop",label:"Laptop"},{value:"fas fa-mobile-alt",label:"Mobile Phone"},{value:"fas fa-desktop",label:"Desktop"},{value:"fas fa-wifi",label:"WiFi"},{value:"fas fa-cloud",label:"Cloud"},{value:"fas fa-database",label:"Database"},{value:"fas fa-server",label:"Server"},{value:"fas fa-code",label:"Code"},{value:"fas fa-envelope",label:"Envelope"},{value:"fas fa-phone",label:"Phone"},{value:"fas fa-comments",label:"Comments"},{value:"fas fa-bell",label:"Bell"},{value:"fas fa-bullhorn",label:"Bullhorn"},{value:"fas fa-microphone",label:"Microphone"},{value:"fas fa-home",label:"Home"},{value:"fas fa-search",label:"Search"},{value:"fas fa-cog",label:"Settings"},{value:"fas fa-user",label:"User"},{value:"fas fa-users",label:"Users"},{value:"fas fa-bars",label:"Menu Bars"},{value:"fas fa-times",label:"Close X"},{value:"fas fa-check",label:"Check"},{value:"fas fa-plus",label:"Plus"},{value:"fas fa-minus",label:"Minus"},{value:"fas fa-arrow-right",label:"Arrow Right"},{value:"fas fa-arrow-left",label:"Arrow Left"},{value:"fas fa-arrow-up",label:"Arrow Up"},{value:"fas fa-arrow-down",label:"Arrow Down"},{value:"fas fa-play",label:"Play"},{value:"fas fa-pause",label:"Pause"},{value:"fas fa-stop",label:"Stop"},{value:"fas fa-music",label:"Music"},{value:"fas fa-video",label:"Video"},{value:"fas fa-camera",label:"Camera"},{value:"fas fa-image",label:"Image"},{value:"fas fa-film",label:"Film"}];function mf(){var We,Te,Me,Re,E,ie;const{toast:t}=ct(),s=ot(),[a,r]=P.useState("home"),[i,n]=P.useState(!1),[l,o]=P.useState(null),[c,u]=P.useState(null),[d,m]=P.useState(()=>{try{const g=localStorage.getItem("hiddenStaticBanners");return g?new Set(JSON.parse(g)):new Set}catch{return new Set}}),[h,p]=P.useState(!1),[k,_]=P.useState("url"),[f,T]=P.useState({title:"",subtitle:"",imageUrl:"",linkUrl:"",buttonText:"",buttons:[{text:"",url:"",style:"primary"}],page:"home",isActive:!0,icon:"",iconType:"none",iconPosition:"left",imageDisplayType:"image",unsplashQuery:"",fontFamily:"font-sans",fontWeight:"font-bold",textColor:"#ffffff",textGradient:"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",textStyle:"solid",backgroundColor:"#1f2937",backgroundGradient:"bg-gradient-to-r from-blue-600 to-purple-600",useGradient:!1,backgroundStyle:"solid"}),{data:M=[],isLoading:S}=Ie({queryKey:["/api/admin/banners"],queryFn:async()=>{const g=await fetch("/api/admin/banners");if(!g.ok)throw new Error("Failed to fetch banners");return g.json()}}),{data:w=[]}=Ie({queryKey:["/api/nav-tabs"],queryFn:async()=>{const g=await fetch("/api/nav-tabs");return g.ok?g.json():[]},staleTime:0,refetchOnWindowFocus:!0,refetchInterval:3e4}),B=[{value:"home",label:"Home Page"},{value:"top-picks",label:"Top Picks"},{value:"services",label:"Services Page"},{value:"apps",label:"Apps & AI Apps"},{value:"categories",label:"Categories Page"},{value:"blog",label:"Blog Page"},{value:"videos",label:"Videos Page"},{value:"wishlist",label:"Wishlist Page"},{value:"contact",label:"Contact Page"},...Array.isArray(w)&&w.length>0?w.filter(g=>g.is_active).sort((g,V)=>g.display_order-V.display_order).map(g=>({value:g.slug,label:g.name})):[{value:"prime-picks",label:"Prime Picks"},{value:"cue-picks",label:"Cue Picks"},{value:"value-picks",label:"Value Picks"},{value:"click-picks",label:"Click Picks"},{value:"deals-hub",label:"Deals Hub"},{value:"global-picks",label:"Global Picks"},{value:"loot-box",label:"Loot Box"}]],b=M.filter(g=>g.page===a),C=he({mutationFn:async g=>{const V=await fetch("/api/admin/banners",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)});if(!V.ok){const oe=await V.json();throw new Error(oe.message||"Failed to create banner")}return V.json()},onSuccess:()=>{s.invalidateQueries({queryKey:["/api/admin/banners"]}),s.invalidateQueries({queryKey:["/api/banners"]}),ea.forEach(g=>{s.invalidateQueries({queryKey:[`banners-${g.value}`]}),s.invalidateQueries({queryKey:[`/api/banners/${g.value}`]})}),s.invalidateQueries({predicate:g=>typeof g.queryKey[0]=="string"&&(g.queryKey[0].startsWith("banners-")||g.queryKey[0].startsWith("/api/banners/"))}),n(!1),o(null),T({title:"",subtitle:"",imageUrl:"",linkUrl:"",buttonText:"",buttons:[{text:"",url:"",style:"primary"}],page:"home",isActive:!0,icon:"",iconType:"none",iconPosition:"left",imageDisplayType:"image",unsplashQuery:"",fontFamily:"font-sans",fontWeight:"font-bold",textColor:"#ffffff",textGradient:"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",textStyle:"solid",backgroundColor:"#1f2937",backgroundGradient:"bg-gradient-to-r from-blue-600 to-purple-600",useGradient:!1,backgroundStyle:"solid"}),t({title:"Success",description:"Banner created successfully"})},onError:g=>{t({title:"Error",description:g.message,variant:"destructive"})}}),j=he({mutationFn:async({id:g,...V})=>{const oe=await fetch(`/api/admin/banners/${g}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(V)});if(!oe.ok){const xe=await oe.json();throw new Error(xe.message||"Failed to update banner")}return oe.json()},onSuccess:()=>{s.invalidateQueries({queryKey:["/api/admin/banners"]}),s.invalidateQueries({queryKey:["/api/banners"]}),ea.forEach(g=>{s.invalidateQueries({queryKey:[`banners-${g.value}`]}),s.invalidateQueries({queryKey:[`/api/banners/${g.value}`]})}),s.invalidateQueries({predicate:g=>typeof g.queryKey[0]=="string"&&(g.queryKey[0].startsWith("banners-")||g.queryKey[0].startsWith("/api/banners/"))}),o(null),n(!1),T({title:"",subtitle:"",imageUrl:"",linkUrl:"",buttonText:"",buttons:[{text:"",url:"",style:"primary"}],page:"home",isActive:!0,icon:"",iconType:"none",iconPosition:"left",imageDisplayType:"image",unsplashQuery:"",fontFamily:"font-sans",fontWeight:"font-bold",textColor:"#ffffff",textGradient:"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",textStyle:"solid",backgroundColor:"#1f2937",backgroundGradient:"bg-gradient-to-r from-blue-600 to-purple-600",useGradient:!1,backgroundStyle:"solid"}),t({title:"Success",description:"Banner updated successfully"})},onError:g=>{t({title:"Error",description:g.message,variant:"destructive"})}}),K=he({mutationFn:async g=>{const V=await fetch(`/api/admin/banners/${g}`,{method:"DELETE"});if(!V.ok){const oe=await V.json();throw new Error(oe.message||"Failed to delete banner")}return V.json()},onSuccess:()=>{s.invalidateQueries({queryKey:["/api/admin/banners"]}),s.invalidateQueries({queryKey:["/api/banners"]}),ea.forEach(g=>{s.invalidateQueries({queryKey:[`banners-${g.value}`]}),s.invalidateQueries({queryKey:[`/api/banners/${g.value}`]})}),s.invalidateQueries({predicate:g=>typeof g.queryKey[0]=="string"&&(g.queryKey[0].startsWith("banners-")||g.queryKey[0].startsWith("/api/banners/"))}),t({title:"Success",description:"Banner deleted successfully"})},onError:g=>{t({title:"Error",description:g.message,variant:"destructive"})}}),H=he({mutationFn:async g=>{const V=await fetch("/api/admin/banners/reorder",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({bannerOrders:g})});if(!V.ok){const oe=await V.json();throw new Error(oe.message||"Failed to reorder banners")}return V.json()},onSuccess:()=>{s.invalidateQueries({queryKey:["/api/admin/banners"]}),s.invalidateQueries({queryKey:["/api/banners"]}),ea.forEach(g=>{s.invalidateQueries({queryKey:[`banners-${g.value}`]}),s.invalidateQueries({queryKey:[`/api/banners/${g.value}`]})}),s.invalidateQueries({predicate:g=>typeof g.queryKey[0]=="string"&&(g.queryKey[0].startsWith("banners-")||g.queryKey[0].startsWith("/api/banners/"))}),t({title:"Success",description:"Banner order updated successfully"})},onError:g=>{t({title:"Error",description:g.message,variant:"destructive"})}}),Z=async g=>{if(g){if(!g.type.startsWith("image/")){t({title:"Error",description:"Please select a valid image file",variant:"destructive"});return}if(g.size>5*1024*1024){t({title:"Error",description:"File size must be less than 5MB",variant:"destructive"});return}p(!0);try{const V=URL.createObjectURL(g),oe=new FormData;oe.append("image",g);try{const xe=await fetch("/api/admin/upload-image",{method:"POST",body:oe});if(xe.ok){const qe=await xe.json();T({...f,imageUrl:qe.imageUrl})}else T({...f,imageUrl:V})}catch{T({...f,imageUrl:V})}t({title:"Success",description:"Image uploaded successfully"})}catch(V){t({title:"Error",description:V.message||"Failed to upload image",variant:"destructive"})}finally{p(!1)}}},v=async g=>{g.preventDefault(),l?j.mutate({id:l,...f}):C.mutate(f)},G=g=>{T({title:g.title,subtitle:g.subtitle||"",imageUrl:g.imageUrl,linkUrl:g.linkUrl||"",buttonText:g.buttonText||"",buttons:g.buttons||[{text:g.buttonText||"",url:g.linkUrl||"",style:"primary"}],page:g.page,isActive:g.isActive,icon:g.icon||"",iconType:g.iconType||"none",iconPosition:g.iconPosition||"left",imageDisplayType:g.imageDisplayType||"image",unsplashQuery:g.unsplashQuery||"",fontFamily:g.fontFamily||"font-sans",fontWeight:g.fontWeight||"font-bold",textColor:g.textColor||"#ffffff",textGradient:g.textGradient||"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",textStyle:g.textStyle||"solid",backgroundColor:g.backgroundColor||"#1f2937",backgroundGradient:g.backgroundGradient||"bg-gradient-to-r from-blue-600 to-purple-600",useGradient:g.useGradient||!1,backgroundStyle:g.backgroundStyle||"solid"}),o(g.id),n(!0)},O=async g=>{confirm("Are you sure you want to delete this banner?")&&K.mutate(g)},y=async g=>{j.mutate({id:g.id,isActive:!g.isActive})},A=g=>{if(!g.destination)return;const V=Array.from(b),[oe]=V.splice(g.source.index,1);V.splice(g.destination.index,0,oe);const xe=V.map((qe,F)=>({id:qe.id,displayOrder:F+1}));H.mutate(xe)},$=g=>{m(V=>{const oe=new Set(V);return oe.has(g)?(oe.delete(g),t({title:"Banner Shown",description:"Static banner is now visible on live site"})):(oe.add(g),t({title:"Banner Hidden",description:"Static banner is now hidden from live site"})),localStorage.setItem("hiddenStaticBanners",JSON.stringify([...oe])),window.dispatchEvent(new Event("hiddenBannersChanged")),oe})},W=async g=>{try{const V={title:g.title,subtitle:g.subtitle||g.description||"",linkUrl:g.ctaLink||g.linkUrl||"/",buttonText:g.ctaText||g.buttonText||"Learn More",buttons:[{text:g.ctaText||g.buttonText||"Learn More",url:g.ctaLink||g.linkUrl||"/",style:"primary"}],page:g.page||a,isActive:!0,imageDisplayType:"text-only",imageUrl:"https://via.placeholder.com/1x1/transparent/transparent.png",unsplashQuery:"",fontFamily:"font-sans",fontWeight:"font-bold",textColor:"#ffffff",textGradient:"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",textStyle:"solid",backgroundColor:"#1f2937",backgroundGradient:g.bgGradient?`bg-gradient-to-r ${g.bgGradient}`:"bg-gradient-to-r from-purple-600 to-orange-600",useGradient:!0,backgroundStyle:"gradient",icon:g.icon?g.icon==="fas fa-crown"?"👑":g.icon==="fas fa-gem"?"💎":g.icon==="fas fa-fire"?"🔥":g.icon==="fas fa-star"?"⭐":g.icon==="fas fa-gift"?"🎁":g.icon==="fas fa-bullseye"?"🎯":g.icon==="fas fa-globe"?"🌍":g.icon==="fas fa-shopping-bag"?"🛍️":g.icon.startsWith("fas fa-")?"⭐":g.icon:g.title.includes("Prime")?"👑":g.title.includes("Value")?"💎":g.title.includes("Fire")||g.title.includes("Deal")?"🔥":g.title.includes("Global")?"🌍":g.title.includes("Cue")?"🎯":g.title.includes("Loot")||g.title.includes("Gift")?"🎁":g.title.includes("Click")?"🛍️":"",iconType:g.icon||g.title.includes("Prime")||g.title.includes("Value")?"emoji":"none",iconPosition:"left"};await C.mutateAsync(V),t({title:"Success",description:`"${g.title}" banner is now editable!`})}catch(V){t({title:"Error",description:V.message||"Failed to make banner editable",variant:"destructive"})}},De=(()=>{if(a==="home")return Qo.map(V=>({...V,id:V.id.toString(),isHardcoded:!0,page:"home"}));const g={"prime-picks":{id:"fallback-prime-picks",title:"Prime Picks",subtitle:"Discover our premium selection of top-quality home décor products handpicked just for you!",image:"",ctaText:"Explore Prime Deals",ctaLink:"/",bgGradient:"from-purple-600 via-pink-600 to-orange-500",icon:"fas fa-crown"},"value-picks":{id:"fallback-value-picks",title:"Value Picks",subtitle:"Maximum value for your money - Best bang for buck",image:"",ctaText:"Find Value Deals",ctaLink:"/",bgGradient:"from-green-600 via-emerald-600 to-teal-600",icon:"fas fa-gem"},"click-picks":{id:"fallback-click-picks",title:"Click Picks",subtitle:"One-click shopping for the most popular products",image:"",ctaText:"Quick Shop Now",ctaLink:"/",bgGradient:"from-blue-600 via-indigo-600 to-purple-500",icon:"fas fa-mouse-pointer"},"cue-picks":{id:"fallback-cue-picks",title:"Cue Picks",subtitle:"Trending products curated just for you",image:"",ctaText:"Browse Trends",ctaLink:"/",bgGradient:"from-red-600 via-pink-600 to-rose-600",icon:"fas fa-bullseye"},"global-picks":{id:"fallback-global-picks",title:"Global Picks",subtitle:"International favorites from around the world",image:"",ctaText:"Explore Global",ctaLink:"/",bgGradient:"from-cyan-600 via-blue-600 to-indigo-600",icon:"fas fa-globe"},"deals-hub":{id:"fallback-deals-hub",title:"Deals Hub",subtitle:"Your central destination for the best deals and discounts",image:"",ctaText:"Browse Deals",ctaLink:"/",bgGradient:"from-red-600 via-orange-600 to-yellow-500",icon:"fas fa-tags"},"loot-box":{id:"fallback-loot-box",title:"Loot Box",subtitle:"Surprise deals and mystery products waiting to be discovered",image:"",ctaText:"Open Loot Box",ctaLink:"/",bgGradient:"from-purple-600 via-indigo-600 to-blue-600",icon:"fas fa-box-open"}};return g[a]?[{...g[a],isHardcoded:!0,page:a}]:[]})();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Banner Management"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage sliding banners for all pages"})]}),e.jsxs(R,{onClick:()=>n(!0),className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Xe,{className:"w-4 h-4 mr-2"}),"Add Banner"]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:B.map(g=>e.jsx(R,{variant:a===g.value?"default":"outline",size:"sm",onClick:()=>r(g.value),children:g.label},g.value))}),i&&e.jsxs(ee,{children:[e.jsxs(ge,{children:[e.jsx(fe,{children:l?"Edit Banner":"Add New Banner"}),e.jsx(Ne,{children:l?"Update banner details":"Create a new banner for the selected page"})]}),e.jsx(ae,{children:e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"title",className:"text-gray-700 dark:text-gray-300",children:"Title (Optional)"}),e.jsx(X,{id:"title",value:f.title,onChange:g=>T({...f,title:g.target.value}),placeholder:"Banner title (optional for image-only banners)",className:"bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"subtitle",className:"text-gray-700 dark:text-gray-300",children:"Subtitle"}),e.jsx(X,{id:"subtitle",value:f.subtitle,onChange:g=>T({...f,subtitle:g.target.value}),placeholder:"Banner subtitle (optional)",className:"bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"})]})]}),e.jsxs("div",{className:"border-t pt-4 mt-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:"Icon & Emoji Settings"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"iconType",className:"text-gray-700 dark:text-gray-300",children:"Icon Type"}),e.jsx("select",{id:"iconType",value:f.iconType,onChange:g=>T({...f,iconType:g.target.value,icon:""}),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:of.map(g=>e.jsx("option",{value:g.value,children:g.label},g.value))})]}),f.iconType!=="none"&&e.jsxs("div",{children:[e.jsx(I,{htmlFor:"iconPosition",className:"text-gray-700 dark:text-gray-300",children:"Icon Position"}),e.jsx("select",{id:"iconPosition",value:f.iconPosition,onChange:g=>T({...f,iconPosition:g.target.value}),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:cf.map(g=>e.jsx("option",{value:g.value,children:g.label},g.value))})]}),f.iconType!=="none"&&e.jsxs("div",{children:[e.jsx(I,{htmlFor:"icon",className:"text-gray-700 dark:text-gray-300",children:f.iconType==="emoji"?"Custom Emoji":"Custom Font Awesome Class"}),e.jsx(X,{id:"icon",value:f.icon,onChange:g=>T({...f,icon:g.target.value}),placeholder:f.iconType==="emoji"?"🎉 Enter emoji":"fas fa-star",className:"bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"})]})]}),f.iconType==="emoji"&&e.jsxs("div",{className:"mb-4",children:[e.jsx(I,{className:"text-gray-700 dark:text-gray-300 mb-3 block",children:"Emoji Presets"}),e.jsx("div",{className:"grid grid-cols-10 gap-2",children:df.map((g,V)=>e.jsx("button",{type:"button",className:`p-2 text-2xl rounded border-2 hover:scale-110 transition-transform ${f.icon===g.value?"border-blue-500 bg-blue-50 dark:bg-blue-900":"border-gray-300 dark:border-gray-600 hover:border-blue-300"}`,onClick:()=>T({...f,icon:g.value}),title:g.label,children:g.value},V))})]}),f.iconType==="fontawesome"&&e.jsxs("div",{className:"mb-4",children:[e.jsx(I,{className:"text-gray-700 dark:text-gray-300 mb-3 block",children:"Font Awesome Presets"}),e.jsx("div",{className:"grid grid-cols-6 gap-2",children:uf.map((g,V)=>e.jsxs("button",{type:"button",className:`p-3 rounded border-2 hover:scale-105 transition-transform flex items-center justify-center ${f.icon===g.value?"border-blue-500 bg-blue-50 dark:bg-blue-900":"border-gray-300 dark:border-gray-600 hover:border-blue-300"}`,onClick:()=>T({...f,icon:g.value}),title:g.label,children:[e.jsx("i",{className:`${g.value} text-lg`}),e.jsx("span",{className:"ml-2 text-sm",children:g.label})]},V))}),e.jsxs("div",{className:"mt-4",children:[e.jsx(I,{htmlFor:"customFontAwesome",className:"text-gray-700 dark:text-gray-300",children:"Custom FontAwesome Class"}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx(X,{id:"customFontAwesome",value:f.icon||"",onChange:g=>T({...f,icon:g.target.value}),placeholder:"e.g., fas fa-star, fab fa-facebook, far fa-heart",className:"flex-1 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"}),f.icon&&e.jsx("div",{className:"flex items-center justify-center w-12 h-10 border border-gray-300 dark:border-gray-600 rounded bg-gray-50 dark:bg-gray-700",children:e.jsx("i",{className:`${f.icon} text-lg text-gray-700 dark:text-gray-300`})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter any FontAwesome class (fas, far, fab, fal, fad). Examples: fas fa-star, fab fa-twitter, far fa-heart"})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(I,{className:"text-gray-700 dark:text-gray-300",children:"Banner Image *"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{type:"button",size:"sm",variant:k==="url"?"default":"outline",onClick:()=>_("url"),children:"URL"}),e.jsx(R,{type:"button",size:"sm",variant:k==="upload"?"default":"outline",onClick:()=>_("upload"),children:"Upload"})]})]}),k==="url"?e.jsx(X,{id:"imageUrl",value:f.imageUrl,onChange:g=>T({...f,imageUrl:g.target.value}),placeholder:"https://example.com/banner-image.jpg",required:!0,className:"bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"}):e.jsxs("div",{className:"space-y-2",children:[e.jsx(X,{type:"file",accept:"image/*",onChange:g=>{var oe;const V=(oe=g.target.files)==null?void 0:oe[0];V&&Z(V)},disabled:h,className:"cursor-pointer bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white"}),h&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-600 dark:text-blue-400",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 dark:border-blue-400"}),"Uploading image..."]}),f.imageUrl&&e.jsxs("div",{className:"text-sm text-green-600 dark:text-green-400",children:[e.jsx("i",{className:"fas fa-check"})," Image uploaded successfully"]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"linkUrl",className:"text-gray-700 dark:text-gray-300",children:"Link URL"}),e.jsx(X,{id:"linkUrl",value:f.linkUrl,onChange:g=>T({...f,linkUrl:g.target.value}),placeholder:"https://example.com (optional)",className:"bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"buttonText",className:"text-gray-700 dark:text-gray-300",children:"Button Text"}),e.jsx(X,{id:"buttonText",value:f.buttonText,onChange:g=>T({...f,buttonText:g.target.value}),placeholder:"Shop Now (optional)",className:"bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"})]})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"page",className:"text-gray-700 dark:text-gray-300",children:"Page"}),e.jsx("select",{id:"page",value:f.page,onChange:g=>T({...f,page:g.target.value}),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",required:!0,children:B.map(g=>e.jsx("option",{value:g.value,children:g.label},g.value))})]}),e.jsxs("div",{className:"border-t pt-4 mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Banner Buttons"}),e.jsxs(R,{type:"button",size:"sm",onClick:()=>{const g=[...f.buttons,{text:"",url:"",style:"primary"}];T({...f,buttons:g})},children:[e.jsx(Xe,{className:"w-4 h-4 mr-2"}),"Add Button"]})]}),f.buttons.map((g,V)=>e.jsxs("div",{className:"border rounded-lg p-4 mb-4 bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-600",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white",children:["Button ",V+1]}),f.buttons.length>1&&e.jsx(R,{type:"button",size:"sm",variant:"outline",onClick:()=>{const oe=f.buttons.filter((xe,qe)=>qe!==V);T({...f,buttons:oe})},className:"text-red-600 hover:text-red-700 border-red-300 hover:border-red-400",children:e.jsx(Jt,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:`buttonText-${V}`,className:"text-gray-700 dark:text-gray-300",children:"Button Text"}),e.jsx(X,{id:`buttonText-${V}`,value:g.text,onChange:oe=>{const xe=[...f.buttons];xe[V].text=oe.target.value,T({...f,buttons:xe})},placeholder:"Shop Now",className:"bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:`buttonUrl-${V}`,className:"text-gray-700 dark:text-gray-300",children:"Button URL"}),e.jsx(X,{id:`buttonUrl-${V}`,value:g.url,onChange:oe=>{const xe=[...f.buttons];xe[V].url=oe.target.value,T({...f,buttons:xe})},placeholder:"https://example.com",className:"bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:`buttonStyle-${V}`,className:"text-gray-700 dark:text-gray-300",children:"Button Style"}),e.jsxs("select",{id:`buttonStyle-${V}`,value:g.style,onChange:oe=>{const xe=[...f.buttons];xe[V].style=oe.target.value,T({...f,buttons:xe})},className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"primary",children:"Primary"}),e.jsx("option",{value:"secondary",children:"Secondary"}),e.jsx("option",{value:"outline",children:"Outline"})]})]})]})]},V))]}),e.jsxs("div",{className:"border-t pt-4 mt-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:"Styling Options"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"imageDisplayType",className:"text-gray-700 dark:text-gray-300",children:"Image Display"}),e.jsx("select",{id:"imageDisplayType",value:f.imageDisplayType,onChange:g=>T({...f,imageDisplayType:g.target.value}),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:_n.map(g=>e.jsx("option",{value:g.value,children:g.label},g.value))})]}),f.imageDisplayType==="unsplash"&&e.jsxs("div",{children:[e.jsx(I,{htmlFor:"unsplashQuery",className:"text-gray-700 dark:text-gray-300",children:"Unsplash Search Query"}),e.jsx(X,{id:"unsplashQuery",value:f.unsplashQuery,onChange:g=>T({...f,unsplashQuery:g.target.value}),placeholder:"e.g., nature, technology, business",className:"bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"fontFamily",className:"text-gray-700 dark:text-gray-300",children:"Font Family"}),e.jsx("select",{id:"fontFamily",value:f.fontFamily,onChange:g=>T({...f,fontFamily:g.target.value}),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:Rn.map(g=>e.jsx("option",{value:g.value,children:g.label},g.value))})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"fontWeight",className:"text-gray-700 dark:text-gray-300",children:"Font Weight"}),e.jsx("select",{id:"fontWeight",value:f.fontWeight,onChange:g=>T({...f,fontWeight:g.target.value}),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:On.map(g=>e.jsx("option",{value:g.value,children:g.label},g.value))})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[e.jsx(I,{className:"text-gray-700 dark:text-gray-300",children:"Background Style"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{type:"button",size:"sm",variant:f.backgroundStyle==="solid"?"default":"outline",onClick:()=>T({...f,backgroundStyle:"solid",useGradient:!1}),children:"Solid Color"}),e.jsx(R,{type:"button",size:"sm",variant:f.backgroundStyle==="gradient"?"default":"outline",onClick:()=>T({...f,backgroundStyle:"gradient",useGradient:!0}),children:"Gradient"}),e.jsx(R,{type:"button",size:"sm",variant:f.backgroundStyle==="palette"?"default":"outline",onClick:()=>T({...f,backgroundStyle:"palette",useGradient:!1}),children:"Color Palette"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs(I,{className:"text-gray-700 dark:text-gray-300",children:["Background Opacity: ",f.backgroundOpacity||"100","%"]}),e.jsx("input",{type:"range",min:"10",max:"100",step:"10",value:f.backgroundOpacity||"100",onChange:g=>T({...f,backgroundOpacity:g.target.value}),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsx("span",{children:"10% (Very transparent)"}),e.jsx("span",{children:"100% (Fully opaque)"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[e.jsx(I,{className:"text-gray-700 dark:text-gray-300",children:"Text Style"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{type:"button",size:"sm",variant:f.textStyle==="solid"?"default":"outline",onClick:()=>T({...f,textStyle:"solid"}),children:"Solid Color"}),e.jsx(R,{type:"button",size:"sm",variant:f.textStyle==="gradient"?"default":"outline",onClick:()=>T({...f,textStyle:"gradient"}),children:"Gradient"}),e.jsx(R,{type:"button",size:"sm",variant:f.textStyle==="palette"?"default":"outline",onClick:()=>T({...f,textStyle:"palette"}),children:"Color Palette"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[f.textStyle==="solid"&&e.jsxs("div",{children:[e.jsx(I,{htmlFor:"textColor",className:"text-gray-700 dark:text-gray-300",children:"Text Color"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(X,{type:"color",id:"textColor",value:f.textColor,onChange:g=>T({...f,textColor:g.target.value}),className:"w-16 h-10 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600"}),e.jsx(X,{value:f.textColor,onChange:g=>T({...f,textColor:g.target.value}),placeholder:"#ffffff",className:"flex-1 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"})]})]}),f.textStyle==="gradient"&&e.jsxs("div",{children:[e.jsx(I,{htmlFor:"textGradient",className:"text-gray-700 dark:text-gray-300",children:"Text Gradient"}),e.jsx("select",{id:"textGradient",value:f.textGradient,onChange:g=>T({...f,textGradient:g.target.value}),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:lf.map(g=>e.jsx("option",{value:g.value,children:g.label},g.value))})]})]}),f.textStyle==="palette"&&e.jsxs("div",{className:"mt-4",children:[e.jsx(I,{className:"text-gray-700 dark:text-gray-300 mb-3 block",children:"Theme Colors"}),e.jsx("div",{className:"grid grid-cols-10 gap-2 mb-4",children:Bn.map((g,V)=>e.jsx("button",{type:"button",className:`w-8 h-8 rounded border-2 hover:scale-110 transition-transform ${f.textColor===g?"border-gray-900 dark:border-white shadow-lg":"border-gray-300 dark:border-gray-600"}`,style:{backgroundColor:g},onClick:()=>T({...f,textColor:g}),title:g},V))}),e.jsx(I,{className:"text-gray-700 dark:text-gray-300 mb-3 block",children:"Standard Colors"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:Mn.map((g,V)=>e.jsx("button",{type:"button",className:`w-8 h-8 rounded border-2 hover:scale-110 transition-transform ${f.textColor===g?"border-gray-900 dark:border-white shadow-lg":"border-gray-300 dark:border-gray-600"}`,style:{backgroundColor:g},onClick:()=>T({...f,textColor:g}),title:g},V))})]})]}),e.jsxs("div",{className:"grid md:grid-cols-1 gap-4",children:[f.backgroundStyle==="solid"&&e.jsxs("div",{children:[e.jsx(I,{htmlFor:"backgroundColor",className:"text-gray-700 dark:text-gray-300",children:"Background Color"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(X,{type:"color",id:"backgroundColor",value:f.backgroundColor,onChange:g=>T({...f,backgroundColor:g.target.value}),className:"w-16 h-10 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600"}),e.jsx(X,{value:f.backgroundColor,onChange:g=>T({...f,backgroundColor:g.target.value}),placeholder:"#000000",className:"flex-1 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"})]})]}),f.backgroundStyle==="gradient"&&e.jsxs("div",{children:[e.jsx(I,{htmlFor:"backgroundGradient",className:"text-gray-700 dark:text-gray-300",children:"Gradient Preset"}),e.jsx("select",{id:"backgroundGradient",value:f.backgroundGradient,onChange:g=>T({...f,backgroundGradient:g.target.value}),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:nf.map(g=>e.jsx("option",{value:g.value,children:g.label},g.value))})]})]}),f.backgroundStyle==="palette"&&e.jsxs("div",{className:"mt-4",children:[e.jsx(I,{className:"text-gray-700 dark:text-gray-300 mb-3 block",children:"Theme Colors"}),e.jsx("div",{className:"grid grid-cols-10 gap-2 mb-4",children:Bn.map((g,V)=>e.jsx("button",{type:"button",className:`w-8 h-8 rounded border-2 hover:scale-110 transition-transform ${f.backgroundColor===g?"border-gray-900 dark:border-white shadow-lg":"border-gray-300 dark:border-gray-600"}`,style:{backgroundColor:g},onClick:()=>T({...f,backgroundColor:g}),title:g},V))}),e.jsx(I,{className:"text-gray-700 dark:text-gray-300 mb-3 block",children:"Standard Colors"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:Mn.map((g,V)=>e.jsx("button",{type:"button",className:`w-8 h-8 rounded border-2 hover:scale-110 transition-transform ${f.backgroundColor===g?"border-gray-900 dark:border-white shadow-lg":"border-gray-300 dark:border-gray-600"}`,style:{backgroundColor:g},onClick:()=>T({...f,backgroundColor:g}),title:g},V))})]})]})]}),e.jsxs("div",{children:[e.jsx(I,{className:"text-gray-700 dark:text-gray-300",children:"Banner Preview"}),e.jsxs("div",{className:"mt-2 border rounded-lg overflow-hidden",children:[e.jsxs("div",{className:`relative w-full h-48 flex items-center justify-center ${f.backgroundStyle==="gradient"?f.backgroundGradient:""} ${f.fontFamily} ${f.fontWeight}`,style:{backgroundColor:f.backgroundStyle==="solid"||f.backgroundStyle==="palette"?f.backgroundColor:void 0,color:f.textStyle==="solid"||f.textStyle==="palette"?f.textColor:void 0,opacity:f.imageDisplayType==="text-only"?(f.backgroundOpacity||100)/100:void 0},children:[f.imageDisplayType!=="text-only"&&e.jsx("div",{className:"absolute inset-0",children:f.imageDisplayType==="unsplash"&&f.unsplashQuery?e.jsx("img",{src:`https://picsum.photos/800/400?random=${encodeURIComponent(f.unsplashQuery)}`,alt:"Unsplash background",className:"w-full h-full object-cover",style:{opacity:(f.backgroundOpacity||100)/100},onError:g=>{g.currentTarget.src="https://picsum.photos/800/400?random=1"}}):f.imageDisplayType==="image"&&f.imageUrl?e.jsx("img",{src:f.imageUrl,alt:"Custom background",className:"w-full h-full object-cover",style:{opacity:(f.backgroundOpacity||100)/100},onError:g=>{g.currentTarget.src="https://via.placeholder.com/800x400/6B7280/FFFFFF?text=Image+Not+Found"}}):null}),e.jsxs("div",{className:"relative z-10 text-center px-6",children:[f.iconType!=="none"&&f.icon&&f.iconPosition==="top"&&e.jsx("div",{className:"mb-3",children:f.iconType==="emoji"?e.jsx("span",{className:"text-4xl",children:f.icon}):e.jsx("i",{className:`${f.icon} text-3xl`})}),e.jsxs("h2",{className:`text-2xl mb-2 flex items-center justify-center gap-3 ${f.textStyle==="gradient"?f.textGradient:""}`,children:[f.iconType!=="none"&&f.icon&&f.iconPosition==="left"&&e.jsx("span",{className:"flex-shrink-0",children:f.iconType==="emoji"?e.jsx("span",{className:"text-2xl",children:f.icon}):e.jsx("i",{className:`${f.icon} text-xl`})}),e.jsx("span",{children:f.title||"Banner Title"}),f.iconType!=="none"&&f.icon&&f.iconPosition==="right"&&e.jsx("span",{className:"flex-shrink-0",children:f.iconType==="emoji"?e.jsx("span",{className:"text-2xl",children:f.icon}):e.jsx("i",{className:`${f.icon} text-xl`})})]}),f.subtitle&&e.jsx("p",{className:`text-lg opacity-90 mb-4 ${f.textStyle==="gradient"?f.textGradient:""}`,children:f.subtitle}),f.buttons.filter(g=>g.text.trim()).length>0&&e.jsx("div",{className:"flex flex-wrap gap-3 justify-center",children:f.buttons.filter(g=>g.text.trim()).map((g,V)=>{const oe=xe=>{switch(xe){case"primary":return"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all";case"secondary":return"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all";case"outline":return"px-4 py-2 bg-transparent border-2 border-current rounded-lg hover:bg-white hover:bg-opacity-20 transition-all";default:return"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all"}};return e.jsx("button",{className:oe(g.style||"primary"),style:g.style==="outline"?{color:f.textColor,borderColor:f.textColor}:void 0,children:g.text},V)})}),f.buttonText&&f.buttons.filter(g=>g.text.trim()).length===0&&e.jsx("button",{className:"px-4 py-2 bg-white bg-opacity-20 rounded-lg border border-current hover:bg-opacity-30 transition-all",style:{color:f.textColor},children:f.buttonText})]})]}),e.jsx("div",{className:"p-3 bg-gray-50 text-sm text-gray-600",children:e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("span",{children:["Display: ",(We=_n.find(g=>g.value===f.imageDisplayType))==null?void 0:We.label]}),e.jsxs("span",{children:["Font: ",(Te=Rn.find(g=>g.value===f.fontFamily))==null?void 0:Te.label]}),e.jsxs("span",{children:["Weight: ",(Me=On.find(g=>g.value===f.fontWeight))==null?void 0:Me.label]}),e.jsxs("span",{children:["Background: ",f.backgroundStyle==="gradient"?"Gradient":f.backgroundStyle==="palette"?"Color Palette":"Solid Color"]}),e.jsxs("span",{children:["Text: ",f.textStyle==="gradient"?"Gradient":f.textStyle==="palette"?"Color Palette":"Solid Color"]}),e.jsxs("span",{children:["Buttons: ",f.buttons.filter(g=>g.text.trim()).length]}),f.imageDisplayType==="unsplash"&&f.unsplashQuery&&e.jsxs("span",{children:['Query: "',f.unsplashQuery,'"']})]})})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(R,{type:"submit",disabled:C.isPending||j.isPending,children:[e.jsx(qs,{className:"w-4 h-4 mr-2"}),l?"Update Banner":"Create Banner"]}),e.jsxs(R,{type:"button",variant:"outline",onClick:()=>{n(!1),o(null),T({title:"",subtitle:"",imageUrl:"",linkUrl:"",buttonText:"",buttons:[{text:"",url:"",style:"primary"}],page:"home",isActive:!0,imageDisplayType:"image",unsplashQuery:"",fontFamily:"font-sans",fontWeight:"font-bold",textColor:"#ffffff",textGradient:"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",textStyle:"solid",backgroundColor:"#1f2937",backgroundGradient:"bg-gradient-to-r from-blue-600 to-purple-600",useGradient:!1,backgroundStyle:"solid"})},children:[e.jsx(Jt,{className:"w-4 h-4 mr-2"}),"Cancel"]})]})]})})]}),De.length>0&&e.jsxs(ee,{children:[e.jsxs(ge,{children:[e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(aa,{className:"w-5 h-5"}),"Static ",(Re=B.find(g=>g.value===a))==null?void 0:Re.label," Banners",e.jsx(we,{variant:"outline",children:De.length})]}),e.jsx(Ne,{children:'These are hardcoded banners currently displayed on the page. Click "Make Editable" to convert them to manageable banners.'})]}),e.jsx(ae,{children:e.jsx("div",{className:"space-y-4",children:De.map((g,V)=>e.jsx("div",{className:"border rounded-lg p-4 bg-gray-50 dark:bg-gray-800/50",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-20 h-12 rounded overflow-hidden bg-gray-100",children:e.jsx("img",{src:g.image,alt:g.title,className:"w-full h-full object-cover",onError:oe=>{oe.currentTarget.src="/placeholder-banner.jpg"}})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:g.title}),e.jsx(we,{variant:"secondary",children:"Hardcoded"})]}),g.subtitle&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:g.subtitle}),g.description&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:g.description}),g.ctaLink&&e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(gi,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-500 truncate",children:g.ctaLink})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{size:"sm",variant:"outline",onClick:()=>$(g.id),className:d.has(g.id)?"text-gray-500":"text-green-600",children:d.has(g.id)?e.jsx(pt,{className:"w-4 h-4"}):e.jsx(Et,{className:"w-4 h-4"})}),e.jsxs(R,{size:"sm",onClick:()=>W(g),className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Tt,{className:"w-4 h-4 mr-1"}),"Make Editable"]})]})]})},`hardcoded-${g.id}`))})})]}),e.jsxs(ee,{children:[e.jsxs(ge,{children:[e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(Yt,{className:"w-5 h-5"}),"Dynamic ",(E=B.find(g=>g.value===a))==null?void 0:E.label," Banners",e.jsx(we,{variant:"secondary",children:b.length})]}),e.jsx(Ne,{children:b.length>1?"Multiple banners will slide automatically":b.length===1?"Single banner will stay static":"No banners configured for this page"})]}),e.jsx(ae,{children:S?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Loading banners..."})]}):b.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Yt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsxs("p",{className:"text-gray-600",children:["No banners found for ",(ie=B.find(g=>g.value===a))==null?void 0:ie.label]}),e.jsxs(R,{onClick:()=>n(!0),className:"mt-4",variant:"outline",children:[e.jsx(Xe,{className:"w-4 h-4 mr-2"}),"Add First Banner"]})]}):e.jsx(Io,{onDragEnd:A,children:e.jsx(qo,{droppableId:"banners",children:g=>e.jsxs("div",{...g.droppableProps,ref:g.innerRef,className:"space-y-4",children:[b.map((V,oe)=>e.jsx(Mo,{draggableId:V.id.toString(),index:oe,children:(xe,qe)=>e.jsx("div",{ref:xe.innerRef,...xe.draggableProps,className:`border rounded-lg p-4 bg-white dark:bg-gray-800 ${qe.isDragging?"shadow-lg":"shadow-sm"}`,children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{...xe.dragHandleProps,className:"cursor-move",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full"}),e.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full"}),e.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full"})]})}),e.jsx("div",{className:"w-20 h-12 rounded overflow-hidden bg-gray-100",children:e.jsx("img",{src:V.imageUrl,alt:V.title,className:"w-full h-full object-cover",onError:F=>{F.currentTarget.src="/placeholder-banner.jpg"}})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:V.title}),e.jsx(we,{variant:V.isActive?"default":"secondary",children:V.isActive?"Active":"Inactive"})]}),V.subtitle&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:V.subtitle}),V.linkUrl&&e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(gi,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-500 truncate",children:V.linkUrl})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{size:"sm",variant:"outline",onClick:()=>y(V),disabled:j.isPending,children:V.isActive?e.jsx(Et,{className:"w-4 h-4"}):e.jsx(pt,{className:"w-4 h-4"})}),e.jsx(R,{size:"sm",variant:"outline",onClick:()=>G(V),children:e.jsx(Tt,{className:"w-4 h-4"})}),e.jsx(R,{size:"sm",variant:"outline",onClick:()=>O(V.id),disabled:K.isPending,className:"text-red-600 hover:text-red-700",children:e.jsx(Wt,{className:"w-4 h-4"})})]})]})})},V.id)),g.placeholder]})})})})]}),c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Banner Preview"}),e.jsx(R,{variant:"outline",size:"sm",onClick:()=>u(null),children:e.jsx(Jt,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"relative rounded-lg overflow-hidden",children:[e.jsx("img",{src:c.imageUrl,alt:c.title,className:"w-full h-64 object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center",children:e.jsxs("div",{className:"text-center text-white",children:[e.jsx("h4",{className:"text-2xl font-bold mb-2",children:c.title}),c.subtitle&&e.jsx("p",{className:"text-lg mb-4",children:c.subtitle}),c.buttonText&&e.jsx(R,{className:"bg-white text-black hover:bg-gray-100",children:c.buttonText})]})})]})]})})})]})}function hf(){const{toast:t}=ct(),s=ot(),[a,r]=P.useState(null),[i,n]=P.useState({name:"",baseUrl:"",commissionRate:0,priorityScore:50}),[l,o]=P.useState(!1),[c,u]=P.useState(null),[d,m]=P.useState(""),[h,p]=P.useState({adminPanelEnabled:!0,csvUploadEnabled:!0,googleSheetsEnabled:!1,autoOptimizeEnabled:!0,syncIntervalMinutes:5}),[k,_]=P.useState("list"),[f,T]=P.useState(""),[M,S]=P.useState(!1),[w,B]=P.useState({name:"",baseUrl:"",commissionRate:0,affiliateTag:"",trackingParams:""}),{data:b}=Ie({queryKey:["/api/admin/commission-settings"],queryFn:async()=>{const E=await fetch("/api/admin/commission-settings");if(!E.ok)throw new Error("Failed to fetch settings");return E.json()}}),{data:C=[],isLoading:j}=Ie({queryKey:["/api/admin/affiliate-networks"],queryFn:async()=>{const E=await fetch("/api/admin/affiliate-networks");if(!E.ok)throw new Error("Failed to fetch networks");return E.json()}}),K=C.filter(E=>E.name.toLowerCase().includes(f.toLowerCase())||E.baseUrl.toLowerCase().includes(f.toLowerCase()));P.useEffect(()=>{b&&p(b)},[b]);const H=he({mutationFn:async E=>{const ie=await fetch(`/api/admin/affiliate-networks/${E.networkId}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(E)});if(!ie.ok)throw new Error("Failed to update commission");return ie.json()},onSuccess:()=>{s.invalidateQueries({queryKey:["/api/admin/affiliate-networks"]}),r(null),t({title:"Success",description:"Commission rate updated successfully!"})},onError:E=>{t({title:"Error",description:E.message,variant:"destructive"})}}),Z=he({mutationFn:async E=>{const ie=await fetch("/api/admin/affiliate-networks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(E)});if(!ie.ok)throw new Error("Failed to add network");return ie.json()},onSuccess:()=>{s.invalidateQueries({queryKey:["/api/admin/affiliate-networks"]}),n({name:"",baseUrl:"",commissionRate:0,priorityScore:50}),o(!1),t({title:"Success",description:"Affiliate network added successfully!"})},onError:E=>{t({title:"Error",description:E.message,variant:"destructive"})}}),v=he({mutationFn:async E=>{const g=await fetch(`/api/admin/affiliate-networks/${E}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:"pickntrust2025"})});if(!g.ok)throw new Error("Failed to delete network");return g.json()},onSuccess:()=>{s.invalidateQueries({queryKey:["/api/admin/affiliate-networks"]}),t({title:"Success",description:"Affiliate network deleted successfully!"})},onError:E=>{t({title:"Error",description:E.message,variant:"destructive"})}}),G=he({mutationFn:async()=>{const E=await fetch("/api/admin/optimize-commissions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(!E.ok)throw new Error("Failed to optimize products");return E.json()},onSuccess:E=>{t({title:"Optimization Complete",description:`Optimized ${E.optimizedCount} products for best commission rates!`})},onError:E=>{t({title:"Error",description:E.message,variant:"destructive"})}}),O=he({mutationFn:async E=>{const ie=new FormData;ie.append("csvFile",E);const g=await fetch("/api/admin/upload-commission-csv",{method:"POST",body:ie});if(!g.ok)throw new Error("Failed to upload CSV");return g.json()},onSuccess:E=>{s.invalidateQueries({queryKey:["/api/admin/affiliate-networks"]}),u(null),t({title:"CSV Upload Complete",description:`Processed ${E.processedRows} rows, ${E.successCount} successful updates!`})},onError:E=>{t({title:"Error",description:E.message,variant:"destructive"})}}),y=he({mutationFn:async E=>{const ie=await fetch("/api/admin/sync-google-sheets",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sheetUrl:E,syncInterval:h.syncIntervalMinutes})});if(!ie.ok)throw new Error("Failed to sync Google Sheets");return ie.json()},onSuccess:E=>{s.invalidateQueries({queryKey:["/api/admin/affiliate-networks"]}),t({title:"Google Sheets Sync Complete",description:`Synced ${E.updatedCount} commission rates from Google Sheets!`})},onError:E=>{t({title:"Error",description:E.message,variant:"destructive"})}}),A=he({mutationFn:async E=>{const ie=await fetch("/api/admin/commission-settings",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(E)});if(!ie.ok)throw new Error("Failed to update settings");return ie.json()},onSuccess:()=>{t({title:"Success",description:"Commission settings updated successfully!"})},onError:E=>{t({title:"Error",description:E.message,variant:"destructive"})}}),$=(E,ie)=>{if(!h.adminPanelEnabled){t({title:"Disabled",description:"Admin panel updates are currently disabled",variant:"destructive"});return}const g=C.find(V=>V.id===E);g&&H.mutate({networkId:E,commissionRate:ie.commissionRate??g.commissionRate,priorityScore:ie.priorityScore??g.priorityScore,isActive:ie.isActive??g.isActive})},W=()=>{G.mutate()},pe=E=>{const ie={...h,...E};p(ie),A.mutate(ie)},De=()=>{if(!i.name||!i.baseUrl){t({title:"Error",description:"Please fill in all required fields",variant:"destructive"});return}Z.mutate({...i,priorityScore:i.priorityScore||50})},We=()=>{if(!c){t({title:"Error",description:"Please select a CSV file",variant:"destructive"});return}O.mutate(c)},Te=()=>{if(!d){t({title:"Error",description:"Please enter a Google Sheets URL",variant:"destructive"});return}y.mutate(d)},Me=()=>C.filter(E=>E.isActive).sort((E,ie)=>ie.commissionRate-E.commissionRate)[0];if(j)return e.jsx(ee,{children:e.jsx(ae,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-2",children:"Loading commission data..."})]})})});const Re=Me();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(ee,{className:"bg-gradient-to-r from-green-900/20 to-blue-900/20 border-green-700",children:[e.jsxs(ge,{children:[e.jsxs(fe,{className:"flex items-center gap-3 text-2xl",children:[e.jsx("i",{className:"fas fa-percentage text-green-400"}),"Commission Management System"]}),e.jsx(Ne,{className:"text-green-200",children:"Manage affiliate network commission rates and optimize product earnings automatically"})]}),e.jsx(ae,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-green-500/10 p-4 rounded-lg border border-green-500/20",children:[e.jsx("div",{className:"text-2xl font-bold text-green-400",children:C.length}),e.jsx("div",{className:"text-sm text-green-300",children:"Total Networks"})]}),e.jsxs("div",{className:"bg-blue-500/10 p-4 rounded-lg border border-blue-500/20",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-400",children:C.filter(E=>E.isActive).length}),e.jsx("div",{className:"text-sm text-blue-300",children:"Active Networks"})]}),e.jsxs("div",{className:"bg-yellow-500/10 p-4 rounded-lg border border-yellow-500/20",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:Re?`${Re.commissionRate}%`:"N/A"}),e.jsx("div",{className:"text-sm text-yellow-300",children:"Best Commission Rate"})]})]})})]}),e.jsxs(jl,{defaultValue:"networks",className:"space-y-4",children:[e.jsxs(As,{className:"grid w-full grid-cols-5",children:[e.jsx(ze,{value:"networks",children:"Networks"}),e.jsx(ze,{value:"affiliate-tags",children:"Affiliate Tags"}),e.jsx(ze,{value:"csv-upload",children:"CSV Upload"}),e.jsx(ze,{value:"google-sheets",children:"Google Sheets"}),e.jsx(ze,{value:"settings",children:"Settings"})]}),e.jsx(Ge,{value:"networks",className:"space-y-4",children:e.jsxs(ee,{children:[e.jsx(ge,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(fe,{children:"Affiliate Networks"}),e.jsx(Ne,{children:"Manage commission rates for different affiliate networks"})]}),e.jsxs(R,{onClick:()=>o(!l),className:"bg-green-600 hover:bg-green-700",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Add Network"]})]})}),e.jsxs(ae,{children:[l&&e.jsxs("div",{className:"mb-6 p-4 border border-gray-600 rounded-lg bg-gray-800/50",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Add New Affiliate Network"}),e.jsx("div",{className:"mb-4 p-3 bg-blue-900/20 rounded border border-blue-600",children:e.jsxs("p",{className:"text-sm text-blue-300",children:[e.jsx("i",{className:"fas fa-info-circle mr-2"}),'After adding a network, configure its affiliate tags in the "Affiliate Tags" tab.']})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"name",children:"Network Name"}),e.jsx(X,{id:"name",value:i.name,onChange:E=>n({...i,name:E.target.value}),placeholder:"e.g., Amazon Associates"})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"baseUrl",children:"Base URL"}),e.jsx(X,{id:"baseUrl",value:i.baseUrl,onChange:E=>n({...i,baseUrl:E.target.value}),placeholder:"e.g., https://amazon.in"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Base domain for this affiliate network"})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"commissionRate",children:"Commission Rate (%)"}),e.jsx(X,{id:"commissionRate",type:"number",step:"0.1",value:i.commissionRate,onChange:E=>n({...i,commissionRate:parseFloat(E.target.value)||0}),placeholder:"e.g., 4.5"})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"priorityScore",children:"Priority Score (1-100)"}),e.jsx(X,{id:"priorityScore",type:"number",value:i.priorityScore,onChange:E=>n({...i,priorityScore:parseInt(E.target.value)||50}),placeholder:"e.g., 85"})]})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsx(R,{onClick:De,disabled:Z.isPending,children:Z.isPending?"Adding...":"Add Network"}),e.jsx(R,{variant:"outline",onClick:()=>o(!1),children:"Cancel"})]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{children:"View:"}),e.jsxs("div",{className:"flex border border-gray-600 rounded-lg overflow-hidden",children:[e.jsxs("button",{onClick:()=>_("list"),className:`px-3 py-1 text-sm ${k==="list"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:[e.jsx("i",{className:"fas fa-list mr-1"}),"List"]}),e.jsxs("button",{onClick:()=>_("grid"),className:`px-3 py-1 text-sm ${k==="grid"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:[e.jsx("i",{className:"fas fa-th-large mr-1"}),"Grid"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{children:"Search:"}),e.jsx(X,{placeholder:"Search networks...",value:f,onChange:E=>T(E.target.value),className:"w-48"})]})]}),e.jsxs(R,{onClick:()=>S(!0),className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Add Network"]})]}),e.jsx("div",{className:k==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4":"space-y-4",children:K.map(E=>e.jsxs("div",{className:`border border-gray-600 rounded-lg p-4 bg-gray-800/30 ${k==="grid"?"relative":""}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h3",{className:"text-lg font-semibold",children:E.name}),E.id===(Re==null?void 0:Re.id)&&e.jsxs(we,{className:"bg-yellow-500 text-black",children:[e.jsx("i",{className:"fas fa-crown mr-1"}),"Best Rate"]}),e.jsx(we,{variant:E.isActive?"default":"secondary",children:E.isActive?"Active":"Inactive"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(et,{checked:E.isActive,onCheckedChange:ie=>$(E.id,{isActive:ie})}),e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>r(a===E.id?null:E.id),children:[e.jsx("i",{className:"fas fa-edit mr-1"}),"Edit"]}),e.jsxs(R,{variant:"destructive",size:"sm",onClick:()=>{confirm(`Are you sure you want to delete ${E.name}?`)&&v.mutate(E.id)},children:[e.jsx("i",{className:"fas fa-trash mr-1"}),"Delete"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Base URL:"}),e.jsx("div",{className:"font-mono text-blue-400",children:E.baseUrl})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Affiliate Tag:"}),e.jsx("div",{className:"font-mono text-purple-400",children:E.affiliateTag||"Not set"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Commission Rate:"}),e.jsxs("div",{className:"text-green-400 font-bold text-lg",children:[E.commissionRate,"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Priority Score:"}),e.jsxs("div",{className:"text-yellow-400 font-semibold",children:[E.priorityScore,"/100"]})]})]}),E.trackingParams&&e.jsxs("div",{className:"mt-3 p-3 bg-gray-800/50 rounded border border-gray-600",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"Tracking Parameters:"}),e.jsx("div",{className:"font-mono text-xs text-gray-300 mt-1",children:E.trackingParams})]}),a===E.id&&e.jsxs("div",{className:"mt-4 p-3 border border-blue-600 rounded bg-blue-900/20",children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Edit Commission Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(I,{children:"Commission Rate (%)"}),e.jsx(X,{type:"number",step:"0.1",defaultValue:E.commissionRate,onBlur:ie=>{const g=parseFloat(ie.target.value);g!==E.commissionRate&&$(E.id,{commissionRate:g})}})]}),e.jsxs("div",{children:[e.jsx(I,{children:"Priority Score (1-100)"}),e.jsx(X,{type:"number",defaultValue:E.priorityScore,onBlur:ie=>{const g=parseInt(ie.target.value);g!==E.priorityScore&&$(E.id,{priorityScore:g})}})]})]})]})]},E.id))})]})]})}),e.jsx(Ge,{value:"affiliate-tags",className:"space-y-4",children:e.jsxs(ee,{children:[e.jsxs(ge,{children:[e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-tags text-purple-400"}),"Affiliate Tags Management"]}),e.jsx(Ne,{children:"Configure affiliate tags and tracking parameters for each network independently"})]}),e.jsxs(ae,{className:"space-y-4",children:[e.jsxs("div",{className:"bg-purple-900/20 p-4 rounded-lg border border-purple-600",children:[e.jsx("h3",{className:"font-semibold mb-2 text-purple-400",children:"How Affiliate Tags Work:"}),e.jsxs("ul",{className:"text-sm space-y-1 text-gray-300",children:[e.jsx("li",{children:"• Each affiliate network has unique tracking identifiers"}),e.jsx("li",{children:"• Tags are used to track commissions back to your account"}),e.jsx("li",{children:"• Tracking parameters define how tags are added to product URLs"}),e.jsxs("li",{children:["• Use ","{","affiliateTag"," placeholder in parameters for dynamic replacement"]}),e.jsx("li",{children:"• These settings work independently of method toggles"})]})]}),e.jsx("div",{className:"space-y-4",children:C.map(E=>e.jsxs("div",{className:"border border-gray-600 rounded-lg p-4 bg-gray-800/30",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h3",{className:"text-lg font-semibold",children:E.name}),e.jsx(we,{variant:E.isActive?"default":"secondary",children:E.isActive?"Active":"Inactive"}),E.affiliateTags&&E.affiliateTags.length>0&&e.jsxs(we,{className:"bg-purple-500 text-white",children:[e.jsx("i",{className:"fas fa-tags mr-1"}),E.affiliateTags.length," Tag",E.affiliateTags.length>1?"s":""]})]}),e.jsxs("div",{className:"text-sm text-gray-400",children:[E.commissionRate,"% commission"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-tags text-purple-400"}),"Affiliate Tags/IDs",e.jsxs(we,{variant:"secondary",className:"text-xs",children:[(E.affiliateTags||[]).length," tags"]})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2 mb-3",children:(E.affiliateTags||[]).map((ie,g)=>e.jsxs("div",{className:"flex items-center gap-1 bg-purple-900/30 border border-purple-600 rounded-lg px-3 py-1",children:[e.jsx("span",{className:"text-purple-300 font-mono text-sm",children:ie}),e.jsx("button",{onClick:()=>{const V=(E.affiliateTags||[]).filter((xe,qe)=>qe!==g),oe=C.map(xe=>xe.id===E.id?{...xe,affiliateTags:V}:xe);s.setQueryData(["/api/admin/affiliate-networks"],oe),fetch(`/api/admin/affiliate-networks/${E.id}/tags`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({affiliateTags:V,trackingParams:E.trackingParams})}).then(()=>{t({title:"Success",description:`Removed affiliate tag from ${E.name}`})}).catch(()=>{t({title:"Error",description:"Failed to remove affiliate tag",variant:"destructive"})})},className:"text-red-400 hover:text-red-300 ml-1",children:e.jsx("i",{className:"fas fa-times text-xs"})})]},g))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(X,{id:`new-tag-${E.id}`,placeholder:`e.g., ${E.name.includes("Amazon")?"pickntrust03-21":"YOUR_"+E.name.toUpperCase().replace(/\s+/g,"_")+"_ID"}`,onKeyPress:ie=>{if(ie.key==="Enter"){const g=ie.target,V=g.value.trim();if(V&&!(E.affiliateTags||[]).includes(V)){const oe=[...E.affiliateTags||[],V],xe=C.map(qe=>qe.id===E.id?{...qe,affiliateTags:oe}:qe);s.setQueryData(["/api/admin/affiliate-networks"],xe),fetch(`/api/admin/affiliate-networks/${E.id}/tags`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({affiliateTags:oe,trackingParams:E.trackingParams})}).then(()=>{t({title:"Success",description:`Added affiliate tag to ${E.name}`}),g.value=""}).catch(()=>{t({title:"Error",description:"Failed to add affiliate tag",variant:"destructive"})})}}},className:"flex-1"}),e.jsxs(R,{onClick:()=>{const ie=document.getElementById(`new-tag-${E.id}`),g=ie.value.trim();if(g&&!(E.affiliateTags||[]).includes(g)){const V=[...E.affiliateTags||[],g],oe=C.map(xe=>xe.id===E.id?{...xe,affiliateTags:V}:xe);s.setQueryData(["/api/admin/affiliate-networks"],oe),fetch(`/api/admin/affiliate-networks/${E.id}/tags`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({affiliateTags:V,trackingParams:E.trackingParams})}).then(()=>{t({title:"Success",description:`Added affiliate tag to ${E.name}`}),ie.value=""}).catch(()=>{t({title:"Error",description:"Failed to add affiliate tag",variant:"destructive"})})}},size:"sm",className:"bg-purple-600 hover:bg-purple-700",children:[e.jsx("i",{className:"fas fa-plus mr-1"}),"Add Tag"]})]}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Press Enter or click Add Tag to add multiple affiliate identifiers for ",E.name]})]}),e.jsxs("div",{children:[e.jsx(I,{children:"Tracking Parameters Template"}),e.jsx(X,{value:E.trackingParams||"",onChange:ie=>{const g=C.map(V=>V.id===E.id?{...V,trackingParams:ie.target.value}:V);s.setQueryData(["/api/admin/affiliate-networks"],g)},onBlur:ie=>{fetch(`/api/admin/affiliate-networks/${E.id}/tags`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({affiliateTag:E.affiliateTag,trackingParams:ie.target.value})}).then(()=>{t({title:"Success",description:`Updated ${E.name} tracking parameters`})}).catch(()=>{t({title:"Error",description:"Failed to update tracking parameters",variant:"destructive"})})},placeholder:`e.g., ${E.name.includes("Amazon")?"tag={affiliateTag}&linkCode=as2":E.name.includes("EarnKaro")?"ref={affiliateTag}":"affid={affiliateTag}"}`}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["URL parameters with ","{","affiliateTag"," placeholder"]})]})]}),E.affiliateTags&&E.affiliateTags.length>0&&E.trackingParams&&e.jsxs("div",{className:"mt-4 p-3 bg-green-900/20 rounded border border-green-600",children:[e.jsx("h4",{className:"text-sm font-semibold text-green-400 mb-2",children:"Preview Generated URLs:"}),e.jsx("div",{className:"space-y-2",children:E.affiliateTags.map((ie,g)=>{var V;return e.jsxs("div",{className:"font-mono text-xs text-gray-300",children:[e.jsxs("span",{className:"text-purple-400",children:[ie,":"]})," https://example.com/product?",(V=E.trackingParams)==null?void 0:V.replace(/{affiliateTag}/g,ie)]},g)})})]}),(!E.affiliateTags||E.affiliateTags.length===0||!E.trackingParams)&&e.jsx("div",{className:"mt-4 p-3 bg-yellow-900/20 rounded border border-yellow-600",children:e.jsxs("p",{className:"text-sm text-yellow-400",children:[e.jsx("i",{className:"fas fa-exclamation-triangle mr-2"}),(!E.affiliateTags||E.affiliateTags.length===0)&&!E.trackingParams?"Affiliate tags and tracking parameters are required for commission tracking":!E.affiliateTags||E.affiliateTags.length===0?"At least one affiliate tag is required for commission tracking":"Tracking parameters are required for URL generation"]})})]},E.id))}),C.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx("i",{className:"fas fa-network-wired text-4xl mb-4"}),e.jsx("p",{children:"No affiliate networks found. Add networks in the Networks tab first."})]})]})]})}),e.jsx(Ge,{value:"csv-upload",className:"space-y-4",children:e.jsxs(ee,{children:[e.jsxs(ge,{children:[e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-file-csv text-blue-400"}),"CSV Bulk Upload",!h.csvUploadEnabled&&e.jsx(we,{variant:"secondary",children:"Disabled"})]}),e.jsx(Ne,{children:"Upload commission rates in bulk using CSV files"})]}),e.jsxs(ae,{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-900/20 p-4 rounded-lg border border-blue-600",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"CSV Format:"}),e.jsxs("div",{className:"bg-gray-800 p-3 rounded font-mono text-sm",children:["category_name,network_name,commission_rate,priority_score,notes",e.jsx("br",{}),"Electronics,Amazon,4.0,40,Electronics commission",e.jsx("br",{}),"Fashion,Myntra,12.0,120,Best fashion rate",e.jsx("br",{}),"Beauty,Nykaa,15.0,150,Premium beauty commission"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"csvFile",children:"Select CSV File"}),e.jsx(X,{id:"csvFile",type:"file",accept:".csv",onChange:E=>{var ie;return u(((ie=E.target.files)==null?void 0:ie[0])||null)},disabled:!h.csvUploadEnabled})]}),c&&e.jsxs("div",{className:"bg-green-900/20 p-3 rounded border border-green-600",children:[e.jsxs("p",{className:"text-green-400",children:["Selected: ",c.name]}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Size: ",(c.size/1024).toFixed(1)," KB"]})]}),e.jsx(R,{onClick:We,disabled:!c||!h.csvUploadEnabled||O.isPending,className:"w-full bg-blue-600 hover:bg-blue-700",children:O.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Uploading CSV..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-upload mr-2"}),"Upload & Process CSV"]})})]})]})]})}),e.jsx(Ge,{value:"google-sheets",className:"space-y-4",children:e.jsxs(ee,{children:[e.jsxs(ge,{children:[e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-table text-green-400"}),"Google Sheets Integration",!h.googleSheetsEnabled&&e.jsx(we,{variant:"secondary",children:"Disabled"})]}),e.jsx(Ne,{children:"Real-time sync with your Google Sheets commission rates"})]}),e.jsxs(ae,{className:"space-y-4",children:[e.jsxs("div",{className:"bg-green-900/20 p-4 rounded-lg border border-green-600",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Setup Instructions:"}),e.jsxs("ol",{className:"text-sm space-y-1 text-gray-300 list-decimal list-inside",children:[e.jsx("li",{children:"Create a Google Sheet with columns: category_name, network_name, commission_rate"}),e.jsx("li",{children:"Make the sheet publicly viewable (Share → Anyone with link can view)"}),e.jsx("li",{children:"Copy the sheet URL and paste it below"}),e.jsx("li",{children:'Click "Connect & Sync" to start automatic synchronization'})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"sheetsUrl",children:"Google Sheets URL"}),e.jsx(X,{id:"sheetsUrl",value:d,onChange:E=>m(E.target.value),placeholder:"https://docs.google.com/spreadsheets/d/your-sheet-id/edit",disabled:!h.googleSheetsEnabled})]}),e.jsxs("div",{children:[e.jsxs(I,{children:["Sync Interval: ",h.syncIntervalMinutes," minutes"]}),e.jsx(X,{type:"range",min:"1",max:"60",value:h.syncIntervalMinutes,onChange:E=>pe({syncIntervalMinutes:parseInt(E.target.value)}),disabled:!h.googleSheetsEnabled,className:"mt-2"})]}),e.jsx(R,{onClick:Te,disabled:!d||!h.googleSheetsEnabled||y.isPending,className:"w-full bg-green-600 hover:bg-green-700",children:y.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Syncing with Google Sheets..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-sync mr-2"}),"Connect & Sync Google Sheets"]})})]})]})]})}),e.jsx(Ge,{value:"settings",className:"space-y-4",children:e.jsxs(ee,{children:[e.jsxs(ge,{children:[e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-cog text-gray-400"}),"Commission Management Settings"]}),e.jsx(Ne,{children:"Configure which commission update methods are enabled"})]}),e.jsxs(ae,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-600 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Admin Panel Updates"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Allow manual updates through the web interface"})]}),e.jsx(et,{checked:h.adminPanelEnabled,onCheckedChange:E=>pe({adminPanelEnabled:E})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-600 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"CSV File Upload"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Enable bulk updates via CSV file upload"})]}),e.jsx(et,{checked:h.csvUploadEnabled,onCheckedChange:E=>pe({csvUploadEnabled:E})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-600 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Google Sheets Integration"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Real-time sync with Google Sheets"})]}),e.jsx(et,{checked:h.googleSheetsEnabled,onCheckedChange:E=>pe({googleSheetsEnabled:E})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-600 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Auto-Optimize Products"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Automatically optimize products when rates change"})]}),e.jsx(et,{checked:h.autoOptimizeEnabled,onCheckedChange:E=>pe({autoOptimizeEnabled:E})})]})]}),e.jsxs("div",{className:"border-t border-gray-600 pt-6",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Product Optimization"}),e.jsx("div",{className:"bg-blue-900/20 p-4 rounded-lg border border-blue-600 mb-4",children:e.jsx("p",{className:"text-sm text-gray-300",children:"Manually trigger optimization to update all products with the best commission rates."})}),e.jsx(R,{onClick:W,disabled:G.isPending,className:"w-full bg-green-600 hover:bg-green-700",size:"lg",children:G.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Optimizing Products..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-rocket mr-2"}),"Optimize All Products Now"]})})]})]})]})})]}),M&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg border border-gray-600 w-full max-w-2xl mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Add New Affiliate Network"}),e.jsx("button",{onClick:()=>S(!1),className:"text-gray-400 hover:text-white",children:e.jsx("i",{className:"fas fa-times"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(I,{children:"Network Name"}),e.jsx(X,{value:w.name,onChange:E=>B({...w,name:E.target.value}),placeholder:"e.g., Amazon Associates"})]}),e.jsxs("div",{children:[e.jsx(I,{children:"Base URL"}),e.jsx(X,{value:w.baseUrl,onChange:E=>B({...w,baseUrl:E.target.value}),placeholder:"e.g., https://amazon.in"})]}),e.jsxs("div",{children:[e.jsx(I,{children:"Commission Rate (%)"}),e.jsx(X,{type:"number",step:"0.1",value:w.commissionRate,onChange:E=>B({...w,commissionRate:parseFloat(E.target.value)||0}),placeholder:"e.g., 4.5"})]}),e.jsxs("div",{children:[e.jsx(I,{children:"Affiliate Tag (Optional)"}),e.jsx(X,{value:w.affiliateTag,onChange:E=>B({...w,affiliateTag:E.target.value}),placeholder:"e.g., your-affiliate-id"})]})]}),e.jsxs("div",{children:[e.jsx(I,{children:"Tracking Parameters (Optional)"}),e.jsx(X,{value:w.trackingParams,onChange:E=>B({...w,trackingParams:E.target.value}),placeholder:"e.g., tag={affiliateTag}&linkCode=as2"}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Use ","{","affiliateTag","}"," placeholder for dynamic replacement"]})]})]}),e.jsxs("div",{className:"flex gap-2 mt-6",children:[e.jsx(R,{onClick:()=>Z.mutate({...w,priorityScore:50}),disabled:!w.name||!w.baseUrl||Z.isPending,className:"bg-green-600 hover:bg-green-700",children:Z.isPending?"Adding...":"Add Network"}),e.jsx(R,{variant:"outline",onClick:()=>S(!1),children:"Cancel"})]})]})})]})}const pf=()=>{const{toast:t}=ct(),s=ot(),[a,r]=P.useState(!1),[i,n]=P.useState(!1),[l,o]=P.useState(null),[c,u]=P.useState({}),[d,m]=P.useState({network:"",email:"",password:"",apiKey:"",isActive:!0}),[h,p]=P.useState({network:"",email:"",password:"",apiKey:"",isActive:!0}),{data:k=[],isLoading:_}=Ie({queryKey:["/api/admin/credentials/networks"],queryFn:async()=>{const y=await fetch("/api/admin/credentials/networks",{headers:{"X-Admin-Session":localStorage.getItem("pickntrust-admin-session")||""}});if(!y.ok)throw new Error("Failed to fetch networks");return(await y.json()).networks}}),{data:f}=Ie({queryKey:["/api/admin/credentials/stats"],queryFn:async()=>{const y=await fetch("/api/admin/credentials/stats",{headers:{"X-Admin-Session":localStorage.getItem("pickntrust-admin-session")||""}});if(!y.ok)throw new Error("Failed to fetch stats");return(await y.json()).stats}}),{data:T,refetch:M}=Ie({queryKey:["/api/admin/credentials/health"],queryFn:async()=>{const y=await fetch("/api/admin/credentials/health",{headers:{"X-Admin-Session":localStorage.getItem("pickntrust-admin-session")||""}});if(!y.ok)throw new Error("Failed to fetch health");return(await y.json()).health}}),S=he({mutationFn:async y=>{const A=await fetch("/api/admin/credentials",{method:"POST",headers:{"Content-Type":"application/json","X-Admin-Session":localStorage.getItem("pickntrust-admin-session")||""},body:JSON.stringify(y)});if(!A.ok){const $=await A.json();throw new Error($.error||"Failed to add credentials")}return A.json()},onSuccess:()=>{t({title:"Success",description:"Credentials added successfully"}),s.invalidateQueries({queryKey:["/api/admin/credentials/networks"]}),s.invalidateQueries({queryKey:["/api/admin/credentials/stats"]}),s.invalidateQueries({queryKey:["/api/admin/credentials/health"]}),r(!1),m({network:"",email:"",password:"",apiKey:"",isActive:!0})},onError:y=>{t({title:"Error",description:y.message,variant:"destructive"})}}),w=he({mutationFn:async y=>{const A=await fetch("/api/admin/credentials",{method:"POST",headers:{"Content-Type":"application/json","X-Admin-Session":localStorage.getItem("pickntrust-admin-session")||""},body:JSON.stringify(y)});if(!A.ok){const $=await A.json();throw new Error($.error||"Failed to update credentials")}return A.json()},onSuccess:()=>{t({title:"Success",description:"Credentials updated successfully"}),s.invalidateQueries({queryKey:["/api/admin/credentials/networks"]}),s.invalidateQueries({queryKey:["/api/admin/credentials/stats"]}),s.invalidateQueries({queryKey:["/api/admin/credentials/health"]}),n(!1),o(null),p({network:"",email:"",password:"",apiKey:"",isActive:!0})},onError:y=>{t({title:"Error",description:y.message,variant:"destructive"})}}),B=he({mutationFn:async y=>{const A=await fetch(`/api/admin/credentials/${y}`,{method:"DELETE",headers:{"X-Admin-Session":localStorage.getItem("pickntrust-admin-session")||""}});if(!A.ok){const $=await A.json();throw new Error($.error||"Failed to delete credentials")}return A.json()},onSuccess:()=>{t({title:"Success",description:"Credentials deleted successfully"}),s.invalidateQueries({queryKey:["/api/admin/credentials/networks"]}),s.invalidateQueries({queryKey:["/api/admin/credentials/stats"]}),s.invalidateQueries({queryKey:["/api/admin/credentials/health"]})},onError:y=>{t({title:"Error",description:y.message,variant:"destructive"})}}),b=he({mutationFn:async y=>{const A=await fetch(`/api/admin/credentials/${y}/test`,{method:"POST",headers:{"X-Admin-Session":localStorage.getItem("pickntrust-admin-session")||""}});if(!A.ok)throw new Error("Failed to test credentials");return A.json()},onSuccess:(y,A)=>{const $=y.test;t({title:$.valid?"Test Passed":"Test Failed",description:$.valid?`${A} credentials are valid`:$.error,variant:$.valid?"default":"destructive"})}}),C=he({mutationFn:async()=>{const y=await fetch("/api/admin/credentials/initialize",{method:"POST",headers:{"X-Admin-Session":localStorage.getItem("pickntrust-admin-session")||""}});if(!y.ok){const A=await y.json();throw new Error(A.error||"Failed to initialize credentials")}return y.json()},onSuccess:()=>{t({title:"Success",description:"Credentials initialized successfully"}),s.invalidateQueries({queryKey:["/api/admin/credentials/networks"]}),s.invalidateQueries({queryKey:["/api/admin/credentials/stats"]}),s.invalidateQueries({queryKey:["/api/admin/credentials/health"]})},onError:y=>{t({title:"Error",description:y.message,variant:"destructive"})}}),j=()=>{if(!d.network||!d.email||!d.password){t({title:"Validation Error",description:"Network, email, and password are required",variant:"destructive"});return}S.mutate(d)},K=()=>{if(!h.network||!h.email||!h.password){t({title:"Validation Error",description:"Network, email, and password are required",variant:"destructive"});return}w.mutate(h)},H=y=>{o(y),p({network:y,email:"",password:"",apiKey:"",isActive:!0}),n(!0)},Z=()=>{n(!1),o(null),p({network:"",email:"",password:"",apiKey:"",isActive:!0})},v=y=>{u(A=>({...A,[y]:!A[y]}))},G=y=>y.isActive?y.valid?e.jsx(Ds,{className:"w-4 h-4 text-green-500"}):e.jsx(fi,{className:"w-4 h-4 text-red-500"}):e.jsx(fi,{className:"w-4 h-4 text-gray-400"}),O=y=>y.isActive?y.valid?"bg-green-500":"bg-red-500":"bg-gray-500";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(ns,{className:"w-6 h-6 text-blue-600"}),"Credential Management"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Secure storage and management of affiliate network credentials"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(R,{onClick:()=>M(),variant:"outline",size:"sm",className:"flex items-center gap-2",children:[e.jsx(Dt,{className:"w-4 h-4"}),"Refresh"]}),e.jsxs(R,{onClick:()=>r(!0),className:"flex items-center gap-2",children:[e.jsx(Xe,{className:"w-4 h-4"}),"Add Credentials"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(ee,{children:e.jsx(ae,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Hn,{className:"w-8 h-8 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:(f==null?void 0:f.total)||0}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total Networks"})]})]})})}),e.jsx(ee,{children:e.jsx(ae,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(sa,{className:"w-8 h-8 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:(f==null?void 0:f.active)||0}),e.jsx("p",{className:"text-sm text-gray-600",children:"Active Networks"})]})]})})}),e.jsx(ee,{children:e.jsx(ae,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ds,{className:"w-8 h-8 text-emerald-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:(T==null?void 0:T.validCredentials)||0}),e.jsx("p",{className:"text-sm text-gray-600",children:"Valid Credentials"})]})]})})}),e.jsx(ee,{children:e.jsx(ae,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ns,{className:"w-8 h-8 text-purple-500"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-2xl font-bold",children:[T?Math.round(T.validCredentials/T.totalNetworks*100):0,"%"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Health Score"})]})]})})})]}),(!f||f.total===0)&&e.jsx(ee,{className:"border-dashed border-2 border-blue-300",children:e.jsxs(ae,{className:"p-6 text-center",children:[e.jsx(hc,{className:"w-12 h-12 text-blue-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Credentials Found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Initialize the system with your provided network credentials"}),e.jsxs(R,{onClick:()=>C.mutate(),disabled:C.isPending,className:"flex items-center gap-2",children:[C.isPending?e.jsx(Dt,{className:"w-4 h-4 animate-spin"}):e.jsx(aa,{className:"w-4 h-4"}),"Initialize Credentials"]})]})}),T&&T.tests.length>0&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:T.tests.map(y=>e.jsxs(ee,{className:"relative",children:[e.jsx(ge,{className:"pb-3",children:e.jsxs(fe,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[G(y),e.jsx("span",{className:"capitalize",children:y.network})]}),e.jsx(we,{className:O(y),children:y.isActive?y.valid?"Valid":"Invalid":"Inactive"})]})}),e.jsxs(ae,{className:"space-y-3",children:[y.error&&e.jsxs("div",{className:"flex items-center gap-2 text-red-600 text-sm",children:[e.jsx(pc,{className:"w-4 h-4"}),y.error]}),y.lastUsed&&e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("strong",{children:"Last Used:"})," ",new Date(y.lastUsed).toLocaleString()]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(R,{size:"sm",variant:"outline",onClick:()=>b.mutate(y.network),disabled:b.isPending,className:"flex-1",children:[e.jsx(Qn,{className:"w-3 h-3 mr-1"}),"Test"]}),e.jsxs(R,{size:"sm",variant:"secondary",onClick:()=>H(y.network),className:"flex-1",children:[e.jsx(Tt,{className:"w-3 h-3 mr-1"}),"Edit"]}),e.jsx(R,{size:"sm",variant:"destructive",onClick:()=>B.mutate(y.network),disabled:B.isPending,children:e.jsx(Wt,{className:"w-3 h-3"})})]})]})]},y.network))}),a&&e.jsxs(ee,{children:[e.jsxs(ge,{children:[e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(Xe,{className:"w-5 h-5"}),"Add New Network Credentials"]}),e.jsx(Ne,{children:"Securely store credentials for affiliate network auto-scraping"})]}),e.jsxs(ae,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"network",children:"Network Name"}),e.jsx(X,{id:"network",value:d.network,onChange:y=>m(A=>({...A,network:y.target.value})),placeholder:"e.g., cuelinks, earnkaro"})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"email",children:"Email"}),e.jsx(X,{id:"email",type:"email",value:d.email,onChange:y=>m(A=>({...A,email:y.target.value})),placeholder:"your@email.com"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(X,{id:"password",type:c.new?"text":"password",value:d.password,onChange:y=>m(A=>({...A,password:y.target.value})),placeholder:"••••••••"}),e.jsx(R,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:()=>v("new"),children:c.new?e.jsx(Et,{className:"w-4 h-4"}):e.jsx(pt,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"apiKey",children:"API Key (Optional)"}),e.jsx(X,{id:"apiKey",value:d.apiKey,onChange:y=>m(A=>({...A,apiKey:y.target.value})),placeholder:"API key if available"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(et,{id:"isActive",checked:d.isActive,onCheckedChange:y=>m(A=>({...A,isActive:y}))}),e.jsx(I,{htmlFor:"isActive",children:"Active"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(R,{onClick:j,disabled:S.isPending,className:"flex items-center gap-2",children:[S.isPending?e.jsx(Dt,{className:"w-4 h-4 animate-spin"}):e.jsx(aa,{className:"w-4 h-4"}),"Store Securely"]}),e.jsx(R,{variant:"outline",onClick:()=>{r(!1),m({network:"",email:"",password:"",apiKey:"",isActive:!0})},children:"Cancel"})]})]})]}),i&&e.jsxs(ee,{children:[e.jsxs(ge,{children:[e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(Tt,{className:"w-5 h-5"}),"Edit ",l==null?void 0:l.toUpperCase()," Credentials"]}),e.jsxs(Ne,{children:["Update credentials for ",l," network"]})]}),e.jsxs(ae,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"edit-network",children:"Network Name"}),e.jsx(X,{id:"edit-network",value:h.network,disabled:!0,className:"bg-slate-50 border-slate-300 text-slate-700 cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"edit-email",children:"Email"}),e.jsx(X,{id:"edit-email",type:"email",value:h.email,onChange:y=>p(A=>({...A,email:y.target.value})),placeholder:"your@email.com"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"edit-password",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(X,{id:"edit-password",type:c.edit?"text":"password",value:h.password,onChange:y=>p(A=>({...A,password:y.target.value})),placeholder:"Enter new password"}),e.jsx(R,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:()=>v("edit"),children:c.edit?e.jsx(Et,{className:"w-4 h-4"}):e.jsx(pt,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"edit-apiKey",children:"API Key (Optional)"}),e.jsx(X,{id:"edit-apiKey",value:h.apiKey,onChange:y=>p(A=>({...A,apiKey:y.target.value})),placeholder:"API key if available"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(et,{id:"edit-isActive",checked:h.isActive,onCheckedChange:y=>p(A=>({...A,isActive:y}))}),e.jsx(I,{htmlFor:"edit-isActive",children:"Active"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(R,{onClick:K,disabled:w.isPending,className:"flex items-center gap-2",children:[w.isPending?e.jsx(Dt,{className:"w-4 h-4 animate-spin"}):e.jsx(aa,{className:"w-4 h-4"}),"Update Credentials"]}),e.jsx(R,{variant:"outline",onClick:Z,children:"Cancel"})]})]})]}),e.jsx(ee,{className:"border-blue-200 bg-blue-50",children:e.jsx(ae,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ns,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-blue-900",children:"Security Information"}),e.jsx("p",{className:"text-sm text-blue-800 mt-1",children:"All credentials are encrypted using AES-256-GCM encryption before storage. Passwords are never stored in plain text and can only be decrypted by authorized processes."})]})]})})})]})},gf=[{value:"home",label:"Home Page"},{value:"categories",label:"Categories Page"},{value:"blog",label:"Blog Page"},{value:"videos",label:"Videos Page"},{value:"wishlist",label:"Wishlist Page"},{value:"contact",label:"Contact Page"},{value:"admin",label:"Admin Panel"}],ff=[{value:"prime-picks",label:"Prime Picks"},{value:"value-picks",label:"Value Picks"},{value:"click-picks",label:"Click Picks"},{value:"cue-picks",label:"Cue Picks"},{value:"global-picks",label:"Global Picks"},{value:"loot-box",label:"Loot Box"},{value:"deals-hub",label:"Deals Hub"},{value:"travel-picks",label:"Travel Picks"}],Ln=[{value:"header",label:"Header (Legacy)"},{value:"header-top",label:"Header Top (Above Navigation)"},{value:"header-bottom",label:"Header Bottom (Below Navigation)"},{value:"content-top",label:"Content Top (Before Main Content)"},{value:"content-middle",label:"Content Middle (Between Sections)"},{value:"content-bottom",label:"Content Bottom (After Main Content)"},{value:"sidebar-left",label:"Left Sidebar"},{value:"sidebar-right",label:"Right Sidebar"},{value:"footer-top",label:"Footer Top (Before Footer Content)"},{value:"footer-bottom",label:"Footer Bottom (After Footer Content)"},{value:"floating-top-left",label:"Floating Top Left"},{value:"floating-top-right",label:"Floating Top Right"},{value:"floating-bottom-left",label:"Floating Bottom Left"},{value:"floating-bottom-right",label:"Floating Bottom Right"},{value:"banner-top",label:"Full Width Banner Top"},{value:"banner-bottom",label:"Full Width Banner Bottom"}],er=[{name:"Google AdSense - Display Ad",category:"Advertisements",code:`<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXXXXXXXXXXXXXX" crossorigin="anonymous"><\/script>
<!-- Display Ad -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-XXXXXXXXXXXXXXXX"
     data-ad-slot="XXXXXXXXXX"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
<\/script>`},{name:"Google AdSense - Banner Ad",category:"Advertisements",code:`<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXXXXXXXXXXXXXX" crossorigin="anonymous"><\/script>
<!-- Banner Ad -->
<ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-XXXXXXXXXXXXXXXX"
     data-ad-slot="XXXXXXXXXX"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
<\/script>`},{name:"Trip.com Affiliate Banner",category:"Advertisements",code:'<iframe border="0" src="https://www.trip.com/partners/ad/SB5334205?Allianceid=7067369&SID=258816601&trip_sub1=" style="width:300px;height:250px" frameborder="0" scrolling="no" style="border:none" id="SB5334205"></iframe>'},{name:"Banner Ad",category:"Advertisements",code:`<div class="relative overflow-hidden rounded-lg shadow-lg">
  <a href="#" target="_blank" class="block">
    <img src="https://via.placeholder.com/728x90/4F46E5/FFFFFF?text=Your+Banner+Ad" alt="Advertisement" class="w-full h-auto">
    <div class="absolute top-2 right-2 bg-black bg-opacity-50 text-white text-xs px-2 py-1 rounded">Ad</div>
  </a>
</div>`},{name:"Affiliate Product Card",category:"Advertisements",code:`<div class="bg-white border border-gray-200 rounded-lg shadow-sm p-4 max-w-sm">
  <img src="https://via.placeholder.com/200x200" alt="Product" class="w-full h-48 object-cover rounded-md mb-3">
  <h3 class="font-semibold text-gray-900 mb-2">Product Name</h3>
  <p class="text-sm text-gray-600 mb-3">Product description goes here...</p>
  <div class="flex items-center justify-between">
    <span class="text-lg font-bold text-green-600">$99.99</span>
    <a href="#" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors">Buy Now</a>
  </div>
</div>`},{name:"Newsletter Signup",category:"Call-to-Action",code:`<div class="bg-gradient-to-r from-blue-500 to-purple-600 p-6 rounded-lg text-white">
  <h3 class="text-xl font-bold mb-2">Subscribe to Our Newsletter</h3>
  <p class="mb-4 opacity-90">Get the latest deals and updates delivered to your inbox!</p>
  <form class="flex gap-2">
    <input type="email" placeholder="Enter your email" class="flex-1 px-4 py-2 rounded-md text-gray-900 focus:outline-none focus:ring-2 focus:ring-white" required>
    <button type="submit" class="px-6 py-2 bg-white text-blue-600 rounded-md hover:bg-gray-100 transition-colors font-semibold">Subscribe</button>
  </form>
</div>`},{name:"Download CTA",category:"Call-to-Action",code:`<div class="bg-green-50 border border-green-200 rounded-lg p-6 text-center">
  <div class="mb-4">
    <svg class="w-12 h-12 mx-auto text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
    </svg>
  </div>
  <h3 class="text-lg font-semibold text-green-900 mb-2">Download Our App</h3>
  <p class="text-green-700 mb-4">Get exclusive deals and faster checkout!</p>
  <a href="#" class="inline-block bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors font-semibold">Download Now</a>
</div>`},{name:"Contact CTA",category:"Call-to-Action",code:`<div class="bg-orange-50 border-l-4 border-orange-400 p-6">
  <div class="flex items-center">
    <div class="flex-shrink-0">
      <svg class="w-8 h-8 text-orange-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
      </svg>
    </div>
    <div class="ml-4 flex-1">
      <h3 class="text-lg font-semibold text-orange-900">Need Help?</h3>
      <p class="text-orange-700 mb-3">Our support team is here to assist you!</p>
      <a href="#" class="bg-orange-600 text-white px-4 py-2 rounded-md hover:bg-orange-700 transition-colors">Contact Us</a>
    </div>
  </div>
</div>`},{name:"Social Media Links",category:"Social Media",code:`<div class="flex justify-center space-x-4 p-4">
  <a href="#" class="text-blue-600 hover:text-blue-800 transition-colors" title="Facebook">
    <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
  </a>
  <a href="#" class="text-blue-400 hover:text-blue-600 transition-colors" title="Twitter">
    <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24"><path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/></svg>
  </a>
  <a href="#" class="text-pink-600 hover:text-pink-800 transition-colors" title="Instagram">
    <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24"><path d="M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.174-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.741.097.118.112.221.085.345-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.402.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.357-.629-2.75-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146C9.57 23.812 10.763 24.009 12.017 24.009c6.624 0 11.99-5.367 11.99-11.988C24.007 5.367 18.641.001.012.001z"/></svg>
  </a>
  <a href="#" class="text-red-600 hover:text-red-800 transition-colors" title="YouTube">
    <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24"><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg>
  </a>
</div>`},{name:"Twitter Feed",category:"Social Media",code:`<div class="bg-white border border-gray-200 rounded-lg p-4 max-w-md">
  <div class="flex items-center mb-3">
    <img src="https://via.placeholder.com/40x40" alt="Profile" class="w-10 h-10 rounded-full mr-3">
    <div>
      <h4 class="font-semibold text-gray-900">@YourHandle</h4>
      <p class="text-sm text-gray-500">Follow us on Twitter</p>
    </div>
  </div>
  <p class="text-gray-700 mb-3">Latest updates and deals from our Twitter feed!</p>
  <a href="#" class="inline-flex items-center text-blue-600 hover:text-blue-800 transition-colors">
    <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 24 24"><path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/></svg>
    Follow on Twitter
  </a>
</div>`},{name:"Contact Form",category:"Forms",code:`<div class="bg-white p-6 rounded-lg shadow-md border border-gray-200">
  <h3 class="text-xl font-semibold text-gray-900 mb-4">Contact Us</h3>
  <form class="space-y-4">
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Name</label>
      <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required>
    </div>
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
      <input type="email" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required>
    </div>
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Message</label>
      <textarea rows="4" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required></textarea>
    </div>
    <button type="submit" class="w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors">Send Message</button>
  </form>
</div>`},{name:"Feedback Form",category:"Forms",code:`<div class="bg-yellow-50 border border-yellow-200 rounded-lg p-6">
  <h3 class="text-lg font-semibold text-yellow-900 mb-3">We Value Your Feedback</h3>
  <form class="space-y-3">
    <div>
      <label class="block text-sm font-medium text-yellow-800 mb-1">How was your experience?</label>
      <div class="flex space-x-2">
        <button type="button" class="text-2xl hover:scale-110 transition-transform">😞</button>
        <button type="button" class="text-2xl hover:scale-110 transition-transform">😐</button>
        <button type="button" class="text-2xl hover:scale-110 transition-transform">😊</button>
        <button type="button" class="text-2xl hover:scale-110 transition-transform">😍</button>
      </div>
    </div>
    <div>
      <textarea placeholder="Tell us more..." rows="3" class="w-full px-3 py-2 border border-yellow-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"></textarea>
    </div>
    <button type="submit" class="bg-yellow-600 text-white px-4 py-2 rounded-md hover:bg-yellow-700 transition-colors">Submit Feedback</button>
  </form>
</div>`},{name:"Announcement Banner",category:"Notifications",code:`<div class="bg-blue-600 text-white p-4 text-center relative">
  <p class="font-medium">🎉 Special Offer: Get 50% off on all products! Limited time only.</p>
  <button class="absolute right-4 top-1/2 transform -translate-y-1/2 text-white hover:text-gray-200" onclick="this.parentElement.style.display='none'">
    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
    </svg>
  </button>
</div>`},{name:"Cookie Notice",category:"Notifications",code:`<div class="fixed bottom-0 left-0 right-0 bg-gray-900 text-white p-4 z-50" id="cookieNotice">
  <div class="max-w-6xl mx-auto flex items-center justify-between flex-wrap gap-4">
    <p class="text-sm">We use cookies to enhance your experience. By continuing to visit this site you agree to our use of cookies.</p>
    <div class="flex gap-2">
      <button onclick="document.getElementById('cookieNotice').style.display='none'" class="bg-blue-600 text-white px-4 py-2 rounded text-sm hover:bg-blue-700 transition-colors">Accept</button>
      <button onclick="document.getElementById('cookieNotice').style.display='none'" class="border border-gray-600 text-white px-4 py-2 rounded text-sm hover:bg-gray-800 transition-colors">Decline</button>
    </div>
  </div>
</div>`},{name:"Google Analytics",category:"Analytics",code:`<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=GA_TRACKING_ID"><\/script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'GA_TRACKING_ID');
<\/script>`},{name:"Facebook Pixel",category:"Analytics",code:`<!-- Facebook Pixel Code -->
<script>
!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', 'YOUR_PIXEL_ID');
fbq('track', 'PageView');
<\/script>
<noscript><img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=YOUR_PIXEL_ID&ev=PageView&noscript=1"/></noscript>`},{name:"Live Chat Widget",category:"Support",code:`<div class="fixed bottom-4 right-4 z-50">
  <button id="chatToggle" class="bg-blue-600 text-white p-4 rounded-full shadow-lg hover:bg-blue-700 transition-colors">
    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
    </svg>
  </button>
  <div id="chatWindow" class="hidden absolute bottom-16 right-0 w-80 h-96 bg-white border border-gray-300 rounded-lg shadow-xl">
    <div class="bg-blue-600 text-white p-4 rounded-t-lg">
      <h3 class="font-semibold">Live Chat</h3>
    </div>
    <div class="p-4 h-64 overflow-y-auto">
      <p class="text-gray-600">Hello! How can we help you today?</p>
    </div>
    <div class="p-4 border-t">
      <input type="text" placeholder="Type your message..." class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
    </div>
  </div>
</div>
<script>
document.getElementById('chatToggle').onclick = function() {
  const chatWindow = document.getElementById('chatWindow');
  chatWindow.classList.toggle('hidden');
};
<\/script>`},{name:"WhatsApp Chat",category:"Support",code:`<div class="fixed bottom-4 left-4 z-50">
  <a href="https://wa.me/1234567890?text=Hello!%20I%20need%20help" target="_blank" class="flex items-center bg-green-500 text-white px-4 py-3 rounded-full shadow-lg hover:bg-green-600 transition-colors">
    <svg class="w-6 h-6 mr-2" fill="currentColor" viewBox="0 0 24 24">
      <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"/>
    </svg>
    Chat with us
  </a>
</div>`},{name:"Custom HTML",category:"Custom",code:`<!-- Add your custom HTML code here -->
<div class="p-6 bg-gradient-to-r from-gray-50 to-gray-100 rounded-lg border border-gray-200">
  <h3 class="text-xl font-semibold text-gray-900 mb-3">Custom Widget</h3>
  <p class="text-gray-600 mb-4">Replace this with your custom content. You can add any HTML, CSS, and JavaScript here.</p>
  <div class="bg-white p-4 rounded border">
    <p class="text-sm text-gray-500">Your custom content goes here...</p>
  </div>
</div>

<style>
/* Add your custom CSS here */
.custom-widget {
  /* Your styles */
}
</style>

<script>
// Add your custom JavaScript here
console.log('Custom widget loaded');
<\/script>`}];function xf(){const[t,s]=P.useState(!1),[a,r]=P.useState(null),[i,n]=P.useState(""),[l,o]=P.useState("All"),[c,u]=P.useState({name:"",code:"",targetPage:"",position:"",isActive:!0,maxWidth:"",customCss:"",showOnMobile:!0,showOnDesktop:!0}),{toast:d}=ct(),m=ot(),{data:h=[]}=Ie({queryKey:["/api/admin/nav-tabs"],queryFn:async()=>{const y=await fetch("/api/admin/nav-tabs",{headers:{"x-admin-password":localStorage.getItem("adminPassword")||""}});if(!y.ok)throw new Error("Failed to fetch navigation tabs");return y.json()},staleTime:5*60*1e3}),{data:p=[]}=Ie({queryKey:["/api/travel-categories"],queryFn:async()=>{const y=await fetch("/api/travel-categories");return y.ok?y.json():(console.log("Failed to fetch travel categories, using empty array"),[])},staleTime:5*60*1e3,refetchOnWindowFocus:!1}),k=p.filter(y=>y.isActive).sort((y,A)=>y.displayOrder-A.displayOrder).map(y=>({value:`travel-${y.slug}`,label:`Travel - ${y.name}`})),f=[...gf,...ff,...k,...(Array.isArray(h)?h:[]).map(y=>({value:y.slug,label:y.name}))].filter((y,A,$)=>A===$.findIndex(W=>W.value===y.value)),{data:T,isLoading:M,refetch:S}=Ie({queryKey:["/api/admin/widgets"],queryFn:async()=>{const y=await fetch("/api/admin/widgets",{headers:{"x-admin-password":localStorage.getItem("pickntrust-admin-password")||localStorage.getItem("adminPassword")||"pickntrust2025"}});if(!y.ok)throw new Error("Failed to fetch widgets");return(await y.json()).map($=>({id:$.id,name:$.name,code:$.code,targetPage:$.target_page,position:$.position,isActive:!!$.is_active,displayOrder:$.display_order,maxWidth:$.max_width,customCss:$.custom_css,showOnMobile:!!$.show_on_mobile,showOnDesktop:!!$.show_on_desktop,createdAt:$.created_at,updatedAt:$.updated_at}))},staleTime:1e3*60*5,refetchOnWindowFocus:!1}),{data:w}=Ie({queryKey:["/api/admin/widgets/stats"],queryFn:async()=>{const y=await fetch("/api/admin/widgets/stats",{headers:{"x-admin-password":localStorage.getItem("pickntrust-admin-password")||localStorage.getItem("adminPassword")||"pickntrust2025"}});if(!y.ok)throw new Error("Failed to fetch widget stats");return y.json()}}),B=he({mutationFn:async y=>{const A=await fetch("/api/admin/widgets",{method:"POST",headers:{"Content-Type":"application/json","x-admin-password":localStorage.getItem("pickntrust-admin-password")||localStorage.getItem("adminPassword")||"pickntrust2025"},body:JSON.stringify(y)});if(!A.ok)throw new Error("Failed to create widget");return A.json()},onSuccess:()=>{m.invalidateQueries({queryKey:["/api/admin/widgets"]}),m.invalidateQueries({queryKey:["/api/admin/widgets/stats"]}),m.refetchQueries({queryKey:["/api/admin/widgets"]}),S(),s(!1),H(),d({title:"Success",description:"Widget created successfully!"})},onError:y=>{d({title:"Error",description:"Failed to create widget",variant:"destructive"})}}),b=he({mutationFn:async({id:y,data:A})=>{const $=await fetch(`/api/admin/widgets/${y}`,{method:"PUT",headers:{"Content-Type":"application/json","x-admin-password":localStorage.getItem("pickntrust-admin-password")||localStorage.getItem("adminPassword")||"pickntrust2025"},body:JSON.stringify(A)});if(!$.ok)throw new Error("Failed to update widget");return $.json()},onSuccess:()=>{m.invalidateQueries({queryKey:["/api/admin/widgets"]}),m.invalidateQueries({queryKey:["/api/admin/widgets/stats"]}),m.refetchQueries({queryKey:["/api/admin/widgets"]}),S(),s(!1),r(null),H(),d({title:"Success",description:"Widget updated successfully!"})},onError:y=>{d({title:"Error",description:"Failed to update widget",variant:"destructive"})}}),C=he({mutationFn:async y=>{const A=await fetch(`/api/admin/widgets/${y}`,{method:"DELETE",headers:{"x-admin-password":localStorage.getItem("pickntrust-admin-password")||localStorage.getItem("adminPassword")||"pickntrust2025"}});if(!A.ok)throw new Error("Failed to delete widget");return A.json()},onSuccess:()=>{m.invalidateQueries({queryKey:["/api/admin/widgets"]}),m.invalidateQueries({queryKey:["/api/admin/widgets/stats"]}),m.refetchQueries({queryKey:["/api/admin/widgets"]}),S(),d({title:"Success",description:"Widget deleted successfully!"})},onError:y=>{d({title:"Error",description:"Failed to delete widget",variant:"destructive"})}}),j=he({mutationFn:async y=>{const A=await fetch(`/api/admin/widgets/${y}/toggle`,{method:"PATCH",headers:{"x-admin-password":localStorage.getItem("pickntrust-admin-password")||localStorage.getItem("adminPassword")||"pickntrust2025"}});if(!A.ok)throw new Error("Failed to toggle widget");return A.json()},onSuccess:()=>{m.invalidateQueries({queryKey:["/api/admin/widgets"]}),m.invalidateQueries({queryKey:["/api/admin/widgets/stats"]}),m.refetchQueries({queryKey:["/api/admin/widgets"]}),S(),d({title:"Success",description:"Widget status updated!"})},onError:y=>{d({title:"Error",description:"Failed to toggle widget",variant:"destructive"})}}),K=y=>({"Google AdSense":"Display responsive Google ads on your website","Banner Ad":"Custom banner advertisement with image and link","Affiliate Product Card":"Product showcase card with buy now button","Newsletter Signup":"Email subscription form with gradient design","Download CTA":"App download call-to-action with icon","Contact CTA":"Contact us prompt with phone icon","Social Media Links":"Social media icons with hover effects","Twitter Feed":"Twitter profile card with follow button","Contact Form":"Full contact form with name, email, and message","Feedback Form":"Customer feedback form with emoji ratings","Announcement Banner":"Dismissible announcement banner","Cookie Notice":"GDPR compliant cookie consent notice","Google Analytics":"Google Analytics tracking code","Facebook Pixel":"Facebook Pixel tracking for ads","Live Chat Widget":"Interactive live chat support widget","WhatsApp Chat":"WhatsApp contact button with custom message","Custom HTML":"Blank template for custom HTML, CSS, and JavaScript"})[y]||"Custom widget template",H=()=>{u({name:"",code:"",targetPage:"",position:"",isActive:!0,maxWidth:"",customCss:"",showOnMobile:!0,showOnDesktop:!0}),n(""),o("All")},Z=y=>{if(y.preventDefault(),!c.targetPage){d({title:"Error",description:"Please select a target page",variant:"destructive"});return}if(!c.position){d({title:"Error",description:"Please select a position",variant:"destructive"});return}a?b.mutate({id:a.id,data:c}):B.mutate(c)},v=y=>{r(y),u({name:y.name,code:y.code,targetPage:y.targetPage,position:y.position,isActive:y.isActive,maxWidth:y.maxWidth||"",customCss:y.customCss||"",showOnMobile:y.showOnMobile,showOnDesktop:y.showOnDesktop}),s(!0)},G=y=>{u(A=>({...A,name:y.name,code:y.code})),n(y.name)},O=()=>{s(!1),r(null),H()};return M?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"text-lg",children:"Loading widgets..."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Widget Management"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Add and manage custom widgets for your pages"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{onClick:()=>{S(),d({title:"Success",description:"Widget list refreshed!"})},variant:"outline",size:"sm",children:"🔄 Refresh"}),e.jsxs(R,{onClick:()=>s(!0),className:"bg-blue-600 hover:bg-blue-700",disabled:t,children:[e.jsx(Xe,{className:"w-4 h-4 mr-2"}),"Add Widget"]})]})]}),w&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(ee,{children:e.jsx(ae,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Widgets"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:w.total})]}),e.jsx(Is,{className:"w-8 h-8 text-blue-600"})]})})}),e.jsx(ee,{children:e.jsx(ae,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Active Widgets"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:w.active})]}),e.jsx(pt,{className:"w-8 h-8 text-green-600"})]})})}),e.jsx(ee,{children:e.jsx(ae,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Inactive Widgets"}),e.jsx("p",{className:"text-2xl font-bold text-gray-600",children:w.inactive})]}),e.jsx(Et,{className:"w-8 h-8 text-gray-600"})]})})}),e.jsx(ee,{children:e.jsx(ae,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pages with Widgets"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:Object.keys(w.byPage||{}).length})]}),e.jsx(Oa,{className:"w-8 h-8 text-purple-600"})]})})})]}),t&&e.jsxs(ee,{className:"border-blue-200 bg-blue-50 dark:bg-blue-900/20",children:[e.jsxs(ge,{children:[e.jsx(fe,{className:"text-blue-800 dark:text-blue-200",children:a?"Edit Widget":"Add New Widget"}),e.jsx(Ne,{children:a?"Update the widget details":"Create a new widget for your pages"})]}),e.jsx(ae,{children:e.jsxs("form",{onSubmit:Z,className:"space-y-6",children:[!a&&e.jsxs("div",{children:[e.jsx(I,{className:"text-sm font-medium",children:"Widget Templates"}),e.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Choose from our comprehensive collection of pre-built widgets"}),e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:["All",...Array.from(new Set(er.map(y=>y.category)))].map(y=>e.jsx(R,{type:"button",variant:l===y?"default":"outline",size:"sm",onClick:()=>o(y),className:"text-xs",children:y},y))})}),e.jsx("div",{className:"max-h-64 overflow-y-auto border rounded-lg p-3",children:(l==="All"?er:er.filter(y=>y.category===l)).map(y=>e.jsx("div",{className:"mb-3 last:mb-0",children:e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-medium text-sm",children:y.name}),e.jsx("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded-full",children:y.category})]}),e.jsx("p",{className:"text-xs text-gray-500 line-clamp-2",children:K(y.name)})]}),e.jsx(R,{type:"button",variant:i===y.name?"default":"outline",size:"sm",onClick:()=>G(y),className:"ml-3",children:i===y.name?"Selected":"Use Template"})]})},y.name))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"name",children:"Widget Name"}),e.jsx(X,{id:"name",value:c.name,onChange:y=>u(A=>({...A,name:y.target.value})),placeholder:"Enter widget name",required:!0})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"targetPage",children:"Target Page"}),e.jsxs(Le,{value:c.targetPage,onValueChange:y=>u(A=>({...A,targetPage:y})),children:[e.jsx(Ue,{children:e.jsx(Ve,{placeholder:"Select page"})}),e.jsx($e,{children:f.map(y=>e.jsx(ue,{value:y.value,children:y.label},y.value))})]})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"position",children:"Position"}),e.jsxs(Le,{value:c.position,onValueChange:y=>u(A=>({...A,position:y})),children:[e.jsx(Ue,{children:e.jsx(Ve,{placeholder:"Select position"})}),e.jsx($e,{children:Ln.map(y=>e.jsx(ue,{value:y.value,children:y.label},y.value))})]})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"maxWidth",children:"Max Width (optional)"}),e.jsx(X,{id:"maxWidth",value:c.maxWidth,onChange:y=>u(A=>({...A,maxWidth:y.target.value})),placeholder:"e.g., 300px, 100%, auto"})]})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"code",children:"Widget Code (HTML/CSS/JS)"}),e.jsx(It,{id:"code",value:c.code,onChange:y=>u(A=>({...A,code:y.target.value})),placeholder:"Paste your widget code here...",rows:8,className:"font-mono text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"customCss",children:"Custom CSS (optional)"}),e.jsx(It,{id:"customCss",value:c.customCss,onChange:y=>u(A=>({...A,customCss:y.target.value})),placeholder:"Add custom CSS styles...",rows:4,className:"font-mono text-sm"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(et,{id:"isActive",checked:c.isActive,onCheckedChange:y=>u(A=>({...A,isActive:y}))}),e.jsx(I,{htmlFor:"isActive",children:"Active"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(et,{id:"showOnDesktop",checked:c.showOnDesktop,onCheckedChange:y=>u(A=>({...A,showOnDesktop:y}))}),e.jsxs(I,{htmlFor:"showOnDesktop",className:"flex items-center gap-1",children:[e.jsx(Oa,{className:"w-4 h-4"}),"Desktop"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(et,{id:"showOnMobile",checked:c.showOnMobile,onCheckedChange:y=>u(A=>({...A,showOnMobile:y}))}),e.jsxs(I,{htmlFor:"showOnMobile",className:"flex items-center gap-1",children:[e.jsx(xi,{className:"w-4 h-4"}),"Mobile"]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(R,{type:"submit",disabled:B.isPending||b.isPending,className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(qs,{className:"w-4 h-4 mr-2"}),a?"Update Widget":"Create Widget"]}),e.jsxs(R,{type:"button",variant:"outline",onClick:O,children:[e.jsx(Jt,{className:"w-4 h-4 mr-2"}),"Cancel"]})]})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Existing Widgets (",(T==null?void 0:T.length)||0,")"]}),!T||T.length===0?e.jsx(ee,{children:e.jsxs(ae,{className:"p-8 text-center",children:[e.jsx(Is,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No widgets yet"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Create your first widget to add custom functionality to your pages."}),e.jsxs(R,{onClick:()=>s(!0),className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Xe,{className:"w-4 h-4 mr-2"}),"Add Your First Widget"]})]})}):e.jsx("div",{className:"grid gap-4",children:T.map(y=>{var A,$;return e.jsx(ee,{className:`${y.isActive?"border-green-200 bg-green-50/50":"border-gray-200 bg-gray-50/50"} dark:bg-gray-800`,children:e.jsx(ae,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:y.name}),e.jsx(we,{variant:y.isActive?"default":"secondary",children:y.isActive?"Active":"Inactive"}),e.jsx(we,{variant:"outline",children:((A=f.find(W=>W.value===y.targetPage))==null?void 0:A.label)||y.targetPage}),e.jsx(we,{variant:"outline",children:(($=Ln.find(W=>W.value===y.position))==null?void 0:$.label)||y.position})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400 mb-2",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Oa,{className:"w-4 h-4"}),y.showOnDesktop?"Desktop":"No Desktop"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(xi,{className:"w-4 h-4"}),y.showOnMobile?"Mobile":"No Mobile"]}),y.maxWidth&&e.jsxs("span",{children:["Max Width: ",y.maxWidth]})]}),e.jsxs("div",{className:"bg-gray-100 dark:bg-gray-700 p-2 rounded text-xs font-mono text-gray-700 dark:text-gray-300 max-h-20 overflow-hidden",children:[y.code.substring(0,200),y.code.length>200?"...":""]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsx(R,{size:"sm",variant:"outline",onClick:()=>j.mutate(y.id),disabled:j.isPending,children:y.isActive?e.jsx(Et,{className:"w-4 h-4"}):e.jsx(pt,{className:"w-4 h-4"})}),e.jsx(R,{size:"sm",variant:"outline",onClick:()=>v(y),children:e.jsx(Tt,{className:"w-4 h-4"})}),e.jsx(R,{size:"sm",variant:"outline",onClick:()=>{confirm("Are you sure you want to delete this widget?")&&C.mutate(y.id)},disabled:C.isPending,className:"text-red-600 hover:text-red-700",children:e.jsx(Wt,{className:"w-4 h-4"})})]})]})})},y.id)})})]})]})}const bf=Tr({name:Je().min(1,"Meta tag name is required"),content:Je().min(1,"Content is required"),provider:Je().min(1,"Provider is required"),purpose:Je().min(1,"Purpose is required"),isActive:ls().optional().default(!0)}),yf=[{value:"Google",label:"Google Search Console"},{value:"Facebook",label:"Facebook Domain Verification"},{value:"Bing",label:"Bing Webmaster Tools"},{value:"Pinterest",label:"Pinterest Domain Verification"},{value:"Yandex",label:"Yandex Webmaster"},{value:"Baidu",label:"Baidu Webmaster Tools"},{value:"Other",label:"Other Provider"}],Un=[{value:"google-site-verification",label:"google-site-verification"},{value:"facebook-domain-verification",label:"facebook-domain-verification"},{value:"msvalidate.01",label:"msvalidate.01 (Bing)"},{value:"p:domain_verify",label:"p:domain_verify (Pinterest)"},{value:"yandex-verification",label:"yandex-verification"},{value:"baidu-site-verification",label:"baidu-site-verification"}];function vf(){const[t,s]=P.useState(!1),[a,r]=P.useState(null),[i,n]=P.useState(!1),{toast:l}=ct(),o=Sr({resolver:Ar(bf),defaultValues:{name:"",content:"",provider:"",purpose:"",isActive:!0}}),{data:c,isLoading:u}=Ie({queryKey:["/api/admin/meta-tags"],queryFn:async()=>{const w=await fetch(`/api/admin/meta-tags?password=${encodeURIComponent(bt())}`);if(!w.ok)throw new Error("Failed to fetch meta tags");return(await w.json()).metaTags||[]}}),d=ot(),m=he({mutationFn:async w=>{const B=await fetch("/api/admin/meta-tags",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...w,password:bt()})});if(!B.ok){const b=await B.json();throw new Error(b.error||"Failed to create meta tag")}return B.json()},onSuccess:()=>{l({title:"Success",description:"Meta tag created successfully"}),d.invalidateQueries({queryKey:["/api/admin/meta-tags"]}),o.reset(),s(!1)},onError:w=>{l({title:"Error",description:w.message,variant:"destructive"})}}),h=he({mutationFn:async({id:w,data:B})=>{const b=await fetch(`/api/admin/meta-tags/${w}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...B,password:bt()})});if(!b.ok){const C=await b.json();throw new Error(C.error||"Failed to update meta tag")}return b.json()},onSuccess:()=>{l({title:"Success",description:"Meta tag updated successfully"}),d.invalidateQueries({queryKey:["/api/admin/meta-tags"]}),r(null),o.reset()},onError:w=>{l({title:"Error",description:w.message,variant:"destructive"})}}),p=he({mutationFn:async w=>{const B=await fetch(`/api/admin/meta-tags/${w}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:bt()})});if(!B.ok){const b=await B.json();throw new Error(b.error||"Failed to delete meta tag")}return B.json()},onSuccess:()=>{l({title:"Success",description:"Meta tag deleted successfully"}),d.invalidateQueries({queryKey:["/api/admin/meta-tags"]})},onError:w=>{l({title:"Error",description:w.message,variant:"destructive"})}}),k=he({mutationFn:async w=>{const B=await fetch(`/api/admin/meta-tags/${w}/toggle`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:bt()})});if(!B.ok){const b=await B.json();throw new Error(b.error||"Failed to toggle meta tag status")}return B.json()},onSuccess:()=>{l({title:"Success",description:"Meta tag status updated successfully"}),d.invalidateQueries({queryKey:["/api/admin/meta-tags"]})},onError:w=>{l({title:"Error",description:w.message,variant:"destructive"})}}),_=w=>{a?h.mutate({id:a.id,data:w}):m.mutate(w)},f=w=>{r(w),o.reset({name:w.name,content:w.content,provider:w.provider,purpose:w.purpose,isActive:w.isActive}),s(!0)},T=()=>{r(null),s(!1),o.reset()},M=w=>{navigator.clipboard.writeText(w),l({title:"Copied",description:"Meta tag copied to clipboard"})},S=w=>`<meta name="${w.name}" content="${w.content}" />`;return u?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx(Ut,{className:"w-8 h-8 animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Meta Tags Management"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Manage website ownership verification meta tags for search engines and social platforms"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(R,{onClick:()=>n(!i),variant:"outline",size:"sm",children:[e.jsx(Is,{className:"w-4 h-4 mr-2"}),i?"Hide Preview":"Show Preview"]}),e.jsxs(R,{onClick:()=>s(!0),className:"bg-blue-600 hover:bg-blue-700",size:"sm",children:[e.jsx(Xe,{className:"w-4 h-4 mr-2"}),"Add Meta Tag"]})]})]}),e.jsx(ee,{className:"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800",children:e.jsx(ae,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ns,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-blue-900 dark:text-blue-100",children:"About Meta Tags"}),e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:"Meta tags for website ownership verification do not affect affiliate links. They are used by search engines and social platforms to verify that you own the domain. These tags are added to the HTML head section."})]})]})})}),i&&c&&c.length>0&&e.jsxs(ee,{children:[e.jsxs(ge,{children:[e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(Is,{className:"w-5 h-5"}),"HTML Preview"]}),e.jsx(Ne,{children:"Copy these meta tags to your website's HTML head section"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"bg-gray-100 dark:bg-gray-800 p-4 rounded-lg",children:e.jsx("pre",{className:"text-sm overflow-x-auto",children:e.jsx("code",{children:c.filter(w=>w.isActive).map(w=>S(w)).join(`
`)})})}),e.jsxs(R,{onClick:()=>M(c.filter(w=>w.isActive).map(w=>S(w)).join(`
`)),variant:"outline",size:"sm",className:"mt-3",children:[e.jsx(bi,{className:"w-4 h-4 mr-2"}),"Copy All Active Tags"]})]})]}),t&&e.jsxs(ee,{children:[e.jsxs(ge,{children:[e.jsx(fe,{children:a?"Edit Meta Tag":"Add New Meta Tag"}),e.jsx(Ne,{children:"Add meta tags for website ownership verification"})]}),e.jsx(ae,{children:e.jsxs("form",{onSubmit:o.handleSubmit(_),className:"space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"provider",children:"Provider"}),e.jsxs(Le,{value:o.watch("provider"),onValueChange:w=>o.setValue("provider",w),children:[e.jsx(Ue,{children:e.jsx(Ve,{placeholder:"Select provider"})}),e.jsx($e,{children:yf.map(w=>e.jsx(ue,{value:w.value,children:w.label},w.value))})]}),o.formState.errors.provider&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:o.formState.errors.provider.message})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"name",children:"Meta Tag Name"}),e.jsxs(Le,{value:(()=>{const w=o.watch("name");return w&&Un.some(B=>B.value===w)?w:void 0})(),onValueChange:w=>{w&&o.setValue("name",w)},children:[e.jsx(Ue,{children:e.jsx(Ve,{placeholder:"Select common meta name"})}),e.jsx($e,{children:Un.map(w=>e.jsx(ue,{value:w.value,children:w.label},w.value))})]}),e.jsx(X,{...o.register("name"),placeholder:"Or enter custom meta name (e.g., verify-admitad)",className:"mt-2"}),o.formState.errors.name&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:o.formState.errors.name.message})]})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"content",children:"Content/Value"}),e.jsx(X,{...o.register("content"),placeholder:"Enter the verification code or content"}),o.formState.errors.content&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:o.formState.errors.content.message})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"purpose",children:"Purpose"}),e.jsx(X,{...o.register("purpose"),placeholder:"e.g., Site Verification, Domain Verification"}),o.formState.errors.purpose&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:o.formState.errors.purpose.message})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"isActive",...o.register("isActive"),className:"rounded"}),e.jsx(I,{htmlFor:"isActive",children:"Active (include in website)"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{type:"submit",disabled:m.isPending||h.isPending,children:m.isPending||h.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Ut,{className:"w-4 h-4 mr-2 animate-spin"}),a?"Updating...":"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(qs,{className:"w-4 h-4 mr-2"}),a?"Update Meta Tag":"Create Meta Tag"]})}),e.jsxs(R,{type:"button",variant:"outline",onClick:T,children:[e.jsx(Jt,{className:"w-4 h-4 mr-2"}),"Cancel"]})]})]})})]}),e.jsx("div",{className:"grid gap-4",children:c&&c.length>0?c.map(w=>e.jsx(ee,{className:`${w.isActive?"":"opacity-60"}`,children:e.jsx(ae,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(we,{variant:w.isActive?"default":"secondary",children:w.provider}),e.jsx(we,{variant:"outline",children:w.purpose}),w.isActive?e.jsx(pt,{className:"w-4 h-4 text-green-600"}):e.jsx(Et,{className:"w-4 h-4 text-gray-400"})]}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:w.name}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1 font-mono",children:w.content}),e.jsx("div",{className:"mt-2 p-2 bg-gray-100 dark:bg-gray-800 rounded text-xs font-mono",children:S(w)})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsx(R,{onClick:()=>M(S(w)),variant:"outline",size:"sm",children:e.jsx(bi,{className:"w-4 h-4"})}),e.jsx(R,{onClick:()=>k.mutate(w.id),variant:"outline",size:"sm",disabled:k.isPending,children:w.isActive?e.jsx(Et,{className:"w-4 h-4"}):e.jsx(pt,{className:"w-4 h-4"})}),e.jsx(R,{onClick:()=>f(w),variant:"outline",size:"sm",children:e.jsx(Tt,{className:"w-4 h-4"})}),e.jsx(R,{onClick:()=>p.mutate(w.id),variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",disabled:p.isPending,children:e.jsx(Wt,{className:"w-4 h-4"})})]})]})})},w.id)):e.jsx(ee,{children:e.jsxs(ae,{className:"p-8 text-center",children:[e.jsx(Fs,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No Meta Tags Yet"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Add meta tags to verify your website ownership with search engines and social platforms."}),e.jsxs(R,{onClick:()=>s(!0),children:[e.jsx(Xe,{className:"w-4 h-4 mr-2"}),"Add Your First Meta Tag"]})]})})})]})}const jf=Tr({name:Je().min(1,"RSS feed name is required"),url:Je().url("Valid URL is required"),description:Je().optional().default(""),category:Je().min(1,"Category is required"),updateFrequency:bd().min(5,"Update frequency must be at least 5 minutes").default(60),isActive:ls().optional().default(!0),autoImport:ls().optional().default(!0),contentFilter:Je().optional().default(""),affiliateReplace:ls().optional().default(!1)}),wf=[{value:"Deals",label:"Deals & Discounts"},{value:"Technology",label:"Technology"},{value:"Fashion",label:"Fashion & Clothing"},{value:"Electronics",label:"Electronics"},{value:"Home",label:"Home & Garden"},{value:"Travel",label:"Travel & Tourism"},{value:"Food",label:"Food & Dining"},{value:"Health",label:"Health & Beauty"},{value:"Sports",label:"Sports & Fitness"},{value:"Books",label:"Books & Media"},{value:"Automotive",label:"Automotive"},{value:"General",label:"General"}],Nf=[{value:5,label:"5 minutes"},{value:15,label:"15 minutes"},{value:30,label:"30 minutes"},{value:60,label:"1 hour"},{value:120,label:"2 hours"},{value:360,label:"6 hours"},{value:720,label:"12 hours"},{value:1440,label:"24 hours"}];function kf(){var B;const[t,s]=P.useState(!1),[a,r]=P.useState(null),[i,n]=P.useState(""),{toast:l}=ct(),o=Sr({resolver:Ar(jf),defaultValues:{name:"",url:"",description:"",category:"General",updateFrequency:60,isActive:!0,autoImport:!0,contentFilter:"",affiliateReplace:!1}}),{data:c,isLoading:u}=Ie({queryKey:["/api/admin/rss-feeds"],queryFn:async()=>{const b=await fetch(`/api/admin/rss-feeds?password=${encodeURIComponent(bt())}`);if(!b.ok)throw new Error("Failed to fetch RSS feeds");return(await b.json()).rssFeeds||[]}}),d=ot(),m=he({mutationFn:async b=>{const C=await fetch("/api/admin/rss-feeds",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...b,password:bt()})});if(!C.ok){const j=await C.json();throw new Error(j.error||"Failed to create RSS feed")}return C.json()},onSuccess:()=>{l({title:"Success",description:"RSS feed created successfully"}),d.invalidateQueries({queryKey:["/api/admin/rss-feeds"]}),o.reset(),s(!1)},onError:b=>{l({title:"Error",description:b.message,variant:"destructive"})}}),h=he({mutationFn:async({id:b,data:C})=>{const j=await fetch(`/api/admin/rss-feeds/${b}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...C,password:bt()})});if(!j.ok){const K=await j.json();throw new Error(K.error||"Failed to update RSS feed")}return j.json()},onSuccess:()=>{l({title:"Success",description:"RSS feed updated successfully"}),d.invalidateQueries({queryKey:["/api/admin/rss-feeds"]}),r(null),o.reset()},onError:b=>{l({title:"Error",description:b.message,variant:"destructive"})}}),p=he({mutationFn:async b=>{const C=await fetch(`/api/admin/rss-feeds/${b}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:bt()})});if(!C.ok){const j=await C.json();throw new Error(j.error||"Failed to delete RSS feed")}return C.json()},onSuccess:()=>{l({title:"Success",description:"RSS feed deleted successfully"}),d.invalidateQueries({queryKey:["/api/admin/rss-feeds"]})},onError:b=>{l({title:"Error",description:b.message,variant:"destructive"})}}),k=he({mutationFn:async b=>{const C=await fetch(`/api/admin/rss-feeds/${b}/toggle`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:bt()})});if(!C.ok){const j=await C.json();throw new Error(j.error||"Failed to toggle RSS feed status")}return C.json()},onSuccess:()=>{l({title:"Success",description:"RSS feed status updated successfully"}),d.invalidateQueries({queryKey:["/api/admin/rss-feeds"]})},onError:b=>{l({title:"Error",description:b.message,variant:"destructive"})}}),_=he({mutationFn:async b=>{const C=await fetch("/api/admin/rss-feeds/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:b,password:bt()})});if(!C.ok){const j=await C.json();throw new Error(j.error||"Failed to test RSS feed")}return C.json()},onSuccess:b=>{l({title:"RSS Feed Test Successful",description:b.message||"RSS feed URL is valid"})},onError:b=>{l({title:"RSS Feed Test Failed",description:b.message,variant:"destructive"})}}),f=b=>{a?h.mutate({id:a.id,data:b}):m.mutate(b)},T=b=>{r(b),o.reset({name:b.name,url:b.url,description:b.description,category:b.category,updateFrequency:b.updateFrequency,isActive:b.isActive,autoImport:b.autoImport,contentFilter:b.contentFilter,affiliateReplace:b.affiliateReplace}),s(!0)},M=()=>{r(null),s(!1),o.reset()},S=b=>b?new Date(b).toLocaleString():"Never",w=b=>b.isActive?e.jsxs(we,{variant:"default",className:"gap-1",children:[e.jsx(pt,{className:"w-3 h-3"}),"Active"]}):e.jsxs(we,{variant:"secondary",className:"gap-1",children:[e.jsx(Et,{className:"w-3 h-3"}),"Inactive"]});return u?e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx(Ut,{className:"w-8 h-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading RSS feeds..."})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold tracking-tight flex items-center gap-2",children:[e.jsx(yi,{className:"w-6 h-6"}),"RSS Feeds Management"]}),e.jsx("p",{className:"text-muted-foreground",children:"Manage external RSS feeds for content aggregation and import"})]}),e.jsxs(R,{onClick:()=>s(!0),className:"gap-2",children:[e.jsx(Xe,{className:"w-4 h-4"}),"Add RSS Feed"]})]}),t&&e.jsxs(ee,{children:[e.jsxs(ge,{children:[e.jsxs(fe,{className:"flex items-center gap-2",children:[a?e.jsx(Tt,{className:"w-5 h-5"}):e.jsx(Xe,{className:"w-5 h-5"}),a?"Edit RSS Feed":"Add New RSS Feed"]}),e.jsx(Ne,{children:a?"Update RSS feed settings":"Add a new RSS feed source for content aggregation"})]}),e.jsx(ae,{children:e.jsxs("form",{onSubmit:o.handleSubmit(f),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"name",children:"Feed Name *"}),e.jsx(X,{id:"name",...o.register("name"),placeholder:"e.g., TechCrunch Deals"}),o.formState.errors.name&&e.jsx("p",{className:"text-sm text-red-500",children:o.formState.errors.name.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"category",children:"Category *"}),e.jsxs(Le,{value:o.watch("category"),onValueChange:b=>o.setValue("category",b),children:[e.jsx(Ue,{children:e.jsx(Ve,{placeholder:"Select category"})}),e.jsx($e,{children:wf.map(b=>e.jsx(ue,{value:b.value,children:b.label},b.value))})]}),o.formState.errors.category&&e.jsx("p",{className:"text-sm text-red-500",children:o.formState.errors.category.message})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"url",children:"RSS Feed URL *"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(X,{id:"url",...o.register("url"),placeholder:"https://example.com/feed.xml",className:"flex-1"}),e.jsxs(R,{type:"button",variant:"outline",onClick:()=>{const b=o.getValues("url");b&&_.mutate(b)},disabled:_.isPending,className:"gap-2",children:[_.isPending?e.jsx(Ut,{className:"w-4 h-4 animate-spin"}):e.jsx(Qn,{className:"w-4 h-4"}),"Test"]})]}),o.formState.errors.url&&e.jsx("p",{className:"text-sm text-red-500",children:o.formState.errors.url.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"description",children:"Description"}),e.jsx(It,{id:"description",...o.register("description"),placeholder:"Brief description of this RSS feed source",rows:2})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"updateFrequency",children:"Update Frequency"}),e.jsxs(Le,{value:(B=o.watch("updateFrequency"))==null?void 0:B.toString(),onValueChange:b=>o.setValue("updateFrequency",parseInt(b)),children:[e.jsx(Ue,{children:e.jsx(Ve,{placeholder:"Select frequency"})}),e.jsx($e,{children:Nf.map(b=>e.jsx(ue,{value:b.value.toString(),children:b.label},b.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"contentFilter",children:"Content Filter (JSON)"}),e.jsx(X,{id:"contentFilter",...o.register("contentFilter"),placeholder:'{"keywords": ["deal", "discount"]}'})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(et,{id:"isActive",checked:o.watch("isActive"),onCheckedChange:b=>o.setValue("isActive",b)}),e.jsx(I,{htmlFor:"isActive",children:"Active"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(et,{id:"autoImport",checked:o.watch("autoImport"),onCheckedChange:b=>o.setValue("autoImport",b)}),e.jsx(I,{htmlFor:"autoImport",children:"Auto Import"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(et,{id:"affiliateReplace",checked:o.watch("affiliateReplace"),onCheckedChange:b=>o.setValue("affiliateReplace",b)}),e.jsx(I,{htmlFor:"affiliateReplace",children:"Replace Affiliate Links"})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsxs(R,{type:"submit",disabled:m.isPending||h.isPending,className:"gap-2",children:[m.isPending||h.isPending?e.jsx(Ut,{className:"w-4 h-4 animate-spin"}):e.jsx(qs,{className:"w-4 h-4"}),a?"Update Feed":"Create Feed"]}),e.jsxs(R,{type:"button",variant:"outline",onClick:M,className:"gap-2",children:[e.jsx(Jt,{className:"w-4 h-4"}),"Cancel"]})]})]})})]}),e.jsx("div",{className:"grid gap-4",children:(c==null?void 0:c.length)===0?e.jsx(ee,{children:e.jsxs(ae,{className:"flex flex-col items-center justify-center py-8",children:[e.jsx(yi,{className:"w-12 h-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No RSS feeds configured"}),e.jsx("p",{className:"text-muted-foreground text-center mb-4",children:"Add your first RSS feed to start aggregating content from external sources."}),e.jsxs(R,{onClick:()=>s(!0),className:"gap-2",children:[e.jsx(Xe,{className:"w-4 h-4"}),"Add RSS Feed"]})]})}):c==null?void 0:c.map(b=>e.jsx(ee,{children:e.jsx(ae,{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:b.name}),w(b),e.jsx(we,{variant:"outline",children:b.category}),b.autoImport&&e.jsxs(we,{variant:"secondary",className:"gap-1",children:[e.jsx(Ds,{className:"w-3 h-3"}),"Auto Import"]})]}),e.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Fs,{className:"w-4 h-4"}),e.jsx("a",{href:b.url,target:"_blank",rel:"noopener noreferrer",className:"hover:text-primary underline",children:b.url}),e.jsx(gc,{className:"w-3 h-3"})]}),b.description&&e.jsx("p",{children:b.description}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ia,{className:"w-4 h-4"}),"Updates every ",b.updateFrequency," minutes"]}),e.jsxs("div",{children:["Last fetched: ",S(b.lastFetched)]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsx(R,{variant:"outline",size:"sm",onClick:()=>k.mutate(b.id),disabled:k.isPending,className:"gap-2",children:b.isActive?e.jsxs(e.Fragment,{children:[e.jsx(Et,{className:"w-4 h-4"}),"Disable"]}):e.jsxs(e.Fragment,{children:[e.jsx(pt,{className:"w-4 h-4"}),"Enable"]})}),e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>T(b),className:"gap-2",children:[e.jsx(Tt,{className:"w-4 h-4"}),"Edit"]}),e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>{confirm("Are you sure you want to delete this RSS feed?")&&p.mutate(b.id)},disabled:p.isPending,className:"gap-2 text-red-600 hover:text-red-700",children:[e.jsx(Wt,{className:"w-4 h-4"}),"Delete"]})]})]})})},b.id))})]})}const Cf=Tr({name:Je().min(1,"Product name is required"),description:Je().min(1,"Description is required"),price:Je().min(1,"Price is required"),originalPrice:Je().optional(),imageUrl:Je().url("Must be a valid URL"),affiliateUrl:Je().url("Must be a valid URL"),category:Je().min(1,"Category is required"),rating:Je().min(1,"Rating is required"),reviewCount:Je().min(1,"Review count is required"),discount:Je().optional(),isNew:ls().optional(),isFeatured:ls().optional()});function Rf(){const{toast:t}=ct(),s=ot(),[,a]=Xo(),[r,i]=P.useState(!1),[n,l]=P.useState(!1),[o,c]=P.useState(""),[u,d]=P.useState(!1),[m,h]=P.useState(""),[p,k]=P.useState(""),[_,f]=P.useState(!1),[T,M]=P.useState({newPassword:"",confirmPassword:""}),[S,w]=P.useState("dashboard"),[B,b]=P.useState(!1),[C,j]=P.useState("");P.useEffect(()=>{localStorage.getItem("pickntrust-admin-session")==="active"&&l(!0);const De=new URLSearchParams(window.location.search).get("token");De&&(k(De),f(!0),window.history.replaceState({},document.title,window.location.pathname))},[]);const{data:K=[]}=Ie({queryKey:["/api/products/featured"],queryFn:async()=>{const W=await fetch("/api/products/featured");if(!W.ok)throw new Error("Failed to fetch products");return W.json()}}),{data:H=[]}=Ie({queryKey:["/api/categories"],queryFn:async()=>{const W=await fetch("/api/categories");if(!W.ok)throw new Error("Failed to fetch categories");return W.json()}}),{data:Z=[]}=Ie({queryKey:["/api/blog"],queryFn:async()=>{const W=await fetch("/api/blog");if(!W.ok)throw new Error("Failed to fetch blog posts");return W.json()}}),{data:v=[]}=Ie({queryKey:["/api/video-content"],queryFn:async()=>{const W=await fetch("/api/video-content");if(!W.ok)throw new Error("Failed to fetch video content");return W.json()}});he({mutationFn:async W=>{const pe=await fetch("/api/products/extract",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:W})});if(!pe.ok)throw new Error("Failed to extract product details");return pe.json()},onSuccess:W=>{W.success&&t({title:"Product Extracted!",description:"Product details have been extracted. You can now edit and save."})},onError:()=>{t({title:"Extraction Failed",description:"Could not extract product details from the URL.",variant:"destructive"})}}),he({mutationFn:async W=>{const pe={...W,price:W.price,originalPrice:W.originalPrice||void 0,rating:parseFloat(W.rating),reviewCount:parseInt(W.reviewCount),discount:W.discount?parseInt(W.discount):void 0,isNew:W.isNew||!1,isFeatured:W.isFeatured||!1,password:bt()},De=await fetch("/api/admin/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(pe)});if(!De.ok)throw new Error("Failed to add product");return De.json()},onSuccess:()=>{t({title:"Product Added!",description:"New product has been added successfully."}),s.invalidateQueries({queryKey:["/api/products/featured"]}),y.reset(),i(!1)},onError:()=>{t({title:"Error",description:"Failed to add product. Please try again.",variant:"destructive"})}});const G=he({mutationFn:async W=>{const pe=await fetch("/api/admin/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:W})});if(!pe.ok){const De=await pe.json();throw new Error(De.message||"Failed to send reset email")}return pe.json()},onSuccess:W=>{t({title:"Reset Email Sent!",description:"Check your email for password reset instructions."}),h(""),d(!1),W.resetToken&&(k(W.resetToken),setTimeout(()=>{f(!0),t({title:"Development Mode",description:"Reset token auto-filled for testing."})},1e3))},onError:W=>{t({title:"Error",description:W.message,variant:"destructive"})}}),O=he({mutationFn:async W=>{const pe=await fetch("/api/admin/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:p,newPassword:W.newPassword,confirmPassword:W.confirmPassword})});if(!pe.ok){const De=await pe.json();throw new Error(De.message||"Failed to reset password")}return pe.json()},onSuccess:()=>{t({title:"Password Reset Successfully!",description:"You can now login with your new password."}),M({newPassword:"",confirmPassword:""}),k(""),f(!1)},onError:W=>{t({title:"Error",description:W.message,variant:"destructive"})}}),y=Sr({resolver:Ar(Cf),defaultValues:{name:"",description:"",price:"",originalPrice:"",imageUrl:"",affiliateUrl:"",category:"Electronics & Gadgets",rating:"4.5",reviewCount:"100",discount:"",isNew:!1,isFeatured:!0}}),A=async W=>{W.preventDefault();try{const pe=await fetch("/api/admin/auth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:o})}),De=await pe.json();if(pe.ok&&De.success){l(!0),c("");const We=`admin_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;localStorage.setItem("pickntrust-admin-session","active"),localStorage.setItem("pickntrust-admin-token",We),localStorage.setItem("pickntrust-admin-password","pickntrust2025"),t({title:"Access Granted",description:"Welcome to PickNTrust Enhanced Admin Panel."})}else t({title:"Access Denied",description:"Incorrect password. Please try again.",variant:"destructive"}),c("")}catch(pe){console.error("Login error:",pe),t({title:"Login Failed",description:"Unable to connect to server. Please try again.",variant:"destructive"}),c("")}},$=()=>{console.log("🚪 Logout initiated"),localStorage.removeItem("pickntrust-admin-session"),localStorage.removeItem("pickntrust-admin-token"),localStorage.removeItem("pickntrust-admin-password"),t({title:"Logged Out",description:"Redirecting to homepage..."}),console.log("🔄 Navigating to homepage immediately"),window.location.href="/"};return n?e.jsx(ri,{pageId:"admin",children:e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx(Zo,{}),e.jsx("div",{className:"pt-20",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8 flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-2",children:"PickNTrust Admin Panel"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-lg",children:"Complete management dashboard with enhanced video content support"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx(R,{onClick:$,variant:"outline",className:"text-red-600 border-red-600 hover:bg-red-50 dark:hover:bg-red-900/20",size:"sm",children:"Logout"})})]}),e.jsxs(jl,{value:S,onValueChange:w,className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-2 rounded-xl shadow-lg",children:[e.jsxs(As,{className:"grid w-full grid-cols-5 mb-2 bg-transparent p-0",children:[e.jsxs(ze,{value:"dashboard",className:"flex items-center gap-2 data-[state=active]:bg-blue-500 data-[state=active]:text-white",children:[e.jsx(Ba,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Dashboard"})]}),e.jsxs(ze,{value:"products",className:"flex items-center gap-2 data-[state=active]:bg-green-500 data-[state=active]:text-white",children:[e.jsx(vi,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Products"})]}),e.jsxs(ze,{value:"categories",className:"flex items-center gap-2 data-[state=active]:bg-purple-500 data-[state=active]:text-white",children:[e.jsx(Ma,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Categories"})]}),e.jsxs(ze,{value:"navigation",className:"flex items-center gap-2 data-[state=active]:bg-teal-500 data-[state=active]:text-white",children:[e.jsx(fc,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Navigation"})]}),e.jsxs(ze,{value:"banners",className:"flex items-center gap-2 data-[state=active]:bg-emerald-500 data-[state=active]:text-white",children:[e.jsx(Yt,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Banners"})]})]}),e.jsxs(As,{className:"grid w-full grid-cols-4 mb-2 bg-transparent p-0",children:[e.jsxs(ze,{value:"blog",className:"flex items-center gap-2 data-[state=active]:bg-orange-500 data-[state=active]:text-white",children:[e.jsx(La,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Blog"})]}),e.jsxs(ze,{value:"videos",className:"flex items-center gap-2 data-[state=active]:bg-pink-500 data-[state=active]:text-white",children:[e.jsx(wt,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Videos"})]}),e.jsxs(ze,{value:"announcements",className:"flex items-center gap-2 data-[state=active]:bg-red-500 data-[state=active]:text-white",children:[e.jsx(xc,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Announcements"})]}),e.jsxs(ze,{value:"automation",className:"flex items-center gap-2 data-[state=active]:bg-cyan-500 data-[state=active]:text-white",children:[e.jsx(St,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Automation"})]})]}),e.jsxs(As,{className:"grid w-full grid-cols-6 bg-transparent p-0",children:[e.jsxs(ze,{value:"widgets",className:"flex items-center gap-2 data-[state=active]:bg-violet-500 data-[state=active]:text-white",children:[e.jsx(Is,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Widgets"})]}),e.jsxs(ze,{value:"commission",className:"flex items-center gap-2 data-[state=active]:bg-yellow-500 data-[state=active]:text-white",children:[e.jsx(bc,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Commission"})]}),e.jsxs(ze,{value:"credentials",className:"flex items-center gap-2 data-[state=active]:bg-purple-500 data-[state=active]:text-white",children:[e.jsx(ns,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Credentials"})]}),e.jsxs(ze,{value:"metatags",className:"flex items-center gap-2 data-[state=active]:bg-emerald-500 data-[state=active]:text-white",children:[e.jsx(yc,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Meta Tags"})]}),e.jsxs(ze,{value:"rssfeeds",className:"flex items-center gap-2 data-[state=active]:bg-amber-500 data-[state=active]:text-white",children:[e.jsx(Fs,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"RSS Feeds"})]}),e.jsxs(ze,{value:"bots",className:"flex items-center gap-2 data-[state=active]:bg-indigo-500 data-[state=active]:text-white",children:[e.jsx(St,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Bot Management"})]})]})]}),e.jsxs(Ge,{value:"dashboard",className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-5 gap-6",children:[e.jsx(ee,{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:e.jsx(ae,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-100 text-sm font-medium",children:"Total Products"}),e.jsx("p",{className:"text-3xl font-bold",children:Array.isArray(K)?K.length:0})]}),e.jsx(vi,{className:"w-10 h-10 text-blue-200"})]})})}),e.jsx(ee,{className:"bg-gradient-to-r from-green-500 to-green-600 text-white",children:e.jsx(ae,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-100 text-sm font-medium",children:"Featured Products"}),e.jsx("p",{className:"text-3xl font-bold",children:Array.isArray(K)?K.filter(W=>W.isFeatured).length:0})]}),e.jsx(vc,{className:"w-10 h-10 text-green-200"})]})})}),e.jsx(ee,{className:"bg-gradient-to-r from-purple-500 to-purple-600 text-white",children:e.jsx(ae,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-purple-100 text-sm font-medium",children:"Categories"}),e.jsx("p",{className:"text-3xl font-bold",children:Array.isArray(H)?H.length:0})]}),e.jsx(Ma,{className:"w-10 h-10 text-purple-200"})]})})}),e.jsx(ee,{className:"bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:e.jsx(ae,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-orange-100 text-sm font-medium",children:"Blog Posts"}),e.jsx("p",{className:"text-3xl font-bold",children:Array.isArray(Z)?Z.length:0})]}),e.jsx(La,{className:"w-10 h-10 text-orange-200"})]})})}),e.jsx(ee,{className:"bg-gradient-to-r from-pink-500 to-pink-600 text-white",children:e.jsx(ae,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-pink-100 text-sm font-medium",children:"Video Content"}),e.jsx("p",{className:"text-3xl font-bold",children:Array.isArray(v)?v.length:0})]}),e.jsx(wt,{className:"w-10 h-10 text-pink-200"})]})})})]}),e.jsxs(ee,{children:[e.jsxs(ge,{children:[e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(tr,{className:"w-5 h-5"}),"Quick Actions"]}),e.jsx(Ne,{className:"text-blue-200",children:"Frequently used admin actions"})]}),e.jsx(ae,{children:e.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[e.jsxs(R,{onClick:()=>w("products"),className:"h-16 bg-green-600 hover:bg-green-700 flex flex-col gap-1",children:[e.jsx(Xe,{className:"w-5 h-5"}),"Add Product"]}),e.jsxs(R,{onClick:()=>w("categories"),className:"h-16 bg-purple-600 hover:bg-purple-700 flex flex-col gap-1",children:[e.jsx(Ma,{className:"w-5 h-5"}),"Add Category"]}),e.jsxs(R,{onClick:()=>w("blog"),className:"h-16 bg-orange-600 hover:bg-orange-700 flex flex-col gap-1",children:[e.jsx(La,{className:"w-5 h-5"}),"Write Blog Post"]}),e.jsxs(R,{onClick:()=>w("videos"),className:"h-16 bg-pink-600 hover:bg-pink-700 flex flex-col gap-1",children:[e.jsx(wt,{className:"w-5 h-5"}),"Add Video Content"]}),e.jsxs(R,{onClick:()=>a("/bot-admin"),className:"h-16 bg-indigo-600 hover:bg-indigo-700 flex flex-col gap-1",children:[e.jsx(St,{className:"w-5 h-5"}),"Bot Management"]})]})})]})]}),e.jsx(Ge,{value:"products",children:e.jsx(Nd,{})}),e.jsx(Ge,{value:"categories",children:e.jsx(kd,{})}),e.jsx(Ge,{value:"navigation",children:e.jsx(rf,{})}),e.jsx(Ge,{value:"banners",children:e.jsx(mf,{})}),e.jsx(Ge,{value:"blog",children:e.jsx(Cd,{})}),e.jsx(Ge,{value:"videos",children:e.jsx(Sd,{})}),e.jsx(Ge,{value:"announcements",children:e.jsx(Ed,{})}),e.jsx(Ge,{value:"automation",children:e.jsx(Od,{})}),e.jsx(Ge,{value:"commission",children:e.jsx(hf,{})}),e.jsx(Ge,{value:"widgets",children:e.jsx(xf,{})}),e.jsx(Ge,{value:"credentials",children:e.jsx(pf,{})}),e.jsx(Ge,{value:"metatags",children:e.jsx(vf,{})}),e.jsx(Ge,{value:"rssfeeds",children:e.jsx(kf,{})}),e.jsx(Ge,{value:"bots",className:"space-y-6",children:e.jsxs(ee,{children:[e.jsxs(ge,{children:[e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(St,{className:"w-5 h-5"}),"Telegram Bot Management"]}),e.jsx(Ne,{children:"Manage your 8-bot affiliate automation system with real-time monitoring and control."})]}),e.jsxs(ae,{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 p-6 rounded-lg border",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"8-Bot System Overview"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Your Enhanced Telegram Manager is running with 8 specialized bots for different affiliate networks:"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-gray-800",children:"Simple Bots:"}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:"• Prime Picks (Amazon Associates)"}),e.jsx("li",{children:"• Cue Picks (CueLinks)"}),e.jsx("li",{children:"• Value Picks (EarnKaro)"}),e.jsx("li",{children:"• DealsHub (INRDeals)"}),e.jsx("li",{children:"• Loot Box (Deodap)"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-gray-800",children:"Smart Bots:"}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:"• Click Picks (CPC Optimization)"}),e.jsx("li",{children:"• Global Picks (Multi-Currency)"}),e.jsx("li",{children:"• Travel Picks (Travel Partners)"})]})]})]}),e.jsxs(R,{onClick:()=>a("/bot-admin"),className:"w-full bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white font-medium py-3",children:[e.jsx(St,{className:"w-5 h-5 mr-2"}),"Open Bot Management Dashboard"]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsx(ee,{className:"bg-green-50 border-green-200",children:e.jsx(ae,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(St,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Real-time Control"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Start, stop, and restart bots"})]})]})})}),e.jsx(ee,{className:"bg-blue-50 border-blue-200",children:e.jsx(ae,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(Ba,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Performance Metrics"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Monitor success rates and CPC"})]})]})})}),e.jsx(ee,{className:"bg-purple-50 border-purple-200",children:e.jsx(ae,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx(Fs,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Method Selection"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Switch between Telegram/Scraping/API"})]})]})})})]})]})]})}),e.jsx(Ge,{value:"tools",className:"space-y-6",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs(ee,{children:[e.jsx(ge,{children:e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(Ba,{className:"w-5 h-5"}),"Analytics"]})}),e.jsxs(ae,{children:[e.jsx("p",{className:"text-blue-200 mb-4",children:"View detailed analytics and performance metrics."}),e.jsx(R,{variant:"outline",className:"w-full",children:"View Analytics"})]})]}),e.jsxs(ee,{children:[e.jsx(ge,{children:e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(St,{className:"w-5 h-5"}),"System Settings"]})}),e.jsxs(ae,{children:[e.jsx("p",{className:"text-blue-200 mb-4",children:"Configure system settings and preferences."}),e.jsx(R,{variant:"outline",className:"w-full",children:"Open Settings"})]})]})]})})]})]})}),e.jsx(Jo,{})]})}):e.jsx(ri,{pageId:"admin",children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 flex items-center justify-center",children:e.jsx("div",{className:"max-w-md w-full",children:e.jsxs(ee,{className:"shadow-2xl border-0 bg-white/95 backdrop-blur-sm",children:[e.jsxs(ge,{className:"text-center pb-8",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full flex items-center justify-center mb-4",children:e.jsx(St,{className:"w-8 h-8 text-white"})}),e.jsx(fe,{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"PickNTrust Admin"}),e.jsx(Ne,{className:"text-lg",children:"Enhanced Admin Panel"})]}),e.jsxs(ae,{children:[!u&&!_&&e.jsxs(e.Fragment,{children:[e.jsxs("form",{onSubmit:A,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"password",className:"text-base font-medium",children:"Admin Password"}),e.jsx(X,{id:"password",type:"password",value:o,onChange:W=>c(W.target.value),placeholder:"Enter admin password",className:"mt-2 h-12 text-lg",required:!0})]}),e.jsx(R,{type:"submit",className:"w-full h-12 text-lg bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",children:"Access Admin Panel"})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("button",{type:"button",onClick:()=>d(!0),className:"text-sm text-blue-600 hover:text-blue-800 underline",children:"Forgot Password?"})}),e.jsx("p",{className:"text-xs text-gray-500 mt-4 text-center",children:"Only authorized users can access this panel"})]}),u&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Reset Password"}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Enter your email address to receive a password reset link."})]}),e.jsxs("form",{onSubmit:W=>{W.preventDefault(),m&&G.mutate(m)},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"email",className:"text-base font-medium",children:"Email Address"}),e.jsx(X,{id:"email",type:"email",value:m,onChange:W=>h(W.target.value),placeholder:"Enter your email address",className:"mt-2 h-12 text-lg",required:!0})]}),e.jsx(R,{type:"submit",className:"w-full h-12 text-lg bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",disabled:G.isPending,children:G.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Ut,{className:"w-4 h-4 mr-2 animate-spin"}),"Sending..."]}):"Send Reset Link"})]}),e.jsx("div",{className:"text-center",children:e.jsx("button",{type:"button",onClick:()=>{d(!1),h("")},className:"text-sm text-gray-600 hover:text-gray-800 underline",children:"Back to Login"})})]}),_&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Set New Password"}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Enter your new password below."})]}),e.jsxs("form",{onSubmit:W=>{W.preventDefault(),T.newPassword&&T.confirmPassword&&O.mutate(T)},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"newPassword",className:"text-base font-medium",children:"New Password"}),e.jsx(X,{id:"newPassword",type:"password",value:T.newPassword,onChange:W=>M(pe=>({...pe,newPassword:W.target.value})),placeholder:"Enter new password",className:"mt-2 h-12 text-lg",required:!0,minLength:8})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"confirmPassword",className:"text-base font-medium",children:"Confirm Password"}),e.jsx(X,{id:"confirmPassword",type:"password",value:T.confirmPassword,onChange:W=>M(pe=>({...pe,confirmPassword:W.target.value})),placeholder:"Confirm new password",className:"mt-2 h-12 text-lg",required:!0,minLength:8})]}),e.jsx(R,{type:"submit",className:"w-full h-12 text-lg bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",disabled:O.isPending,children:O.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Ut,{className:"w-4 h-4 mr-2 animate-spin"}),"Resetting..."]}):"Reset Password"})]})]})]})]})})})})}export{Rf as default};
