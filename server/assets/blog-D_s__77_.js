import{u as N,a as S,b as E,j as r}from"./query-COiO4MCT.js";import{r as o}from"./vendor-1XCZ5AD1.js";import{u as U,U as A,H as P,A as C,W as T,b as D,L as F,d as m,e as L,S as $}from"./pages-main-DHSVTjK5.js";import{P as q}from"./pages-picks-myehRy1v.js";import"./radix-mRa0f3kV.js";import"./icons-CGpN3lH8.js";import"./utils-Bj7X0qp-.js";function H(){const{data:i,isLoading:B}=N({queryKey:["/api/blog"],queryFn:async()=>{const e=await fetch("/api/blog");if(!e.ok)throw new Error("Failed to fetch blog posts");return e.json()},retry:1,refetchOnWindowFocus:!1}),u=i&&i.length>0?i:[],[h,c]=o.useState(!1),[x,n]=o.useState(!1),[s,d]=o.useState(null),{toast:g}=U(),b=S(),f=["Instagram","Facebook","WhatsApp","Telegram"];o.useEffect(()=>{const e=localStorage.getItem("pickntrust-admin-session");c(e==="active");const t=a=>{a.key==="pickntrust-admin-session"&&c(a.newValue==="active")};return window.addEventListener("storage",t),()=>window.removeEventListener("storage",t)},[]);const p=e=>{d(e),n(!0)},y=()=>{s&&(alert(`✅ Sharing "${s.title}" to all configured platforms!`),console.log("Share confirmed for:",s.id,s.title)),n(!1),d(null)},j=()=>{n(!1),d(null)},w=E({mutationFn:async e=>{const a=await fetch(`/api/admin/blog/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:"pickntrust2025"})});if(!a.ok)throw new Error("Failed to delete blog post");return a.json()},onSuccess:()=>{g({title:"Success",description:"Blog post deleted successfully"}),b.invalidateQueries({queryKey:["/api/blog"]})},onError:e=>{g({title:"Error",description:"Failed to delete blog post",variant:"destructive"})}}),v=e=>{confirm("Are you sure you want to delete this blog post?")&&w.mutate(e)},k=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return o.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]),r.jsx(A,{pageId:"blog",children:r.jsxs("div",{className:"min-h-screen bg-white dark:bg-gray-900",children:[r.jsx(P,{}),r.jsx(C,{page:"blog"}),r.jsx(T,{}),r.jsx(D,{page:"blog"}),r.jsx("div",{className:"bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 dark:bg-gradient-to-br dark:from-indigo-900/30 dark:via-purple-900/30 dark:to-pink-900/30",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:u.map((e,t)=>r.jsxs("article",{className:"bg-white dark:bg-gray-800 rounded-3xl shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden border border-gray-100 dark:border-gray-700 hover:-translate-y-2 hover:scale-105 group",children:[r.jsxs("div",{className:`w-full h-48 relative p-2 dark:bg-gradient-to-br dark:from-green-900 dark:via-teal-900 dark:to-blue-900 ${t%3===0?"bg-blue-400":t%3===1?"bg-green-400":"bg-orange-400"}`,children:[r.jsx("img",{src:e.imageUrl&&e.imageUrl.trim()!==""&&e.imageUrl!=="undefined"&&e.imageUrl!=="null"?e.imageUrl:"https://images.unsplash.com/photo-1468495244123-6c6c332eeece?w=400&h=200&fit=crop&auto=format&q=75",alt:e.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300 rounded-2xl border-2 border-white/50 dark:border-gray-700/50 shadow-lg",loading:"lazy",onError:a=>{const l=a.target;l.src!=="https://images.unsplash.com/photo-1468495244123-6c6c332eeece?w=400&h=200&fit=crop&auto=format&q=75"&&(l.src="https://images.unsplash.com/photo-1468495244123-6c6c332eeece?w=400&h=200&fit=crop&auto=format&q=75")}}),e.videoUrl&&e.videoUrl.trim()!==""&&r.jsxs("div",{className:"absolute inset-2 bg-black/30 rounded-2xl flex items-center justify-center",children:[r.jsx("div",{className:"bg-white/90 rounded-full p-3 shadow-lg",children:r.jsx("i",{className:"fas fa-play text-2xl text-gray-800"})}),r.jsx("div",{className:"absolute top-4 right-4 bg-red-600 text-white px-2 py-1 rounded text-xs font-bold",children:"VIDEO"})]})]}),r.jsxs("div",{className:`p-6 ${t%3===0?"bg-blue-50 dark:bg-gray-800":t%3===1?"bg-green-50 dark:bg-gray-800":"bg-orange-50 dark:bg-gray-800"}`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-300",children:[r.jsx("i",{className:"far fa-calendar mr-2 text-blue-500 dark:text-blue-400"}),r.jsx("span",{children:k(e.publishedAt)}),r.jsx("span",{className:"mx-2 text-purple-500",children:"•"}),r.jsx("i",{className:"far fa-clock mr-1 text-green-500 dark:text-green-400"}),r.jsx("span",{children:e.readTime})]}),e.category&&r.jsx("span",{className:"bg-blue-600 text-white px-2 py-1 rounded-full text-xs font-medium",children:e.category})]}),r.jsx("div",{className:"flex justify-between items-start mb-3",children:r.jsx("h4",{className:"text-xl font-bold text-navy dark:text-blue-400 flex-1",children:e.title})}),r.jsxs("div",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[r.jsx("span",{children:e.excerpt.length>120?`${e.excerpt.substring(0,120)}...`:e.excerpt}),r.jsx("br",{}),r.jsxs(F,{href:`/blog/${e.slug}`,className:"text-blue-600 hover:text-blue-800 dark:hover:text-blue-300 font-semibold inline-flex items-center gap-1 mt-2 transition-colors hover:underline cursor-pointer",onClick:()=>{setTimeout(()=>window.scrollTo({top:0,behavior:"smooth"}),100)},children:["Read More ",r.jsx("span",{children:"→"})]})]}),e.tags&&Array.isArray(e.tags)&&e.tags.length>0&&r.jsxs("div",{className:"flex flex-wrap gap-2 pt-2 border-t border-gray-100 dark:border-gray-700",children:[e.tags.slice(0,3).map((a,l)=>r.jsxs("span",{className:"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 px-2 py-1 rounded text-xs",children:["#",a]},l)),e.tags.length>3&&r.jsxs("span",{className:"text-gray-400 text-xs px-2 py-1",children:["+",e.tags.length-3," more"]})]}),r.jsx("div",{className:"flex justify-end gap-2 pt-3 border-t border-gray-100 dark:border-gray-700 mt-3",children:h?r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:a=>{a.preventDefault(),a.stopPropagation(),p(e)},className:"bg-blue-500 hover:bg-blue-600 text-white rounded-full p-2 shadow-md transition-colors cursor-pointer z-10 relative",title:"Share to All Platforms",children:r.jsx("i",{className:"fas fa-edit text-xs pointer-events-none"})}),r.jsx(m,{product:{id:e.id,name:e.title,description:e.excerpt,imageUrl:e.imageUrl,category:e.category,affiliateUrl:`/blog/${e.slug}`},className:"bg-green-500 hover:bg-green-600 text-white rounded-full p-2 shadow-md transition-colors",buttonText:"",showIcon:!0}),r.jsx("button",{onClick:a=>{a.preventDefault(),a.stopPropagation(),v(e.id)},className:"bg-red-500 hover:bg-red-600 text-white rounded-full p-2 shadow-md transition-colors",title:"Delete blog post",children:r.jsx("i",{className:"fas fa-trash text-xs"})})]}):r.jsx(m,{product:{id:e.id,name:e.title,description:e.excerpt,imageUrl:e.imageUrl,category:e.category,affiliateUrl:`/blog/${e.slug}`},className:"bg-blue-500 hover:bg-blue-600 text-white rounded-full p-2 shadow-md transition-colors",buttonText:"",showIcon:!0})})]})]},e.id))})})}),r.jsx(q,{page:"blog",title:"Blog Videos"}),r.jsx(L,{}),r.jsx($,{isOpen:x,onClose:j,onConfirm:y,productName:(s==null?void 0:s.title)||"",platforms:f})]})})}export{H as default};
